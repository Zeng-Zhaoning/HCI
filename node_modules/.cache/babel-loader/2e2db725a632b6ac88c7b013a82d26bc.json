{"remainingRequest":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Zhaoning\\Desktop\\HCI\\src\\components\\EditBar\\EditBar.js?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\src\\components\\EditBar\\EditBar.js","mtime":1639107668694},{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiQzovVXNlcnMvWmhhb25pbmcvRGVza3RvcC9IQ0kvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZiI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkM6L1VzZXJzL1poYW9uaW5nL0Rlc2t0b3AvSENJL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkM6L1VzZXJzL1poYW9uaW5nL0Rlc2t0b3AvSENJL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwTXV0YXRpb25zIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IGlucHV0S0cgfSBmcm9tICIuLi8uLi9hcGkvYmFzaWNBUEkiOwppbXBvcnQgT3BJdGVtIGZyb20gJy4vT3BJdGVtJzsKaW1wb3J0IEVkaXRCYXJCbG9jayBmcm9tICIuL0VkaXRCYXJCbG9jayI7CmltcG9ydCBNeUJ1dHRvbiBmcm9tICJAL2NvbXBvbmVudHMvVG9vbHMvTXlCdXR0b24iOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkVkaXRCYXIiLAogIGNvbXBvbmVudHM6IHsKICAgIE9wSXRlbTogT3BJdGVtLAogICAgRWRpdEJhckJsb2NrOiBFZGl0QmFyQmxvY2ssCiAgICBNeUJ1dHRvbjogTXlCdXR0b24KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93RWRpdEJhcjogdHJ1ZSwKICAgICAgc2hvd0V4cG9ydE9wczogZmFsc2UsCiAgICAgIG9wSW5mbzogJ+aJk+W8gOeahOaWh+S7tuWQjue8gOS4uiIuanNvbiLvvIzlhbbooajnpLrkuIDkuKrnn6Xor4blm77osLFcbicsCiAgICAgIGVudGl0aWVzX2RhdGE6IFtdLAogICAgICByZWxhdGlvbnNfZGF0YTogW10sCiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy/mkJzntKLnm7jlhbMvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgICAgbWF4X2xvZ19sZW46IDEwLAogICAgICBzZWFyY2hfbm9kZV90ZXh0OiBbXSwKICAgICAgc2VhcmNoX25vZGVfY29uZGl0aW9uOiBbXSwKICAgICAgbm9kZV9zZWFyY2hlZDogZmFsc2UsCiAgICAgIHNlYXJjaF9ub2RlX2xvZzogW10sCiAgICAgIHNlYXJjaF9lZGdlX3RleHQ6IFtdLAogICAgICBzZWFyY2hfZWRnZV9jb25kaXRpb246IFtdLAogICAgICBlZGdlX3NlYXJjaGVkOiBmYWxzZSwKICAgICAgc2VhcmNoX2VkZ2VfbG9nOiBbXSwKICAgICAgLy8gc2VhcmNoX3RleHQ6ICcnLAogICAgICAvLyBzZWFyY2hfdHlwZTogJycsCiAgICAgIC8vIHNlbGVjdF92YWx1ZTogJycsCiAgICAgIC8vIHNob3dFbmFibGVkOiBmYWxzZSwKICAgICAgLy8gZWRnZURpc2FibGVkOiB0cnVlLAogICAgICAvLyB0eXBlczogWwogICAgICAvLyAgICAgewogICAgICAvLyAgICAgICAgIGxhYmVsOiAn6IqC54K5JywKICAgICAgLy8gICAgICAgICB2YWx1ZTogJzEnCiAgICAgIC8vICAgICB9LAogICAgICAvLyAgICAgewogICAgICAvLyAgICAgICAgIGxhYmVsOiAn5YWz57O7JywKICAgICAgLy8gICAgICAgICB2YWx1ZTogJzInCiAgICAgIC8vICAgICB9CiAgICAgIC8vIF0sCiAgICAgIC8vIGN1cnJlbnRTZWFyY2g6IHsKICAgICAgLy8gICAgIHBhcmFtczoge30sCiAgICAgIC8vICAgICByZXN1bHQ6IFtdCiAgICAgIC8vIH0sCiAgICAgIC8vIHNlYXJjaExvZzogW10sCiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy/ov4fmu6Tnm7jlhbMvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICBmaWx0ZXJfbm9kZV9jaGVja0xpc3Q6IFtdLAogICAgICBmaWx0ZXJfZWRnZV9jaGVja0xpc3Q6IFtdLAogICAgICAvLyBmaWx0ZXJfZGlzYWJsZWQ6IHRydWUsCiAgICAgIC8vIGZpbHRlclNob3dFbmFibGVkOiBmYWxzZSwKICAgICAgLy8KICAgICAgLy8gZmlsdGVyX25vZGVfY2hlY2tlZDogZmFsc2UsCiAgICAgIC8vIGZpbHRlcl9ub2RlX2NoZWNrTGlzdDogW10sCiAgICAgIC8vIGZpbHRlcl9lZGdlX2NoZWNrZWQ6IGZhbHNlLAogICAgICAvLyBmaWx0ZXJfZWRnZV9jaGVja0xpc3Q6IFtdLAogICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8v5bGV56S65pWI5p6c55u45YWzLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgICAgbGF5b3V0OiBudWxsLAogICAgICBsYXlvdXRUeXBlTm93OiAnJywKICAgICAgcmVsYXRpb25fbGFiZWxfZW5hYmxlZDogdHJ1ZSwKICAgICAgZm9udF9zaXplOiAyMCwKICAgICAgbm9kZV9yYWRpdXM6IDIwCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIGN5OiBmdW5jdGlvbiBjeShuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgICAgdGhpcy5nZXRfc3RhdGlzdGljX2RhdGEoKTsKICAgICAgdGhpcy5sYXlvdXRUeXBlTm93ID0gbmV3VmFsdWUub3B0aW9ucygpLmxheW91dC5uYW1lOwogICAgfSwKICAgIHN0YXRpc3RpY19kYXRhX2NoYW5nZTogZnVuY3Rpb24gc3RhdGlzdGljX2RhdGFfY2hhbmdlKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgICBjb25zb2xlLmxvZygi5qOA5rWL5Yiw5pWw5o2u5Y+Y5YyWIik7CiAgICAgIHRoaXMuZ2V0X3N0YXRpc3RpY19kYXRhKCk7CiAgICB9LAogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy/lsZXnpLrnm7jlhbMvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIGxheW91dFR5cGVOb3c6IGZ1bmN0aW9uIGxheW91dFR5cGVOb3cobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgY29uc29sZS5sb2coImxheW91dCB3YXRjaGVkOiAnIiwgb2xkVmFsLCAiJyB0byAnIiwgbmV3VmFsLCAiJyIpOwogICAgICB2YXIgbGF5b3V0ID0gdGhpcy5sYXlvdXQ7CgogICAgICBpZiAobGF5b3V0ICE9PSBudWxsKSB7CiAgICAgICAgbGF5b3V0LnN0b3AoKTsKICAgICAgfQoKICAgICAgaWYgKG5ld1ZhbCA9PT0gJ3ByZXNldCcpIHsKICAgICAgICAvL2NvbnNvbGUubG9nKCJlbGVtZW50cyBzdG9yZWQ6ICIsdGhpcy5lbGVtZW50cyk7CiAgICAgICAgdmFyIG5vZGVzID0gdGhpcy5lbGVtZW50cy5ub2RlczsKCiAgICAgICAgdmFyIHBvc2l0aW9ucyA9IGZ1bmN0aW9uIHBvc2l0aW9ucyhub2RlKSB7CiAgICAgICAgICB2YXIgbm9kZUlkID0gbm9kZS5kYXRhKCJpZCIpOwoKICAgICAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihub2RlcyksCiAgICAgICAgICAgICAgX3N0ZXA7CgogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgICB2YXIgX25vZGUgPSBfc3RlcC52YWx1ZTsKCiAgICAgICAgICAgICAgaWYgKF9ub2RlLmRhdGEuaWQgPT09IG5vZGVJZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIF9ub2RlLnBvc2l0aW9uOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHg6IDAsCiAgICAgICAgICAgIHk6IDAKICAgICAgICAgIH07IC8v5Y+v5Lul5ouT5bGV5oiQ6ZqP5py65pS+572uCiAgICAgICAgfTsKCiAgICAgICAgbGF5b3V0ID0gdGhpcy5jeS5sYXlvdXQoewogICAgICAgICAgbmFtZTogbmV3VmFsLAogICAgICAgICAgZml0OiB0cnVlLAogICAgICAgICAgcG9zaXRpb25zOiBwb3NpdGlvbnMKICAgICAgICB9KTsgLy/oi6Xku6XlkI7mgaLlpI3nmoTluIPlsYDkuK3mlrDlop7popzoibLjgIHlpKflsI/nrYnvvIzlj6/og73pnIDopoHkuLrlop7liqDnmoTpg6jliIbmuLLmn5PlhoXlrrnmlrDlhpnku6PnoIEKICAgICAgICAvL2NvbnNvbGUubG9nKCJyZXNldCBkb25lIikKICAgICAgfSBlbHNlIGlmIChuZXdWYWwgPT09ICdkMy1mb3JjZScpIHsKICAgICAgICB2YXIgZDNfb3B0aW9ucyA9IHsKICAgICAgICAgIG5hbWU6ICdkMy1mb3JjZScsCiAgICAgICAgICBhbmltYXRlOiB0cnVlLAogICAgICAgICAgZml0OiB0cnVlLAogICAgICAgICAgLy/pgILlupR2aWV3cG9ydAogICAgICAgICAgZml4ZWRBZnRlckRyYWdnaW5nOiBmYWxzZSwKICAgICAgICAgIGxpbmtJZDogZnVuY3Rpb24gaWQoZCkgewogICAgICAgICAgICByZXR1cm4gZC5pZDsKICAgICAgICAgIH0sCiAgICAgICAgICBsaW5rRGlzdGFuY2U6IDEwMDAsCiAgICAgICAgICBtYW55Qm9keVN0cmVuZ3RoOiAtMTAwMDAsCiAgICAgICAgICByZWFkeTogZnVuY3Rpb24gcmVhZHkoKSB7fSwKICAgICAgICAgIHN0b3A6IGZ1bmN0aW9uIHN0b3AoKSB7fSwKICAgICAgICAgIHRpY2s6IGZ1bmN0aW9uIHRpY2socHJvZ3Jlc3MpIHsvLyBjb25zb2xlLmxvZygncHJvZ3Jlc3MgLSAnLCBwcm9ncmVzcyk7CiAgICAgICAgICB9LAogICAgICAgICAgcmFuZG9taXplOiBmYWxzZSwKICAgICAgICAgIGluZmluaXRlOiB0cnVlCiAgICAgICAgfTsKICAgICAgICBsYXlvdXQgPSB0aGlzLmN5LmxheW91dChkM19vcHRpb25zKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBsYXlvdXQgPSB0aGlzLmN5LmxheW91dCh7CiAgICAgICAgICBuYW1lOiBuZXdWYWwsCiAgICAgICAgICBmaXQ6IHRydWUKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdGhpcy5sYXlvdXQgPSBsYXlvdXQ7CiAgICAgIHRoaXMubGF5b3V0LnJ1bigpOwogICAgfSwKICAgIHJlbGF0aW9uX2xhYmVsX2VuYWJsZWQ6IGZ1bmN0aW9uIHJlbGF0aW9uX2xhYmVsX2VuYWJsZWQobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgdmFyIGVkZ2VzID0gdGhpcy5jeS5lZGdlcygpOwogICAgICB2YXIgZW5hYmxlZCA9IG5ld1ZhbDsKCiAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoZWRnZXMpLAogICAgICAgICAgX3N0ZXAyOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGVkZ2UgPSBfc3RlcDIudmFsdWU7CgogICAgICAgICAgaWYgKGVuYWJsZWQgJiYgZWRnZS5oYXNDbGFzcygnbGFiZWxfaGlkZGVuJykpIHsKICAgICAgICAgICAgZWRnZS5yZW1vdmVDbGFzcygnbGFiZWxfaGlkZGVuJyk7CiAgICAgICAgICB9IGVsc2UgaWYgKCFlbmFibGVkICYmICFlZGdlLmhhc0NsYXNzKCdsYWJlbF9oaWRkZW4nKSkgewogICAgICAgICAgICBlZGdlLmFkZENsYXNzKCdsYWJlbF9oaWRkZW4nKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICB9CiAgICB9LAogICAgZm9udF9zaXplOiBmdW5jdGlvbiBmb250X3NpemUobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgLy8gbGV0IGRlZmF1bHRTaXplID0gJzI1cHgnOy8v6buY6K6k5YC877yMMjVweOaYr+eci3dvcmtzcGFjZeaJvuWIsOeahAogICAgICBpZiAobmV3VmFsID09PSAnJykgewogICAgICAgIHRoaXMuc2V0Tm9kZUZvbnRTaXplKCcnKTsgLy/lkIzmraXmlLnlj5h3b3Jrc3BhY2XkuK3nmoRub2RlTm9kZUZvbnRTaXplCiAgICAgICAgLy9DeXRvc2NhcGVLR+S4reWcqOebkeWQrOWIsHdvcmtzcGFjZeS4rW5vZGVGb250U2l6ZeWImuWPmOWbnicn5pe2CiAgICAgICAgLy/kvJrmoLnmja7oioLngrnlpKflsI/lkozlrZfmlbDph43mlrDmuLLmn5PlkITkuKroioLngrnnmoTlrZfkvZPlpKflsI/vvIzmiYDku6XkuI3og73nlKjnu5/kuIDpu5jorqTlgLwKICAgICAgICAvL+atpOWkhOS7gOS5iOS5n+S4jemcgOimgeWBmu+8jOWboOS4ukN5dG9zY2FwZUtH6YeM5YGa5LqGCgogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHNpemUgPSBOdW1iZXIobmV3VmFsKTsKCiAgICAgIGlmICghaXNOYU4oc2l6ZSkpIHsKICAgICAgICB0aGlzLnNldE5vZGVGb250U2l6ZShuZXdWYWwpOyAvL+WQjOatpeaUueWPmHdvcmtzcGFjZeS4reeahG5vZGVOb2RlRm9udFNpemUKCiAgICAgICAgc2l6ZSA9IHBhcnNlSW50KHNpemUpOwoKICAgICAgICB2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMuY3kubm9kZXMoKSksCiAgICAgICAgICAgIF9zdGVwMzsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMy5zKCk7ICEoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciBub2RlID0gX3N0ZXAzLnZhbHVlOwogICAgICAgICAgICBub2RlLnN0eWxlKCdmb250LXNpemUnLCBzaXplICsgJ3B4Jyk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3IzLmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yMy5mKCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChuZXdWYWwgIT09ICcnKSB7CiAgICAgICAgICB0aGlzLmluZm9ybU1zZygnZXJyb3InLCAn6K+36L6T5YWl5pWw5a2XJyk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnNldE5vZGVGb250U2l6ZSgnJyk7IC8v5ZCM5q2l5pS55Y+Yd29ya3NwYWNl5Lit55qEbm9kZU5vZGVGb250U2l6ZQogICAgICAgIC8vQ3l0b3NjYXBlS0fkuK3lnKjnm5HlkKzliLB3b3Jrc3BhY2XkuK1ub2RlRm9udFNpemXliJrlj5jlm54nJ+aXtgogICAgICAgIC8v5Lya5qC55o2u6IqC54K55aSn5bCP5ZKM5a2X5pWw6YeN5paw5riy5p+T5ZCE5Liq6IqC54K555qE5a2X5L2T5aSn5bCP77yM5omA5Lul5LiN6IO955So57uf5LiA6buY6K6k5YC8CiAgICAgICAgLy/mraTlpITku4DkuYjkuZ/kuI3pnIDopoHlgZrvvIzlm6DkuLpDeXRvc2NhcGVLR+mHjOWBmuS6hgogICAgICB9CiAgICB9LAogICAgbm9kZV9yYWRpdXM6IGZ1bmN0aW9uIG5vZGVfcmFkaXVzKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIGlmIChuZXdWYWwgPT09ICcnKSB7CiAgICAgICAgdGhpcy5zZXROb2RlUmFkaXVzKCcnKTsgLy/lkIzmraXmlLnlj5h3b3Jrc3BhY2XkuK3nmoRub2RlUmFkaXVzCgogICAgICAgIHZhciBfaXRlcmF0b3I0ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5jeS5ub2RlcygpKSwKICAgICAgICAgICAgX3N0ZXA0OwoKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3I0LnMoKTsgIShfc3RlcDQgPSBfaXRlcmF0b3I0Lm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIG5vZGUgPSBfc3RlcDQudmFsdWU7CiAgICAgICAgICAgIG5vZGUucmVtb3ZlU3R5bGUoJ3dpZHRoJyk7CiAgICAgICAgICAgIG5vZGUucmVtb3ZlU3R5bGUoJ2hlaWdodCcpOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2l0ZXJhdG9yNC5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvcjQuZigpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgcmFkaXVzID0gTnVtYmVyKG5ld1ZhbCk7CgogICAgICBpZiAoIWlzTmFOKHJhZGl1cykpIHsKICAgICAgICByYWRpdXMgPSBwYXJzZUludChyYWRpdXMpOwogICAgICAgIHZhciByZWFsUmFkaXVzID0gcmFkaXVzICogMjsKICAgICAgICB0aGlzLnNldE5vZGVSYWRpdXMocmVhbFJhZGl1cyArICIiKTsgLy/lkIzmraXmlLnlj5h3b3Jrc3BhY2XkuK3nmoRub2RlUmFkaXVzCgogICAgICAgIHZhciBfaXRlcmF0b3I1ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5jeS5ub2RlcygpKSwKICAgICAgICAgICAgX3N0ZXA1OwoKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3I1LnMoKTsgIShfc3RlcDUgPSBfaXRlcmF0b3I1Lm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIF9ub2RlMiA9IF9zdGVwNS52YWx1ZTsKCiAgICAgICAgICAgIC8v5piv5LiN5piv6KaB5pS55oiQ562J5q+U5L6L5omp5aSn77yfCiAgICAgICAgICAgIF9ub2RlMi5zdHlsZSgnd2lkdGgnLCByZWFsUmFkaXVzICsgJ3B4Jyk7CgogICAgICAgICAgICBfbm9kZTIuc3R5bGUoJ2hlaWdodCcsIHJlYWxSYWRpdXMgKyAncHgnKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvcjUuZShlcnIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBfaXRlcmF0b3I1LmYoKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZXROb2RlUmFkaXVzKCcnKTsgLy/lkIzmraXmlLnlj5h3b3Jrc3BhY2XkuK3nmoRub2RlUmFkaXVzCgogICAgICAgIGlmIChuZXdWYWwgIT09ICcnKSB7CiAgICAgICAgICB0aGlzLmluZm9ybU1zZygnZXJyb3InLCAn6K+36L6T5YWl5pWw5a2XJyk7CiAgICAgICAgfQoKICAgICAgICB2YXIgX2l0ZXJhdG9yNiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMuY3kubm9kZXMoKSksCiAgICAgICAgICAgIF9zdGVwNjsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yNi5zKCk7ICEoX3N0ZXA2ID0gX2l0ZXJhdG9yNi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciBfbm9kZTMgPSBfc3RlcDYudmFsdWU7CgogICAgICAgICAgICBfbm9kZTMucmVtb3ZlU3R5bGUoJ3dpZHRoJyk7CgogICAgICAgICAgICBfbm9kZTMucmVtb3ZlU3R5bGUoJ2hlaWdodCcpOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2l0ZXJhdG9yNi5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvcjYuZigpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoewogICAgY3k6IGZ1bmN0aW9uIGN5KHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS53b3Jrc3BhY2UuY3k7CiAgICB9LAogICAgc3RhdGlzdGljX2RhdGFfY2hhbmdlOiBmdW5jdGlvbiBzdGF0aXN0aWNfZGF0YV9jaGFuZ2Uoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLndvcmtzcGFjZS5zdGF0aXN0aWNfZGF0YV9jaGFuZ2U7CiAgICB9LAogICAgbm9kZVR5cGU6IGZ1bmN0aW9uIG5vZGVUeXBlKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS53b3Jrc3BhY2Uubm9kZVR5cGU7CiAgICB9LAogICAgZWRnZVR5cGU6IGZ1bmN0aW9uIGVkZ2VUeXBlKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS53b3Jrc3BhY2UuZWRnZVR5cGU7CiAgICB9LAogICAgbGF5b3V0VHlwZTogZnVuY3Rpb24gbGF5b3V0VHlwZShzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUud29ya3NwYWNlLmxheW91dFR5cGU7CiAgICB9LAogICAgZWxlbWVudHM6IGZ1bmN0aW9uIGVsZW1lbnRzKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS53b3Jrc3BhY2UuZWxlbWVudHM7CiAgICB9LAogICAgcGlkOiBmdW5jdGlvbiBwaWQoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnBpZDsKICAgIH0KICB9KSksIHt9LCB7CiAgICBub2RlX2NoZWNrTGlzdF9kaXNhYmxlZDogewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gIXRoaXMuZmlsdGVyX25vZGVfY2hlY2tlZDsKICAgICAgfQogICAgfSwKICAgIGVkZ2VfY2hlY2tMaXN0X2Rpc2FibGVkOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHJldHVybiAhdGhpcy5maWx0ZXJfZWRnZV9jaGVja2VkOwogICAgICB9CiAgICB9CiAgfSksCiAgbWV0aG9kczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBNdXRhdGlvbnMoWydzZXRKc29uU3JjUGF0aCcsICdzZXRTZUN1cnJlbnRTZWFyY2hQYXJhbXMnLCAnc2V0Q3VycmVudFNlYXJjaFJlc3VsdCcsICdzZXROb2RlUmFkaXVzJywgJ3NldE5vZGVGb250U2l6ZScsICdzZXRQcm9qZWN0JywgJ2NoYW5nZVNob3dRQVBhbmVsJ10pKSwge30sIHsKICAgIGNoYW5nZUVkaXRCYXJTdGF0ZTogZnVuY3Rpb24gY2hhbmdlRWRpdEJhclN0YXRlKCkgewogICAgICB0aGlzLnNob3dFZGl0QmFyID0gIXRoaXMuc2hvd0VkaXRCYXI7CiAgICB9LAogICAgb3BlbjogZnVuY3Rpb24gb3BlbigpIHsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiY2hvb3NlLWZpbGUiKVswXS5jbGljaygpOwogICAgfSwKICAgIGdldEZpbGVQYXRoOiBmdW5jdGlvbiBnZXRGaWxlUGF0aCgpIHsKICAgICAgLy/ojrflj5bor7vlj5bmiJHmlofku7bnmoRGaWxl5a+56LGhCiAgICAgIHZhciBzZWxlY3RlZEZpbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJjaG9vc2UtZmlsZSIpWzBdLmZpbGVzWzBdOwogICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsgLy/ov5nmmK/moLjlv4Ms6K+75Y+W5pON5L2c5bCx5piv55Sx5a6D5a6M5oiQLgoKICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoc2VsZWN0ZWRGaWxlKTsKICAgICAgcmVhZGVyLnRoYXQgPSB0aGlzOwoKICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAvL+W9k+ivu+WPluWujOaIkOWQjuWbnuiwg+i/meS4quWHveaVsCznhLblkI7mraTml7bmlofku7bnmoTlhoXlrrnlrZjlgqjliLDkuoZ0aGlzLnJlc3VsdOS4rSznm7TmjqXmk43kvZzljbPlj68KICAgICAgICB0aGlzLnRoYXQuc2V0SnNvblNyY1BhdGgodGhpcy5yZXN1bHQpOwogICAgICB9OwogICAgfSwKICAgIHNhdmU6IGZ1bmN0aW9uIHNhdmUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZGF0YSA9IHt9OwogICAgICB2YXIgZ3JhcGhEYXRhID0gdGhpcy5nZXREYXRhSnNvbk9iamVjdCgpOwogICAgICBkYXRhID0gewogICAgICAgIG5vZGVzOiBncmFwaERhdGEubm9kZXMsCiAgICAgICAgZWRnZXM6IGdyYXBoRGF0YS5lZGdlcwogICAgICB9OwogICAgICBkYXRhID0gdGhpcy5nZXRDbGVhbkRhdGEoZGF0YSk7CiAgICAgIGNvbnNvbGUubG9nKCLopoHkv53lrZjnmoTmlbDmja7vvJoiLCBkYXRhKTsKICAgICAgdmFyIGxvYWRpbmcgPSB0aGlzLiRsb2FkaW5nKHsKICAgICAgICBsb2NrOiB0cnVlLAogICAgICAgIHRleHQ6ICcuLi7kv53lrZjkuK0uLi4nLAogICAgICAgIHNwaW5uZXI6ICdlbC1pY29uLWxvYWRpbmcnLAogICAgICAgIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSwgMjU1LDI1NSwgMC44KScKICAgICAgfSk7CiAgICAgIGlucHV0S0coX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkYXRhKSwge30sIHsKICAgICAgICBwaWQ6IHRoaXMucGlkCiAgICAgIH0pKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIF90aGlzLnNldFByb2plY3QoZGF0YSk7CgogICAgICAgICAgX3RoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+d5a2Y5oiQ5YqfJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKCfkv53lrZjlpLHotKUnKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwoKICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcign572R57uc6ZSZ6K+v5oiW5pyN5Yqh5Zmo6ZSZ6K+vJyk7CiAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgIGxvYWRpbmcuY2xvc2UoKTsKICAgICAgfSk7CiAgICB9LAogICAgY2hhbmdlRXhwb3J0U3RhdGU6IGZ1bmN0aW9uIGNoYW5nZUV4cG9ydFN0YXRlKCkgewogICAgICB0aGlzLnNob3dFeHBvcnRPcHMgPSAhdGhpcy5zaG93RXhwb3J0T3BzOwogICAgfSwKCiAgICAvKioKICAgICAqIOWvvOWHuuWFqOWxgOWbvueJhy4KICAgICAqIG9wdGlvbnM6IFRoZSBleHBvcnQgb3B0aW9ucy4KICAgICBvdXRwdXTvvJogV2hldGhlciB0aGUgb3V0cHV0IHNob3VsZCBiZSAnYmFzZTY0dXJpJyAoZGVmYXVsdCksICdiYXNlNjQnLCAnYmxvYicsIG9yICdibG9iLXByb21pc2UnIChhIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgYmxvYiBpcyByZXR1cm5lZCkuCiAgICAgYmc6IFRoZSBiYWNrZ3JvdW5kIGNvbG91ciBvZiB0aGUgaW1hZ2UgKHRyYW5zcGFyZW50IGJ5IGRlZmF1bHQpLgogICAgIGZ1bGw6IFdoZXRoZXIgdG8gZXhwb3J0IHRoZSBjdXJyZW50IHZpZXdwb3J0IHZpZXcgKGZhbHNlLCBkZWZhdWx0KSBvciB0aGUgZW50aXJlIGdyYXBoICh0cnVlKS4KICAgICBzY2FsZTogVGhpcyB2YWx1ZSBzcGVjaWZpZXMgYSBwb3NpdGl2ZSBudW1iZXIgdGhhdCBzY2FsZXMgdGhlIHNpemUgb2YgdGhlIHJlc3VsdGFudCBpbWFnZS4KICAgICBtYXhXaWR0aDogU3BlY2lmaWVzIHRoZSBzY2FsZSBhdXRvbWF0aWNhbGx5IGluIGNvbWJpbmF0aW9uIHdpdGggbWF4SGVpZ2h0IHN1Y2ggdGhhdCB0aGUgcmVzdWx0YW50IGltYWdlIGlzIG5vIHdpZGVyIHRoYW4gbWF4V2lkdGguCiAgICAgbWF4SGVpZ2h0OiBTcGVjaWZpZXMgdGhlIHNjYWxlIGF1dG9tYXRpY2FsbHkgaW4gY29tYmluYXRpb24gd2l0aCBtYXhXaWR0aCBzdWNoIHRoYXQgdGhlIHJlc3VsdGFudCBpbWFnZSBpcyBubyB0YWxsZXIgdGhhbiBtYXhIZWlnaHQKICAgICAqLwogICAgZXhwb3J0UG5nOiBmdW5jdGlvbiBleHBvcnRQbmcoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmraPlnKjlr7zlh7rlm77niYcuLi4iKTsKICAgICAgdmFyIGJsb2IgPSB0aGlzLmN5LnBuZyh7CiAgICAgICAgb3V0cHV0OiAnYmxvYi1wcm9taXNlJywKICAgICAgICBiZzogJ3doaXRlJywKICAgICAgICBmdWxsOiB0cnVlLAogICAgICAgIHNjYWxlOiA0CiAgICAgIH0pOwogICAgICBibG9iLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIC8v5Yib5bu65LiL6L296ZO+5o6lCiAgICAgICAgdmFyIGFMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGFMaW5rLmRvd25sb2FkID0gX3RoaXMyLmdlbmVyYXRlRmlsZU5hbWUoKSArICcucG5nJzsKICAgICAgICB2YXIgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwocmVzKTsKICAgICAgICBhTGluay5ocmVmID0gdXJsOyAvL+WIm+W7uuOAgeWIhumFjeW5tuinpuWPkeeCueWHu+S6i+S7tgoKICAgICAgICB2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoIk1vdXNlRXZlbnRzIik7CiAgICAgICAgZXZ0LmluaXRFdmVudCgiY2xpY2siLCB0cnVlLCB0cnVlKTsKICAgICAgICBhTGluay5kaXNwYXRjaEV2ZW50KGV2dCk7IC8vIOmHiuaUvuaOiWJsb2Llr7nosaEKCiAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKCJFcnJvciBvY2N1cmVkOiAiLCBlcnIpOwoKICAgICAgICBpZiAoX3RoaXMyLmN5LmVsZW1lbnRzKCkubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICBfdGhpczIuJG1lc3NhZ2UuZXJyb3IoIuefpeivhuWbvuiwseW3sue7j+epuuWVpu+8jOWvvOS4jeWHuuS4nOilv+eahOWRgCIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIC8qKgogICAgICog5a+56LGh5ou36LSdCiAgICAgKiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikp5oiR5Lus5LiA6Iis55So5p2l5rex5ou36LSdCiAgICAg5L2G5LiN5piv5a6M5YWo5rex5ou36LSd77yM5pyJ5Lul5LiL54m554K577yaCiAgICAgMeOAgeWmguaenG9iaumHjOmdouacieaXtumXtOWvueixoe+8jOWImUpTT04uc3RyaW5naWZ55ZCO5YaNSlNPTi5wYXJzZeeahOe7k+aenO+8jOaXtumXtOWwhuWPquaYr+Wtl+espuS4sueahOW9ouW8j+OAguiAjOS4jeaYr+aXtumXtOWvueixoe+8mwogICAgIDLjgIHlpoLmnpxvYmrph4zmnIlSZWdFeHDjgIFFcnJvcuWvueixoe+8jOWImeW6j+WIl+WMlueahOe7k+aenOWwhuWPquW+l+WIsOepuuWvueixoe+8mwogICAgIDPjgIHlpoLmnpxvYmrph4zmnInlh73mlbDvvIx1bmRlZmluZWTvvIzliJnluo/liJfljJbnmoTnu5PmnpzkvJrmiorlh73mlbDmiJYgdW5kZWZpbmVk5Lii5aSx77ybCiAgICAgNOOAgeWmguaenG9iaumHjOaciU5hTuOAgUluZmluaXR55ZKMLUluZmluaXR577yM5YiZ5bqP5YiX5YyW55qE57uT5p6c5Lya5Y+Y5oiQbnVsbAogICAgIDXjgIFKU09OLnN0cmluZ2lmeSgp5Y+q6IO95bqP5YiX5YyW5a+56LGh55qE5Y+v5p6a5Li+55qE6Ieq5pyJ5bGe5oCn77yM5L6L5aaCIOWmguaenG9iauS4reeahOWvueixoeaYr+acieaehOmAoOWHveaVsOeUn+aIkOeahO+8jCDliJnkvb/nlKhKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikp5rex5ou36LSd5ZCO77yM5Lya5Lii5byD5a+56LGh55qEY29uc3RydWN0b3LvvJsKICAgICA244CB5aaC5p6c5a+56LGh5Lit5a2Y5Zyo5b6q546v5byV55So55qE5oOF5Ya15Lmf5peg5rOV5q2j56Gu5a6e546w5rex5ou36LSd77ybCiAgICAgIOazqO+8mueUseS6juWJjeWQjuerr+aVsOaNruagvOW8j+S4jee7n+S4gO+8jOi/memHjOWvueaVsOaNruagvOW8j+WBmuS6hui9rOWMluOAggogICAgIOaXpeWQjuWJjS/lkI7nq6/mnInkv67mlLnml7bov5nph4zpg73opoHmlLnvvIEKICAgICAqLwogICAgZ2V0RGF0YUpzb25PYmplY3Q6IGZ1bmN0aW9uIGdldERhdGFKc29uT2JqZWN0KCkgewogICAgICB2YXIgZWxlcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5jeS5qc29uKCkuZWxlbWVudHMpKTsgLy/lhbblrp7mt7Hmi7fotJ3lj6/og73msqHllaXmhI/kuYnvvIzlj6rmmK/ljZXnuq/nm7Top4nkuIrmg7PnlKjkuIDnlKgoKuKVueKWveKVuSopCgogICAgICB2YXIgb2JqID0gewogICAgICAgICJlZGdlcyI6IFtdLAogICAgICAgICJub2RlcyI6IFtdCiAgICAgIH07CgogICAgICBpZiAoSlNPTi5zdHJpbmdpZnkoZWxlcykgIT09ICd7fScpIHsKICAgICAgICBpZiAoZWxlcy5lZGdlcyAhPT0gdW5kZWZpbmVkICYmIGVsZXMuZWRnZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgZWxlcy5lZGdlcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgICAgb2JqLmVkZ2VzLnB1c2goewogICAgICAgICAgICAgIGRhdGE6IHZhbC5kYXRhCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoZWxlcy5ub2RlcyAhPT0gdW5kZWZpbmVkICYmIGVsZXMubm9kZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgZWxlcy5ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgICAgb2JqLm5vZGVzLnB1c2goewogICAgICAgICAgICAgIGRhdGE6IHZhbC5kYXRhLAogICAgICAgICAgICAgIHBvc2l0aW9uOiB2YWwucG9zaXRpb24KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBvYmo7CiAgICB9LAogICAgZ2V0Q2xlYW5EYXRhOiBmdW5jdGlvbiBnZXRDbGVhbkRhdGEoZWxlcykgewogICAgICB2YXIgb2JqID0gewogICAgICAgICJlZGdlcyI6IFtdLAogICAgICAgICJub2RlcyI6IFtdCiAgICAgIH07CgogICAgICBpZiAoSlNPTi5zdHJpbmdpZnkoZWxlcykgIT09ICd7fScpIHsKICAgICAgICBpZiAoZWxlcy5lZGdlcyAhPT0gdW5kZWZpbmVkICYmIGVsZXMuZWRnZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgZWxlcy5lZGdlcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgICAgb2JqLmVkZ2VzLnB1c2goewogICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgIGlkOiB2YWwuZGF0YS5pZCwKICAgICAgICAgICAgICAgIHR5cGU6IHZhbC5kYXRhLnR5cGUsCiAgICAgICAgICAgICAgICByZWxhdGlvbjogdmFsLmRhdGEucmVsYXRpb24sCiAgICAgICAgICAgICAgICBzb3VyY2U6IHZhbC5kYXRhLnNvdXJjZSwKICAgICAgICAgICAgICAgIHRhcmdldDogdmFsLmRhdGEudGFyZ2V0CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKGVsZXMubm9kZXMgIT09IHVuZGVmaW5lZCAmJiBlbGVzLm5vZGVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGVsZXMubm9kZXMuZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgICAgIG9iai5ub2Rlcy5wdXNoKHsKICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICBpZDogdmFsLmRhdGEuaWQsCiAgICAgICAgICAgICAgICB0eXBlOiB2YWwuZGF0YS50eXBlLAogICAgICAgICAgICAgICAgbmFtZTogdmFsLmRhdGEubmFtZSwKICAgICAgICAgICAgICAgIHByb3BlcnR5OiB2YWwuZGF0YS5wcm9wZXJ0eQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgcG9zaXRpb246IHZhbC5wb3NpdGlvbgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG9iajsKICAgIH0sCiAgICBleHBvcnRKc29uOiBmdW5jdGlvbiBleHBvcnRKc29uKCkgewogICAgICB0aGlzLiRtZXNzYWdlKCLmraPlnKjlr7zlh7pqc29uLi4uIik7IC8v5pyJ56m65Lmf5Y+v5Lul5pS55oiQcHJvbWlzZeW8j+eahAoKICAgICAgdmFyIGRhdGEgPSB0aGlzLmdldERhdGFKc29uT2JqZWN0KCk7CiAgICAgIHZhciBmaWxlbmFtZSA9IHRoaXMuZ2VuZXJhdGVGaWxlTmFtZSgpICsgJy5qc29uJzsKCiAgICAgIGlmIChfdHlwZW9mKGRhdGEpID09PSAnb2JqZWN0JykgewogICAgICAgIGRhdGEgPSBKU09OLnN0cmluZ2lmeShkYXRhLCB1bmRlZmluZWQsIDQpOwogICAgICB9IC8vIOimgeWIm+W7uuS4gOS4qiBibG9iIOaVsOaNrgoKCiAgICAgIHZhciBibG9iID0gbmV3IEJsb2IoW2RhdGFdLCB7CiAgICAgICAgdHlwZTogJ3RleHQvanNvbicKICAgICAgfSksCiAgICAgICAgICBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICBhLmRvd25sb2FkID0gZmlsZW5hbWU7IC8vIOWwhmJsb2LovazmjaLkuLrlnLDlnYAKICAgICAgLy8g5Yib5bu6IFVSTCDnmoQgQmxvYiDlr7nosaEKCiAgICAgIHZhciB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgYS5ocmVmID0gdXJsOyAvLyDmoIfnrb4gZGF0YS0g5bWM5YWl6Ieq5a6a5LmJ5bGe5oCnICDlsY/olL3lkI7kuZ/lj6/mraPluLjkuIvovb0KCiAgICAgIGEuZGF0YXNldC5kb3dubG9hZHVybCA9IFsndGV4dC9qc29uJywgYS5kb3dubG9hZCwgYS5ocmVmXS5qb2luKCc6Jyk7IC8vIOa3u+WKoOm8oOagh+S6i+S7tuW5tuWQkeS4gOS4quaMh+WumueahOS6i+S7tuebruagh+a0vuWPkQoKICAgICAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnTW91c2VFdmVudHMnKTsKICAgICAgZS5pbml0TW91c2VFdmVudCgnY2xpY2snLCB0cnVlLCBmYWxzZSwgd2luZG93LCAwLCAwLCAwLCAwLCAwLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgMCwgbnVsbCk7CiAgICAgIGEuZGlzcGF0Y2hFdmVudChlKTsgLy8g6YeK5pS+5o6JYmxvYuWvueixoQoKICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsKICAgIH0sCiAgICBnZW5lcmF0ZUZpbGVOYW1lOiBmdW5jdGlvbiBnZW5lcmF0ZUZpbGVOYW1lKCkgewogICAgICB2YXIgbmFtZSA9ICIiOwoKICAgICAgdHJ5IHsKICAgICAgICBuYW1lID0gdGhpcy5jdXJyZW50X3Byb2plY3QucHJvamVjdF9uYW1lOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coIkVycm9yIG9jY3VyczoiICsgZSk7CiAgICAgICAgY29uc29sZS5sb2coIuWPr+iDveacqui/nuaOpeWIsFNlcnZlciIpOwogICAgICAgIG5hbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG5hbWU7CiAgICB9LAoKICAgIC8qKgogICAgICog6I635Y+W57uf6K6h5pWw5o2u77yM5Y2z57uZIGRhdGEg5Lit55qEIGVudGl0aWVzX2RhdGEg5ZKMIHJlbGFpb25zX2RhdGEg6LWL5YC8CiAgICAgKi8KICAgIGdldF9zdGF0aXN0aWNfZGF0YTogZnVuY3Rpb24gZ2V0X3N0YXRpc3RpY19kYXRhKCkgewogICAgICB2YXIgZGF0YSA9IHRoaXMuZ2V0RGF0YUpzb25PYmplY3QoKTsKICAgICAgdmFyIG5vZGVzID0gZGF0YS5ub2RlcywKICAgICAgICAgIGVkZ2VzID0gZGF0YS5lZGdlczsKICAgICAgdmFyIEVEYXRhID0gewogICAgICAgIGluZGl2aWR1YWw6IDAsCiAgICAgICAgb3JnYW5pemF0aW9uOiAwLAogICAgICAgIHRoaW5nOiAwLAogICAgICAgIGRlZmF1bHQ6IDAsCiAgICAgICAgdG90YWw6IG5vZGVzLmxlbmd0aAogICAgICB9OwoKICAgICAgdmFyIF9pdGVyYXRvcjcgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihub2RlcyksCiAgICAgICAgICBfc3RlcDc7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yNy5zKCk7ICEoX3N0ZXA3ID0gX2l0ZXJhdG9yNy5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgbm9kZSA9IF9zdGVwNy52YWx1ZTsKCiAgICAgICAgICBpZiAoIShub2RlLmRhdGEudHlwZSA9PSAnaW5kaXZpZHVhbCcgfHwgbm9kZS5kYXRhLnR5cGUgPT0gJ29yZ2FuaXphdGlvbicgfHwgbm9kZS5kYXRhLnR5cGUgPT0gJ3RoaW5nJykpIHsKICAgICAgICAgICAgRURhdGFbJ2RlZmF1bHQnXSsrOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgRURhdGFbbm9kZS5kYXRhLnR5cGVdKys7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3I3LmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3I3LmYoKTsKICAgICAgfQoKICAgICAgdmFyIFJEYXRhID0gewogICAgICAgIGNvbm5lY3Rpb246IDAsCiAgICAgICAgaW5oZXJpdGFuY2U6IDAsCiAgICAgICAgZGVmYXVsdDogMCwKICAgICAgICB0b3RhbDogZWRnZXMubGVuZ3RoCiAgICAgIH07CgogICAgICB2YXIgX2l0ZXJhdG9yOCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGVkZ2VzKSwKICAgICAgICAgIF9zdGVwODsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3I4LnMoKTsgIShfc3RlcDggPSBfaXRlcmF0b3I4Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlZGdlID0gX3N0ZXA4LnZhbHVlOwogICAgICAgICAgUkRhdGFbZWRnZS5kYXRhLnR5cGVdKys7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3I4LmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3I4LmYoKTsKICAgICAgfQoKICAgICAgdGhpcy5lbnRpdGllc19kYXRhID0gW0VEYXRhXTsKICAgICAgdGhpcy5yZWxhdGlvbnNfZGF0YSA9IFtSRGF0YV07CiAgICB9LAogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy/mraTlpITkuLrov4fmu6Tku6PnoIEvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIG5vZGVGaWx0ZXI6IGZ1bmN0aW9uIG5vZGVGaWx0ZXIoKSB7CiAgICAgIHZhciBjaGVja0xpc3QgPSB0aGlzLmZpbHRlcl9ub2RlX2NoZWNrTGlzdDsKICAgICAgdGhpcy5jeS5ub2RlcygpLmZvckVhY2goZnVuY3Rpb24gKHZhbCkgewogICAgICAgIHZhciBoaXQgPSBjaGVja0xpc3QuaW5jbHVkZXModmFsLmRhdGEoJ3R5cGUnKSk7CgogICAgICAgIGlmIChoaXQgJiYgIXZhbC5oYXNDbGFzcygncmVtb3ZlZCcpKSB7CiAgICAgICAgICB2YWwuYWRkQ2xhc3MoJ3JlbW92ZWQnKTsKICAgICAgICB9IGVsc2UgaWYgKCFoaXQgJiYgdmFsLmhhc0NsYXNzKCdyZW1vdmVkJykpIHsKICAgICAgICAgIHZhbC5yZW1vdmVDbGFzcygncmVtb3ZlZCcpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZWRnZUZpbHRlcjogZnVuY3Rpb24gZWRnZUZpbHRlcigpIHsKICAgICAgdmFyIGNoZWNrTGlzdCA9IHRoaXMuZmlsdGVyX2VkZ2VfY2hlY2tMaXN0OwogICAgICB0aGlzLmN5LmVkZ2VzKCkuZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgdmFyIGhpdCA9IGNoZWNrTGlzdC5pbmNsdWRlcyh2YWwuZGF0YSgndHlwZScpKTsKCiAgICAgICAgaWYgKGhpdCAmJiAhdmFsLmhhc0NsYXNzKCdoaWRkZW4nKSkgewogICAgICAgICAgdmFsLmFkZENsYXNzKCdoaWRkZW4nKTsKICAgICAgICB9IGVsc2UgaWYgKCFoaXQgJiYgdmFsLmhhc0NsYXNzKCdoaWRkZW4nKSkgewogICAgICAgICAgdmFsLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIG5vZGVEZWZpbHRlcjogZnVuY3Rpb24gbm9kZURlZmlsdGVyKCkgewogICAgICBpZiAodGhpcy5maWx0ZXJfbm9kZV9jaGVja0xpc3QubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICAgIHRoaXMuY3kubm9kZXMoKS5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICBpZiAodmFsLmhhc0NsYXNzKCdyZW1vdmVkJykpIHsKICAgICAgICAgIHZhbC5yZW1vdmVDbGFzcygncmVtb3ZlZCcpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuZmlsdGVyX25vZGVfY2hlY2tMaXN0ID0gW107CiAgICB9LAogICAgZWRnZURlZmlsdGVyOiBmdW5jdGlvbiBlZGdlRGVmaWx0ZXIoKSB7CiAgICAgIGlmICh0aGlzLmZpbHRlcl9lZGdlX2NoZWNrTGlzdC5sZW5ndGggPT09IDApIHJldHVybjsKICAgICAgdGhpcy5jeS5lZGdlcygpLmZvckVhY2goZnVuY3Rpb24gKHZhbCkgewogICAgICAgIGlmICh2YWwuaGFzQ2xhc3MoJ2hpZGRlbicpKSB7CiAgICAgICAgICB2YWwucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuZmlsdGVyX2VkZ2VfY2hlY2tMaXN0ID0gW107CiAgICB9CiAgfSkKfTs="},{"version":3,"sources":["C:/Users/Zhaoning/Desktop/HCI/src/components/EditBar/EditBar.js"],"names":["mapState","mapMutations","inputKG","OpItem","EditBarBlock","MyButton","name","components","data","showEditBar","showExportOps","opInfo","entities_data","relations_data","max_log_len","search_node_text","search_node_condition","node_searched","search_node_log","search_edge_text","search_edge_condition","edge_searched","search_edge_log","filter_node_checkList","filter_edge_checkList","layout","layoutTypeNow","relation_label_enabled","font_size","node_radius","watch","cy","newValue","oldValue","get_statistic_data","options","statistic_data_change","console","log","newVal","oldVal","stop","nodes","elements","positions","node","nodeId","id","position","x","y","fit","d3_options","animate","fixedAfterDragging","linkId","d","linkDistance","manyBodyStrength","ready","tick","progress","randomize","infinite","run","edges","enabled","edge","hasClass","removeClass","addClass","setNodeFontSize","size","Number","isNaN","parseInt","style","informMsg","setNodeRadius","removeStyle","radius","realRadius","computed","state","workspace","nodeType","edgeType","layoutType","pid","node_checkList_disabled","get","filter_node_checked","edge_checkList_disabled","filter_edge_checked","methods","changeEditBarState","open","document","getElementsByClassName","click","getFilePath","selectedFile","files","reader","FileReader","readAsDataURL","that","onload","setJsonSrcPath","result","save","graphData","getDataJsonObject","getCleanData","loading","$loading","lock","text","spinner","background","then","res","success","setProject","$message","error","catch","err","finally","close","changeExportState","exportPng","blob","png","output","bg","full","scale","aLink","createElement","download","generateFileName","url","window","URL","createObjectURL","href","evt","createEvent","initEvent","dispatchEvent","revokeObjectURL","length","eles","JSON","parse","stringify","json","obj","undefined","forEach","val","push","type","relation","source","target","property","exportJson","filename","Blob","a","dataset","downloadurl","join","e","initMouseEvent","current_project","project_name","Date","getTime","EData","individual","organization","thing","default","total","RData","connection","inheritance","nodeFilter","checkList","hit","includes","edgeFilter","nodeDefilter","edgeDefilter"],"mappings":"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","sourcesContent":["import { mapState, mapMutations } from 'vuex';\nimport { inputKG } from \"../../api/basicAPI\";\nimport OpItem from './OpItem';\nimport EditBarBlock from \"./EditBarBlock\";\nimport MyButton from \"@/components/Tools/MyButton\";\n\n\nexport default {\n    name: \"EditBar\",\n    components: {OpItem,EditBarBlock, MyButton},\n    data(){\n        return{\n            showEditBar: true,\n            showExportOps: false,\n            opInfo: '打开的文件后缀为\".json\"，其表示一个知识图谱\\n',\n            entities_data: [],\n            relations_data: [],\n\n            ////////////////////////////搜索相关/////////////////////////////////\n            max_log_len: 10,\n\n            search_node_text: [],\n            search_node_condition: [],\n            node_searched: false,\n            search_node_log: [],\n\n            search_edge_text:[],\n            search_edge_condition: [],\n            edge_searched:false,\n            search_edge_log: [],\n\n            // search_text: '',\n            // search_type: '',\n            // select_value: '',\n            // showEnabled: false,\n            // edgeDisabled: true,\n            // types: [\n            //     {\n            //         label: '节点',\n            //         value: '1'\n            //     },\n            //     {\n            //         label: '关系',\n            //         value: '2'\n            //     }\n            // ],\n            // currentSearch: {\n            //     params: {},\n            //     result: []\n            // },\n            // searchLog: [],\n\n            //////////////////////过滤相关/////////////////////////////\n\n            filter_node_checkList: [],\n            filter_edge_checkList: [],\n\n            // filter_disabled: true,\n            // filterShowEnabled: false,\n            //\n            // filter_node_checked: false,\n            // filter_node_checkList: [],\n            // filter_edge_checked: false,\n            // filter_edge_checkList: [],\n\n            //////////////////////展示效果相关////////////////////////////////\n\n            layout: null,\n\n            layoutTypeNow : '',\n\n            relation_label_enabled: true,\n            font_size: 20,\n            node_radius: 20,\n        }\n    },\n    watch: {\n        cy(newValue, oldValue){\n            this.get_statistic_data();\n            this.layoutTypeNow = newValue.options().layout.name;\n        },\n        statistic_data_change(newValue, oldValue){\n            console.log(\"检测到数据变化\")\n            this.get_statistic_data();\n        },\n\n        /////////////////////////////展示相关//////////////////////////////\n        layoutTypeNow(newVal, oldVal) {\n            console.log(\"layout watched: '\",oldVal,\"' to '\",newVal,\"'\");\n            let layout = this.layout;\n            if(layout!==null){\n                layout.stop();\n            }\n            if(newVal==='preset'){\n                //console.log(\"elements stored: \",this.elements);\n                let nodes = this.elements.nodes;\n                let positions = node=>{\n                    let nodeId = node.data(\"id\");\n                    for(let node of nodes){\n                        if(node.data.id===nodeId){\n                            return node.position;\n                        }\n                    }\n                    return {x:0,y:0};//可以拓展成随机放置\n                };\n                layout = this.cy.layout({name: newVal,fit:true,positions:positions});//若以后恢复的布局中新增颜色、大小等，可能需要为增加的部分渲染内容新写代码\n                //console.log(\"reset done\")\n\n            }else if(newVal==='d3-force'){\n                let d3_options = {\n                    name: 'd3-force',\n                    animate: true,\n                    fit: true,//适应viewport\n                    fixedAfterDragging: false,\n                    linkId: function id(d) {\n                        return d.id;\n                    },\n                    linkDistance: 1000,\n                    manyBodyStrength: -10000,\n                    ready: function(){},\n                    stop: function(){},\n                    tick: function(progress) {\n                        // console.log('progress - ', progress);\n                    },\n                    randomize: false,\n                    infinite: true\n                }\n                layout = this.cy.layout(d3_options)\n            }else{\n                layout = this.cy.layout({name: newVal, fit: true})\n            }\n            this.layout = layout;\n            this.layout.run();\n        },\n        relation_label_enabled(newVal, oldVal) {\n            let edges = this.cy.edges();\n            let enabled = newVal;\n            for (let edge of edges) {\n                if(enabled&&edge.hasClass('label_hidden')){\n                    edge.removeClass('label_hidden');\n                }else if(!enabled&&!edge.hasClass('label_hidden')){\n                    edge.addClass('label_hidden');\n                }\n            }\n        },\n        font_size(newVal, oldVal) {\n            // let defaultSize = '25px';//默认值，25px是看workspace找到的\n            if (newVal === '') {\n                this.setNodeFontSize('');//同步改变workspace中的nodeNodeFontSize\n                //CytoscapeKG中在监听到workspace中nodeFontSize刚变回''时\n                //会根据节点大小和字数重新渲染各个节点的字体大小，所以不能用统一默认值\n                //此处什么也不需要做，因为CytoscapeKG里做了\n                return;\n            }\n            let size = Number(newVal);\n            if (!isNaN(size)) {\n                this.setNodeFontSize(newVal);//同步改变workspace中的nodeNodeFontSize\n                size = parseInt(size);\n                for (let node of this.cy.nodes()) {\n                    node.style('font-size', size + 'px');\n                }\n            }\n            else {\n                if (newVal !== '') {\n                    this.informMsg('error','请输入数字');\n                }\n                this.setNodeFontSize('');//同步改变workspace中的nodeNodeFontSize\n                //CytoscapeKG中在监听到workspace中nodeFontSize刚变回''时\n                //会根据节点大小和字数重新渲染各个节点的字体大小，所以不能用统一默认值\n                //此处什么也不需要做，因为CytoscapeKG里做了\n            }\n        },\n        node_radius(newVal, oldVal) {\n            if (newVal === '') {\n                this.setNodeRadius('');//同步改变workspace中的nodeRadius\n                for (let node of this.cy.nodes()) {\n                    node.removeStyle('width');\n                    node.removeStyle('height');\n                }\n                return;\n            }\n            let radius = Number(newVal);\n            if (!isNaN(radius)) {\n                radius = parseInt(radius);\n                let realRadius = radius * 2;\n                this.setNodeRadius(realRadius+\"\");//同步改变workspace中的nodeRadius\n                for (let node of this.cy.nodes()) {//是不是要改成等比例扩大？\n                    node.style('width', realRadius + 'px');\n                    node.style('height', realRadius + 'px');\n                }\n            }\n            else {\n                this.setNodeRadius('');//同步改变workspace中的nodeRadius\n                if (newVal !== '') {\n                    this.informMsg('error','请输入数字');\n                }\n                for (let node of this.cy.nodes()) {\n                    node.removeStyle('width');\n                    node.removeStyle('height');\n                }\n            }\n        }\n    },\n    computed: {\n        ...mapState({\n            cy: state => state.workspace.cy,\n            statistic_data_change: state => state.workspace.statistic_data_change,\n            nodeType: state => state.workspace.nodeType,\n            edgeType: state => state.workspace.edgeType,\n            layoutType: state => state.workspace.layoutType,\n            elements: state => state.workspace.elements,\n            pid: state => state.pid,\n        }),\n        node_checkList_disabled: {\n            get() {\n                return !this.filter_node_checked;\n            }\n        },\n        edge_checkList_disabled: {\n            get() {\n                return !this.filter_edge_checked;\n            }\n\n        },\n    },\n    methods:{\n        ...mapMutations(['setJsonSrcPath', 'setSeCurrentSearchParams',\n            'setCurrentSearchResult','setNodeRadius','setNodeFontSize', 'setProject', 'changeShowQAPanel']),\n\n        changeEditBarState(){\n            this.showEditBar = !this.showEditBar;\n        },\n\n        open(){\n            document.getElementsByClassName(\"choose-file\")[0].click();\n        },\n\n        getFilePath(){\n            //获取读取我文件的File对象\n            let selectedFile = document.getElementsByClassName(\"choose-file\")[0].files[0];\n            let reader = new FileReader();//这是核心,读取操作就是由它完成.\n            reader.readAsDataURL(selectedFile)\n            reader.that = this;\n            reader.onload = function () {\n                //当读取完成后回调这个函数,然后此时文件的内容存储到了this.result中,直接操作即可\n                this.that.setJsonSrcPath(this.result);\n            }\n        },\n\n        save(){\n            let data = {};\n            let graphData = this.getDataJsonObject();\n            data = {\n                nodes: graphData.nodes,\n                edges: graphData.edges\n            };\n\n            data = this.getCleanData(data);\n            console.log(\"要保存的数据：\",data);\n\n            const loading = this.$loading({\n                lock: true,\n                text: '...保存中...',\n                spinner: 'el-icon-loading',\n                background: 'rgba(255, 255,255, 0.8)'\n            });\n            inputKG({...data, pid: this.pid}).then(res => {\n                if(res.success){\n                    this.setProject(data);\n                    this.$message.success('保存成功');\n                }else{\n                    this.$message.error( '保存失败')\n                }\n            }).catch( err => {\n                console.log(err);\n                this.$message.error('网络错误或服务器错误')\n            }).finally(() => {\n                loading.close();\n            })\n        },\n\n        changeExportState(){\n            this.showExportOps = !this.showExportOps;\n        },\n\n        /**\n         * 导出全局图片.\n         * options: The export options.\n         output： Whether the output should be 'base64uri' (default), 'base64', 'blob', or 'blob-promise' (a promise that resolves to the blob is returned).\n         bg: The background colour of the image (transparent by default).\n         full: Whether to export the current viewport view (false, default) or the entire graph (true).\n         scale: This value specifies a positive number that scales the size of the resultant image.\n         maxWidth: Specifies the scale automatically in combination with maxHeight such that the resultant image is no wider than maxWidth.\n         maxHeight: Specifies the scale automatically in combination with maxWidth such that the resultant image is no taller than maxHeight\n         */\n        exportPng(){\n            this.$message.success(\"正在导出图片...\");\n            let blob = this.cy.png({\n                output: 'blob-promise', bg: 'white',\n                full: true, scale: 4\n            });\n            blob.then(res => {\n                //创建下载链接\n                let aLink = document.createElement('a');\n                aLink.download = this.generateFileName() + '.png';\n                let url = window.URL.createObjectURL(res);\n                aLink.href = url;\n\n                //创建、分配并触发点击事件\n                let evt = document.createEvent(\"MouseEvents\");\n                evt.initEvent(\"click\", true, true);\n                aLink.dispatchEvent(evt);\n\n                // 释放掉blob对象\n                window.URL.revokeObjectURL(url);\n            }).catch(err => {\n                console.log(\"Error occured: \", err);\n                if (this.cy.elements().length === 0) {\n                    this.$message.error(\"知识图谱已经空啦，导不出东西的呀\");\n                }\n            });\n        },\n\n        /**\n         * 对象拷贝\n         * JSON.parse(JSON.stringify(obj))我们一般用来深拷贝\n         但不是完全深拷贝，有以下特点：\n         1、如果obj里面有时间对象，则JSON.stringify后再JSON.parse的结果，时间将只是字符串的形式。而不是时间对象；\n         2、如果obj里有RegExp、Error对象，则序列化的结果将只得到空对象；\n         3、如果obj里有函数，undefined，则序列化的结果会把函数或 undefined丢失；\n         4、如果obj里有NaN、Infinity和-Infinity，则序列化的结果会变成null\n         5、JSON.stringify()只能序列化对象的可枚举的自有属性，例如 如果obj中的对象是有构造函数生成的， 则使用JSON.parse(JSON.stringify(obj))深拷贝后，会丢弃对象的constructor；\n         6、如果对象中存在循环引用的情况也无法正确实现深拷贝；\n\n         注：由于前后端数据格式不统一，这里对数据格式做了转化。\n         日后前/后端有修改时这里都要改！\n         */\n        getDataJsonObject() {\n            let eles = JSON.parse(JSON.stringify(this.cy.json().elements));//其实深拷贝可能没啥意义，只是单纯直觉上想用一用(*╹▽╹*)\n            let obj = {\"edges\": [], \"nodes\": []};\n            if (JSON.stringify(eles) !== '{}') {\n                if (eles.edges !== undefined && eles.edges.length > 0) {\n                    eles.edges.forEach(val => {\n                        obj.edges.push({\n                            data: val.data\n                        });\n                    });\n                }\n                if (eles.nodes !== undefined && eles.nodes.length > 0) {\n                    eles.nodes.forEach(val => {\n                        obj.nodes.push({\n                            data: val.data,\n                            position: val.position\n                        });\n                    });\n                }\n            }\n            return obj;\n        },\n        getCleanData(eles) {\n            let obj = {\"edges\": [], \"nodes\": []};\n            if (JSON.stringify(eles) !== '{}') {\n                if (eles.edges !== undefined && eles.edges.length > 0) {\n                    eles.edges.forEach(val => {\n                        obj.edges.push({\n                            data: {\n                                id:val.data.id,\n                                type:val.data.type,\n                                relation:val.data.relation,\n                                source:val.data.source,\n                                target:val.data.target\n                            }\n                        });\n                    });\n                }\n                if (eles.nodes !== undefined && eles.nodes.length > 0) {\n                    eles.nodes.forEach(val => {\n                        obj.nodes.push({\n                            data: {\n                                id:val.data.id,\n                                type:val.data.type,\n                                name:val.data.name,\n                                property:val.data.property\n                            },\n                            position: val.position\n                        });\n                    });\n                }\n            }\n            return obj;\n        },\n        exportJson(){\n            this.$message(\"正在导出json...\");\n            //有空也可以改成promise式的\n            let data = this.getDataJsonObject();\n            let filename =  this.generateFileName() + '.json';\n            if(typeof data === 'object'){\n                data = JSON.stringify(data, undefined, 4)\n            }\n            // 要创建一个 blob 数据\n            let blob = new Blob([data], {type: 'text/json'}),\n                a = document.createElement('a');\n            a.download = filename;\n\n            // 将blob转换为地址\n            // 创建 URL 的 Blob 对象\n            let url = window.URL.createObjectURL(blob)\n            a.href = url;\n\n            // 标签 data- 嵌入自定义属性  屏蔽后也可正常下载\n            a.dataset.downloadurl = ['text/json', a.download, a.href].join(':');\n\n            // 添加鼠标事件并向一个指定的事件目标派发\n            let e = document.createEvent('MouseEvents');\n            e.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n            a.dispatchEvent(e);\n\n            // 释放掉blob对象\n            window.URL.revokeObjectURL(url);\n        },\n\n        generateFileName(){\n            let name = \"\";\n            try{\n                name = this.current_project.project_name;\n            }catch (e) {\n                console.log(\"Error occurs:\"+e);\n                console.log(\"可能未连接到Server\");\n                name = new Date().getTime();\n            }\n            return name;\n        },\n\n        /**\n         * 获取统计数据，即给 data 中的 entities_data 和 relaions_data 赋值\n         */\n        get_statistic_data(){\n            let data = this.getDataJsonObject();\n            let nodes = data.nodes,\n                edges = data.edges;\n            let EData = {\n                individual: 0,\n                organization: 0,\n                thing: 0,\n                default: 0,\n                total: nodes.length\n            };\n            for (let node of nodes){\n                if (!(node.data.type == 'individual' || node.data.type == 'organization' || node.data.type == 'thing')){\n                    EData['default'] ++;\n                }else {\n                    EData[node.data.type] ++;\n                }\n            }\n            let RData = {\n                connection: 0,\n                inheritance: 0,\n                default: 0,\n                total: edges.length\n            }\n            for (let edge of edges){\n                RData[edge.data.type] ++;\n            }\n            this.entities_data = [EData];\n            this.relations_data = [RData];\n        },\n\n        ///////////////////////////////////此处为过滤代码///////////////////////////////////////\n        nodeFilter(){\n            let checkList = this.filter_node_checkList;\n            this.cy.nodes().forEach(val=>{\n                let hit = checkList.includes(val.data('type'));\n               if(hit&&!val.hasClass('removed')) {\n                   val.addClass('removed');\n               }else if(!hit&&val.hasClass('removed')){\n                   val.removeClass('removed');\n               }\n            });\n        },\n        edgeFilter(){\n            let checkList = this.filter_edge_checkList;\n            this.cy.edges().forEach(val=>{\n                let hit = checkList.includes(val.data('type'));\n                if(hit&&!val.hasClass('hidden')) {\n                    val.addClass('hidden');\n                }else if(!hit&&val.hasClass('hidden')){\n                    val.removeClass('hidden');\n                }\n            });\n        },\n        nodeDefilter(){\n            if(this.filter_node_checkList.length===0)return;\n            this.cy.nodes().forEach(val=>{\n                if(val.hasClass('removed')){\n                    val.removeClass('removed');\n                }\n            });\n            this.filter_node_checkList = [];\n        },\n        edgeDefilter(){\n            if(this.filter_edge_checkList.length===0)return;\n            this.cy.edges().forEach(val=>{\n                if(val.hasClass('hidden')){\n                    val.removeClass('hidden');\n                }\n            });\n            this.filter_edge_checkList = [];\n        },\n    }\n}\n"]}]}