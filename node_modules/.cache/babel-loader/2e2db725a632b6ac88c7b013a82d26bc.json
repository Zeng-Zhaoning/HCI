{"remainingRequest":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Zhaoning\\Desktop\\HCI\\src\\components\\EditBar\\EditBar.js?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\src\\components\\EditBar\\EditBar.js","mtime":1638711943672},{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiQzovVXNlcnMvWmhhb25pbmcvRGVza3RvcC9IQ0kvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZiI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkM6L1VzZXJzL1poYW9uaW5nL0Rlc2t0b3AvSENJL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkM6L1VzZXJzL1poYW9uaW5nL0Rlc2t0b3AvSENJL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLWFsbC5qcyI7CmltcG9ydCB7IG1hcFN0YXRlLCBtYXBNdXRhdGlvbnMsIG1hcEFjdGlvbnMsIG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgaW5wdXRLRyB9IGZyb20gIi4uLy4uL2FwaS9iYXNpY0FQSSI7CmltcG9ydCBPcEl0ZW0gZnJvbSAnLi9PcEl0ZW0nOwppbXBvcnQgRWRpdEJhckJsb2NrIGZyb20gIi4vRWRpdEJhckJsb2NrIjsKaW1wb3J0IE15QnV0dG9uIGZyb20gIkAvY29tcG9uZW50cy9Ub29scy9NeUJ1dHRvbiI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRWRpdEJhciIsCiAgY29tcG9uZW50czogewogICAgT3BJdGVtOiBPcEl0ZW0sCiAgICBFZGl0QmFyQmxvY2s6IEVkaXRCYXJCbG9jaywKICAgIE15QnV0dG9uOiBNeUJ1dHRvbgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3dFZGl0QmFyOiB0cnVlLAogICAgICBzaG93RXhwb3J0T3BzOiBmYWxzZSwKICAgICAgb3BJbmZvOiAn5omT5byA55qE5paH5Lu25ZCO57yA5Li6Ii5qc29uIu+8jOWFtuihqOekuuS4gOS4quefpeivhuWbvuiwsVxuJywKICAgICAgZW50aXRpZXNfZGF0YTogW10sCiAgICAgIHJlbGF0aW9uc19kYXRhOiBbXSwKICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL+aQnOe0ouebuOWFsy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICBtYXhfbG9nX2xlbjogMTAsCiAgICAgIHNlYXJjaF9ub2RlX3RleHQ6IFtdLAogICAgICBzZWFyY2hfbm9kZV9jb25kaXRpb246IFtdLAogICAgICBub2RlX3NlYXJjaGVkOiBmYWxzZSwKICAgICAgc2VhcmNoX25vZGVfbG9nOiBbXSwKICAgICAgc2VhcmNoX2VkZ2VfdGV4dDogW10sCiAgICAgIHNlYXJjaF9lZGdlX2NvbmRpdGlvbjogW10sCiAgICAgIGVkZ2Vfc2VhcmNoZWQ6IGZhbHNlLAogICAgICBzZWFyY2hfZWRnZV9sb2c6IFtdLAogICAgICAvLyBzZWFyY2hfdGV4dDogJycsCiAgICAgIC8vIHNlYXJjaF90eXBlOiAnJywKICAgICAgLy8gc2VsZWN0X3ZhbHVlOiAnJywKICAgICAgLy8gc2hvd0VuYWJsZWQ6IGZhbHNlLAogICAgICAvLyBlZGdlRGlzYWJsZWQ6IHRydWUsCiAgICAgIC8vIHR5cGVzOiBbCiAgICAgIC8vICAgICB7CiAgICAgIC8vICAgICAgICAgbGFiZWw6ICfoioLngrknLAogICAgICAvLyAgICAgICAgIHZhbHVlOiAnMScKICAgICAgLy8gICAgIH0sCiAgICAgIC8vICAgICB7CiAgICAgIC8vICAgICAgICAgbGFiZWw6ICflhbPns7snLAogICAgICAvLyAgICAgICAgIHZhbHVlOiAnMicKICAgICAgLy8gICAgIH0KICAgICAgLy8gXSwKICAgICAgLy8gY3VycmVudFNlYXJjaDogewogICAgICAvLyAgICAgcGFyYW1zOiB7fSwKICAgICAgLy8gICAgIHJlc3VsdDogW10KICAgICAgLy8gfSwKICAgICAgLy8gc2VhcmNoTG9nOiBbXSwKICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vL+i/h+a7pOebuOWFsy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAgIGZpbHRlcl9ub2RlX2NoZWNrTGlzdDogW10sCiAgICAgIGZpbHRlcl9lZGdlX2NoZWNrTGlzdDogW10sCiAgICAgIC8vIGZpbHRlcl9kaXNhYmxlZDogdHJ1ZSwKICAgICAgLy8gZmlsdGVyU2hvd0VuYWJsZWQ6IGZhbHNlLAogICAgICAvLwogICAgICAvLyBmaWx0ZXJfbm9kZV9jaGVja2VkOiBmYWxzZSwKICAgICAgLy8gZmlsdGVyX25vZGVfY2hlY2tMaXN0OiBbXSwKICAgICAgLy8gZmlsdGVyX2VkZ2VfY2hlY2tlZDogZmFsc2UsCiAgICAgIC8vIGZpbHRlcl9lZGdlX2NoZWNrTGlzdDogW10sCiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy/lsZXnpLrmlYjmnpznm7jlhbMvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICBsYXlvdXQ6IG51bGwsCiAgICAgIGxheW91dFR5cGVOb3c6ICcnLAogICAgICByZWxhdGlvbl9sYWJlbF9lbmFibGVkOiB0cnVlLAogICAgICBmb250X3NpemU6IDIwLAogICAgICBub2RlX3JhZGl1czogMjAKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgY3k6IGZ1bmN0aW9uIGN5KG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgICB0aGlzLmdldF9zdGF0aXN0aWNfZGF0YSgpOwogICAgICB0aGlzLmxheW91dFR5cGVOb3cgPSBuZXdWYWx1ZS5vcHRpb25zKCkubGF5b3V0Lm5hbWU7CiAgICB9LAogICAgc3RhdGlzdGljX2RhdGFfY2hhbmdlOiBmdW5jdGlvbiBzdGF0aXN0aWNfZGF0YV9jaGFuZ2UobmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICAgIGNvbnNvbGUubG9nKCLmo4DmtYvliLDmlbDmja7lj5jljJYiKTsKICAgICAgdGhpcy5nZXRfc3RhdGlzdGljX2RhdGEoKTsKICAgIH0sCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL+WxleekuuebuOWFsy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgbGF5b3V0VHlwZU5vdzogZnVuY3Rpb24gbGF5b3V0VHlwZU5vdyhuZXdWYWwsIG9sZFZhbCkgewogICAgICBjb25zb2xlLmxvZygibGF5b3V0IHdhdGNoZWQ6ICciLCBvbGRWYWwsICInIHRvICciLCBuZXdWYWwsICInIik7CiAgICAgIHZhciBsYXlvdXQgPSB0aGlzLmxheW91dDsKCiAgICAgIGlmIChsYXlvdXQgIT09IG51bGwpIHsKICAgICAgICBsYXlvdXQuc3RvcCgpOwogICAgICB9CgogICAgICBpZiAobmV3VmFsID09PSAncHJlc2V0JykgewogICAgICAgIC8vY29uc29sZS5sb2coImVsZW1lbnRzIHN0b3JlZDogIix0aGlzLmVsZW1lbnRzKTsKICAgICAgICB2YXIgbm9kZXMgPSB0aGlzLmVsZW1lbnRzLm5vZGVzOwoKICAgICAgICB2YXIgcG9zaXRpb25zID0gZnVuY3Rpb24gcG9zaXRpb25zKG5vZGUpIHsKICAgICAgICAgIHZhciBub2RlSWQgPSBub2RlLmRhdGEoImlkIik7CgogICAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG5vZGVzKSwKICAgICAgICAgICAgICBfc3RlcDsKCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgICAgIHZhciBfbm9kZSA9IF9zdGVwLnZhbHVlOwoKICAgICAgICAgICAgICBpZiAoX25vZGUuZGF0YS5pZCA9PT0gbm9kZUlkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX25vZGUucG9zaXRpb247CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgeDogMCwKICAgICAgICAgICAgeTogMAogICAgICAgICAgfTsgLy/lj6/ku6Xmi5PlsZXmiJDpmo/mnLrmlL7nva4KICAgICAgICB9OwoKICAgICAgICBsYXlvdXQgPSB0aGlzLmN5LmxheW91dCh7CiAgICAgICAgICBuYW1lOiBuZXdWYWwsCiAgICAgICAgICBmaXQ6IHRydWUsCiAgICAgICAgICBwb3NpdGlvbnM6IHBvc2l0aW9ucwogICAgICAgIH0pOyAvL+iLpeS7peWQjuaBouWkjeeahOW4g+WxgOS4reaWsOWinuminOiJsuOAgeWkp+Wwj+etie+8jOWPr+iDvemcgOimgeS4uuWinuWKoOeahOmDqOWIhua4suafk+WGheWuueaWsOWGmeS7o+eggQogICAgICAgIC8vY29uc29sZS5sb2coInJlc2V0IGRvbmUiKQogICAgICB9IGVsc2UgaWYgKG5ld1ZhbCA9PT0gJ2QzLWZvcmNlJykgewogICAgICAgIHZhciBkM19vcHRpb25zID0gewogICAgICAgICAgbmFtZTogJ2QzLWZvcmNlJywKICAgICAgICAgIGFuaW1hdGU6IHRydWUsCiAgICAgICAgICBmaXQ6IHRydWUsCiAgICAgICAgICAvL+mAguW6lHZpZXdwb3J0CiAgICAgICAgICBmaXhlZEFmdGVyRHJhZ2dpbmc6IGZhbHNlLAogICAgICAgICAgbGlua0lkOiBmdW5jdGlvbiBpZChkKSB7CiAgICAgICAgICAgIHJldHVybiBkLmlkOwogICAgICAgICAgfSwKICAgICAgICAgIGxpbmtEaXN0YW5jZTogMTAwMCwKICAgICAgICAgIG1hbnlCb2R5U3RyZW5ndGg6IC0xMDAwMCwKICAgICAgICAgIHJlYWR5OiBmdW5jdGlvbiByZWFkeSgpIHt9LAogICAgICAgICAgc3RvcDogZnVuY3Rpb24gc3RvcCgpIHt9LAogICAgICAgICAgdGljazogZnVuY3Rpb24gdGljayhwcm9ncmVzcykgey8vIGNvbnNvbGUubG9nKCdwcm9ncmVzcyAtICcsIHByb2dyZXNzKTsKICAgICAgICAgIH0sCiAgICAgICAgICByYW5kb21pemU6IGZhbHNlLAogICAgICAgICAgaW5maW5pdGU6IHRydWUKICAgICAgICB9OwogICAgICAgIGxheW91dCA9IHRoaXMuY3kubGF5b3V0KGQzX29wdGlvbnMpOwogICAgICB9IGVsc2UgewogICAgICAgIGxheW91dCA9IHRoaXMuY3kubGF5b3V0KHsKICAgICAgICAgIG5hbWU6IG5ld1ZhbCwKICAgICAgICAgIGZpdDogdHJ1ZQogICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGlzLmxheW91dCA9IGxheW91dDsKICAgICAgdGhpcy5sYXlvdXQucnVuKCk7CiAgICB9LAogICAgcmVsYXRpb25fbGFiZWxfZW5hYmxlZDogZnVuY3Rpb24gcmVsYXRpb25fbGFiZWxfZW5hYmxlZChuZXdWYWwsIG9sZFZhbCkgewogICAgICB2YXIgZWRnZXMgPSB0aGlzLmN5LmVkZ2VzKCk7CiAgICAgIHZhciBlbmFibGVkID0gbmV3VmFsOwoKICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihlZGdlcyksCiAgICAgICAgICBfc3RlcDI7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZWRnZSA9IF9zdGVwMi52YWx1ZTsKCiAgICAgICAgICBpZiAoZW5hYmxlZCAmJiBlZGdlLmhhc0NsYXNzKCdsYWJlbF9oaWRkZW4nKSkgewogICAgICAgICAgICBlZGdlLnJlbW92ZUNsYXNzKCdsYWJlbF9oaWRkZW4nKTsKICAgICAgICAgIH0gZWxzZSBpZiAoIWVuYWJsZWQgJiYgIWVkZ2UuaGFzQ2xhc3MoJ2xhYmVsX2hpZGRlbicpKSB7CiAgICAgICAgICAgIGVkZ2UuYWRkQ2xhc3MoJ2xhYmVsX2hpZGRlbicpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgIH0KICAgIH0sCiAgICBmb250X3NpemU6IGZ1bmN0aW9uIGZvbnRfc2l6ZShuZXdWYWwsIG9sZFZhbCkgewogICAgICAvLyBsZXQgZGVmYXVsdFNpemUgPSAnMjVweCc7Ly/pu5jorqTlgLzvvIwyNXB45piv55yLd29ya3NwYWNl5om+5Yiw55qECiAgICAgIGlmIChuZXdWYWwgPT09ICcnKSB7CiAgICAgICAgdGhpcy5zZXROb2RlRm9udFNpemUoJycpOyAvL+WQjOatpeaUueWPmHdvcmtzcGFjZeS4reeahG5vZGVOb2RlRm9udFNpemUKICAgICAgICAvL0N5dG9zY2FwZUtH5Lit5Zyo55uR5ZCs5Yiwd29ya3NwYWNl5Litbm9kZUZvbnRTaXpl5Yia5Y+Y5ZueJyfml7YKICAgICAgICAvL+S8muagueaNruiKgueCueWkp+Wwj+WSjOWtl+aVsOmHjeaWsOa4suafk+WQhOS4quiKgueCueeahOWtl+S9k+Wkp+Wwj++8jOaJgOS7peS4jeiDveeUqOe7n+S4gOm7mOiupOWAvAogICAgICAgIC8v5q2k5aSE5LuA5LmI5Lmf5LiN6ZyA6KaB5YGa77yM5Zug5Li6Q3l0b3NjYXBlS0fph4zlgZrkuoYKCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgc2l6ZSA9IE51bWJlcihuZXdWYWwpOwoKICAgICAgaWYgKCFpc05hTihzaXplKSkgewogICAgICAgIHRoaXMuc2V0Tm9kZUZvbnRTaXplKG5ld1ZhbCk7IC8v5ZCM5q2l5pS55Y+Yd29ya3NwYWNl5Lit55qEbm9kZU5vZGVGb250U2l6ZQoKICAgICAgICBzaXplID0gcGFyc2VJbnQoc2l6ZSk7CgogICAgICAgIHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5jeS5ub2RlcygpKSwKICAgICAgICAgICAgX3N0ZXAzOwoKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIG5vZGUgPSBfc3RlcDMudmFsdWU7CiAgICAgICAgICAgIG5vZGUuc3R5bGUoJ2ZvbnQtc2l6ZScsIHNpemUgKyAncHgnKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvcjMuZShlcnIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBfaXRlcmF0b3IzLmYoKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKG5ld1ZhbCAhPT0gJycpIHsKICAgICAgICAgIHRoaXMuaW5mb3JtTXNnKCdlcnJvcicsICfor7fovpPlhaXmlbDlrZcnKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuc2V0Tm9kZUZvbnRTaXplKCcnKTsgLy/lkIzmraXmlLnlj5h3b3Jrc3BhY2XkuK3nmoRub2RlTm9kZUZvbnRTaXplCiAgICAgICAgLy9DeXRvc2NhcGVLR+S4reWcqOebkeWQrOWIsHdvcmtzcGFjZeS4rW5vZGVGb250U2l6ZeWImuWPmOWbnicn5pe2CiAgICAgICAgLy/kvJrmoLnmja7oioLngrnlpKflsI/lkozlrZfmlbDph43mlrDmuLLmn5PlkITkuKroioLngrnnmoTlrZfkvZPlpKflsI/vvIzmiYDku6XkuI3og73nlKjnu5/kuIDpu5jorqTlgLwKICAgICAgICAvL+atpOWkhOS7gOS5iOS5n+S4jemcgOimgeWBmu+8jOWboOS4ukN5dG9zY2FwZUtH6YeM5YGa5LqGCiAgICAgIH0KICAgIH0sCiAgICBub2RlX3JhZGl1czogZnVuY3Rpb24gbm9kZV9yYWRpdXMobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgaWYgKG5ld1ZhbCA9PT0gJycpIHsKICAgICAgICB0aGlzLnNldE5vZGVSYWRpdXMoJycpOyAvL+WQjOatpeaUueWPmHdvcmtzcGFjZeS4reeahG5vZGVSYWRpdXMKCiAgICAgICAgdmFyIF9pdGVyYXRvcjQgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLmN5Lm5vZGVzKCkpLAogICAgICAgICAgICBfc3RlcDQ7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKF9pdGVyYXRvcjQucygpOyAhKF9zdGVwNCA9IF9pdGVyYXRvcjQubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgbm9kZSA9IF9zdGVwNC52YWx1ZTsKICAgICAgICAgICAgbm9kZS5yZW1vdmVTdHlsZSgnd2lkdGgnKTsKICAgICAgICAgICAgbm9kZS5yZW1vdmVTdHlsZSgnaGVpZ2h0Jyk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3I0LmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yNC5mKCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciByYWRpdXMgPSBOdW1iZXIobmV3VmFsKTsKCiAgICAgIGlmICghaXNOYU4ocmFkaXVzKSkgewogICAgICAgIHJhZGl1cyA9IHBhcnNlSW50KHJhZGl1cyk7CiAgICAgICAgdmFyIHJlYWxSYWRpdXMgPSByYWRpdXMgKiAyOwogICAgICAgIHRoaXMuc2V0Tm9kZVJhZGl1cyhyZWFsUmFkaXVzICsgIiIpOyAvL+WQjOatpeaUueWPmHdvcmtzcGFjZeS4reeahG5vZGVSYWRpdXMKCiAgICAgICAgdmFyIF9pdGVyYXRvcjUgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLmN5Lm5vZGVzKCkpLAogICAgICAgICAgICBfc3RlcDU7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKF9pdGVyYXRvcjUucygpOyAhKF9zdGVwNSA9IF9pdGVyYXRvcjUubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgX25vZGUyID0gX3N0ZXA1LnZhbHVlOwoKICAgICAgICAgICAgLy/mmK/kuI3mmK/opoHmlLnmiJDnrYnmr5TkvovmianlpKfvvJ8KICAgICAgICAgICAgX25vZGUyLnN0eWxlKCd3aWR0aCcsIHJlYWxSYWRpdXMgKyAncHgnKTsKCiAgICAgICAgICAgIF9ub2RlMi5zdHlsZSgnaGVpZ2h0JywgcmVhbFJhZGl1cyArICdweCcpOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2l0ZXJhdG9yNS5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvcjUuZigpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNldE5vZGVSYWRpdXMoJycpOyAvL+WQjOatpeaUueWPmHdvcmtzcGFjZeS4reeahG5vZGVSYWRpdXMKCiAgICAgICAgaWYgKG5ld1ZhbCAhPT0gJycpIHsKICAgICAgICAgIHRoaXMuaW5mb3JtTXNnKCdlcnJvcicsICfor7fovpPlhaXmlbDlrZcnKTsKICAgICAgICB9CgogICAgICAgIHZhciBfaXRlcmF0b3I2ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5jeS5ub2RlcygpKSwKICAgICAgICAgICAgX3N0ZXA2OwoKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3I2LnMoKTsgIShfc3RlcDYgPSBfaXRlcmF0b3I2Lm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIF9ub2RlMyA9IF9zdGVwNi52YWx1ZTsKCiAgICAgICAgICAgIF9ub2RlMy5yZW1vdmVTdHlsZSgnd2lkdGgnKTsKCiAgICAgICAgICAgIF9ub2RlMy5yZW1vdmVTdHlsZSgnaGVpZ2h0Jyk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3I2LmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yNi5mKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBTdGF0ZSh7CiAgICBjeTogZnVuY3Rpb24gY3koc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLndvcmtzcGFjZS5jeTsKICAgIH0sCiAgICBzdGF0aXN0aWNfZGF0YV9jaGFuZ2U6IGZ1bmN0aW9uIHN0YXRpc3RpY19kYXRhX2NoYW5nZShzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUud29ya3NwYWNlLnN0YXRpc3RpY19kYXRhX2NoYW5nZTsKICAgIH0sCiAgICBub2RlVHlwZTogZnVuY3Rpb24gbm9kZVR5cGUoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLndvcmtzcGFjZS5ub2RlVHlwZTsKICAgIH0sCiAgICBlZGdlVHlwZTogZnVuY3Rpb24gZWRnZVR5cGUoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLndvcmtzcGFjZS5lZGdlVHlwZTsKICAgIH0sCiAgICBsYXlvdXRUeXBlOiBmdW5jdGlvbiBsYXlvdXRUeXBlKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS53b3Jrc3BhY2UubGF5b3V0VHlwZTsKICAgIH0sCiAgICBlbGVtZW50czogZnVuY3Rpb24gZWxlbWVudHMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLndvcmtzcGFjZS5lbGVtZW50czsKICAgIH0sCiAgICBwaWQ6IGZ1bmN0aW9uIHBpZChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUucGlkOwogICAgfQogIH0pKSwge30sIHsKICAgIG5vZGVfY2hlY2tMaXN0X2Rpc2FibGVkOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHJldHVybiAhdGhpcy5maWx0ZXJfbm9kZV9jaGVja2VkOwogICAgICB9CiAgICB9LAogICAgZWRnZV9jaGVja0xpc3RfZGlzYWJsZWQ6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgcmV0dXJuICF0aGlzLmZpbHRlcl9lZGdlX2NoZWNrZWQ7CiAgICAgIH0KICAgIH0KICB9KSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcE11dGF0aW9ucyhbJ3NldEpzb25TcmNQYXRoJywgJ3NldFNlQ3VycmVudFNlYXJjaFBhcmFtcycsICdzZXRDdXJyZW50U2VhcmNoUmVzdWx0JywgJ3NldE5vZGVSYWRpdXMnLCAnc2V0Tm9kZUZvbnRTaXplJywgJ3NldFByb2plY3QnLCAnY2hhbmdlU2hvd1FBUGFuZWwnXSkpLCB7fSwgewogICAgY2hhbmdlRWRpdEJhclN0YXRlOiBmdW5jdGlvbiBjaGFuZ2VFZGl0QmFyU3RhdGUoKSB7CiAgICAgIHRoaXMuc2hvd0VkaXRCYXIgPSAhdGhpcy5zaG93RWRpdEJhcjsKICAgIH0sCiAgICBvcGVuOiBmdW5jdGlvbiBvcGVuKCkgewogICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJjaG9vc2UtZmlsZSIpWzBdLmNsaWNrKCk7CiAgICB9LAogICAgZ2V0RmlsZVBhdGg6IGZ1bmN0aW9uIGdldEZpbGVQYXRoKCkgewogICAgICAvL+iOt+WPluivu+WPluaIkeaWh+S7tueahEZpbGXlr7nosaEKICAgICAgdmFyIHNlbGVjdGVkRmlsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImNob29zZS1maWxlIilbMF0uZmlsZXNbMF07CiAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOyAvL+i/meaYr+aguOW/gyzor7vlj5bmk43kvZzlsLHmmK/nlLHlroPlrozmiJAuCgogICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChzZWxlY3RlZEZpbGUpOwogICAgICByZWFkZXIudGhhdCA9IHRoaXM7CgogICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgIC8v5b2T6K+75Y+W5a6M5oiQ5ZCO5Zue6LCD6L+Z5Liq5Ye95pWwLOeEtuWQjuatpOaXtuaWh+S7tueahOWGheWuueWtmOWCqOWIsOS6hnRoaXMucmVzdWx05LitLOebtOaOpeaTjeS9nOWNs+WPrwogICAgICAgIHRoaXMudGhhdC5zZXRKc29uU3JjUGF0aCh0aGlzLnJlc3VsdCk7CiAgICAgIH07CiAgICB9LAogICAgc2F2ZTogZnVuY3Rpb24gc2F2ZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBkYXRhID0ge307CiAgICAgIHZhciBncmFwaERhdGEgPSB0aGlzLmdldERhdGFKc29uT2JqZWN0KCk7CiAgICAgIGRhdGEgPSB7CiAgICAgICAgbm9kZXM6IGdyYXBoRGF0YS5ub2RlcywKICAgICAgICBlZGdlczogZ3JhcGhEYXRhLmVkZ2VzCiAgICAgIH07CiAgICAgIGRhdGEgPSB0aGlzLmdldENsZWFuRGF0YShkYXRhKTsKICAgICAgY29uc29sZS5sb2coIuimgeS/neWtmOeahOaVsOaNru+8miIsIGRhdGEpOwogICAgICB2YXIgbG9hZGluZyA9IHRoaXMuJGxvYWRpbmcoewogICAgICAgIGxvY2s6IHRydWUsCiAgICAgICAgdGV4dDogJy4uLuS/neWtmOS4rS4uLicsCiAgICAgICAgc3Bpbm5lcjogJ2VsLWljb24tbG9hZGluZycsCiAgICAgICAgYmFja2dyb3VuZDogJ3JnYmEoMjU1LCAyNTUsMjU1LCAwLjgpJwogICAgICB9KTsKICAgICAgaW5wdXRLRyhfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRhdGEpLCB7fSwgewogICAgICAgIHBpZDogdGhpcy5waWQKICAgICAgfSkpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgX3RoaXMuc2V0UHJvamVjdChkYXRhKTsKCiAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfkv53lrZjmiJDlip8nKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S/neWtmOWksei0pScpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CgogICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKCfnvZHnu5zplJnor6/miJbmnI3liqHlmajplJnor68nKTsKICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICB9KTsKICAgIH0sCiAgICBjaGFuZ2VFeHBvcnRTdGF0ZTogZnVuY3Rpb24gY2hhbmdlRXhwb3J0U3RhdGUoKSB7CiAgICAgIHRoaXMuc2hvd0V4cG9ydE9wcyA9ICF0aGlzLnNob3dFeHBvcnRPcHM7CiAgICB9LAoKICAgIC8qKgogICAgICog5a+85Ye65YWo5bGA5Zu+54mHLgogICAgICogb3B0aW9uczogVGhlIGV4cG9ydCBvcHRpb25zLgogICAgIG91dHB1dO+8miBXaGV0aGVyIHRoZSBvdXRwdXQgc2hvdWxkIGJlICdiYXNlNjR1cmknIChkZWZhdWx0KSwgJ2Jhc2U2NCcsICdibG9iJywgb3IgJ2Jsb2ItcHJvbWlzZScgKGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBibG9iIGlzIHJldHVybmVkKS4KICAgICBiZzogVGhlIGJhY2tncm91bmQgY29sb3VyIG9mIHRoZSBpbWFnZSAodHJhbnNwYXJlbnQgYnkgZGVmYXVsdCkuCiAgICAgZnVsbDogV2hldGhlciB0byBleHBvcnQgdGhlIGN1cnJlbnQgdmlld3BvcnQgdmlldyAoZmFsc2UsIGRlZmF1bHQpIG9yIHRoZSBlbnRpcmUgZ3JhcGggKHRydWUpLgogICAgIHNjYWxlOiBUaGlzIHZhbHVlIHNwZWNpZmllcyBhIHBvc2l0aXZlIG51bWJlciB0aGF0IHNjYWxlcyB0aGUgc2l6ZSBvZiB0aGUgcmVzdWx0YW50IGltYWdlLgogICAgIG1heFdpZHRoOiBTcGVjaWZpZXMgdGhlIHNjYWxlIGF1dG9tYXRpY2FsbHkgaW4gY29tYmluYXRpb24gd2l0aCBtYXhIZWlnaHQgc3VjaCB0aGF0IHRoZSByZXN1bHRhbnQgaW1hZ2UgaXMgbm8gd2lkZXIgdGhhbiBtYXhXaWR0aC4KICAgICBtYXhIZWlnaHQ6IFNwZWNpZmllcyB0aGUgc2NhbGUgYXV0b21hdGljYWxseSBpbiBjb21iaW5hdGlvbiB3aXRoIG1heFdpZHRoIHN1Y2ggdGhhdCB0aGUgcmVzdWx0YW50IGltYWdlIGlzIG5vIHRhbGxlciB0aGFuIG1heEhlaWdodAogICAgICovCiAgICBleHBvcnRQbmc6IGZ1bmN0aW9uIGV4cG9ydFBuZygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuato+WcqOWvvOWHuuWbvueJhy4uLiIpOwogICAgICB2YXIgYmxvYiA9IHRoaXMuY3kucG5nKHsKICAgICAgICBvdXRwdXQ6ICdibG9iLXByb21pc2UnLAogICAgICAgIGJnOiAnd2hpdGUnLAogICAgICAgIGZ1bGw6IHRydWUsCiAgICAgICAgc2NhbGU6IDQKICAgICAgfSk7CiAgICAgIGJsb2IudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgLy/liJvlu7rkuIvovb3pk77mjqUKICAgICAgICB2YXIgYUxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgYUxpbmsuZG93bmxvYWQgPSBfdGhpczIuZ2VuZXJhdGVGaWxlTmFtZSgpICsgJy5wbmcnOwogICAgICAgIHZhciB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChyZXMpOwogICAgICAgIGFMaW5rLmhyZWYgPSB1cmw7IC8v5Yib5bu644CB5YiG6YWN5bm26Kem5Y+R54K55Ye75LqL5Lu2CgogICAgICAgIHZhciBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgiTW91c2VFdmVudHMiKTsKICAgICAgICBldnQuaW5pdEV2ZW50KCJjbGljayIsIHRydWUsIHRydWUpOwogICAgICAgIGFMaW5rLmRpc3BhdGNoRXZlbnQoZXZ0KTsgLy8g6YeK5pS+5o6JYmxvYuWvueixoQoKICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coIkVycm9yIG9jY3VyZWQ6ICIsIGVycik7CgogICAgICAgIGlmIChfdGhpczIuY3kuZWxlbWVudHMoKS5sZW5ndGggPT09IDApIHsKICAgICAgICAgIF90aGlzMi4kbWVzc2FnZS5lcnJvcigi55+l6K+G5Zu+6LCx5bey57uP56m65ZWm77yM5a+85LiN5Ye65Lic6KW/55qE5ZGAIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgLyoqCiAgICAgKiDlr7nosaHmi7fotJ0KICAgICAqIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSnmiJHku6zkuIDoiKznlKjmnaXmt7Hmi7fotJ0KICAgICDkvYbkuI3mmK/lrozlhajmt7Hmi7fotJ3vvIzmnInku6XkuIvnibnngrnvvJoKICAgICAx44CB5aaC5p6cb2Jq6YeM6Z2i5pyJ5pe26Ze05a+56LGh77yM5YiZSlNPTi5zdHJpbmdpZnnlkI7lho1KU09OLnBhcnNl55qE57uT5p6c77yM5pe26Ze05bCG5Y+q5piv5a2X56ym5Liy55qE5b2i5byP44CC6ICM5LiN5piv5pe26Ze05a+56LGh77ybCiAgICAgMuOAgeWmguaenG9iaumHjOaciVJlZ0V4cOOAgUVycm9y5a+56LGh77yM5YiZ5bqP5YiX5YyW55qE57uT5p6c5bCG5Y+q5b6X5Yiw56m65a+56LGh77ybCiAgICAgM+OAgeWmguaenG9iaumHjOacieWHveaVsO+8jHVuZGVmaW5lZO+8jOWImeW6j+WIl+WMlueahOe7k+aenOS8muaKiuWHveaVsOaIliB1bmRlZmluZWTkuKLlpLHvvJsKICAgICA044CB5aaC5p6cb2Jq6YeM5pyJTmFO44CBSW5maW5pdHnlkowtSW5maW5pdHnvvIzliJnluo/liJfljJbnmoTnu5PmnpzkvJrlj5jmiJBudWxsCiAgICAgNeOAgUpTT04uc3RyaW5naWZ5KCnlj6rog73luo/liJfljJblr7nosaHnmoTlj6/mnprkuL7nmoToh6rmnInlsZ7mgKfvvIzkvovlpoIg5aaC5p6cb2Jq5Lit55qE5a+56LGh5piv5pyJ5p6E6YCg5Ye95pWw55Sf5oiQ55qE77yMIOWImeS9v+eUqEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSnmt7Hmi7fotJ3lkI7vvIzkvJrkuKLlvIPlr7nosaHnmoRjb25zdHJ1Y3Rvcu+8mwogICAgIDbjgIHlpoLmnpzlr7nosaHkuK3lrZjlnKjlvqrnjq/lvJXnlKjnmoTmg4XlhrXkuZ/ml6Dms5XmraPnoa7lrp7njrDmt7Hmi7fotJ3vvJsKICAgICAg5rOo77ya55Sx5LqO5YmN5ZCO56uv5pWw5o2u5qC85byP5LiN57uf5LiA77yM6L+Z6YeM5a+55pWw5o2u5qC85byP5YGa5LqG6L2s5YyW44CCCiAgICAg5pel5ZCO5YmNL+WQjuerr+acieS/ruaUueaXtui/memHjOmDveimgeaUue+8gQogICAgICovCiAgICBnZXREYXRhSnNvbk9iamVjdDogZnVuY3Rpb24gZ2V0RGF0YUpzb25PYmplY3QoKSB7CiAgICAgIHZhciBlbGVzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmN5Lmpzb24oKS5lbGVtZW50cykpOyAvL+WFtuWunua3seaLt+i0neWPr+iDveayoeWVpeaEj+S5ie+8jOWPquaYr+WNlee6r+ebtOinieS4iuaDs+eUqOS4gOeUqCgq4pW54pa94pW5KikKCiAgICAgIHZhciBvYmogPSB7CiAgICAgICAgImVkZ2VzIjogW10sCiAgICAgICAgIm5vZGVzIjogW10KICAgICAgfTsKCiAgICAgIGlmIChKU09OLnN0cmluZ2lmeShlbGVzKSAhPT0gJ3t9JykgewogICAgICAgIGlmIChlbGVzLmVkZ2VzICE9PSB1bmRlZmluZWQgJiYgZWxlcy5lZGdlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBlbGVzLmVkZ2VzLmZvckVhY2goZnVuY3Rpb24gKHZhbCkgewogICAgICAgICAgICBvYmouZWRnZXMucHVzaCh7CiAgICAgICAgICAgICAgZGF0YTogdmFsLmRhdGEKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGlmIChlbGVzLm5vZGVzICE9PSB1bmRlZmluZWQgJiYgZWxlcy5ub2Rlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBlbGVzLm5vZGVzLmZvckVhY2goZnVuY3Rpb24gKHZhbCkgewogICAgICAgICAgICBvYmoubm9kZXMucHVzaCh7CiAgICAgICAgICAgICAgZGF0YTogdmFsLmRhdGEsCiAgICAgICAgICAgICAgcG9zaXRpb246IHZhbC5wb3NpdGlvbgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG9iajsKICAgIH0sCiAgICBnZXRDbGVhbkRhdGE6IGZ1bmN0aW9uIGdldENsZWFuRGF0YShlbGVzKSB7CiAgICAgIHZhciBvYmogPSB7CiAgICAgICAgImVkZ2VzIjogW10sCiAgICAgICAgIm5vZGVzIjogW10KICAgICAgfTsKCiAgICAgIGlmIChKU09OLnN0cmluZ2lmeShlbGVzKSAhPT0gJ3t9JykgewogICAgICAgIGlmIChlbGVzLmVkZ2VzICE9PSB1bmRlZmluZWQgJiYgZWxlcy5lZGdlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBlbGVzLmVkZ2VzLmZvckVhY2goZnVuY3Rpb24gKHZhbCkgewogICAgICAgICAgICBvYmouZWRnZXMucHVzaCh7CiAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgaWQ6IHZhbC5kYXRhLmlkLAogICAgICAgICAgICAgICAgdHlwZTogdmFsLmRhdGEudHlwZSwKICAgICAgICAgICAgICAgIHJlbGF0aW9uOiB2YWwuZGF0YS5yZWxhdGlvbiwKICAgICAgICAgICAgICAgIHNvdXJjZTogdmFsLmRhdGEuc291cmNlLAogICAgICAgICAgICAgICAgdGFyZ2V0OiB2YWwuZGF0YS50YXJnZXQKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoZWxlcy5ub2RlcyAhPT0gdW5kZWZpbmVkICYmIGVsZXMubm9kZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgZWxlcy5ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgICAgb2JqLm5vZGVzLnB1c2goewogICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgIGlkOiB2YWwuZGF0YS5pZCwKICAgICAgICAgICAgICAgIHR5cGU6IHZhbC5kYXRhLnR5cGUsCiAgICAgICAgICAgICAgICBuYW1lOiB2YWwuZGF0YS5uYW1lLAogICAgICAgICAgICAgICAgcHJvcGVydHk6IHZhbC5kYXRhLnByb3BlcnR5CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBwb3NpdGlvbjogdmFsLnBvc2l0aW9uCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gb2JqOwogICAgfSwKICAgIGV4cG9ydEpzb246IGZ1bmN0aW9uIGV4cG9ydEpzb24oKSB7CiAgICAgIHRoaXMuJG1lc3NhZ2UoIuato+WcqOWvvOWHumpzb24uLi4iKTsgLy/mnInnqbrkuZ/lj6/ku6XmlLnmiJBwcm9taXNl5byP55qECgogICAgICB2YXIgZGF0YSA9IHRoaXMuZ2V0RGF0YUpzb25PYmplY3QoKTsKICAgICAgdmFyIGZpbGVuYW1lID0gdGhpcy5nZW5lcmF0ZUZpbGVOYW1lKCkgKyAnLmpzb24nOwoKICAgICAgaWYgKF90eXBlb2YoZGF0YSkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgZGF0YSA9IEpTT04uc3RyaW5naWZ5KGRhdGEsIHVuZGVmaW5lZCwgNCk7CiAgICAgIH0gLy8g6KaB5Yib5bu65LiA5LiqIGJsb2Ig5pWw5o2uCgoKICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbZGF0YV0sIHsKICAgICAgICB0eXBlOiAndGV4dC9qc29uJwogICAgICB9KSwKICAgICAgICAgIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgIGEuZG93bmxvYWQgPSBmaWxlbmFtZTsgLy8g5bCGYmxvYui9rOaNouS4uuWcsOWdgAogICAgICAvLyDliJvlu7ogVVJMIOeahCBCbG9iIOWvueixoQoKICAgICAgdmFyIHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICBhLmhyZWYgPSB1cmw7IC8vIOagh+etviBkYXRhLSDltYzlhaXoh6rlrprkuYnlsZ7mgKcgIOWxj+iUveWQjuS5n+WPr+ato+W4uOS4i+i9vQoKICAgICAgYS5kYXRhc2V0LmRvd25sb2FkdXJsID0gWyd0ZXh0L2pzb24nLCBhLmRvd25sb2FkLCBhLmhyZWZdLmpvaW4oJzonKTsgLy8g5re75Yqg6byg5qCH5LqL5Lu25bm25ZCR5LiA5Liq5oyH5a6a55qE5LqL5Lu255uu5qCH5rS+5Y+RCgogICAgICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdNb3VzZUV2ZW50cycpOwogICAgICBlLmluaXRNb3VzZUV2ZW50KCdjbGljaycsIHRydWUsIGZhbHNlLCB3aW5kb3csIDAsIDAsIDAsIDAsIDAsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCAwLCBudWxsKTsKICAgICAgYS5kaXNwYXRjaEV2ZW50KGUpOyAvLyDph4rmlL7mjolibG9i5a+56LGhCgogICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOwogICAgfSwKICAgIGdlbmVyYXRlRmlsZU5hbWU6IGZ1bmN0aW9uIGdlbmVyYXRlRmlsZU5hbWUoKSB7CiAgICAgIHZhciBuYW1lID0gIiI7CgogICAgICB0cnkgewogICAgICAgIG5hbWUgPSB0aGlzLmN1cnJlbnRfcHJvamVjdC5wcm9qZWN0X25hbWU7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjb25zb2xlLmxvZygiRXJyb3Igb2NjdXJzOiIgKyBlKTsKICAgICAgICBjb25zb2xlLmxvZygi5Y+v6IO95pyq6L+e5o6l5YiwU2VydmVyIik7CiAgICAgICAgbmFtZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICB9CgogICAgICByZXR1cm4gbmFtZTsKICAgIH0sCgogICAgLyoqCiAgICAgKiDojrflj5bnu5/orqHmlbDmja7vvIzljbPnu5kgZGF0YSDkuK3nmoQgZW50aXRpZXNfZGF0YSDlkowgcmVsYWlvbnNfZGF0YSDotYvlgLwKICAgICAqLwogICAgZ2V0X3N0YXRpc3RpY19kYXRhOiBmdW5jdGlvbiBnZXRfc3RhdGlzdGljX2RhdGEoKSB7CiAgICAgIHZhciBkYXRhID0gdGhpcy5nZXREYXRhSnNvbk9iamVjdCgpOwogICAgICB2YXIgbm9kZXMgPSBkYXRhLm5vZGVzLAogICAgICAgICAgZWRnZXMgPSBkYXRhLmVkZ2VzOwogICAgICB2YXIgRURhdGEgPSB7CiAgICAgICAgaW5kaXZpZHVhbDogMCwKICAgICAgICBvcmdhbml6YXRpb246IDAsCiAgICAgICAgdGhpbmc6IDAsCiAgICAgICAgZGVmYXVsdDogMCwKICAgICAgICB0b3RhbDogbm9kZXMubGVuZ3RoCiAgICAgIH07CgogICAgICB2YXIgX2l0ZXJhdG9yNyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG5vZGVzKSwKICAgICAgICAgIF9zdGVwNzsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3I3LnMoKTsgIShfc3RlcDcgPSBfaXRlcmF0b3I3Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBub2RlID0gX3N0ZXA3LnZhbHVlOwoKICAgICAgICAgIGlmICghKG5vZGUuZGF0YS50eXBlID09ICdpbmRpdmlkdWFsJyB8fCBub2RlLmRhdGEudHlwZSA9PSAnb3JnYW5pemF0aW9uJyB8fCBub2RlLmRhdGEudHlwZSA9PSAndGhpbmcnKSkgewogICAgICAgICAgICBFRGF0YVsnZGVmYXVsdCddKys7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBFRGF0YVtub2RlLmRhdGEudHlwZV0rKzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjcuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjcuZigpOwogICAgICB9CgogICAgICB2YXIgUkRhdGEgPSB7CiAgICAgICAgY29ubmVjdGlvbjogMCwKICAgICAgICBpbmhlcml0YW5jZTogMCwKICAgICAgICBkZWZhdWx0OiAwLAogICAgICAgIHRvdGFsOiBlZGdlcy5sZW5ndGgKICAgICAgfTsKCiAgICAgIHZhciBfaXRlcmF0b3I4ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoZWRnZXMpLAogICAgICAgICAgX3N0ZXA4OwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjgucygpOyAhKF9zdGVwOCA9IF9pdGVyYXRvcjgubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGVkZ2UgPSBfc3RlcDgudmFsdWU7CiAgICAgICAgICBSRGF0YVtlZGdlLmRhdGEudHlwZV0rKzsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjguZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjguZigpOwogICAgICB9CgogICAgICB0aGlzLmVudGl0aWVzX2RhdGEgPSBbRURhdGFdOwogICAgICB0aGlzLnJlbGF0aW9uc19kYXRhID0gW1JEYXRhXTsKICAgIH0sCiAgICAvLyDku6XkuIvkuLrmkJzntKLnm7jlhbMKICAgIGNoZWNrS2V5V29yZHM6IGZ1bmN0aW9uIGNoZWNrS2V5V29yZHModGV4dCkgewogICAgICB2YXIgbmFtZVZhbGlkID0gL1xTLzsKICAgICAgdmFyIGtleVdvcmRzID0gW107CiAgICAgIHRleHQuZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgLy/moKHpqozjgIHljrvph40KICAgICAgICBpZiAobmFtZVZhbGlkLnRlc3QodmFsKSkgewogICAgICAgICAgdmFyIGl0ZW0gPSB2YWwudHJpbSgpOwogICAgICAgICAgaWYgKCFrZXlXb3Jkcy5pbmNsdWRlcyhpdGVtKSkga2V5V29yZHMucHVzaChpdGVtKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4ga2V5V29yZHM7CiAgICB9LAogICAgc2F2ZVNlYXJjaExvZzogZnVuY3Rpb24gc2F2ZVNlYXJjaExvZyhrZXlXb3JkcywgbG9nKSB7CiAgICAgIC8v5re75Yqg5pCc57Si5pel5b+XCiAgICAgIGtleVdvcmRzLmZvckVhY2goZnVuY3Rpb24gKHZhbCkgewogICAgICAgIHZhciBpbmRleCA9IGxvZy5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBpdGVtID09PSB2YWw7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChpbmRleCA8IDApIHsKICAgICAgICAgIC8v5pu05paw5pel5b+X5L2N572uCiAgICAgICAgICBsb2cudW5zaGlmdCh2YWwpOyAvL+a3u+WKoOWcqOWktOmDqAogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHZhciBtYXhMZW4gPSB0aGlzLm1heF9sb2dfbGVuOwoKICAgICAgaWYgKGxvZy5sZW5ndGggPiBtYXhMZW4pIHsKICAgICAgICAvL+a4hemZpOWkmuS9meeahOaXqeacn+WOhuWPsuiusOW9lQogICAgICAgIGxvZy5zbGljZShtYXhMZW4sIGxvZy5sZW5ndGggLSBtYXhMZW4pOwogICAgICB9CiAgICB9LAogICAgc2VhcmNoTm9kZTogZnVuY3Rpb24gc2VhcmNoTm9kZSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIga2V5V29yZHMgPSB0aGlzLmNoZWNrS2V5V29yZHModGhpcy5zZWFyY2hfbm9kZV90ZXh0KTsKICAgICAgdmFyIGNvbmRpdGlvbiA9IHRoaXMuc2VhcmNoX25vZGVfY29uZGl0aW9uOwogICAgICB0aGlzLnNlYXJjaF9ub2RlX3RleHQgPSBrZXlXb3JkczsgLy/oh6rliqjnroDljJbmkJzntKLmoYblhoXlrrkKCiAgICAgIGlmIChrZXlXb3Jkcy5sZW5ndGggPT09IDAgfHwgY29uZGl0aW9uLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHRoaXMuaW5mb3JtTXNnKCdlcnJvcicsICfor7fnoa7orqTmkJzntKLlhoXlrrnlkoznrZvpgInmnaHku7bpg73kuI3kuLrnqbrlk6YnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKCIoa2V5V29yZHMsIGNvbmRpdGlvbiwgbG9nKSBiZWZvcmUgc2F2ZUxvZyIsIGtleVdvcmRzLCBjb25kaXRpb24sIHRoaXMuc2VhcmNoX25vZGVfbG9nKTsgLy/lvIDlp4vkuIDmrKHmkJzntKIKCiAgICAgIHRoaXMuc2F2ZVNlYXJjaExvZyhrZXlXb3JkcywgdGhpcy5zZWFyY2hfbm9kZV9sb2cpOyAvL+S/neWtmOaQnOe0ouWOhuWPsgoKICAgICAgY29uc29sZS5sb2coIihrZXlXb3JkcywgY29uZGl0aW9uLCBsb2cpIGFmdGVyIHNhdmVMb2ciLCBrZXlXb3JkcywgY29uZGl0aW9uLCB0aGlzLnNlYXJjaF9ub2RlX2xvZyk7CiAgICAgIHZhciBieU5hbWUgPSBjb25kaXRpb24uaW5jbHVkZXMoJ25hbWUnKTsKICAgICAgdmFyIGJ5UmVsYXRpb24gPSBjb25kaXRpb24uaW5jbHVkZXMoJ3JlbGF0aW9uJyk7CiAgICAgIHZhciBieVByb3AgPSBjb25kaXRpb24uaW5jbHVkZXMoJ3Byb3BlcnR5Jyk7CiAgICAgIHZhciBub2RlcyA9IHRoaXMuY3kubm9kZXMoKTsKICAgICAgdmFyIGNvdW50ID0gMDsKICAgICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgaWYgKHZhbC5oYXNDbGFzcygnc2VhcmNoZWROb2RlJykpIHsKICAgICAgICAgIHZhbC5yZW1vdmVDbGFzcygnc2VhcmNoZWROb2RlJyk7CiAgICAgICAgfQoKICAgICAgICB2YXIgdmFsTmFtZSA9IHZhbC5kYXRhKCJuYW1lIik7CiAgICAgICAgdmFyIHZhbFByb3BzID0gdmFsLmRhdGEoInByb3BlcnR5Iik7CiAgICAgICAgdmFyIGVkZ2VzID0gdmFsLmNvbm5lY3RlZEVkZ2VzKCk7CiAgICAgICAgdmFyIGhpdCA9IGZhbHNlOwogICAgICAgIHZhciByZWxhSGl0OwogICAgICAgIHZhciBwcm9wSGl0OwoKICAgICAgICB2YXIgX2l0ZXJhdG9yOSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGtleVdvcmRzKSwKICAgICAgICAgICAgX3N0ZXA5OwoKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3I5LnMoKTsgIShfc3RlcDkgPSBfaXRlcmF0b3I5Lm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIGtleSA9IF9zdGVwOS52YWx1ZTsKCiAgICAgICAgICAgIGlmIChieU5hbWUgJiYgX3RoaXMzLmZ1enp5TWF0Y2godmFsTmFtZSwga2V5KSkgewogICAgICAgICAgICAgIGhpdCA9IHRydWU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChieVByb3ApIHsKICAgICAgICAgICAgICBwcm9wSGl0ID0gZmFsc2U7CgogICAgICAgICAgICAgIHZhciBfaXRlcmF0b3IxMCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHZhbFByb3BzKSwKICAgICAgICAgICAgICAgICAgX3N0ZXAxMDsKCiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMTAucygpOyAhKF9zdGVwMTAgPSBfaXRlcmF0b3IxMC5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX3N0ZXAxMC52YWx1ZTsKCiAgICAgICAgICAgICAgICAgIGlmIChfdGhpczMuZnV6enlNYXRjaChwcm9wLCBrZXkpKSB7CiAgICAgICAgICAgICAgICAgICAgcHJvcEhpdCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgIF9pdGVyYXRvcjEwLmUoZXJyKTsKICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgX2l0ZXJhdG9yMTAuZigpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKHByb3BIaXQpIHsKICAgICAgICAgICAgICAgIGhpdCA9IHRydWU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChieVJlbGF0aW9uKSB7CiAgICAgICAgICAgICAgcmVsYUhpdCA9IGZhbHNlOwoKICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yMTEgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihlZGdlcyksCiAgICAgICAgICAgICAgICAgIF9zdGVwMTE7CgogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjExLnMoKTsgIShfc3RlcDExID0gX2l0ZXJhdG9yMTEubigpKS5kb25lOykgewogICAgICAgICAgICAgICAgICB2YXIgZWRnZSA9IF9zdGVwMTEudmFsdWU7CiAgICAgICAgICAgICAgICAgIHZhciBlZGdlTmFtZSA9IGVkZ2UuZGF0YSgicmVsYXRpb24iKTsKCiAgICAgICAgICAgICAgICAgIGlmIChfdGhpczMuZnV6enlNYXRjaChlZGdlTmFtZSwga2V5KSkgewogICAgICAgICAgICAgICAgICAgIHJlbGFIaXQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3IxMS5lKGVycik7CiAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgIF9pdGVyYXRvcjExLmYoKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChyZWxhSGl0KSB7CiAgICAgICAgICAgICAgICBoaXQgPSB0cnVlOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3I5LmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yOS5mKCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoaGl0KSB7CiAgICAgICAgICBjb3VudCArPSAxOwogICAgICAgICAgdmFsLmFkZENsYXNzKCdzZWFyY2hlZE5vZGUnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmluZm9ybVJlc3VsdChjb3VudCA+IDAsICfmkJzntKLlrozmr5UnLCAn5pyq5om+5Yiw56ym5ZCI5p2h5Lu255qE57uT5p6cJyk7CiAgICAgIHRoaXMubm9kZV9zZWFyY2hlZCA9IHRydWU7CiAgICB9LAogICAgc2VhcmNoRWRnZTogZnVuY3Rpb24gc2VhcmNoRWRnZSgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB2YXIga2V5V29yZHMgPSB0aGlzLmNoZWNrS2V5V29yZHModGhpcy5zZWFyY2hfZWRnZV90ZXh0KTsKICAgICAgdmFyIGNvbmRpdGlvbiA9IHRoaXMuc2VhcmNoX2VkZ2VfY29uZGl0aW9uOwogICAgICB0aGlzLnNlYXJjaF9lZGdlX3RleHQgPSBrZXlXb3JkczsgLy/oh6rliqjnroDljJbmkJzntKLmoYblhoXlrrkKCiAgICAgIGlmIChrZXlXb3Jkcy5sZW5ndGggPT09IDAgfHwgY29uZGl0aW9uLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHRoaXMuaW5mb3JtTXNnKCdlcnJvcicsICfor7fnoa7orqTmkJzntKLlhoXlrrnlkoznrZvpgInmnaHku7bpg73kuI3kuLrnqbrlk6YnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy/lvIDlp4vkuIDmrKHmkJzntKIKCgogICAgICB0aGlzLnNhdmVTZWFyY2hMb2coa2V5V29yZHMsIHRoaXMuc2VhcmNoX2VkZ2VfbG9nKTsgLy/kv53lrZjmkJzntKLljoblj7IKCiAgICAgIHZhciBieU5hbWUgPSBjb25kaXRpb24uaW5jbHVkZXMoJ3JlbGF0aW9uJyk7CiAgICAgIHZhciBieVNvdXJjZSA9IGNvbmRpdGlvbi5pbmNsdWRlcygnc291cmNlJyk7CiAgICAgIHZhciBieVRhcmdldCA9IGNvbmRpdGlvbi5pbmNsdWRlcygndGFyZ2V0Jyk7CiAgICAgIHZhciBlZGdlcyA9IHRoaXMuY3kuZWRnZXMoKTsKICAgICAgdmFyIGNvdW50ID0gMDsKICAgICAgZWRnZXMuZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgaWYgKHZhbC5oYXNDbGFzcygnc2VhcmNoZWRFZGdlJykpIHsKICAgICAgICAgIHZhbC5yZW1vdmVDbGFzcygnc2VhcmNoZWRFZGdlJyk7CiAgICAgICAgfQoKICAgICAgICB2YXIgdmFsTmFtZSA9IHZhbC5kYXRhKCJyZWxhdGlvbiIpOwoKICAgICAgICB2YXIgdmFsU291cmNlID0gX3RoaXM0LmN5LiRpZCh2YWwuZGF0YSgic291cmNlIikpLmRhdGEoIm5hbWUiKTsKCiAgICAgICAgdmFyIHZhbFRhcmdldCA9IF90aGlzNC5jeS4kaWQodmFsLmRhdGEoInRhcmdldCIpKS5kYXRhKCJuYW1lIik7CgogICAgICAgIHZhciBoaXQgPSBmYWxzZTsKICAgICAgICB2YXIgbmFtZUhpdDsKICAgICAgICB2YXIgc0hpdDsKICAgICAgICB2YXIgdEhpdDsKCiAgICAgICAgdmFyIF9pdGVyYXRvcjEyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoa2V5V29yZHMpLAogICAgICAgICAgICBfc3RlcDEyOwoKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3IxMi5zKCk7ICEoX3N0ZXAxMiA9IF9pdGVyYXRvcjEyLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIGtleSA9IF9zdGVwMTIudmFsdWU7CgogICAgICAgICAgICBpZiAoYnlOYW1lICYmIF90aGlzNC5mdXp6eU1hdGNoKHZhbE5hbWUsIGtleSkgfHwgYnlTb3VyY2UgJiYgX3RoaXM0LmZ1enp5TWF0Y2godmFsU291cmNlLCBrZXkpIHx8IGJ5VGFyZ2V0ICYmIF90aGlzNC5mdXp6eU1hdGNoKHZhbFRhcmdldCwga2V5KSkgewogICAgICAgICAgICAgIGhpdCA9IHRydWU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvcjEyLmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yMTIuZigpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGhpdCkgewogICAgICAgICAgY291bnQgKz0gMTsKICAgICAgICAgIHZhbC5hZGRDbGFzcygnc2VhcmNoZWRFZGdlJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5pbmZvcm1SZXN1bHQoY291bnQgPiAwLCAn5pCc57Si5a6M5q+VJywgJ+acquaJvuWIsOespuWQiOadoeS7tueahOe7k+aenCcpOwogICAgICB0aGlzLmVkZ2Vfc2VhcmNoZWQgPSB0cnVlOwogICAgfSwKICAgIGluZm9ybVJlc3VsdDogZnVuY3Rpb24gaW5mb3JtUmVzdWx0KGlzU3VjY2Vzcywgc3VjY2Vzc19tc2csIGVycm9yX21zZykgewogICAgICBpZiAoaXNTdWNjZXNzKSB7CiAgICAgICAgdGhpcy5pbmZvcm1Nc2coJ3N1Y2Nlc3MnLCBzdWNjZXNzX21zZyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pbmZvcm1Nc2coJ2Vycm9yJywgZXJyb3JfbXNnKTsKICAgICAgfQogICAgfSwKICAgIGluZm9ybU1zZzogZnVuY3Rpb24gaW5mb3JtTXNnKHR5cGUsIG1zZykgewogICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICBtZXNzYWdlOiBtc2csCiAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICBkdXJhdGlvbjogMTUwMAogICAgICB9KTsKICAgIH0sCiAgICBmdXp6eU1hdGNoOiBmdW5jdGlvbiBmdXp6eU1hdGNoKHN0ciwga2V5KSB7CiAgICAgIC8v5LiN55+l6YGT6ZyA5LiN6ZyA6KaB5YaN5Yqg5LiA5LiL5b+955Wl5aSn5bCP5YaZ77yfCiAgICAgIHZhciBpbmRleCA9IC0xLAogICAgICAgICAgZmxhZyA9IGZhbHNlOwoKICAgICAgZm9yICh2YXIgaSA9IDAsIGFyciA9IGtleS5zcGxpdCgiIik7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICAvL+acieS4gOS4quWFs+mUruWtl+mDveayoeWMuemFjeWIsO+8jOWImeayoeacieWMuemFjeWIsOaVsOaNrgogICAgICAgIGlmIChzdHIuaW5kZXhPZihhcnJbaV0pIDwgMCkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBtYXRjaCA9IHN0ci5tYXRjaEFsbChhcnJbaV0pOwogICAgICAgICAgdmFyIG5leHQgPSBtYXRjaC5uZXh0KCk7CgogICAgICAgICAgd2hpbGUgKCFuZXh0LmRvbmUpIHsKICAgICAgICAgICAgaWYgKG5leHQudmFsdWUuaW5kZXggPiBpbmRleCkgewogICAgICAgICAgICAgIGluZGV4ID0gbmV4dC52YWx1ZS5pbmRleDsKCiAgICAgICAgICAgICAgaWYgKGkgPT09IGFyci5sZW5ndGggLSAxKSB7CiAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBuZXh0ID0gbWF0Y2gubmV4dCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGZsYWc7CiAgICB9LAogICAgZGVzZWFyY2hOb2RlOiBmdW5jdGlvbiBkZXNlYXJjaE5vZGUoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdmFyIG5vZGVzID0gdGhpcy5jeS5ub2RlcygpOwogICAgICBub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICBpZiAodmFsLmhhc0NsYXNzKCdzZWFyY2hlZE5vZGUnKSkgewogICAgICAgICAgdmFsLnJlbW92ZUNsYXNzKCdzZWFyY2hlZE5vZGUnKTsKICAgICAgICB9CgogICAgICAgIF90aGlzNS5zZWFyY2hfbm9kZV9jb25kaXRpb24gPSBbXTsKICAgICAgICBfdGhpczUuc2VhcmNoX25vZGVfdGV4dCA9IFtdOwogICAgICAgIF90aGlzNS5ub2RlX3NlYXJjaGVkID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIGRlc2VhcmNoRWRnZTogZnVuY3Rpb24gZGVzZWFyY2hFZGdlKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHZhciBlZGdlcyA9IHRoaXMuY3kuZWRnZXMoKTsKICAgICAgZWRnZXMuZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgaWYgKHZhbC5oYXNDbGFzcygnc2VhcmNoZWRFZGdlJykpIHsKICAgICAgICAgIHZhbC5yZW1vdmVDbGFzcygnc2VhcmNoZWRFZGdlJyk7CiAgICAgICAgfQoKICAgICAgICBfdGhpczYuc2VhcmNoX2VkZ2VfY29uZGl0aW9uID0gW107CiAgICAgICAgX3RoaXM2LnNlYXJjaF9lZGdlX3RleHQgPSBbXTsKICAgICAgICBfdGhpczYuZWRnZV9zZWFyY2hlZCA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL+atpOWkhOS4uui/h+a7pOS7o+eggS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgbm9kZUZpbHRlcjogZnVuY3Rpb24gbm9kZUZpbHRlcigpIHsKICAgICAgdmFyIGNoZWNrTGlzdCA9IHRoaXMuZmlsdGVyX25vZGVfY2hlY2tMaXN0OwogICAgICB0aGlzLmN5Lm5vZGVzKCkuZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgdmFyIGhpdCA9IGNoZWNrTGlzdC5pbmNsdWRlcyh2YWwuZGF0YSgndHlwZScpKTsKCiAgICAgICAgaWYgKGhpdCAmJiAhdmFsLmhhc0NsYXNzKCdyZW1vdmVkJykpIHsKICAgICAgICAgIHZhbC5hZGRDbGFzcygncmVtb3ZlZCcpOwogICAgICAgIH0gZWxzZSBpZiAoIWhpdCAmJiB2YWwuaGFzQ2xhc3MoJ3JlbW92ZWQnKSkgewogICAgICAgICAgdmFsLnJlbW92ZUNsYXNzKCdyZW1vdmVkJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBlZGdlRmlsdGVyOiBmdW5jdGlvbiBlZGdlRmlsdGVyKCkgewogICAgICB2YXIgY2hlY2tMaXN0ID0gdGhpcy5maWx0ZXJfZWRnZV9jaGVja0xpc3Q7CiAgICAgIHRoaXMuY3kuZWRnZXMoKS5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICB2YXIgaGl0ID0gY2hlY2tMaXN0LmluY2x1ZGVzKHZhbC5kYXRhKCd0eXBlJykpOwoKICAgICAgICBpZiAoaGl0ICYmICF2YWwuaGFzQ2xhc3MoJ2hpZGRlbicpKSB7CiAgICAgICAgICB2YWwuYWRkQ2xhc3MoJ2hpZGRlbicpOwogICAgICAgIH0gZWxzZSBpZiAoIWhpdCAmJiB2YWwuaGFzQ2xhc3MoJ2hpZGRlbicpKSB7CiAgICAgICAgICB2YWwucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgbm9kZURlZmlsdGVyOiBmdW5jdGlvbiBub2RlRGVmaWx0ZXIoKSB7CiAgICAgIGlmICh0aGlzLmZpbHRlcl9ub2RlX2NoZWNrTGlzdC5sZW5ndGggPT09IDApIHJldHVybjsKICAgICAgdGhpcy5jeS5ub2RlcygpLmZvckVhY2goZnVuY3Rpb24gKHZhbCkgewogICAgICAgIGlmICh2YWwuaGFzQ2xhc3MoJ3JlbW92ZWQnKSkgewogICAgICAgICAgdmFsLnJlbW92ZUNsYXNzKCdyZW1vdmVkJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5maWx0ZXJfbm9kZV9jaGVja0xpc3QgPSBbXTsKICAgIH0sCiAgICBlZGdlRGVmaWx0ZXI6IGZ1bmN0aW9uIGVkZ2VEZWZpbHRlcigpIHsKICAgICAgaWYgKHRoaXMuZmlsdGVyX2VkZ2VfY2hlY2tMaXN0Lmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICB0aGlzLmN5LmVkZ2VzKCkuZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgaWYgKHZhbC5oYXNDbGFzcygnaGlkZGVuJykpIHsKICAgICAgICAgIHZhbC5yZW1vdmVDbGFzcygnaGlkZGVuJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5maWx0ZXJfZWRnZV9jaGVja0xpc3QgPSBbXTsKICAgIH0KICB9KQp9Ow=="},{"version":3,"sources":["C:/Users/Zhaoning/Desktop/HCI/src/components/EditBar/EditBar.js"],"names":["mapState","mapMutations","mapActions","mapGetters","inputKG","OpItem","EditBarBlock","MyButton","name","components","data","showEditBar","showExportOps","opInfo","entities_data","relations_data","max_log_len","search_node_text","search_node_condition","node_searched","search_node_log","search_edge_text","search_edge_condition","edge_searched","search_edge_log","filter_node_checkList","filter_edge_checkList","layout","layoutTypeNow","relation_label_enabled","font_size","node_radius","watch","cy","newValue","oldValue","get_statistic_data","options","statistic_data_change","console","log","newVal","oldVal","stop","nodes","elements","positions","node","nodeId","id","position","x","y","fit","d3_options","animate","fixedAfterDragging","linkId","d","linkDistance","manyBodyStrength","ready","tick","progress","randomize","infinite","run","edges","enabled","edge","hasClass","removeClass","addClass","setNodeFontSize","size","Number","isNaN","parseInt","style","informMsg","setNodeRadius","removeStyle","radius","realRadius","computed","state","workspace","nodeType","edgeType","layoutType","pid","node_checkList_disabled","get","filter_node_checked","edge_checkList_disabled","filter_edge_checked","methods","changeEditBarState","open","document","getElementsByClassName","click","getFilePath","selectedFile","files","reader","FileReader","readAsDataURL","that","onload","setJsonSrcPath","result","save","graphData","getDataJsonObject","getCleanData","loading","$loading","lock","text","spinner","background","then","res","success","setProject","$message","error","catch","err","finally","close","changeExportState","exportPng","blob","png","output","bg","full","scale","aLink","createElement","download","generateFileName","url","window","URL","createObjectURL","href","evt","createEvent","initEvent","dispatchEvent","revokeObjectURL","length","eles","JSON","parse","stringify","json","obj","undefined","forEach","val","push","type","relation","source","target","property","exportJson","filename","Blob","a","dataset","downloadurl","join","e","initMouseEvent","current_project","project_name","Date","getTime","EData","individual","organization","thing","default","total","RData","connection","inheritance","checkKeyWords","nameValid","keyWords","test","item","trim","includes","saveSearchLog","index","findIndex","unshift","maxLen","slice","searchNode","condition","byName","byRelation","byProp","count","valName","valProps","connectedEdges","hit","relaHit","propHit","key","fuzzyMatch","prop","edgeName","informResult","searchEdge","bySource","byTarget","valSource","$id","valTarget","nameHit","sHit","tHit","isSuccess","success_msg","error_msg","msg","message","duration","str","flag","i","arr","split","indexOf","match","matchAll","next","done","value","desearchNode","desearchEdge","nodeFilter","checkList","edgeFilter","nodeDefilter","edgeDefilter"],"mappings":"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","sourcesContent":["import { mapState,mapMutations,mapActions,mapGetters } from 'vuex';\nimport { inputKG } from \"../../api/basicAPI\";\nimport OpItem from './OpItem';\nimport EditBarBlock from \"./EditBarBlock\";\nimport MyButton from \"@/components/Tools/MyButton\";\n\n\nexport default {\n    name: \"EditBar\",\n    components: {OpItem,EditBarBlock, MyButton},\n    data(){\n        return{\n            showEditBar: true,\n            showExportOps: false,\n            opInfo: '打开的文件后缀为\".json\"，其表示一个知识图谱\\n',\n            entities_data: [],\n            relations_data: [],\n\n            ////////////////////////////搜索相关/////////////////////////////////\n            max_log_len: 10,\n\n            search_node_text: [],\n            search_node_condition: [],\n            node_searched: false,\n            search_node_log: [],\n\n            search_edge_text:[],\n            search_edge_condition: [],\n            edge_searched:false,\n            search_edge_log: [],\n\n            // search_text: '',\n            // search_type: '',\n            // select_value: '',\n            // showEnabled: false,\n            // edgeDisabled: true,\n            // types: [\n            //     {\n            //         label: '节点',\n            //         value: '1'\n            //     },\n            //     {\n            //         label: '关系',\n            //         value: '2'\n            //     }\n            // ],\n            // currentSearch: {\n            //     params: {},\n            //     result: []\n            // },\n            // searchLog: [],\n\n            //////////////////////过滤相关/////////////////////////////\n\n            filter_node_checkList: [],\n            filter_edge_checkList: [],\n\n            // filter_disabled: true,\n            // filterShowEnabled: false,\n            //\n            // filter_node_checked: false,\n            // filter_node_checkList: [],\n            // filter_edge_checked: false,\n            // filter_edge_checkList: [],\n\n            //////////////////////展示效果相关////////////////////////////////\n\n            layout: null,\n\n            layoutTypeNow : '',\n\n            relation_label_enabled: true,\n            font_size: 20,\n            node_radius: 20,\n        }\n    },\n    watch: {\n        cy(newValue, oldValue){\n            this.get_statistic_data();\n            this.layoutTypeNow = newValue.options().layout.name;\n        },\n        statistic_data_change(newValue, oldValue){\n            console.log(\"检测到数据变化\")\n            this.get_statistic_data();\n        },\n\n        /////////////////////////////展示相关//////////////////////////////\n        layoutTypeNow(newVal, oldVal) {\n            console.log(\"layout watched: '\",oldVal,\"' to '\",newVal,\"'\");\n            let layout = this.layout;\n            if(layout!==null){\n                layout.stop();\n            }\n            if(newVal==='preset'){\n                //console.log(\"elements stored: \",this.elements);\n                let nodes = this.elements.nodes;\n                let positions = node=>{\n                    let nodeId = node.data(\"id\");\n                    for(let node of nodes){\n                        if(node.data.id===nodeId){\n                            return node.position;\n                        }\n                    }\n                    return {x:0,y:0};//可以拓展成随机放置\n                };\n                layout = this.cy.layout({name: newVal,fit:true,positions:positions});//若以后恢复的布局中新增颜色、大小等，可能需要为增加的部分渲染内容新写代码\n                //console.log(\"reset done\")\n\n            }else if(newVal==='d3-force'){\n                let d3_options = {\n                    name: 'd3-force',\n                    animate: true,\n                    fit: true,//适应viewport\n                    fixedAfterDragging: false,\n                    linkId: function id(d) {\n                        return d.id;\n                    },\n                    linkDistance: 1000,\n                    manyBodyStrength: -10000,\n                    ready: function(){},\n                    stop: function(){},\n                    tick: function(progress) {\n                        // console.log('progress - ', progress);\n                    },\n                    randomize: false,\n                    infinite: true\n                }\n                layout = this.cy.layout(d3_options)\n            }else{\n                layout = this.cy.layout({name: newVal, fit: true})\n            }\n            this.layout = layout;\n            this.layout.run();\n        },\n        relation_label_enabled(newVal, oldVal) {\n            let edges = this.cy.edges();\n            let enabled = newVal;\n            for (let edge of edges) {\n                if(enabled&&edge.hasClass('label_hidden')){\n                    edge.removeClass('label_hidden');\n                }else if(!enabled&&!edge.hasClass('label_hidden')){\n                    edge.addClass('label_hidden');\n                }\n            }\n        },\n        font_size(newVal, oldVal) {\n            // let defaultSize = '25px';//默认值，25px是看workspace找到的\n            if (newVal === '') {\n                this.setNodeFontSize('');//同步改变workspace中的nodeNodeFontSize\n                //CytoscapeKG中在监听到workspace中nodeFontSize刚变回''时\n                //会根据节点大小和字数重新渲染各个节点的字体大小，所以不能用统一默认值\n                //此处什么也不需要做，因为CytoscapeKG里做了\n                return;\n            }\n            let size = Number(newVal);\n            if (!isNaN(size)) {\n                this.setNodeFontSize(newVal);//同步改变workspace中的nodeNodeFontSize\n                size = parseInt(size);\n                for (let node of this.cy.nodes()) {\n                    node.style('font-size', size + 'px');\n                }\n            }\n            else {\n                if (newVal !== '') {\n                    this.informMsg('error','请输入数字');\n                }\n                this.setNodeFontSize('');//同步改变workspace中的nodeNodeFontSize\n                //CytoscapeKG中在监听到workspace中nodeFontSize刚变回''时\n                //会根据节点大小和字数重新渲染各个节点的字体大小，所以不能用统一默认值\n                //此处什么也不需要做，因为CytoscapeKG里做了\n            }\n        },\n        node_radius(newVal, oldVal) {\n            if (newVal === '') {\n                this.setNodeRadius('');//同步改变workspace中的nodeRadius\n                for (let node of this.cy.nodes()) {\n                    node.removeStyle('width');\n                    node.removeStyle('height');\n                }\n                return;\n            }\n            let radius = Number(newVal);\n            if (!isNaN(radius)) {\n                radius = parseInt(radius);\n                let realRadius = radius * 2;\n                this.setNodeRadius(realRadius+\"\");//同步改变workspace中的nodeRadius\n                for (let node of this.cy.nodes()) {//是不是要改成等比例扩大？\n                    node.style('width', realRadius + 'px');\n                    node.style('height', realRadius + 'px');\n                }\n            }\n            else {\n                this.setNodeRadius('');//同步改变workspace中的nodeRadius\n                if (newVal !== '') {\n                    this.informMsg('error','请输入数字');\n                }\n                for (let node of this.cy.nodes()) {\n                    node.removeStyle('width');\n                    node.removeStyle('height');\n                }\n            }\n        }\n    },\n    computed: {\n        ...mapState({\n            cy: state => state.workspace.cy,\n            statistic_data_change: state => state.workspace.statistic_data_change,\n            nodeType: state => state.workspace.nodeType,\n            edgeType: state => state.workspace.edgeType,\n            layoutType: state => state.workspace.layoutType,\n            elements: state => state.workspace.elements,\n            pid: state => state.pid,\n        }),\n        node_checkList_disabled: {\n            get() {\n                return !this.filter_node_checked;\n            }\n        },\n        edge_checkList_disabled: {\n            get() {\n                return !this.filter_edge_checked;\n            }\n\n        },\n    },\n    methods:{\n        ...mapMutations(['setJsonSrcPath', 'setSeCurrentSearchParams',\n            'setCurrentSearchResult','setNodeRadius','setNodeFontSize', 'setProject', 'changeShowQAPanel']),\n\n        changeEditBarState(){\n            this.showEditBar = !this.showEditBar;\n        },\n\n        open(){\n            document.getElementsByClassName(\"choose-file\")[0].click();\n        },\n\n        getFilePath(){\n            //获取读取我文件的File对象\n            let selectedFile = document.getElementsByClassName(\"choose-file\")[0].files[0];\n            let reader = new FileReader();//这是核心,读取操作就是由它完成.\n            reader.readAsDataURL(selectedFile)\n            reader.that = this;\n            reader.onload = function () {\n                //当读取完成后回调这个函数,然后此时文件的内容存储到了this.result中,直接操作即可\n                this.that.setJsonSrcPath(this.result);\n            }\n        },\n\n        save(){\n            let data = {};\n            let graphData = this.getDataJsonObject();\n            data = {\n                nodes: graphData.nodes,\n                edges: graphData.edges\n            };\n\n            data = this.getCleanData(data);\n            console.log(\"要保存的数据：\",data);\n\n            const loading = this.$loading({\n                lock: true,\n                text: '...保存中...',\n                spinner: 'el-icon-loading',\n                background: 'rgba(255, 255,255, 0.8)'\n            });\n            inputKG({...data, pid: this.pid}).then(res => {\n                if(res.success){\n                    this.setProject(data);\n                    this.$message.success('保存成功');\n                }else{\n                    this.$message.error( '保存失败')\n                }\n            }).catch( err => {\n                console.log(err);\n                this.$message.error('网络错误或服务器错误')\n            }).finally(() => {\n                loading.close();\n            })\n        },\n\n        changeExportState(){\n            this.showExportOps = !this.showExportOps;\n        },\n\n        /**\n         * 导出全局图片.\n         * options: The export options.\n         output： Whether the output should be 'base64uri' (default), 'base64', 'blob', or 'blob-promise' (a promise that resolves to the blob is returned).\n         bg: The background colour of the image (transparent by default).\n         full: Whether to export the current viewport view (false, default) or the entire graph (true).\n         scale: This value specifies a positive number that scales the size of the resultant image.\n         maxWidth: Specifies the scale automatically in combination with maxHeight such that the resultant image is no wider than maxWidth.\n         maxHeight: Specifies the scale automatically in combination with maxWidth such that the resultant image is no taller than maxHeight\n         */\n        exportPng(){\n            this.$message.success(\"正在导出图片...\");\n            let blob = this.cy.png({\n                output: 'blob-promise', bg: 'white',\n                full: true, scale: 4\n            });\n            blob.then(res => {\n                //创建下载链接\n                let aLink = document.createElement('a');\n                aLink.download = this.generateFileName() + '.png';\n                let url = window.URL.createObjectURL(res);\n                aLink.href = url;\n\n                //创建、分配并触发点击事件\n                let evt = document.createEvent(\"MouseEvents\");\n                evt.initEvent(\"click\", true, true);\n                aLink.dispatchEvent(evt);\n\n                // 释放掉blob对象\n                window.URL.revokeObjectURL(url);\n            }).catch(err => {\n                console.log(\"Error occured: \", err);\n                if (this.cy.elements().length === 0) {\n                    this.$message.error(\"知识图谱已经空啦，导不出东西的呀\");\n                }\n            });\n        },\n\n        /**\n         * 对象拷贝\n         * JSON.parse(JSON.stringify(obj))我们一般用来深拷贝\n         但不是完全深拷贝，有以下特点：\n         1、如果obj里面有时间对象，则JSON.stringify后再JSON.parse的结果，时间将只是字符串的形式。而不是时间对象；\n         2、如果obj里有RegExp、Error对象，则序列化的结果将只得到空对象；\n         3、如果obj里有函数，undefined，则序列化的结果会把函数或 undefined丢失；\n         4、如果obj里有NaN、Infinity和-Infinity，则序列化的结果会变成null\n         5、JSON.stringify()只能序列化对象的可枚举的自有属性，例如 如果obj中的对象是有构造函数生成的， 则使用JSON.parse(JSON.stringify(obj))深拷贝后，会丢弃对象的constructor；\n         6、如果对象中存在循环引用的情况也无法正确实现深拷贝；\n\n         注：由于前后端数据格式不统一，这里对数据格式做了转化。\n         日后前/后端有修改时这里都要改！\n         */\n        getDataJsonObject() {\n            let eles = JSON.parse(JSON.stringify(this.cy.json().elements));//其实深拷贝可能没啥意义，只是单纯直觉上想用一用(*╹▽╹*)\n            let obj = {\"edges\": [], \"nodes\": []};\n            if (JSON.stringify(eles) !== '{}') {\n                if (eles.edges !== undefined && eles.edges.length > 0) {\n                    eles.edges.forEach(val => {\n                        obj.edges.push({\n                            data: val.data\n                        });\n                    });\n                }\n                if (eles.nodes !== undefined && eles.nodes.length > 0) {\n                    eles.nodes.forEach(val => {\n                        obj.nodes.push({\n                            data: val.data,\n                            position: val.position\n                        });\n                    });\n                }\n            }\n            return obj;\n        },\n        getCleanData(eles) {\n            let obj = {\"edges\": [], \"nodes\": []};\n            if (JSON.stringify(eles) !== '{}') {\n                if (eles.edges !== undefined && eles.edges.length > 0) {\n                    eles.edges.forEach(val => {\n                        obj.edges.push({\n                            data: {\n                                id:val.data.id,\n                                type:val.data.type,\n                                relation:val.data.relation,\n                                source:val.data.source,\n                                target:val.data.target\n                            }\n                        });\n                    });\n                }\n                if (eles.nodes !== undefined && eles.nodes.length > 0) {\n                    eles.nodes.forEach(val => {\n                        obj.nodes.push({\n                            data: {\n                                id:val.data.id,\n                                type:val.data.type,\n                                name:val.data.name,\n                                property:val.data.property\n                            },\n                            position: val.position\n                        });\n                    });\n                }\n            }\n            return obj;\n        },\n        exportJson(){\n            this.$message(\"正在导出json...\");\n            //有空也可以改成promise式的\n            let data = this.getDataJsonObject();\n            let filename =  this.generateFileName() + '.json';\n            if(typeof data === 'object'){\n                data = JSON.stringify(data, undefined, 4)\n            }\n            // 要创建一个 blob 数据\n            let blob = new Blob([data], {type: 'text/json'}),\n                a = document.createElement('a');\n            a.download = filename;\n\n            // 将blob转换为地址\n            // 创建 URL 的 Blob 对象\n            let url = window.URL.createObjectURL(blob)\n            a.href = url;\n\n            // 标签 data- 嵌入自定义属性  屏蔽后也可正常下载\n            a.dataset.downloadurl = ['text/json', a.download, a.href].join(':');\n\n            // 添加鼠标事件并向一个指定的事件目标派发\n            let e = document.createEvent('MouseEvents');\n            e.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n            a.dispatchEvent(e);\n\n            // 释放掉blob对象\n            window.URL.revokeObjectURL(url);\n        },\n\n        generateFileName(){\n            let name = \"\";\n            try{\n                name = this.current_project.project_name;\n            }catch (e) {\n                console.log(\"Error occurs:\"+e);\n                console.log(\"可能未连接到Server\");\n                name = new Date().getTime();\n            }\n            return name;\n        },\n\n        /**\n         * 获取统计数据，即给 data 中的 entities_data 和 relaions_data 赋值\n         */\n        get_statistic_data(){\n            let data = this.getDataJsonObject();\n            let nodes = data.nodes,\n                edges = data.edges;\n            let EData = {\n                individual: 0,\n                organization: 0,\n                thing: 0,\n                default: 0,\n                total: nodes.length\n            };\n            for (let node of nodes){\n                if (!(node.data.type == 'individual' || node.data.type == 'organization' || node.data.type == 'thing')){\n                    EData['default'] ++;\n                }else {\n                    EData[node.data.type] ++;\n                }\n            }\n            let RData = {\n                connection: 0,\n                inheritance: 0,\n                default: 0,\n                total: edges.length\n            }\n            for (let edge of edges){\n                RData[edge.data.type] ++;\n            }\n            this.entities_data = [EData];\n            this.relations_data = [RData];\n        },\n\n        // 以下为搜索相关\n\n        checkKeyWords(text){\n            let nameValid = /\\S/;\n            let keyWords = [];\n            text.forEach(val=>{//校验、去重\n                if(nameValid.test(val)){\n                    let item = val.trim();\n                    if(!keyWords.includes(item)) keyWords.push(item);\n                }\n            });\n            return keyWords;\n        },\n\n        saveSearchLog(keyWords,log){//添加搜索日志\n            keyWords.forEach(val=>{\n                let index = log.findIndex(item=>item===val);\n                if(index<0){//更新日志位置\n                    log.unshift(val);//添加在头部\n                }\n\n            });\n            let maxLen = this.max_log_len;\n            if(log.length>maxLen){//清除多余的早期历史记录\n                log.slice(maxLen,log.length-maxLen);\n            }\n        },\n\n        searchNode(){\n            let keyWords = this.checkKeyWords(this.search_node_text);\n            let condition = this.search_node_condition;\n            this.search_node_text = keyWords;//自动简化搜索框内容\n            if(keyWords.length===0||condition.length===0){\n                this.informMsg('error','请确认搜索内容和筛选条件都不为空哦');\n                return;\n            }\n            console.log(\"(keyWords, condition, log) before saveLog\",keyWords,condition,this.search_node_log);\n\n            //开始一次搜索\n            this.saveSearchLog(keyWords,this.search_node_log);//保存搜索历史\n            console.log(\"(keyWords, condition, log) after saveLog\",keyWords,condition,this.search_node_log);\n            const byName = condition.includes('name');\n            const byRelation = condition.includes('relation');\n            const byProp = condition.includes('property');\n            let nodes = this.cy.nodes();\n            let count = 0;\n            nodes.forEach(val=>{\n                if (val.hasClass('searchedNode')) {\n                    val.removeClass('searchedNode');\n                }\n                let valName = val.data(\"name\");\n                let valProps = val.data(\"property\");\n                let edges = val.connectedEdges();\n                let hit = false;\n                let relaHit;\n                let propHit;\n                for(let key of keyWords){\n                    if(byName&&this.fuzzyMatch(valName, key)) {\n                        hit = true;\n                        break;\n                    }\n                    if(byProp){\n                        propHit = false;\n                        for(let prop of valProps){\n                            if(this.fuzzyMatch(prop, key)){\n                                propHit=true;\n                                break;\n                            }\n                        }\n                        if(propHit){\n                            hit = true;\n                            break;\n                        }\n                    }\n                    if(byRelation){\n                        relaHit = false;\n                        for(let edge of edges){\n                            let edgeName = edge.data(\"relation\");\n                            if(this.fuzzyMatch(edgeName, key)){\n                                relaHit = true;\n                                break;\n                            }\n                        }\n                        if(relaHit){\n                            hit = true;\n                            break;\n                        }\n                    }\n                }\n                if(hit){\n                    count += 1;\n                    val.addClass('searchedNode');\n                }\n            });\n            this.informResult(count > 0,'搜索完毕','未找到符合条件的结果')\n            this.node_searched = true;\n        },\n\n        searchEdge(){\n            let keyWords = this.checkKeyWords(this.search_edge_text);\n            let condition = this.search_edge_condition;\n            this.search_edge_text = keyWords;//自动简化搜索框内容\n            if(keyWords.length===0||condition.length===0){\n                this.informMsg('error','请确认搜索内容和筛选条件都不为空哦');\n                return;\n            }\n\n            //开始一次搜索\n            this.saveSearchLog(keyWords,this.search_edge_log);//保存搜索历史\n            const byName = condition.includes('relation');\n            const bySource = condition.includes('source');\n            const byTarget = condition.includes('target');\n            let edges = this.cy.edges();\n            let count = 0;\n            edges.forEach(val=>{\n                if (val.hasClass('searchedEdge')) {\n                    val.removeClass('searchedEdge');\n                }\n                let valName = val.data(\"relation\");\n                let valSource = this.cy.$id(val.data(\"source\")).data(\"name\");\n                let valTarget = this.cy.$id(val.data(\"target\")).data(\"name\");\n                let hit = false;\n                let nameHit;\n                let sHit;\n                let tHit;\n                for(let key of keyWords){\n                    if((byName&&this.fuzzyMatch(valName, key))||\n                        (bySource&&this.fuzzyMatch(valSource,key))||\n                        (byTarget&&this.fuzzyMatch(valTarget,key))) {\n                        hit = true;\n                        break;\n                    }\n                }\n                if(hit){\n                    count += 1;\n                    val.addClass('searchedEdge');\n                }\n            });\n            this.informResult(count > 0,'搜索完毕','未找到符合条件的结果');\n            this.edge_searched = true;\n        },\n\n        informResult(isSuccess,success_msg,error_msg){\n            if (isSuccess) {\n                this.informMsg('success',success_msg);\n            }\n            else {\n                this.informMsg('error',error_msg);\n            }\n        },\n\n        informMsg(type,msg) {\n            this.$message({\n                message: msg,\n                type: type,\n                duration: 1500\n            });\n        },\n\n        fuzzyMatch(str, key){//不知道需不需要再加一下忽略大小写？\n            let index = -1, flag = false;\n            for(let i = 0, arr = key.split(\"\"); i < arr.length; i++ ){\n            //有一个关键字都没匹配到，则没有匹配到数据\n                if(str.indexOf(arr[i]) < 0){\n                    break;\n                }else{\n                    let match = str.matchAll(arr[i]);\n                    let next = match.next();\n                    while (!next.done){\n                        if(next.value.index > index){\n                            index = next.value.index;\n                            if(i === arr.length - 1){\n                                flag = true\n                            }\n                            break;\n                        }\n                        next = match.next();\n                    }\n                }\n            }\n            return flag;\n        },\n\n        desearchNode(){\n            let nodes = this.cy.nodes();\n            nodes.forEach(val=>{\n                if (val.hasClass('searchedNode')) {\n                    val.removeClass('searchedNode');\n                }\n                this.search_node_condition = [];\n                this.search_node_text = [];\n                this.node_searched = false;\n            });\n        },\n\n        desearchEdge(){\n            let edges = this.cy.edges();\n            edges.forEach(val=>{\n                if (val.hasClass('searchedEdge')) {\n                    val.removeClass('searchedEdge');\n                }\n                this.search_edge_condition = [];\n                this.search_edge_text = [];\n                this.edge_searched = false;\n            });\n        },\n\n\n        ///////////////////////////////////此处为过滤代码///////////////////////////////////////\n\n        nodeFilter(){\n            let checkList = this.filter_node_checkList;\n            this.cy.nodes().forEach(val=>{\n                let hit = checkList.includes(val.data('type'));\n               if(hit&&!val.hasClass('removed')) {\n                   val.addClass('removed');\n               }else if(!hit&&val.hasClass('removed')){\n                   val.removeClass('removed');\n               }\n            });\n        },\n        edgeFilter(){\n            let checkList = this.filter_edge_checkList;\n            this.cy.edges().forEach(val=>{\n                let hit = checkList.includes(val.data('type'));\n                if(hit&&!val.hasClass('hidden')) {\n                    val.addClass('hidden');\n                }else if(!hit&&val.hasClass('hidden')){\n                    val.removeClass('hidden');\n                }\n            });\n        },\n        nodeDefilter(){\n            if(this.filter_node_checkList.length===0)return;\n            this.cy.nodes().forEach(val=>{\n                if(val.hasClass('removed')){\n                    val.removeClass('removed');\n                }\n            });\n            this.filter_node_checkList = [];\n        },\n        edgeDefilter(){\n            if(this.filter_edge_checkList.length===0)return;\n            this.cy.edges().forEach(val=>{\n                if(val.hasClass('hidden')){\n                    val.removeClass('hidden');\n                }\n            });\n            this.filter_edge_checkList = [];\n        },\n    }\n}\n"]}]}