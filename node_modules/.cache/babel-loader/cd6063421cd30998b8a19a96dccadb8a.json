{"remainingRequest":"/Users/albert/Desktop/数据科学方向实践/HCI的副本/node_modules/babel-loader/lib/index.js!/Users/albert/Desktop/数据科学方向实践/HCI的副本/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/albert/Desktop/数据科学方向实践/HCI的副本/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/albert/Desktop/数据科学方向实践/HCI的副本/src/components/TypesetGraph.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/albert/Desktop/数据科学方向实践/HCI的副本/src/components/TypesetGraph.vue","mtime":1638694828507},{"path":"/Users/albert/Desktop/数据科学方向实践/HCI的副本/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/albert/Desktop/数据科学方向实践/HCI的副本/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/albert/Desktop/数据科学方向实践/HCI的副本/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/albert/Desktop/数据科学方向实践/HCI的副本/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy9hbGJlcnQvRGVza3RvcC9cdTY1NzBcdTYzNkVcdTc5RDFcdTVCNjZcdTY1QjlcdTU0MTFcdTVCOUVcdThERjUvSENJXHU3Njg0XHU1MjZGXHU2NzJDL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2FsYmVydC9EZXNrdG9wL1x1NjU3MFx1NjM2RVx1NzlEMVx1NUI2Nlx1NjVCOVx1NTQxMVx1NUI5RVx1OERGNS9IQ0lcdTc2ODRcdTUyNkZcdTY3MkMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0IGN5dG9zY2FwZSBmcm9tICdjeXRvc2NhcGUnOwppbXBvcnQgY29tcG91bmREcmFnQW5kRHJvcCBmcm9tICdjeXRvc2NhcGUtY29tcG91bmQtZHJhZy1hbmQtZHJvcCc7CmltcG9ydCBmY29zZSBmcm9tICdjeXRvc2NhcGUtZmNvc2UnOwppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBNdXRhdGlvbnMsIG1hcFN0YXRlIH0gZnJvbSAidnVleCI7CmltcG9ydCAkIGZyb20gImpxdWVyeSI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB0aXBweSwgeyBzdGlja3kgfSBmcm9tICJ0aXBweS5qcyI7CmltcG9ydCBFZGl0QmFyQmxvY2sgZnJvbSAiQC9jb21wb25lbnRzL0VkaXRCYXIvRWRpdEJhckJsb2NrIjsKaW1wb3J0IE9wSXRlbSBmcm9tICJAL2NvbXBvbmVudHMvRWRpdEJhci9PcEl0ZW0iOwpjeXRvc2NhcGUudXNlKGNvbXBvdW5kRHJhZ0FuZERyb3ApOwpjeXRvc2NhcGUudXNlKGZjb3NlKTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJUeXBlc2V0R3JhcGgiLAogIGNvbXBvbmVudHM6IHsKICAgIEVkaXRCYXJCbG9jazogRWRpdEJhckJsb2NrLAogICAgT3BJdGVtOiBPcEl0ZW0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjZG5kOiBudWxsLAogICAgICAvL+aLluaLveW3peWFt+WPpeafhAogICAgICB0eXBlc2V0X2N5OiBudWxsLAogICAgICAvL2N55Y+l5p+ECiAgICAgIGZjb3NlX29wdGlvbnM6IHsKICAgICAgICBuYW1lOiAnZmNvc2UnLAogICAgICAgIHF1YWxpdHk6ICJwcm9vZiIsCiAgICAgICAgcmFuZG9taXplOiBmYWxzZSwKICAgICAgICBhbmltYXRpb25EdXJhdGlvbjogMjUwLAogICAgICAgIGZpdDogZmFsc2UsCiAgICAgICAgYWxpZ25tZW50Q29uc3RyYWludDogewogICAgICAgICAgdmVydGljYWw6IFtdLAogICAgICAgICAgaG9yaXpvbnRhbDogW10KICAgICAgICB9CiAgICAgIH0gLy9mY29zZeW4g+WxgOmAiemhuQoKICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoewogICAgY3k6IGZ1bmN0aW9uIGN5KHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS53b3Jrc3BhY2UuY3k7CiAgICB9LAogICAgbm9kZUZvbnRTaXplOiBmdW5jdGlvbiBub2RlRm9udFNpemUoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLndvcmtzcGFjZS5ub2RlRm9udFNpemU7CiAgICB9LAogICAgbm9kZVJhZGl1czogZnVuY3Rpb24gbm9kZVJhZGl1cyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUud29ya3NwYWNlLm5vZGVSYWRpdXM7CiAgICB9LAogICAgZGVmYXVsdFN0eWxlOiBmdW5jdGlvbiBkZWZhdWx0U3R5bGUoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLndvcmtzcGFjZS5kZWZhdWx0U3R5bGU7CiAgICB9LAogICAgc2hhcGVUeXBlOiBmdW5jdGlvbiBzaGFwZVR5cGUoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLndvcmtzcGFjZS5zaGFwZVR5cGU7CiAgICB9LAogICAgbGluZVN0eWxlVHlwZTogZnVuY3Rpb24gbGluZVN0eWxlVHlwZShzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUud29ya3NwYWNlLmxpbmVTdHlsZVR5cGU7CiAgICB9LAogICAgcHJvamVjdDogZnVuY3Rpb24gcHJvamVjdChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUucHJvamVjdDsKICAgIH0KICB9KSksCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBkYXRhID0gewogICAgICBlZGdlczogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnByb2plY3QuZWRnZXMpKSwKICAgICAgbm9kZXM6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5wcm9qZWN0Lm5vZGVzKSkKICAgIH07CiAgICB0aGlzLmRhdGFIYW5kbGUoZGF0YSk7CiAgfSwKICB3YXRjaDogey8vIGN1cnJlbnRfcHJvamVjdF9jaGFuZ2Uobm93LCBvbGQpewogICAgLy8gICBjb25zb2xlLmxvZygiY3VycmVudF9wcm9qZWN05pS55YqoIikKICAgIC8vICAgbGV0IGRhdGEgPSB7CiAgICAvLyAgICAgZWRnZXM6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5jdXJyZW50X3Byb2plY3QuZWRnZXMpKSwKICAgIC8vICAgICBub2RlczogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmN1cnJlbnRfcHJvamVjdC5ub2RlcykpLAogICAgLy8gICB9OwogICAgLy8gICB0aGlzLmRhdGFIYW5kbGUoZGF0YSk7CiAgICAvLyB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXREYXRhSnNvbk9iamVjdDogZnVuY3Rpb24gZ2V0RGF0YUpzb25PYmplY3QoY3kpIHsKICAgICAgdmFyIGVsZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGN5Lmpzb24oKS5lbGVtZW50cykpOwogICAgICB2YXIgb2JqID0gewogICAgICAgICJlZGdlcyI6IFtdLAogICAgICAgICJub2RlcyI6IFtdCiAgICAgIH07CgogICAgICBpZiAoSlNPTi5zdHJpbmdpZnkoZWxlcykgIT09ICd7fScpIHsKICAgICAgICBpZiAoZWxlcy5lZGdlcyAhPT0gdW5kZWZpbmVkICYmIGVsZXMuZWRnZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgZWxlcy5lZGdlcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgICAgb2JqLmVkZ2VzLnB1c2goewogICAgICAgICAgICAgIGRhdGE6IHZhbC5kYXRhCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoZWxlcy5ub2RlcyAhPT0gdW5kZWZpbmVkICYmIGVsZXMubm9kZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgZWxlcy5ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgICAgb2JqLm5vZGVzLnB1c2goewogICAgICAgICAgICAgIGRhdGE6IHZhbC5kYXRhLAogICAgICAgICAgICAgIHBvc2l0aW9uOiB2YWwucG9zaXRpb24KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBvYmo7CiAgICB9LAogICAgLy/mnIDlkI7ljrvmjokKICAgIC8v6K+75pWw5o2u77yM54S25ZCO5Lqk57uZZGF0YUhhbmRsZQogICAgZ2V0RGF0YTogZnVuY3Rpb24gZ2V0RGF0YSh1cmwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGF4aW9zLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLmRhdGFIYW5kbGUocmVzLmRhdGEpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpOwoKICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcign5paH5Lu25pWw5o2u5qC85byP5LiN5q2j56GuJyk7CiAgICAgIH0pOwogICAgfSwKICAgIC8v5ZyoZGF0YeS4reWtmOaVsOaNru+8jOW5tui/m+ihjOaVsOaNruWxleekuueahOmihOWkhOeQhgogICAgZGF0YUhhbmRsZTogZnVuY3Rpb24gZGF0YUhhbmRsZShkYXRhKSB7CiAgICAgIGRhdGEuZWRnZXMuZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgdmFsLmNsYXNzZXMgPSAnYXV0b3JvdGF0ZSc7CiAgICAgICAgdmFsLmRhdGEudHlwZSA9IHZhbC5kYXRhLnR5cGUgfHwgJ2RlZmF1bHQnOwogICAgICB9KTsKICAgICAgdmFyIGRlZmF1bHRfY29sb3IgPSAiIzljOGY5NiI7IC8v5ZKMYWRkLW5vZGXmlrnms5XkuK3liJ3lp4vljJbpopzoibLogKblkIjvvIzlv4XpobvlkIzml7bkv67mlLkKCiAgICAgIGRhdGEubm9kZXMuZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgdmFsLmRhdGEudHlwZSA9IHZhbC5kYXRhLnR5cGUgfHwgJ2RlZmF1bHQnOwogICAgICAgIHZhbC5kYXRhLmNvbG9yID0gdmFsLmRhdGEuY29sb3IgfHwgZGVmYXVsdF9jb2xvcjsgLy/lsIbpopzoibLnu5HlrprlnKjmlbDmja7ph4zvvIzlnKh3b3Jrc3BhY2XkuK3kv67mlLnkuLpiYWNrZ3JvdW5kLWNvbG9yOmRhdGEoY29sb3IpLOWunueOsOminOiJsuaMgeS5heWMlgogICAgICAgIC8vIHZhbC5wb3NpdGlvbi54ID0gdmFsLmRhdGEudHlwZXNldC54ID09PSAtMT8gdmFsLnBvc2l0aW9uLnggOiB2YWwuZGF0YS50eXBlc2V0Lng7CiAgICAgICAgLy8gdmFsLnBvc2l0aW9uLnkgPSB2YWwuZGF0YS50eXBlc2V0LnkgPT09IC0xPyB2YWwucG9zaXRpb24ueSA6IHZhbC5kYXRhLnR5cGVzZXQueTsKICAgICAgfSk7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdmFyIGxvYWRpbmcgPSB0aGlzLiRsb2FkaW5nKHsKICAgICAgICBsb2NrOiB0cnVlLAogICAgICAgIHRleHQ6ICcuLi7liqDovb3kuK0uLi4nLAogICAgICAgIHNwaW5uZXI6ICdlbC1pY29uLWxvYWRpbmcnLAogICAgICAgIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSwgMjU1LDI1NSwgMC44KScKICAgICAgfSk7CgogICAgICB0cnkgewogICAgICAgIHRoaXMuZ3JhcGgodGhhdCwgZGF0YSk7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgLy/orqnov4fplb/nmoTlhoXlrrnkvZzkuLrlsZXnpLrnmoTmoIfpopjml7bnnIHnlaUKICAgIGZvbnRTaG93OiBmdW5jdGlvbiBmb250U2hvdyh0ZXh0KSB7CiAgICAgIGlmICh0ZXh0ICYmIHRleHQubGVuZ3RoID4gNSkgewogICAgICAgIHJldHVybiB0ZXh0LnN1YnN0cmluZygwLCAzKSArICIuLi4iOwogICAgICB9CgogICAgICByZXR1cm4gdGV4dDsKICAgIH0sCiAgICAvL+agueaNruWGheWuueiuvue9ruWtl+S9k+Wkp+Wwj++8jOS9v+S5i+S4jeS8mui2heWHuuiKgueCue+8iOacqumqjOivge+8iQogICAgLy/mnIDlpb3mlLnmiJDmoLnmja7lrp7kvZPlpKflsI/orr7nva7lrZfkvZPlpKflsI8KICAgIGZvbnRTdHlsZTogZnVuY3Rpb24gZm9udFN0eWxlKGxlbmd0aCwgd2lkdGgpIHsKICAgICAgaWYgKHRoaXMubm9kZUZvbnRTaXplICE9PSAnJykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAiZm9udC1zaXplIjogdGhpcy5ub2RlRm9udFNpemUgKyAicHgiCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdmFyIGRlZmF1bHRXaWR0aCA9IDMwOwogICAgICB2YXIgbWluV2lkdGggPSAxMjsKICAgICAgdmFyIGZvbnRTaXplID0gZGVmYXVsdFdpZHRoIC0gKGxlbmd0aCAtIDIpICogNjsgLy/ov5nkuKrorqHnrpflrZfkvZPlpKflsI/nmoTnrpflvI/lj6/og73mnInngrnmi4nog6/vvIwKICAgICAgLy/moLnmja7oioLngrnlpKflsI/osIPmlbTmloflrZflpKflsI8KCiAgICAgIHZhciBub2RlV2lkdGggPSB3aWR0aCA/IHdpZHRoIDogZGVmYXVsdFdpZHRoOwogICAgICBmb250U2l6ZSA9IGZvbnRTaXplICogbm9kZVdpZHRoIC8gZGVmYXVsdFdpZHRoOwoKICAgICAgaWYgKCFmb250U2l6ZSB8fCBmb250U2l6ZSA8IG1pbldpZHRoKSB7CiAgICAgICAgLy8iIWZvbnRTaXplIuacieaViOWQl++8jOS4jeaHguivtgogICAgICAgIGZvbnRTaXplID0gbWluV2lkdGg7CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgImZvbnQtc2l6ZSI6IGZvbnRTaXplICsgInB4IgogICAgICB9OwogICAgfSwKICAgIC8v5biu5Yqpbm9kZeWQiOmAguWcsOWxleekunRleHQKICAgIHJlbmROb2RlOiBmdW5jdGlvbiByZW5kTm9kZSh0YXJnZXQsIHRoYXQpIHsKICAgICAgdmFyIGRhdGEgPSB0YXJnZXQuZGF0YSgpOwogICAgICB2YXIgdGV4dCA9IHRoYXQuZm9udFNob3coZGF0YS5uYW1lKTsgLy/lpoLmnpzmsqHmnInorr7lrprlpKflsI/vvIzlsLHmjInnhafoioLngrnmnKzouqvlpKflsI/vvIjoioLngrnlpKflsI/kuI3mmK/ml7bliLvmmK/orr7lrprlpKflsI/lkJfvvJ/mjInnjrDlnKjnmoTlhpnms5XvvIzmiJHop4nlvpfmlrDlop7nmoToioLngrnmsqHmnInliJ3lp4vljJbliLDmuLLmn5PliLDorr7lrprlpKflsI/vvIkKCiAgICAgIHZhciB3aWR0aE5vdyA9IHRoaXMubm9kZVJhZGl1cyA9PT0gJycgPyB0aGlzLmdldE5vZGVXaWR0aCh0YXJnZXQpIDogdGhpcy5ub2RlUmFkaXVzOwogICAgICB3aWR0aE5vdyA9IHBhcnNlSW50KHdpZHRoTm93ICsgJycpOyAvL+ehruS/neaYr+aVsOWtl+exu+WeiwogICAgICAvL+iOt+WPluiKgueCueWuveW6pueahOaVsOWtl+WAvOadpeiwg+iKguWtl+S9k+Wkp+WwjwoKICAgICAgdmFyIHN0eWxlOwoKICAgICAgaWYgKHRleHQgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHN0eWxlID0gdGhhdC5mb250U3R5bGUodGV4dC5sZW5ndGgsIHdpZHRoTm93KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzdHlsZSA9IHRoYXQuZm9udFN0eWxlKDAsIHdpZHRoTm93KTsKICAgICAgfQoKICAgICAgc3R5bGUuc2hhcGUgPSB0aGlzLnNoYXBlVHlwZVtkYXRhLnR5cGVdOwogICAgICBzdHlsZS5sYWJlbCA9IHRleHQ7CgogICAgICBpZiAodGhpcy5ub2RlUmFkaXVzICE9PSAnJykgewogICAgICAgIC8v5ZKMRWRpdEJhcuS4rW5vZGVSYWRpdXPnm5HlkKzmlrnms5XpgLvovpHogKblkIjvvIzlv4XpobvlkIzml7bkv67mlLkKICAgICAgICBzdHlsZS53aWR0aCA9IHdpZHRoTm93ICsgJ3B4JzsKICAgICAgICBzdHlsZS5oZWlnaHQgPSB3aWR0aE5vdyArICdweCc7CiAgICAgIH0KCiAgICAgIHRhcmdldC5zdHlsZShzdHlsZSk7CiAgICB9LAogICAgZ2V0Tm9kZVdpZHRoOiBmdW5jdGlvbiBnZXROb2RlV2lkdGgodGFyZ2V0KSB7CiAgICAgIC8v6L+U5Zue5YC85Li65pWw5a2X57G75Z6LCiAgICAgIHZhciB3aWR0aFByb3AgPSB0YXJnZXQuc3R5bGUoIndpZHRoIik7CiAgICAgIHZhciBkZWZhdWx0V2lkdGggPSAzMDsKCiAgICAgIGlmICh3aWR0aFByb3ApIHsKICAgICAgICByZXR1cm4gcGFyc2VJbnQod2lkdGhQcm9wLm1hdGNoKC8oXFMqKXB4LylbMV0pOyAvL+maj+S+v+aQnOeahO+8jOS4jeefpemBk+acieayoeacieabtOWlveWGmeazlQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBkZWZhdWx0V2lkdGg7CiAgICAgIH0KICAgIH0sCiAgICByZW5kRWRnZTogZnVuY3Rpb24gcmVuZEVkZ2UodGFyZ2V0LCB0aGF0KSB7CiAgICAgIHZhciBkYXRhID0gdGFyZ2V0LmRhdGEoKTsKICAgICAgdmFyIHRleHQgPSB0aGF0LmZvbnRTaG93KGRhdGEucmVsYXRpb24pOwogICAgICB0YXJnZXQuc3R5bGUoewogICAgICAgIGxhYmVsOiB0ZXh0LAogICAgICAgICdsaW5lLXN0eWxlJzogdGhpcy5saW5lU3R5bGVUeXBlW2RhdGEudHlwZV0KICAgICAgfSk7CiAgICB9LAogICAgZ3JhcGg6IGZ1bmN0aW9uIGdyYXBoKHRoYXQsIGRhdGEpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgcHJlc2V0TGF5b3V0ID0gewogICAgICAgIG5hbWU6ICdwcmVzZXQnLAogICAgICAgIHBvc2l0aW9uczogdW5kZWZpbmVkLAogICAgICAgIC8vIG1hcCBvZiAobm9kZSBpZCkgPT4gKHBvc2l0aW9uIG9iaik7IG9yIGZ1bmN0aW9uKG5vZGUpeyByZXR1cm4gc29tUG9zOyB9CiAgICAgICAgem9vbTogdW5kZWZpbmVkLAogICAgICAgIC8vIHRoZSB6b29tIGxldmVsIHRvIHNldCAocHJvYiB3YW50IGZpdCA9IGZhbHNlIGlmIHNldCkKICAgICAgICBwYW46IHVuZGVmaW5lZCwKICAgICAgICAvLyB0aGUgcGFuIGxldmVsIHRvIHNldCAocHJvYiB3YW50IGZpdCA9IGZhbHNlIGlmIHNldCkKICAgICAgICBmaXQ6IHRydWUsCiAgICAgICAgLy8gd2hldGhlciB0byBmaXQgdG8gdmlld3BvcnQKICAgICAgICBwYWRkaW5nOiAzMCwKICAgICAgICAvLyBwYWRkaW5nIG9uIGZpdAogICAgICAgIGFuaW1hdGU6IGZhbHNlLAogICAgICAgIC8vIHdoZXRoZXIgdG8gdHJhbnNpdGlvbiB0aGUgbm9kZSBwb3NpdGlvbnMKICAgICAgICBhbmltYXRpb25EdXJhdGlvbjogNTAwLAogICAgICAgIC8vIGR1cmF0aW9uIG9mIGFuaW1hdGlvbiBpbiBtcyBpZiBlbmFibGVkCiAgICAgICAgYW5pbWF0aW9uRWFzaW5nOiB1bmRlZmluZWQsCiAgICAgICAgLy8gZWFzaW5nIG9mIGFuaW1hdGlvbiBpZiBlbmFibGVkCiAgICAgICAgYW5pbWF0ZUZpbHRlcjogZnVuY3Rpb24gYW5pbWF0ZUZpbHRlcihub2RlLCBpKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9LAogICAgICAgIC8vIGEgZnVuY3Rpb24gdGhhdCBkZXRlcm1pbmVzIHdoZXRoZXIgdGhlIG5vZGUgc2hvdWxkIGJlIGFuaW1hdGVkLiAgQWxsIG5vZGVzIGFuaW1hdGVkIGJ5IGRlZmF1bHQgb24gYW5pbWF0ZSBlbmFibGVkLiAgTm9uLWFuaW1hdGVkIG5vZGVzIGFyZSBwb3NpdGlvbmVkIGltbWVkaWF0ZWx5IHdoZW4gdGhlIGxheW91dCBzdGFydHMKICAgICAgICByZWFkeTogdW5kZWZpbmVkLAogICAgICAgIC8vIGNhbGxiYWNrIG9uIGxheW91dHJlYWR5CiAgICAgICAgc3RvcDogdW5kZWZpbmVkLAogICAgICAgIC8vIGNhbGxiYWNrIG9uIGxheW91dHN0b3AKICAgICAgICB0cmFuc2Zvcm06IGZ1bmN0aW9uIHRyYW5zZm9ybShub2RlLCBwb3NpdGlvbikgewogICAgICAgICAgcmV0dXJuIHBvc2l0aW9uOwogICAgICAgIH0gLy8gdHJhbnNmb3JtIGEgZ2l2ZW4gbm9kZSBwb3NpdGlvbi4gVXNlZnVsIGZvciBjaGFuZ2luZyBmbG93IGRpcmVjdGlvbiBpbiBkaXNjcmV0ZSBsYXlvdXRzCgogICAgICB9OwogICAgICB2YXIgY3kgPSBjeXRvc2NhcGUoewogICAgICAgIGNvbnRhaW5lcjogJCgnI3R5cGVzZXQtZ3JhcGgnKSwKICAgICAgICBib3hTZWxlY3Rpb25FbmFibGVkOiBmYWxzZSwKICAgICAgICBhdXRvdW5zZWxlY3RpZnk6IGZhbHNlLAogICAgICAgIHN0eWxlOiB0aGlzLmRlZmF1bHRTdHlsZSwKICAgICAgICBlbGVtZW50czogZGF0YSwKICAgICAgICBoaWRlTGFiZWxzT25WaWV3UG9ydDogZmFsc2UsCiAgICAgICAgbWluWm9vbTogMC4xNSwKICAgICAgICBtYXhab29tOiA4LAogICAgICAgIHdoZWVsU2Vuc2l0aXZpdHk6IDAuMSwKICAgICAgICAvL3dhcm5pbmcKICAgICAgICBsYXlvdXQ6IHByZXNldExheW91dAogICAgICB9KTsKICAgICAgdGhhdC50eXBlc2V0X2N5ID0gY3k7CiAgICAgIHZhciBvcHRpb25zID0gewogICAgICAgIG5ld1BhcmVudE5vZGU6IGZ1bmN0aW9uIG5ld1BhcmVudE5vZGUoZ3JhYmJlZE5vZGUsIGRyb3BTaWJsaW5nKSB7CiAgICAgICAgICByZXR1cm4ge307CiAgICAgICAgfSwKICAgICAgICAvLyBzcGVjaWZpZXMgZWxlbWVudCBqc29uIGZvciBwYXJlbnQgbm9kZXMgYWRkZWQgYnkgZHJvcHBpbmcgYW4gb3JwaGFuIG5vZGUgb24gYW5vdGhlciBvcnBoYW4gKGEgZHJvcCBzaWJsaW5nKQogICAgICAgIG92ZXJUaHJlc2hvbGQ6IDIwLAogICAgICAgIC8vIG1ha2UgZHJhZ2dpbmcgb3ZlciBhIGRyb3AgdGFyZ2V0IGVhc2llciBieSBleHBhbmRpbmcgdGhlIGhpdCBhcmVhIGJ5IHRoaXMgYW1vdW50IG9uIGFsbCBzaWRlcwogICAgICAgIG91dFRocmVzaG9sZDogNTAgLy8gbWFrZSBkcmFnZ2luZyBvdXQgb2YgYSBkcm9wIHRhcmdldCBhIGJpdCBoYXJkZXIgYnkgZXhwYW5kaW5nIHRoZSBoaXQgYXJlYSBieSB0aGlzIGFtb3VudCBvbiBhbGwgc2lkZXMKCiAgICAgIH07CiAgICAgIHRoYXQuY2RuZCA9IGN5LmNvbXBvdW5kRHJhZ0FuZERyb3Aob3B0aW9ucyk7CiAgICAgIHRoaXMuYmF0Y2goY3ksIGZ1bmN0aW9uICgpIHsKICAgICAgICBjeS5ub2RlcygpLmZvckVhY2goZnVuY3Rpb24gKHZhbCkgewogICAgICAgICAgdGhhdC5yZW5kTm9kZSh2YWwsIHRoYXQpOwogICAgICAgIH0pOwogICAgICAgIGN5LmVkZ2VzKCkuZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgICB0aGF0LnJlbmRFZGdlKHZhbCwgdGhhdCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICBjeS5vbignbW91c2VvdmVyJywgJ25vZGUnLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IHx8IGV2ZW50LmN5VGFyZ2V0OyAvLyBjb25zb2xlLmxvZygibW91c2VvdmVyIG5vZGU6ICIsdGFyZ2V0KTsKCiAgICAgICAgdmFyIGRhdGEgPSB0YXJnZXQuZGF0YSgpOwogICAgICAgIHZhciBtaW5TaXplID0gNDg7IC8v55yL6LW35p2l5Y+v5Lul55qE6K+V6aqM5YC877yM5peg54m55q6K5oSP5LmJCgogICAgICAgIHZhciBmb250U2l6ZSA9IHBhcnNlSW50KHRhcmdldC5zdHlsZSgiZm9udC1zaXplIikubWF0Y2goLyhcUyopcHgvKVsxXSkgKiAxLjI7CiAgICAgICAgZm9udFNpemUgPSBmb250U2l6ZSA8IG1pblNpemUgPyBtaW5TaXplIDogZm9udFNpemU7CiAgICAgICAgdGFyZ2V0LnN0eWxlKHsKICAgICAgICAgIGxhYmVsOiBkYXRhLm5hbWUsCiAgICAgICAgICBmb250U2l6ZTogZm9udFNpemUsCiAgICAgICAgICAnei1pbmRleCc6IDk5OTkKICAgICAgICB9KTsKCiAgICAgICAgaWYgKCF0YXJnZXQuc2NyYXRjaCgndGlwJykpIHsKICAgICAgICAgIHZhciB0ZXh0ID0gIuexu+WeizogIiArIGRhdGEudHlwZSArICc8YnIvPicgKyAi5bGe5oCnOiAiICsgJzxici8+JyArIF90aGlzMi5wcm9wZXJ0eTJTdHJpbmcoZGF0YS5wcm9wZXJ0eSk7CgogICAgICAgICAgdGFyZ2V0LnNjcmF0Y2goJ3RpcCcsIHRoYXQubWFrZVRpcHB5KHRhcmdldCwgdGV4dCkpOwogICAgICAgIH0KCiAgICAgICAgdGFyZ2V0LnNjcmF0Y2goJ3RpcCcpLnNob3coKTsKICAgICAgfSkub24oJ21vdXNlb3V0JywgJ25vZGUnLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IHx8IGV2ZW50LmN5VGFyZ2V0OwogICAgICAgIHRoYXQucmVuZE5vZGUodGFyZ2V0LCB0aGF0KTsKCiAgICAgICAgaWYgKHRhcmdldC5zY3JhdGNoKCd0aXAnKSkgewogICAgICAgICAgdGFyZ2V0LnNjcmF0Y2goJ3RpcCcpLmRlc3Ryb3koKTsKICAgICAgICAgIHRhcmdldC5yZW1vdmVTY3JhdGNoKCd0aXAnKTsgLy8gY29uc29sZS5sb2codGFyZ2V0LnNjcmF0Y2goKSk7CiAgICAgICAgfQoKICAgICAgICB0YXJnZXQuc3R5bGUoewogICAgICAgICAgJ3otaW5kZXgnOiAwCiAgICAgICAgfSk7CiAgICAgIH0pIC8vZWRnZeS4jeiDveaUueWPmOi+ueeahOminOiJsu+8jOWQpuWImeWSjOmAieS4reacuuWItuWGsueqge+8iOmCo+WkhOS5n+S8muaUueWPmOminOiJsu+8iQogICAgICAub24oJ21vdXNlb3ZlcicsICdlZGdlJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldCB8fCBldmVudC5jeVRhcmdldDsgLy8gY29uc29sZS5sb2coIm1vdXNlb3ZlciBlZGdlOiAiLHRhcmdldCk7CgogICAgICAgIHZhciBkYXRhID0gdGFyZ2V0LmRhdGEoKTsgLy/lpoLmnpzopoHmlLnml4vovazvvIzmmK8iZWRnZS10ZXh0LXJvdGF0aW9uIjogIm5vbmUi5ZKMImVkZ2UtdGV4dC1yb3RhdGlvbiI6ICJhdXRvcm90YXRlIgoKICAgICAgICB0YXJnZXQuc3R5bGUoewogICAgICAgICAgbGFiZWw6IGRhdGEucmVsYXRpb24sCiAgICAgICAgICBmb250U2l6ZTogMzYsCiAgICAgICAgICB3aWR0aDogNiwKICAgICAgICAgIGNvbG9yOiAnI2JjNWY2YScsCiAgICAgICAgICAnei1pbmRleCc6IDk5OTkKICAgICAgICB9KTsgLy/mraTmlbDml6DmhI/kuYnvvIzku4Xku4XpnIDopoHmr5RyZW5kTm9kZeacgOWkp2xhYmVs55qEMzbmm7TlpKfljbPlj68KCiAgICAgICAgaWYgKCF0YXJnZXQuc2NyYXRjaCgndGlwJykpIHsKICAgICAgICAgIHZhciB0ZXh0ID0gIuexu+WeizogIiArIGRhdGEudHlwZTsKICAgICAgICAgIHRhcmdldC5zY3JhdGNoKCd0aXAnLCB0aGF0Lm1ha2VUaXBweSh0YXJnZXQsIHRleHQpKTsKICAgICAgICB9CgogICAgICAgIHRhcmdldC5zY3JhdGNoKCd0aXAnKS5zaG93KCk7CiAgICAgIH0pLm9uKCdtb3VzZW91dCcsICdlZGdlJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldCB8fCBldmVudC5jeVRhcmdldDsKICAgICAgICB0aGF0LnJlbmRFZGdlKHRhcmdldCwgdGhhdCk7CiAgICAgICAgdGFyZ2V0LnN0eWxlKHsKICAgICAgICAgIGZvbnRTaXplOiAyNCwKICAgICAgICAgIHdpZHRoOiAzLAogICAgICAgICAgY29sb3I6ICcjZTNhNmExJywKICAgICAgICAgICd6LWluZGV4JzogMAogICAgICAgIH0pOyAvL+S4juS4iuaWh2VkZ2XnmoTliJ3lp4vphY3nva7kv53mjIHkuIDoh7QKCiAgICAgICAgaWYgKHRhcmdldC5zY3JhdGNoKCd0aXAnKSkgewogICAgICAgICAgdGFyZ2V0LnNjcmF0Y2goJ3RpcCcpLmRlc3Ryb3koKTsKICAgICAgICAgIHRhcmdldC5yZW1vdmVTY3JhdGNoKCd0aXAnKTsKICAgICAgICB9CiAgICAgIH0pLm9uKCd0YXAnLCAnbm9kZScsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQgfHwgZXZlbnQuY3lUYXJnZXQ7CiAgICAgICAgdmFyIGRlc2NlbmRhbnRzID0gdGFyZ2V0LmRlc2NlbmRhbnRzKCk7CgogICAgICAgIGlmIChkZXNjZW5kYW50cy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBkZXNjZW5kYW50cy5zZWxlY3QoKTsgLy8gdGFyZ2V0LnVuc2VsZWN0KCk75peg5pWICiAgICAgICAgfQogICAgICB9KTsKICAgICAgdmFyIGNvbnRleHRNZW51ID0gY3kuY29udGV4dE1lbnVzKHsKICAgICAgICBtZW51SXRlbXM6IFt7CiAgICAgICAgICBpZDogJ2NvbG9yLXJlZCcsCiAgICAgICAgICBjb250ZW50OiAn57qiJywKICAgICAgICAgIHNlbGVjdG9yOiAnbm9kZScsCiAgICAgICAgICBvbkNsaWNrRnVuY3Rpb246IGZ1bmN0aW9uIG9uQ2xpY2tGdW5jdGlvbihldmVudCkgewogICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IHx8IGV2ZW50LmN5VGFyZ2V0OwogICAgICAgICAgICB2YXIgY29sb3IgPSAnI2U4OWQ5Nic7CgogICAgICAgICAgICBpZiAodGFyZ2V0LmRlc2NlbmRhbnRzKCkubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgdGFyZ2V0LmRhdGEoJ2NvbG9yJywgY29sb3IpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRhcmdldC5zdHlsZSh7CiAgICAgICAgICAgICAgICAnYm9yZGVyLWNvbG9yJzogY29sb3IsCiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1jb2xvcic6IGNvbG9yCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBpZDogJ2NvbG9yLXllbGxvdycsCiAgICAgICAgICBjb250ZW50OiAn6buEJywKICAgICAgICAgIHNlbGVjdG9yOiAnbm9kZScsCiAgICAgICAgICBvbkNsaWNrRnVuY3Rpb246IGZ1bmN0aW9uIG9uQ2xpY2tGdW5jdGlvbihldmVudCkgewogICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IHx8IGV2ZW50LmN5VGFyZ2V0OwogICAgICAgICAgICB2YXIgY29sb3IgPSAnI2ViYzU3Yyc7CgogICAgICAgICAgICBpZiAodGFyZ2V0LmRlc2NlbmRhbnRzKCkubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgdGFyZ2V0LmRhdGEoJ2NvbG9yJywgY29sb3IpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRhcmdldC5zdHlsZSh7CiAgICAgICAgICAgICAgICAnYm9yZGVyLWNvbG9yJzogY29sb3IsCiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1jb2xvcic6IGNvbG9yCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBpZDogJ2NvbG9yLWxpZ2h0LWJsdWUnLAogICAgICAgICAgY29udGVudDogJ+a1heiTnScsCiAgICAgICAgICBzZWxlY3RvcjogJ25vZGUnLAogICAgICAgICAgb25DbGlja0Z1bmN0aW9uOiBmdW5jdGlvbiBvbkNsaWNrRnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldCB8fCBldmVudC5jeVRhcmdldDsKICAgICAgICAgICAgdmFyIGNvbG9yID0gJyM4MWM3ZTAnOwoKICAgICAgICAgICAgaWYgKHRhcmdldC5kZXNjZW5kYW50cygpLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgIHRhcmdldC5kYXRhKCdjb2xvcicsICdsaWdodGJsdWUnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0YXJnZXQuc3R5bGUoewogICAgICAgICAgICAgICAgJ2JvcmRlci1jb2xvcic6IGNvbG9yLAogICAgICAgICAgICAgICAgJ2JhY2tncm91bmQtY29sb3InOiBjb2xvcgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAgaWQ6ICdjb2xvci1ibHVlLXNsYXRlJywKICAgICAgICAgIGNvbnRlbnQ6ICfpnZvpnZInLAogICAgICAgICAgc2VsZWN0b3I6ICdub2RlJywKICAgICAgICAgIG9uQ2xpY2tGdW5jdGlvbjogZnVuY3Rpb24gb25DbGlja0Z1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQgfHwgZXZlbnQuY3lUYXJnZXQ7CiAgICAgICAgICAgIHZhciBjb2xvciA9ICcjNmE4NWNlJzsKCiAgICAgICAgICAgIGlmICh0YXJnZXQuZGVzY2VuZGFudHMoKS5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICB0YXJnZXQuZGF0YSgnY29sb3InLCBjb2xvcik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGFyZ2V0LnN0eWxlKHsKICAgICAgICAgICAgICAgICdib3JkZXItY29sb3InOiBjb2xvciwKICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogY29sb3IKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGlkOiAnY29sb3ItYnJvd24nLAogICAgICAgICAgY29udGVudDogJ+ajlScsCiAgICAgICAgICBzZWxlY3RvcjogJ25vZGUnLAogICAgICAgICAgb25DbGlja0Z1bmN0aW9uOiBmdW5jdGlvbiBvbkNsaWNrRnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldCB8fCBldmVudC5jeVRhcmdldDsKICAgICAgICAgICAgdmFyIGNvbG9yID0gJyM5YzhmOTYnOwoKICAgICAgICAgICAgaWYgKHRhcmdldC5kZXNjZW5kYW50cygpLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgIHRhcmdldC5kYXRhKCdjb2xvcicsIGNvbG9yKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0YXJnZXQuc3R5bGUoewogICAgICAgICAgICAgICAgJ2JvcmRlci1jb2xvcic6IGNvbG9yLAogICAgICAgICAgICAgICAgJ2JhY2tncm91bmQtY29sb3InOiBjb2xvcgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfV0KICAgICAgfSk7CiAgICB9LAogICAgLy8gKipBbGxvdyBmb3IgbWFuaXB1bGF0aW9uIG9mIGVsZW1lbnRzIHdpdGhvdXQgdHJpZ2dlcmluZyBtdWx0aXBsZSBzdHlsZSBjYWxjdWxhdGlvbnMgb3IgbXVsdGlwbGUgcmVkcmF3cy4qKgogICAgYmF0Y2g6IGZ1bmN0aW9uIGJhdGNoKGN5LCBmdW5jKSB7CiAgICAgIGN5LnN0YXJ0QmF0Y2goKTsKICAgICAgZnVuYygpOwogICAgICBjeS5lbmRCYXRjaCgpOwogICAgfSwKICAgIG1ha2VUaXBweTogZnVuY3Rpb24gbWFrZVRpcHB5KGVsZSwgdGV4dCkgewogICAgICAvL2VsZemcgOS8oOWFpWN555qEZWxlCiAgICAgIHZhciByZWYgPSBlbGUucG9wcGVyUmVmKCk7IC8vIFNpbmNlIHRpcHB5IGNvbnN0cnVjdG9yIHJlcXVpcmVzIERPTSBlbGVtZW50L2VsZW1lbnRzLCBjcmVhdGUgYSBwbGFjZWhvbGRlcgoKICAgICAgdmFyIGR1bW15RG9tRWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIHZhciB0aXAgPSB0aXBweShkdW1teURvbUVsZSwgewogICAgICAgIGdldFJlZmVyZW5jZUNsaWVudFJlY3Q6IHJlZi5nZXRCb3VuZGluZ0NsaWVudFJlY3QsCiAgICAgICAgdHJpZ2dlcjogJ21hbnVhbCcsCiAgICAgICAgLy8gbWFuZGF0b3J5CiAgICAgICAgLy8gZG9tIGVsZW1lbnQgaW5zaWRlIHRoZSB0aXBweToKICAgICAgICBjb250ZW50OiBmdW5jdGlvbiBjb250ZW50KCkgewogICAgICAgICAgLy8gZnVuY3Rpb24gY2FuIGJlIGJldHRlciBmb3IgcGVyZm9ybWFuY2UKICAgICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSB0ZXh0OwogICAgICAgICAgcmV0dXJuIGRpdjsKICAgICAgICB9LAogICAgICAgIC8vIHlvdXIgb3duIHByZWZlcmVuY2VzOgogICAgICAgIGFycm93OiB0cnVlLAogICAgICAgIHBsYWNlbWVudDogJ2JvdHRvbScsCiAgICAgICAgb2Zmc2V0OiBbMjAsIDMwXSwKICAgICAgICBoaWRlT25DbGljazogZmFsc2UsCiAgICAgICAgLy8gZW5hYmxlIGl0CiAgICAgICAgLy8gc3RpY2t5OiB0cnVlLAogICAgICAgIC8vIG9ubHkgY2hlY2sgdGhlICJyZWZlcmVuY2UiIHJlY3QgZm9yIGNoYW5nZXMKICAgICAgICBzdGlja3k6ICdyZWZlcmVuY2UnLAogICAgICAgIC8vIG9ubHkgY2hlY2sgdGhlICJwb3BwZXIiIHJlY3QgZm9yIGNoYW5nZXMKICAgICAgICAvLyBzdGlja3k6ICdwb3BwZXInLAogICAgICAgIHBsdWdpbnM6IFtzdGlja3ldLAogICAgICAgIHpJbmRleDogMTAsCiAgICAgICAgLy/pu5jorqQ5OTk577yM5L+u5pS55bCP5Lqb6YG/5YWN6YGu5L2P5by556qXCiAgICAgICAgLy8gaWYgaW50ZXJhY3RpdmU6CiAgICAgICAgaW50ZXJhY3RpdmU6IHRydWUsCiAgICAgICAgYXBwZW5kVG86IGRvY3VtZW50LmJvZHkgLy8gb3IgYXBwZW5kIGR1bW15RG9tRWxlIHRvIGRvY3VtZW50LmJvZHkKCiAgICAgIH0pOwogICAgICByZXR1cm4gdGlwOwogICAgfSwKICAgIGV4cG9ydFBuZzogZnVuY3Rpb24gZXhwb3J0UG5nKGN5KSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmraPlnKjlr7zlh7rlm77niYcuLi4iKTsKICAgICAgdmFyIGJsb2IgPSBjeS5wbmcoewogICAgICAgIG91dHB1dDogJ2Jsb2ItcHJvbWlzZScsCiAgICAgICAgYmc6ICd3aGl0ZScsCiAgICAgICAgZnVsbDogdHJ1ZSwKICAgICAgICBzY2FsZTogNAogICAgICB9KTsKICAgICAgYmxvYi50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvL+WIm+W7uuS4i+i9vemTvuaOpQogICAgICAgIHZhciBhTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICBhTGluay5kb3dubG9hZCA9IF90aGlzMy5nZW5lcmF0ZUZpbGVOYW1lKCkgKyAnLnBuZyc7CiAgICAgICAgdmFyIHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKHJlcyk7CiAgICAgICAgYUxpbmsuaHJlZiA9IHVybDsgLy/liJvlu7rjgIHliIbphY3lubbop6blj5Hngrnlh7vkuovku7YKCiAgICAgICAgdmFyIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCJNb3VzZUV2ZW50cyIpOwogICAgICAgIGV2dC5pbml0RXZlbnQoImNsaWNrIiwgdHJ1ZSwgdHJ1ZSk7CiAgICAgICAgYUxpbmsuZGlzcGF0Y2hFdmVudChldnQpOyAvLyDph4rmlL7mjolibG9i5a+56LGhCgogICAgICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZygiRXJyb3Igb2NjdXJlZDogIiwgZXJyKTsKCiAgICAgICAgaWYgKGN5LmVsZW1lbnRzKCkubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICBfdGhpczMuJG1lc3NhZ2UuZXJyb3IoIuefpeivhuWbvuiwseW3sue7j+epuuWVpu+8jOWvvOS4jeWHuuS4nOilv+eahOWRgCIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2VuZXJhdGVGaWxlTmFtZTogZnVuY3Rpb24gZ2VuZXJhdGVGaWxlTmFtZSgpIHsKICAgICAgdmFyIG5hbWUgPSAiIjsKCiAgICAgIHRyeSB7CiAgICAgICAgbmFtZSA9IHRoaXMuY3VycmVudF9wcm9qZWN0LnByb2plY3RfbmFtZTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKCJFcnJvciBvY2N1cnM6IiArIGUpOwogICAgICAgIGNvbnNvbGUubG9nKCLlj6/og73mnKrov57mjqXliLBTZXJ2ZXIiKTsKICAgICAgICBuYW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiBuYW1lICsgJy3mjpLniYgnOwogICAgfSwKICAgIC8v5a+56b2QCiAgICBhbGlnbjogZnVuY3Rpb24gYWxpZ24oZGlyZWN0aW9uKSB7CiAgICAgIHZhciBsYXlvdXRfY29uc3RyYWludCA9IHRoaXMuZmNvc2Vfb3B0aW9ucy5hbGlnbm1lbnRDb25zdHJhaW50W2RpcmVjdGlvbl07CiAgICAgIHZhciBub2RlcyA9IHRoaXMudHlwZXNldF9jeS4kKCdub2RlOnNlbGVjdGVkJyk7CiAgICAgIHZhciBub2RlX2lkcyA9IFtdOwoKICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG5vZGVzKSwKICAgICAgICAgIF9zdGVwOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgdmFyIG5vZGUgPSBfc3RlcC52YWx1ZTsKCiAgICAgICAgICBpZiAobm9kZS5kZXNjZW5kYW50cygpLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICB2YXIgaWQgPSBub2RlLmRhdGEoJ2lkJyk7CiAgICAgICAgICAgIG5vZGVfaWRzLnB1c2goaWQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICB9CgogICAgICB0cnkgewogICAgICAgIGxheW91dF9jb25zdHJhaW50LnB1c2gobm9kZV9pZHMpOwogICAgICAgIG5vZGVzLmxheW91dCh0aGlzLmZjb3NlX29wdGlvbnMpLnJ1bigpOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIGxheW91dF9jb25zdHJhaW50LnBvcCgpOwogICAgICB9CiAgICB9LAogICAgLy8g5oqK5a+56LGh6L2s5YyW5Li65a2X56ym5LiyCiAgICBwcm9wZXJ0eTJTdHJpbmc6IGZ1bmN0aW9uIHByb3BlcnR5MlN0cmluZyhwcm9wcykgewogICAgICB2YXIgcmVzdWx0ID0gJyc7CgogICAgICBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHsKICAgICAgICByZXN1bHQgKz0ga2V5ICsgJy0nICsgcHJvcHNba2V5XSArICc8L2JyPic7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/albert/Desktop/数据科学方向实践/HCI的副本/src/components/TypesetGraph.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"typeset-edit-panel-box\">\n    <edit-bar-block block-name=\"操作\">\n      <div class=\"operations\">\n        <op-item op-name=\"水平对齐\" icon=\"#iconalign-vertical\" @click=\"align('horizontal')\"></op-item>\n        <op-item op-name=\"垂直对齐\" icon=\"#iconalign-level\" @click=\"align('vertical')\"></op-item>\n        <op-item op-name=\"导出\" icon=\"#iconshare\" @click=\"exportPng(typeset_cy)\"></op-item>\n      </div>\n    </edit-bar-block>\n  </div>\n  <div id=\"typeset-graph\"></div>\n</template>\n\n<script>\nimport cytoscape from 'cytoscape';\nimport compoundDragAndDrop from 'cytoscape-compound-drag-and-drop';\nimport fcose from 'cytoscape-fcose';\nimport {mapGetters, mapMutations, mapState} from \"vuex\";\nimport $ from \"jquery\";\nimport axios from \"axios\";\nimport tippy, {sticky} from \"tippy.js\";\nimport EditBarBlock from \"@/components/EditBar/EditBarBlock\";\nimport OpItem from \"@/components/EditBar/OpItem\";\n\ncytoscape.use(compoundDragAndDrop);\ncytoscape.use( fcose );\n\nexport default {\n  name: \"TypesetGraph\",\n  components:{EditBarBlock,OpItem},\n  data(){\n    return{\n      cdnd: null, //拖拽工具句柄\n      typeset_cy: null,  //cy句柄\n      fcose_options: {\n        name: 'fcose',\n        quality: \"proof\",\n        randomize: false,\n        animationDuration: 250,\n        fit: false,\n        alignmentConstraint: {\n          vertical: [],\n          horizontal: [],\n        },\n      }, //fcose布局选项\n    }\n  },\n  computed:{\n    ...mapState({\n      cy: state => state.workspace.cy,\n      nodeFontSize: state => state.workspace.nodeFontSize,\n      nodeRadius: state => state.workspace.nodeRadius,\n      defaultStyle: state => state.workspace.defaultStyle,\n      shapeType: state => state.workspace.shapeType,\n      lineStyleType: state => state.workspace.lineStyleType,\n      project: state => state.project,\n    }),\n  },\n  mounted() {\n    let data = {\n      edges: JSON.parse(JSON.stringify(this.project.edges)),\n      nodes: JSON.parse(JSON.stringify(this.project.nodes)),\n    };\n    this.dataHandle(data);\n  },\n  watch:{\n    // current_project_change(now, old){\n    //   console.log(\"current_project改动\")\n    //   let data = {\n    //     edges: JSON.parse(JSON.stringify(this.current_project.edges)),\n    //     nodes: JSON.parse(JSON.stringify(this.current_project.nodes)),\n    //   };\n    //   this.dataHandle(data);\n    // }\n  },\n  methods: {\n    getDataJsonObject(cy) {\n      let eles = JSON.parse(JSON.stringify(cy.json().elements));\n      let obj = {\"edges\": [], \"nodes\": []};\n      if (JSON.stringify(eles) !== '{}') {\n        if (eles.edges !== undefined && eles.edges.length > 0) {\n          eles.edges.forEach(val => {\n            obj.edges.push({\n              data: val.data\n            });\n          });\n        }\n        if (eles.nodes !== undefined && eles.nodes.length > 0) {\n          eles.nodes.forEach(val => {\n            obj.nodes.push({\n              data: val.data,\n              position: val.position\n            });\n          });\n        }\n      }\n      return obj;\n    },\n\n    //最后去掉\n    //读数据，然后交给dataHandle\n    getData(url) {\n      axios.get(url)\n          .then(res => {\n            this.dataHandle(res.data);\n          })\n          .catch(err => {\n            console.error(err);\n            this.$message.error('文件数据格式不正确');\n          })\n    },\n\n    //在data中存数据，并进行数据展示的预处理\n    dataHandle(data) {\n      data.edges.forEach((val) => {\n        val.classes = 'autorotate';\n        val.data.type = val.data.type || 'default';\n      })\n      let default_color = \"#9c8f96\";//和add-node方法中初始化颜色耦合，必须同时修改\n      data.nodes.forEach((val) => {\n        val.data.type = val.data.type || 'default';\n        val.data.color = val.data.color || default_color;//将颜色绑定在数据里，在workspace中修改为background-color:data(color),实现颜色持久化\n        // val.position.x = val.data.typeset.x === -1? val.position.x : val.data.typeset.x;\n        // val.position.y = val.data.typeset.y === -1? val.position.y : val.data.typeset.y;\n      })\n      let that = this;\n      const loading = this.$loading({\n        lock: true,\n        text: '...加载中...',\n        spinner: 'el-icon-loading',\n        background: 'rgba(255, 255,255, 0.8)'\n      });\n      try{\n        this.graph(that, data);\n      }finally{\n        this.$nextTick(() => {\n          loading.close();\n        });\n      }\n    },\n\n    //让过长的内容作为展示的标题时省略\n    fontShow(text) {\n      if (text && text.length > 5) {\n        return text.substring(0, 3) + \"...\"\n      }\n      return text\n    },\n\n    //根据内容设置字体大小，使之不会超出节点（未验证）\n    //最好改成根据实体大小设置字体大小\n    fontStyle(length,width) {\n      if(this.nodeFontSize!==''){\n        return {\n          \"font-size\": this.nodeFontSize + \"px\"\n        };\n      }\n      let defaultWidth = 30;\n      let minWidth = 12;\n      let fontSize = defaultWidth - (length - 2) * 6;//这个计算字体大小的算式可能有点拉胯，\n      //根据节点大小调整文字大小\n      let nodeWidth = width?width:defaultWidth;\n      fontSize = fontSize*nodeWidth/defaultWidth;\n      if (!fontSize || fontSize < minWidth) {//\"!fontSize\"有效吗，不懂诶\n        fontSize = minWidth;\n      }\n      return {\n        \"font-size\": fontSize + \"px\"\n      };\n    },\n\n    //帮助node合适地展示text\n    rendNode(target, that) {\n      let data = target.data();\n      const text = that.fontShow(data.name)\n\n      //如果没有设定大小，就按照节点本身大小（节点大小不是时刻是设定大小吗？按现在的写法，我觉得新增的节点没有初始化到渲染到设定大小）\n      let widthNow = this.nodeRadius===''?this.getNodeWidth(target):this.nodeRadius;\n\n      widthNow = parseInt(widthNow+'');//确保是数字类型\n      //获取节点宽度的数字值来调节字体大小\n      let style;\n      if (text !== undefined){\n        style = that.fontStyle(text.length,widthNow);\n      }else{\n        style = that.fontStyle(0, widthNow);\n      }\n\n      style.shape = this.shapeType[data.type];\n      style.label = text;\n      if(this.nodeRadius!==''){//和EditBar中nodeRadius监听方法逻辑耦合，必须同时修改\n        style.width = widthNow+'px';\n        style.height = widthNow+'px';\n      }\n      target.style(style);\n    },\n\n    getNodeWidth(target){//返回值为数字类型\n      let widthProp = target.style(\"width\");\n      let defaultWidth = 30;\n      if(widthProp){\n        return parseInt(widthProp.match(/(\\S*)px/)[1]);//随便搜的，不知道有没有更好写法\n      }else{\n        return defaultWidth;\n      }\n    },\n\n    rendEdge(target,that){\n      let data = target.data();\n      const text = that.fontShow(data.relation);\n      target.style({label:text,'line-style':this.lineStyleType[data.type]});\n    },\n\n    graph(that, data) {\n      let presetLayout = {\n        name: 'preset',\n\n        positions: undefined, // map of (node id) => (position obj); or function(node){ return somPos; }\n        zoom: undefined, // the zoom level to set (prob want fit = false if set)\n        pan: undefined, // the pan level to set (prob want fit = false if set)\n        fit: true, // whether to fit to viewport\n        padding: 30, // padding on fit\n        animate: false, // whether to transition the node positions\n        animationDuration: 500, // duration of animation in ms if enabled\n        animationEasing: undefined, // easing of animation if enabled\n        animateFilter: function ( node, i ){ return true; }, // a function that determines whether the node should be animated.  All nodes animated by default on animate enabled.  Non-animated nodes are positioned immediately when the layout starts\n        ready: undefined, // callback on layoutready\n        stop: undefined, // callback on layoutstop\n        transform: function (node, position ){ return position; } // transform a given node position. Useful for changing flow direction in discrete layouts\n      };\n      let cy = cytoscape({\n        container: $('#typeset-graph'),\n        boxSelectionEnabled: false,\n        autounselectify: false,\n        style: this.defaultStyle,\n        elements: data,\n        hideLabelsOnViewPort: false,\n        minZoom: 0.15,\n        maxZoom: 8,\n        wheelSensitivity: 0.1,   //warning\n        layout: presetLayout\n      });\n      that.typeset_cy = cy;\n\n      const options = {\n        newParentNode: (grabbedNode, dropSibling) => ({}), // specifies element json for parent nodes added by dropping an orphan node on another orphan (a drop sibling)\n        overThreshold: 20, // make dragging over a drop target easier by expanding the hit area by this amount on all sides\n        outThreshold: 50 // make dragging out of a drop target a bit harder by expanding the hit area by this amount on all sides\n      };\n      that.cdnd = cy.compoundDragAndDrop(options);\n\n\n      this.batch(cy,()=>{\n        cy.nodes().forEach(val => {\n          that.rendNode(val, that);\n        });\n\n        cy.edges().forEach(val => {\n          that.rendEdge(val, that);\n        });\n      });\n\n\n      cy.on('mouseover', 'node', event => {\n        let target = event.target || event.cyTarget;\n        // console.log(\"mouseover node: \",target);\n        let data = target.data();\n        const minSize = 48;//看起来可以的试验值，无特殊意义\n        let fontSize = parseInt(target.style(\"font-size\").match(/(\\S*)px/)[1])*1.2;\n        fontSize = fontSize<minSize?minSize:fontSize;\n        target.style({label:data.name,fontSize: fontSize,'z-index':9999});\n        if(!target.scratch('tip')){\n          let text = \"类型: \"+data.type+'<br/>'+\"属性: \" +'<br/>' + this.property2String(data.property)\n          target.scratch('tip',that.makeTippy(target,text));\n        }\n        target.scratch('tip').show();\n      })\n          .on('mouseout', 'node', event => {\n            let target = event.target || event.cyTarget;\n            that.rendNode(target, that);\n            if(target.scratch('tip')){\n              target.scratch('tip').destroy();\n              target.removeScratch('tip');\n              // console.log(target.scratch());\n            }\n            target.style({'z-index':0});\n          })\n          //edge不能改变边的颜色，否则和选中机制冲突（那处也会改变颜色）\n          .on('mouseover', 'edge', event => {\n            let target = event.target || event.cyTarget;\n            // console.log(\"mouseover edge: \",target);\n            let data = target.data();\n            //如果要改旋转，是\"edge-text-rotation\": \"none\"和\"edge-text-rotation\": \"autorotate\"\n            target.style({label:data.relation,fontSize: 36, width: 6, color: '#bc5f6a','z-index':9999});//此数无意义，仅仅需要比rendNode最大label的36更大即可\n            if(!target.scratch('tip')){\n              let text = \"类型: \"+data.type;\n              target.scratch('tip',that.makeTippy(target,text));\n            }\n            target.scratch('tip').show();\n          })\n          .on('mouseout', 'edge', event => {\n            let target = event.target || event.cyTarget;\n            that.rendEdge(target,that);\n            target.style({fontSize: 24, width: 3, color: '#e3a6a1','z-index':0});//与上文edge的初始配置保持一致\n            if(target.scratch('tip')){\n              target.scratch('tip').destroy();\n              target.removeScratch('tip');\n            }\n          })\n          .on('tap', 'node', event => {\n            let target = event.target || event.cyTarget;\n            let descendants = target.descendants();\n            if (descendants.length > 0){\n              descendants.select();\n              // target.unselect();无效\n            }\n          });\n\n      let contextMenu = cy.contextMenus({\n        menuItems: [\n          {\n            id: 'color-red',\n            content: '红',\n            selector: 'node',\n            onClickFunction: function (event) {\n              let target = event.target || event.cyTarget;\n              let color = '#e89d96'\n              if (target.descendants().length === 0){\n                target.data('color', color);\n              }else{\n                target.style({\n                  'border-color': color,\n                  'background-color': color,\n                });\n              }\n            },\n          },\n          {\n            id: 'color-yellow',\n            content: '黄',\n            selector: 'node',\n            onClickFunction: function (event) {\n              let target = event.target || event.cyTarget;\n              let color = '#ebc57c'\n              if (target.descendants().length === 0){\n                target.data('color', color);\n              }else{\n                target.style({\n                  'border-color': color,\n                  'background-color': color,\n                });\n              }\n            },\n          },\n          {\n            id: 'color-light-blue',\n            content: '浅蓝',\n            selector: 'node',\n            onClickFunction: function (event) {\n              let target = event.target || event.cyTarget;\n              let color = '#81c7e0'\n              if (target.descendants().length === 0){\n                target.data('color', 'lightblue');\n              }else{\n                target.style({\n                  'border-color': color,\n                  'background-color': color,\n                });\n              }\n            },\n          },\n          {\n            id: 'color-blue-slate',\n            content: '靛青',\n            selector: 'node',\n            onClickFunction: function (event) {\n              let target = event.target || event.cyTarget;\n              let color = '#6a85ce'\n              if (target.descendants().length === 0){\n                target.data('color', color);\n              }else{\n                target.style({\n                  'border-color': color,\n                  'background-color': color,\n                });\n              }\n            }\n          },\n          {\n            id: 'color-brown',\n            content: '棕',\n            selector: 'node',\n            onClickFunction: function (event) {\n              let target = event.target || event.cyTarget;\n              let color = '#9c8f96'\n              if (target.descendants().length === 0){\n                target.data('color', color);\n              }else{\n                target.style({\n                  'border-color': color,\n                  'background-color': color,\n                });\n              }\n            },\n          },\n        ],\n      });\n    },\n\n    // **Allow for manipulation of elements without triggering multiple style calculations or multiple redraws.**\n    batch(cy,func){\n      cy.startBatch();\n      func();\n      cy.endBatch();\n    },\n\n    makeTippy(ele, text){//ele需传入cy的ele\n      var ref = ele.popperRef();\n\n      // Since tippy constructor requires DOM element/elements, create a placeholder\n      var dummyDomEle = document.createElement('div');\n\n      var tip = tippy( dummyDomEle, {\n        getReferenceClientRect: ref.getBoundingClientRect,\n        trigger: 'manual', // mandatory\n        // dom element inside the tippy:\n        content: function(){ // function can be better for performance\n          var div = document.createElement('div');\n\n          div.innerHTML = text;\n\n          return div;\n        },\n        // your own preferences:\n        arrow: true,\n        placement: 'bottom',\n        offset: [20, 30],\n        hideOnClick: false,\n        // enable it\n        // sticky: true,\n        // only check the \"reference\" rect for changes\n        sticky: 'reference',\n        // only check the \"popper\" rect for changes\n        // sticky: 'popper',\n        plugins: [sticky],\n        zIndex: 10,//默认9999，修改小些避免遮住弹窗\n\n\n        // if interactive:\n        interactive: true,\n        appendTo: document.body // or append dummyDomEle to document.body\n      } );\n\n      return tip;\n    },\n\n    exportPng(cy){\n      this.$message.success(\"正在导出图片...\");\n      let blob = cy.png({\n        output: 'blob-promise', bg: 'white',\n        full: true, scale: 4\n      });\n      blob.then(res => {\n        //创建下载链接\n        let aLink = document.createElement('a');\n        aLink.download = this.generateFileName() + '.png';\n        let url = window.URL.createObjectURL(res);\n        aLink.href = url;\n\n        //创建、分配并触发点击事件\n        let evt = document.createEvent(\"MouseEvents\");\n        evt.initEvent(\"click\", true, true);\n        aLink.dispatchEvent(evt);\n\n        // 释放掉blob对象\n        window.URL.revokeObjectURL(url);\n      }).catch(err => {\n        console.log(\"Error occured: \", err);\n        if (cy.elements().length === 0) {\n          this.$message.error(\"知识图谱已经空啦，导不出东西的呀\");\n        }\n      });\n    },\n\n    generateFileName(){\n      let name = \"\";\n      try{\n        name = this.current_project.project_name;\n      }catch (e) {\n        console.log(\"Error occurs:\"+e);\n        console.log(\"可能未连接到Server\");\n        name = new Date().getTime();\n      }\n      return name + '-排版';\n    },\n\n    //对齐\n    align(direction){\n      let layout_constraint = this.fcose_options.alignmentConstraint[direction];\n      let nodes = this.typeset_cy.$('node:selected');\n      let node_ids = [];\n\n      for (let node of nodes){\n        if (node.descendants().length === 0){\n          let id = node.data('id');\n          node_ids.push(id);\n        }\n      }\n\n      try{\n        layout_constraint.push(node_ids);\n        nodes.layout(this.fcose_options).run();\n      }catch (err){\n        console.log(err)\n      }finally {\n        layout_constraint.pop();\n      }\n    },\n\n    // 把对象转化为字符串\n    property2String(props){\n      let result = '';\n      for(let key in props){\n        result += key + '-' + props[key] + '</br>';\n      }\n      return result;\n    }\n  }\n}\n</script>\n\n<style scoped>\n#typeset-graph{\n  width: 100%;\n  height: 100%;\n}\n.typeset-edit-panel-box{\n  position: fixed;\n  right: 5px;\n  top: 1%;\n  z-index: 100;\n}\n</style>"],"sourceRoot":""}]}