{"remainingRequest":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Zhaoning\\Desktop\\HCI\\src\\components\\EditBar\\EditBar.js?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\src\\components\\EditBar\\EditBar.js","mtime":1640256382971},{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639148470021},{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\babel-loader\\lib\\index.js","mtime":1639148468681}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiQzovVXNlcnMvWmhhb25pbmcvRGVza3RvcC9IQ0kvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZiI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkM6L1VzZXJzL1poYW9uaW5nL0Rlc2t0b3AvSENJL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkM6L1VzZXJzL1poYW9uaW5nL0Rlc2t0b3AvSENJL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwTXV0YXRpb25zIH0gZnJvbSAidnVleCI7CmltcG9ydCB7IGlucHV0S0cgfSBmcm9tICIuLi8uLi9hcGkvYmFzaWNBUEkiOwppbXBvcnQgT3BJdGVtIGZyb20gIi4vT3BJdGVtIjsKaW1wb3J0IEVkaXRCYXJCbG9jayBmcm9tICIuL0VkaXRCYXJCbG9jayI7CmltcG9ydCBNeUJ1dHRvbiBmcm9tICJAL2NvbXBvbmVudHMvVG9vbHMvTXlCdXR0b24iOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkVkaXRCYXIiLAogIGNvbXBvbmVudHM6IHsKICAgIE9wSXRlbTogT3BJdGVtLAogICAgRWRpdEJhckJsb2NrOiBFZGl0QmFyQmxvY2ssCiAgICBNeUJ1dHRvbjogTXlCdXR0b24KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93RWRpdEJhcjogdHJ1ZSwKICAgICAgc2hvd0V4cG9ydE9wczogZmFsc2UsCiAgICAgIG9wSW5mbzogIuacquS/neWtmOeahOS/ruaUueWwhuiiq+S4ouW8g+S4lOaXoOazleaBouWkjSIsCiAgICAgIGVudGl0aWVzX2RhdGE6IFtdLAogICAgICByZWxhdGlvbnNfZGF0YTogW10sCiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy/ov4fmu6Tnm7jlhbMvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICBmaWx0ZXJfbm9kZV9jaGVja0xpc3Q6IFtdLAogICAgICBmaWx0ZXJfZWRnZV9jaGVja0xpc3Q6IFtdLAogICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8v5bGV56S65pWI5p6c55u45YWzLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgICAgbGF5b3V0OiBudWxsLAogICAgICBsYXlvdXRUeXBlTm93OiAiIiwKICAgICAgcmVsYXRpb25fbGFiZWxfZW5hYmxlZDogdHJ1ZSwKICAgICAgZm9udF9zaXplOiAyMCwKICAgICAgbm9kZV9yYWRpdXM6IDIwCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIGN5OiBmdW5jdGlvbiBjeShuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgICAgdGhpcy5nZXRfc3RhdGlzdGljX2RhdGEoKTsKICAgICAgdGhpcy5sYXlvdXRUeXBlTm93ID0gbmV3VmFsdWUub3B0aW9ucygpLmxheW91dC5uYW1lOwogICAgfSwKICAgIHN0YXRpc3RpY19kYXRhX2NoYW5nZTogZnVuY3Rpb24gc3RhdGlzdGljX2RhdGFfY2hhbmdlKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgICBjb25zb2xlLmxvZygi5qOA5rWL5Yiw5pWw5o2u5Y+Y5YyWIik7CiAgICAgIHRoaXMuZ2V0X3N0YXRpc3RpY19kYXRhKCk7CiAgICB9LAogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy/lsZXnpLrnm7jlhbMvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIGxheW91dFR5cGVOb3c6IGZ1bmN0aW9uIGxheW91dFR5cGVOb3cobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgLy8gY29uc29sZS5sb2coImxheW91dCB3YXRjaGVkOiAnIixvbGRWYWwsIicgdG8gJyIsbmV3VmFsLCInIik7CiAgICAgIHZhciBsYXlvdXQgPSB0aGlzLmxheW91dDsKCiAgICAgIGlmIChsYXlvdXQgIT09IG51bGwpIHsKICAgICAgICBsYXlvdXQuc3RvcCgpOwogICAgICB9CgogICAgICBpZiAobmV3VmFsID09PSAicHJlc2V0IikgewogICAgICAgIC8vY29uc29sZS5sb2coImVsZW1lbnRzIHN0b3JlZDogIix0aGlzLmVsZW1lbnRzKTsKICAgICAgICB2YXIgbm9kZXMgPSB0aGlzLmVsZW1lbnRzLm5vZGVzOwoKICAgICAgICB2YXIgcG9zaXRpb25zID0gZnVuY3Rpb24gcG9zaXRpb25zKG5vZGUpIHsKICAgICAgICAgIHZhciBub2RlSWQgPSBub2RlLmRhdGEoImlkIik7CgogICAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG5vZGVzKSwKICAgICAgICAgICAgICBfc3RlcDsKCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgICAgIHZhciBfbm9kZSA9IF9zdGVwLnZhbHVlOwoKICAgICAgICAgICAgICBpZiAoX25vZGUuZGF0YS5pZCA9PT0gbm9kZUlkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX25vZGUucG9zaXRpb247CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgeDogMCwKICAgICAgICAgICAgeTogMAogICAgICAgICAgfTsgLy/lj6/ku6Xmi5PlsZXmiJDpmo/mnLrmlL7nva4KICAgICAgICB9OwoKICAgICAgICBsYXlvdXQgPSB0aGlzLmN5LmxheW91dCh7CiAgICAgICAgICBuYW1lOiBuZXdWYWwsCiAgICAgICAgICBmaXQ6IHRydWUsCiAgICAgICAgICBwb3NpdGlvbnM6IHBvc2l0aW9ucwogICAgICAgIH0pOyAvL+iLpeS7peWQjuaBouWkjeeahOW4g+WxgOS4reaWsOWinuminOiJsuOAgeWkp+Wwj+etie+8jOWPr+iDvemcgOimgeS4uuWinuWKoOeahOmDqOWIhua4suafk+WGheWuueaWsOWGmeS7o+eggQogICAgICAgIC8vY29uc29sZS5sb2coInJlc2V0IGRvbmUiKQogICAgICB9IGVsc2UgaWYgKG5ld1ZhbCA9PT0gImQzLWZvcmNlIikgewogICAgICAgIHZhciBkM19vcHRpb25zID0gewogICAgICAgICAgbmFtZTogImQzLWZvcmNlIiwKICAgICAgICAgIGFuaW1hdGU6IHRydWUsCiAgICAgICAgICBmaXQ6IHRydWUsCiAgICAgICAgICAvL+mAguW6lHZpZXdwb3J0CiAgICAgICAgICBmaXhlZEFmdGVyRHJhZ2dpbmc6IGZhbHNlLAogICAgICAgICAgbGlua0lkOiBmdW5jdGlvbiBpZChkKSB7CiAgICAgICAgICAgIHJldHVybiBkLmlkOwogICAgICAgICAgfSwKICAgICAgICAgIGxpbmtEaXN0YW5jZTogMTAwMCwKICAgICAgICAgIG1hbnlCb2R5U3RyZW5ndGg6IC0xMDAwMCwKICAgICAgICAgIHJlYWR5OiBmdW5jdGlvbiByZWFkeSgpIHt9LAogICAgICAgICAgc3RvcDogZnVuY3Rpb24gc3RvcCgpIHt9LAogICAgICAgICAgdGljazogZnVuY3Rpb24gdGljayhwcm9ncmVzcykgey8vIGNvbnNvbGUubG9nKCdwcm9ncmVzcyAtICcsIHByb2dyZXNzKTsKICAgICAgICAgIH0sCiAgICAgICAgICByYW5kb21pemU6IGZhbHNlLAogICAgICAgICAgaW5maW5pdGU6IHRydWUKICAgICAgICB9OwogICAgICAgIGxheW91dCA9IHRoaXMuY3kubGF5b3V0KGQzX29wdGlvbnMpOwogICAgICB9IGVsc2UgewogICAgICAgIGxheW91dCA9IHRoaXMuY3kubGF5b3V0KHsKICAgICAgICAgIG5hbWU6IG5ld1ZhbCwKICAgICAgICAgIGZpdDogdHJ1ZQogICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGlzLmxheW91dCA9IGxheW91dDsKICAgICAgdGhpcy5sYXlvdXQucnVuKCk7CiAgICB9LAogICAgcmVsYXRpb25fbGFiZWxfZW5hYmxlZDogZnVuY3Rpb24gcmVsYXRpb25fbGFiZWxfZW5hYmxlZChuZXdWYWwsIG9sZFZhbCkgewogICAgICB2YXIgZWRnZXMgPSB0aGlzLmN5LmVkZ2VzKCk7CiAgICAgIHZhciBlbmFibGVkID0gbmV3VmFsOwoKICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihlZGdlcyksCiAgICAgICAgICBfc3RlcDI7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZWRnZSA9IF9zdGVwMi52YWx1ZTsKCiAgICAgICAgICBpZiAoZW5hYmxlZCAmJiBlZGdlLmhhc0NsYXNzKCJsYWJlbF9oaWRkZW4iKSkgewogICAgICAgICAgICBlZGdlLnJlbW92ZUNsYXNzKCJsYWJlbF9oaWRkZW4iKTsKICAgICAgICAgIH0gZWxzZSBpZiAoIWVuYWJsZWQgJiYgIWVkZ2UuaGFzQ2xhc3MoImxhYmVsX2hpZGRlbiIpKSB7CiAgICAgICAgICAgIGVkZ2UuYWRkQ2xhc3MoImxhYmVsX2hpZGRlbiIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgIH0KICAgIH0sCiAgICBmb250X3NpemU6IGZ1bmN0aW9uIGZvbnRfc2l6ZShuZXdWYWwsIG9sZFZhbCkgewogICAgICAvLyBsZXQgZGVmYXVsdFNpemUgPSAnMjVweCc7Ly/pu5jorqTlgLzvvIwyNXB45piv55yLd29ya3NwYWNl5om+5Yiw55qECiAgICAgIGlmIChuZXdWYWwgPT09ICIiKSB7CiAgICAgICAgdGhpcy5zZXROb2RlRm9udFNpemUoIiIpOyAvL+WQjOatpeaUueWPmHdvcmtzcGFjZeS4reeahG5vZGVOb2RlRm9udFNpemUKICAgICAgICAvL0N5dG9zY2FwZUtH5Lit5Zyo55uR5ZCs5Yiwd29ya3NwYWNl5Litbm9kZUZvbnRTaXpl5Yia5Y+Y5ZueJyfml7YKICAgICAgICAvL+S8muagueaNruiKgueCueWkp+Wwj+WSjOWtl+aVsOmHjeaWsOa4suafk+WQhOS4quiKgueCueeahOWtl+S9k+Wkp+Wwj++8jOaJgOS7peS4jeiDveeUqOe7n+S4gOm7mOiupOWAvAogICAgICAgIC8v5q2k5aSE5LuA5LmI5Lmf5LiN6ZyA6KaB5YGa77yM5Zug5Li6Q3l0b3NjYXBlS0fph4zlgZrkuoYKCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgc2l6ZSA9IE51bWJlcihuZXdWYWwpOwoKICAgICAgaWYgKCFpc05hTihzaXplKSkgewogICAgICAgIHRoaXMuc2V0Tm9kZUZvbnRTaXplKG5ld1ZhbCk7IC8v5ZCM5q2l5pS55Y+Yd29ya3NwYWNl5Lit55qEbm9kZU5vZGVGb250U2l6ZQoKICAgICAgICBzaXplID0gcGFyc2VJbnQoc2l6ZSk7CgogICAgICAgIHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5jeS5ub2RlcygpKSwKICAgICAgICAgICAgX3N0ZXAzOwoKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIG5vZGUgPSBfc3RlcDMudmFsdWU7CiAgICAgICAgICAgIG5vZGUuc3R5bGUoImZvbnQtc2l6ZSIsIHNpemUgKyAicHgiKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvcjMuZShlcnIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBfaXRlcmF0b3IzLmYoKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKG5ld1ZhbCAhPT0gIiIpIHsKICAgICAgICAgIHRoaXMuaW5mb3JtTXNnKCJlcnJvciIsICLor7fovpPlhaXmlbDlrZciKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuc2V0Tm9kZUZvbnRTaXplKCIiKTsgLy/lkIzmraXmlLnlj5h3b3Jrc3BhY2XkuK3nmoRub2RlTm9kZUZvbnRTaXplCiAgICAgICAgLy9DeXRvc2NhcGVLR+S4reWcqOebkeWQrOWIsHdvcmtzcGFjZeS4rW5vZGVGb250U2l6ZeWImuWPmOWbnicn5pe2CiAgICAgICAgLy/kvJrmoLnmja7oioLngrnlpKflsI/lkozlrZfmlbDph43mlrDmuLLmn5PlkITkuKroioLngrnnmoTlrZfkvZPlpKflsI/vvIzmiYDku6XkuI3og73nlKjnu5/kuIDpu5jorqTlgLwKICAgICAgICAvL+atpOWkhOS7gOS5iOS5n+S4jemcgOimgeWBmu+8jOWboOS4ukN5dG9zY2FwZUtH6YeM5YGa5LqGCiAgICAgIH0KICAgIH0sCiAgICBub2RlX3JhZGl1czogZnVuY3Rpb24gbm9kZV9yYWRpdXMobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgaWYgKG5ld1ZhbCA9PT0gIiIpIHsKICAgICAgICB0aGlzLnNldE5vZGVSYWRpdXMoIiIpOyAvL+WQjOatpeaUueWPmHdvcmtzcGFjZeS4reeahG5vZGVSYWRpdXMKCiAgICAgICAgdmFyIF9pdGVyYXRvcjQgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLmN5Lm5vZGVzKCkpLAogICAgICAgICAgICBfc3RlcDQ7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKF9pdGVyYXRvcjQucygpOyAhKF9zdGVwNCA9IF9pdGVyYXRvcjQubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgbm9kZSA9IF9zdGVwNC52YWx1ZTsKICAgICAgICAgICAgbm9kZS5yZW1vdmVTdHlsZSgid2lkdGgiKTsKICAgICAgICAgICAgbm9kZS5yZW1vdmVTdHlsZSgiaGVpZ2h0Iik7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3I0LmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yNC5mKCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciByYWRpdXMgPSBOdW1iZXIobmV3VmFsKTsKCiAgICAgIGlmICghaXNOYU4ocmFkaXVzKSkgewogICAgICAgIHJhZGl1cyA9IHBhcnNlSW50KHJhZGl1cyk7CiAgICAgICAgdmFyIHJlYWxSYWRpdXMgPSByYWRpdXMgKiAyOwogICAgICAgIHRoaXMuc2V0Tm9kZVJhZGl1cyhyZWFsUmFkaXVzICsgIiIpOyAvL+WQjOatpeaUueWPmHdvcmtzcGFjZeS4reeahG5vZGVSYWRpdXMKCiAgICAgICAgdmFyIF9pdGVyYXRvcjUgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLmN5Lm5vZGVzKCkpLAogICAgICAgICAgICBfc3RlcDU7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKF9pdGVyYXRvcjUucygpOyAhKF9zdGVwNSA9IF9pdGVyYXRvcjUubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgX25vZGUyID0gX3N0ZXA1LnZhbHVlOwoKICAgICAgICAgICAgLy/mmK/kuI3mmK/opoHmlLnmiJDnrYnmr5TkvovmianlpKfvvJ8KICAgICAgICAgICAgX25vZGUyLnN0eWxlKCJ3aWR0aCIsIHJlYWxSYWRpdXMgKyAicHgiKTsKCiAgICAgICAgICAgIF9ub2RlMi5zdHlsZSgiaGVpZ2h0IiwgcmVhbFJhZGl1cyArICJweCIpOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2l0ZXJhdG9yNS5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvcjUuZigpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNldE5vZGVSYWRpdXMoIiIpOyAvL+WQjOatpeaUueWPmHdvcmtzcGFjZeS4reeahG5vZGVSYWRpdXMKCiAgICAgICAgaWYgKG5ld1ZhbCAhPT0gIiIpIHsKICAgICAgICAgIHRoaXMuaW5mb3JtTXNnKCJlcnJvciIsICLor7fovpPlhaXmlbDlrZciKTsKICAgICAgICB9CgogICAgICAgIHZhciBfaXRlcmF0b3I2ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5jeS5ub2RlcygpKSwKICAgICAgICAgICAgX3N0ZXA2OwoKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3I2LnMoKTsgIShfc3RlcDYgPSBfaXRlcmF0b3I2Lm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIF9ub2RlMyA9IF9zdGVwNi52YWx1ZTsKCiAgICAgICAgICAgIF9ub2RlMy5yZW1vdmVTdHlsZSgid2lkdGgiKTsKCiAgICAgICAgICAgIF9ub2RlMy5yZW1vdmVTdHlsZSgiaGVpZ2h0Iik7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3I2LmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yNi5mKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBTdGF0ZSh7CiAgICBjeTogZnVuY3Rpb24gY3koc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLndvcmtzcGFjZS5jeTsKICAgIH0sCiAgICBzdGF0aXN0aWNfZGF0YV9jaGFuZ2U6IGZ1bmN0aW9uIHN0YXRpc3RpY19kYXRhX2NoYW5nZShzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUud29ya3NwYWNlLnN0YXRpc3RpY19kYXRhX2NoYW5nZTsKICAgIH0sCiAgICBub2RlVHlwZTogZnVuY3Rpb24gbm9kZVR5cGUoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLndvcmtzcGFjZS5ub2RlVHlwZTsKICAgIH0sCiAgICBlZGdlVHlwZTogZnVuY3Rpb24gZWRnZVR5cGUoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLndvcmtzcGFjZS5lZGdlVHlwZTsKICAgIH0sCiAgICBsYXlvdXRUeXBlOiBmdW5jdGlvbiBsYXlvdXRUeXBlKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS53b3Jrc3BhY2UubGF5b3V0VHlwZTsKICAgIH0sCiAgICBlbGVtZW50czogZnVuY3Rpb24gZWxlbWVudHMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLndvcmtzcGFjZS5lbGVtZW50czsKICAgIH0sCiAgICBwaWQ6IGZ1bmN0aW9uIHBpZChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUucGlkOwogICAgfQogIH0pKSwge30sIHsKICAgIG5vZGVfY2hlY2tMaXN0X2Rpc2FibGVkOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHJldHVybiAhdGhpcy5maWx0ZXJfbm9kZV9jaGVja2VkOwogICAgICB9CiAgICB9LAogICAgZWRnZV9jaGVja0xpc3RfZGlzYWJsZWQ6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgcmV0dXJuICF0aGlzLmZpbHRlcl9lZGdlX2NoZWNrZWQ7CiAgICAgIH0KICAgIH0KICB9KSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgLy8gY29uc3QgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaG9tZScpOwogICAgLy8gaWYgKCFlbCkgcmV0dXJuOwogICAgLy8gZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuY3RybF9TKTsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmN0cmxfUyk7CiAgfSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcE11dGF0aW9ucyhbInNldEpzb25TcmNQYXRoIiwgInNldFNlQ3VycmVudFNlYXJjaFBhcmFtcyIsICJzZXRDdXJyZW50U2VhcmNoUmVzdWx0IiwgInNldE5vZGVSYWRpdXMiLCAic2V0Tm9kZUZvbnRTaXplIiwgInNldFByb2plY3QiLCAiY2hhbmdlU2hvd1FBUGFuZWwiLCAiY2hhbmdlRWRpdEd1aWRlU3RlcCIsICJjaGFuZ2VJc0VkaXRHdWlkZVNob3ciXSkpLCB7fSwgewogICAgY3RybF9TOiBmdW5jdGlvbiBjdHJsX1MoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciBjdXJyS2V5ID0gMCwKICAgICAgICAgIGUgPSBlIHx8IGV2ZW50IHx8IHdpbmRvdy5ldmVudDsKICAgICAgY3VycktleSA9IGUua2V5Q29kZSB8fCBlLndoaWNoIHx8IGUuY2hhckNvZGU7CgogICAgICBpZiAoY3VycktleSA9PSA4MyAmJiAoZS5jdHJsS2V5IHx8IGUubWV0YUtleSkpIHsKICAgICAgICB0aGlzLnNhdmUoKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBjaGFuZ2VFZGl0QmFyU3RhdGU6IGZ1bmN0aW9uIGNoYW5nZUVkaXRCYXJTdGF0ZSgpIHsKICAgICAgdGhpcy5zaG93RWRpdEJhciA9ICF0aGlzLnNob3dFZGl0QmFyOwogICAgfSwKICAgIG9wZW46IGZ1bmN0aW9uIG9wZW4oKSB7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImNob29zZS1maWxlIilbMF0uY2xpY2soKTsKICAgIH0sCiAgICBnZXRGaWxlUGF0aDogZnVuY3Rpb24gZ2V0RmlsZVBhdGgoKSB7CiAgICAgIC8v6I635Y+W6K+75Y+W5oiR5paH5Lu255qERmlsZeWvueixoQogICAgICB2YXIgc2VsZWN0ZWRGaWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiY2hvb3NlLWZpbGUiKVswXS5maWxlc1swXTsKICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7IC8v6L+Z5piv5qC45b+DLOivu+WPluaTjeS9nOWwseaYr+eUseWug+WujOaIkC4KCiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKHNlbGVjdGVkRmlsZSk7CiAgICAgIHJlYWRlci50aGF0ID0gdGhpczsKCiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgLy/lvZPor7vlj5blrozmiJDlkI7lm57osIPov5nkuKrlh73mlbAs54S25ZCO5q2k5pe25paH5Lu255qE5YaF5a655a2Y5YKo5Yiw5LqGdGhpcy5yZXN1bHTkuK0s55u05o6l5pON5L2c5Y2z5Y+vCiAgICAgICAgdGhpcy50aGF0LnNldEpzb25TcmNQYXRoKHRoaXMucmVzdWx0KTsKICAgICAgfTsKICAgIH0sCiAgICBzYXZlOiBmdW5jdGlvbiBzYXZlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGRhdGEgPSB7fTsKICAgICAgdmFyIGdyYXBoRGF0YSA9IHRoaXMuZ2V0RGF0YUpzb25PYmplY3QoKTsKICAgICAgZGF0YSA9IHsKICAgICAgICBub2RlczogZ3JhcGhEYXRhLm5vZGVzLAogICAgICAgIGVkZ2VzOiBncmFwaERhdGEuZWRnZXMKICAgICAgfTsKICAgICAgZGF0YSA9IHRoaXMuZ2V0Q2xlYW5EYXRhKGRhdGEpOwogICAgICBjb25zb2xlLmxvZygi6KaB5L+d5a2Y55qE5pWw5o2u77yaIiwgZGF0YSk7CiAgICAgIHZhciBsb2FkaW5nID0gdGhpcy4kbG9hZGluZyh7CiAgICAgICAgbG9jazogdHJ1ZSwKICAgICAgICB0ZXh0OiAiLi4u5L+d5a2Y5LitLi4uIiwKICAgICAgICBzcGlubmVyOiAiZWwtaWNvbi1sb2FkaW5nIiwKICAgICAgICBiYWNrZ3JvdW5kOiAicmdiYSgyNTUsIDI1NSwyNTUsIDAuOCkiCiAgICAgIH0pOwogICAgICBpbnB1dEtHKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZGF0YSksIHt9LCB7CiAgICAgICAgcGlkOiB0aGlzLnBpZAogICAgICB9KSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICBfdGhpcy5zZXRQcm9qZWN0KGRhdGEpOwoKICAgICAgICAgIF90aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuS/neWtmOaIkOWKnyIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcigi5L+d5a2Y5aSx6LSlIik7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKCiAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IoIue9kee7nOmUmeivr+aIluacjeWKoeWZqOmUmeivryIpOwogICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICBsb2FkaW5nLmNsb3NlKCk7CiAgICAgIH0pOwogICAgfSwKICAgIGNoYW5nZUV4cG9ydFN0YXRlOiBmdW5jdGlvbiBjaGFuZ2VFeHBvcnRTdGF0ZSgpIHsKICAgICAgdGhpcy5zaG93RXhwb3J0T3BzID0gIXRoaXMuc2hvd0V4cG9ydE9wczsKICAgIH0sCgogICAgLyoqCiAgICAgICAgICog5a+85Ye65YWo5bGA5Zu+54mHLgogICAgICAgICAqIG9wdGlvbnM6IFRoZSBleHBvcnQgb3B0aW9ucy4KICAgICAgICAgb3V0cHV077yaIFdoZXRoZXIgdGhlIG91dHB1dCBzaG91bGQgYmUgJ2Jhc2U2NHVyaScgKGRlZmF1bHQpLCAnYmFzZTY0JywgJ2Jsb2InLCBvciAnYmxvYi1wcm9taXNlJyAoYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIGJsb2IgaXMgcmV0dXJuZWQpLgogICAgICAgICBiZzogVGhlIGJhY2tncm91bmQgY29sb3VyIG9mIHRoZSBpbWFnZSAodHJhbnNwYXJlbnQgYnkgZGVmYXVsdCkuCiAgICAgICAgIGZ1bGw6IFdoZXRoZXIgdG8gZXhwb3J0IHRoZSBjdXJyZW50IHZpZXdwb3J0IHZpZXcgKGZhbHNlLCBkZWZhdWx0KSBvciB0aGUgZW50aXJlIGdyYXBoICh0cnVlKS4KICAgICAgICAgc2NhbGU6IFRoaXMgdmFsdWUgc3BlY2lmaWVzIGEgcG9zaXRpdmUgbnVtYmVyIHRoYXQgc2NhbGVzIHRoZSBzaXplIG9mIHRoZSByZXN1bHRhbnQgaW1hZ2UuCiAgICAgICAgIG1heFdpZHRoOiBTcGVjaWZpZXMgdGhlIHNjYWxlIGF1dG9tYXRpY2FsbHkgaW4gY29tYmluYXRpb24gd2l0aCBtYXhIZWlnaHQgc3VjaCB0aGF0IHRoZSByZXN1bHRhbnQgaW1hZ2UgaXMgbm8gd2lkZXIgdGhhbiBtYXhXaWR0aC4KICAgICAgICAgbWF4SGVpZ2h0OiBTcGVjaWZpZXMgdGhlIHNjYWxlIGF1dG9tYXRpY2FsbHkgaW4gY29tYmluYXRpb24gd2l0aCBtYXhXaWR0aCBzdWNoIHRoYXQgdGhlIHJlc3VsdGFudCBpbWFnZSBpcyBubyB0YWxsZXIgdGhhbiBtYXhIZWlnaHQKICAgICAgICAgKi8KICAgIGV4cG9ydFBuZzogZnVuY3Rpb24gZXhwb3J0UG5nKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5q2j5Zyo5a+85Ye65Zu+54mHLi4uIik7CiAgICAgIHZhciBibG9iID0gdGhpcy5jeS5wbmcoewogICAgICAgIG91dHB1dDogImJsb2ItcHJvbWlzZSIsCiAgICAgICAgYmc6ICJ3aGl0ZSIsCiAgICAgICAgZnVsbDogdHJ1ZSwKICAgICAgICBzY2FsZTogNAogICAgICB9KTsKICAgICAgYmxvYi50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvL+WIm+W7uuS4i+i9vemTvuaOpQogICAgICAgIHZhciBhTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICBhTGluay5kb3dubG9hZCA9IF90aGlzMi5nZW5lcmF0ZUZpbGVOYW1lKCkgKyAiLnBuZyI7CiAgICAgICAgdmFyIHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKHJlcyk7CiAgICAgICAgYUxpbmsuaHJlZiA9IHVybDsgLy/liJvlu7rjgIHliIbphY3lubbop6blj5Hngrnlh7vkuovku7YKCiAgICAgICAgdmFyIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCJNb3VzZUV2ZW50cyIpOwogICAgICAgIGV2dC5pbml0RXZlbnQoImNsaWNrIiwgdHJ1ZSwgdHJ1ZSk7CiAgICAgICAgYUxpbmsuZGlzcGF0Y2hFdmVudChldnQpOyAvLyDph4rmlL7mjolibG9i5a+56LGhCgogICAgICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZygiRXJyb3Igb2NjdXJlZDogIiwgZXJyKTsKCiAgICAgICAgaWYgKF90aGlzMi5jeS5lbGVtZW50cygpLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlLmVycm9yKCLnn6Xor4blm77osLHlt7Lnu4/nqbrllabvvIzlr7zkuI3lh7rkuJzopb/nmoTlkYAiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICAvKioKICAgICAgICAgKiDlr7nosaHmi7fotJ0KICAgICAgICAgKiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikp5oiR5Lus5LiA6Iis55So5p2l5rex5ou36LSdCiAgICAgICAgIOS9huS4jeaYr+WujOWFqOa3seaLt+i0ne+8jOacieS7peS4i+eJueeCue+8mgogICAgICAgICAx44CB5aaC5p6cb2Jq6YeM6Z2i5pyJ5pe26Ze05a+56LGh77yM5YiZSlNPTi5zdHJpbmdpZnnlkI7lho1KU09OLnBhcnNl55qE57uT5p6c77yM5pe26Ze05bCG5Y+q5piv5a2X56ym5Liy55qE5b2i5byP44CC6ICM5LiN5piv5pe26Ze05a+56LGh77ybCiAgICAgICAgIDLjgIHlpoLmnpxvYmrph4zmnIlSZWdFeHDjgIFFcnJvcuWvueixoe+8jOWImeW6j+WIl+WMlueahOe7k+aenOWwhuWPquW+l+WIsOepuuWvueixoe+8mwogICAgICAgICAz44CB5aaC5p6cb2Jq6YeM5pyJ5Ye95pWw77yMdW5kZWZpbmVk77yM5YiZ5bqP5YiX5YyW55qE57uT5p6c5Lya5oqK5Ye95pWw5oiWIHVuZGVmaW5lZOS4ouWkse+8mwogICAgICAgICA044CB5aaC5p6cb2Jq6YeM5pyJTmFO44CBSW5maW5pdHnlkowtSW5maW5pdHnvvIzliJnluo/liJfljJbnmoTnu5PmnpzkvJrlj5jmiJBudWxsCiAgICAgICAgIDXjgIFKU09OLnN0cmluZ2lmeSgp5Y+q6IO95bqP5YiX5YyW5a+56LGh55qE5Y+v5p6a5Li+55qE6Ieq5pyJ5bGe5oCn77yM5L6L5aaCIOWmguaenG9iauS4reeahOWvueixoeaYr+acieaehOmAoOWHveaVsOeUn+aIkOeahO+8jCDliJnkvb/nlKhKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikp5rex5ou36LSd5ZCO77yM5Lya5Lii5byD5a+56LGh55qEY29uc3RydWN0b3LvvJsKICAgICAgICAgNuOAgeWmguaenOWvueixoeS4reWtmOWcqOW+queOr+W8leeUqOeahOaDheWGteS5n+aXoOazleato+ehruWunueOsOa3seaLt+i0ne+8mwogICAgICAgICAg5rOo77ya55Sx5LqO5YmN5ZCO56uv5pWw5o2u5qC85byP5LiN57uf5LiA77yM6L+Z6YeM5a+55pWw5o2u5qC85byP5YGa5LqG6L2s5YyW44CCCiAgICAgICAgIOaXpeWQjuWJjS/lkI7nq6/mnInkv67mlLnml7bov5nph4zpg73opoHmlLnvvIEKICAgICAgICAgKi8KICAgIGdldERhdGFKc29uT2JqZWN0OiBmdW5jdGlvbiBnZXREYXRhSnNvbk9iamVjdCgpIHsKICAgICAgdmFyIGVsZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY3kuanNvbigpLmVsZW1lbnRzKSk7IC8v5YW25a6e5rex5ou36LSd5Y+v6IO95rKh5ZWl5oSP5LmJ77yM5Y+q5piv5Y2V57qv55u06KeJ5LiK5oOz55So5LiA55SoKCrilbnilr3ilbkqKQoKICAgICAgdmFyIG9iaiA9IHsKICAgICAgICBlZGdlczogW10sCiAgICAgICAgbm9kZXM6IFtdCiAgICAgIH07CgogICAgICBpZiAoSlNPTi5zdHJpbmdpZnkoZWxlcykgIT09ICJ7fSIpIHsKICAgICAgICBpZiAoZWxlcy5lZGdlcyAhPT0gdW5kZWZpbmVkICYmIGVsZXMuZWRnZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgZWxlcy5lZGdlcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgICAgb2JqLmVkZ2VzLnB1c2goewogICAgICAgICAgICAgIGRhdGE6IHZhbC5kYXRhCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoZWxlcy5ub2RlcyAhPT0gdW5kZWZpbmVkICYmIGVsZXMubm9kZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgZWxlcy5ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgICAgb2JqLm5vZGVzLnB1c2goewogICAgICAgICAgICAgIGRhdGE6IHZhbC5kYXRhLAogICAgICAgICAgICAgIHBvc2l0aW9uOiB2YWwucG9zaXRpb24KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBvYmo7CiAgICB9LAogICAgZ2V0Q2xlYW5EYXRhOiBmdW5jdGlvbiBnZXRDbGVhbkRhdGEoZWxlcykgewogICAgICB2YXIgb2JqID0gewogICAgICAgIGVkZ2VzOiBbXSwKICAgICAgICBub2RlczogW10KICAgICAgfTsKCiAgICAgIGlmIChKU09OLnN0cmluZ2lmeShlbGVzKSAhPT0gInt9IikgewogICAgICAgIGlmIChlbGVzLmVkZ2VzICE9PSB1bmRlZmluZWQgJiYgZWxlcy5lZGdlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBlbGVzLmVkZ2VzLmZvckVhY2goZnVuY3Rpb24gKHZhbCkgewogICAgICAgICAgICBvYmouZWRnZXMucHVzaCh7CiAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgaWQ6IHZhbC5kYXRhLmlkLAogICAgICAgICAgICAgICAgdHlwZTogdmFsLmRhdGEudHlwZSwKICAgICAgICAgICAgICAgIHJlbGF0aW9uOiB2YWwuZGF0YS5yZWxhdGlvbiwKICAgICAgICAgICAgICAgIHNvdXJjZTogdmFsLmRhdGEuc291cmNlLAogICAgICAgICAgICAgICAgdGFyZ2V0OiB2YWwuZGF0YS50YXJnZXQKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoZWxlcy5ub2RlcyAhPT0gdW5kZWZpbmVkICYmIGVsZXMubm9kZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgZWxlcy5ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgICAgb2JqLm5vZGVzLnB1c2goewogICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgIGlkOiB2YWwuZGF0YS5pZCwKICAgICAgICAgICAgICAgIHR5cGU6IHZhbC5kYXRhLnR5cGUsCiAgICAgICAgICAgICAgICBuYW1lOiB2YWwuZGF0YS5uYW1lLAogICAgICAgICAgICAgICAgcHJvcGVydHk6IHZhbC5kYXRhLnByb3BlcnR5CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBwb3NpdGlvbjogdmFsLnBvc2l0aW9uCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gb2JqOwogICAgfSwKICAgIGV4cG9ydEpzb246IGZ1bmN0aW9uIGV4cG9ydEpzb24oKSB7CiAgICAgIHRoaXMuJG1lc3NhZ2UoIuato+WcqOWvvOWHumpzb24uLi4iKTsgLy/mnInnqbrkuZ/lj6/ku6XmlLnmiJBwcm9taXNl5byP55qECgogICAgICB2YXIgZGF0YSA9IHRoaXMuZ2V0RGF0YUpzb25PYmplY3QoKTsKICAgICAgdmFyIGZpbGVuYW1lID0gdGhpcy5nZW5lcmF0ZUZpbGVOYW1lKCkgKyAiLmpzb24iOwoKICAgICAgaWYgKF90eXBlb2YoZGF0YSkgPT09ICJvYmplY3QiKSB7CiAgICAgICAgZGF0YSA9IEpTT04uc3RyaW5naWZ5KGRhdGEsIHVuZGVmaW5lZCwgNCk7CiAgICAgIH0gLy8g6KaB5Yib5bu65LiA5LiqIGJsb2Ig5pWw5o2uCgoKICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbZGF0YV0sIHsKICAgICAgICB0eXBlOiAidGV4dC9qc29uIgogICAgICB9KSwKICAgICAgICAgIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgIGEuZG93bmxvYWQgPSBmaWxlbmFtZTsgLy8g5bCGYmxvYui9rOaNouS4uuWcsOWdgAogICAgICAvLyDliJvlu7ogVVJMIOeahCBCbG9iIOWvueixoQoKICAgICAgdmFyIHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICBhLmhyZWYgPSB1cmw7IC8vIOagh+etviBkYXRhLSDltYzlhaXoh6rlrprkuYnlsZ7mgKcgIOWxj+iUveWQjuS5n+WPr+ato+W4uOS4i+i9vQoKICAgICAgYS5kYXRhc2V0LmRvd25sb2FkdXJsID0gWyJ0ZXh0L2pzb24iLCBhLmRvd25sb2FkLCBhLmhyZWZdLmpvaW4oIjoiKTsgLy8g5re75Yqg6byg5qCH5LqL5Lu25bm25ZCR5LiA5Liq5oyH5a6a55qE5LqL5Lu255uu5qCH5rS+5Y+RCgogICAgICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCJNb3VzZUV2ZW50cyIpOwogICAgICBlLmluaXRNb3VzZUV2ZW50KCJjbGljayIsIHRydWUsIGZhbHNlLCB3aW5kb3csIDAsIDAsIDAsIDAsIDAsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCAwLCBudWxsKTsKICAgICAgYS5kaXNwYXRjaEV2ZW50KGUpOyAvLyDph4rmlL7mjolibG9i5a+56LGhCgogICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOwogICAgfSwKICAgIGdlbmVyYXRlRmlsZU5hbWU6IGZ1bmN0aW9uIGdlbmVyYXRlRmlsZU5hbWUoKSB7CiAgICAgIHZhciBuYW1lID0gIiI7CgogICAgICB0cnkgewogICAgICAgIC8vIFRPRE86IOmhueebruWQjQogICAgICAgIG5hbWUgPSB0aGlzLmN1cnJlbnRfcHJvamVjdC5wcm9qZWN0X25hbWU7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjb25zb2xlLmxvZygiRXJyb3Igb2NjdXJzOiIgKyBlKTsKICAgICAgICBjb25zb2xlLmxvZygi5Y+v6IO95pyq6L+e5o6l5YiwU2VydmVyIik7CiAgICAgICAgbmFtZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICB9CgogICAgICByZXR1cm4gbmFtZTsKICAgIH0sCiAgICBzaG93R3VpZGU6IGZ1bmN0aW9uIHNob3dHdWlkZSgpIHsKICAgICAgdGhpcy5jaGFuZ2VFZGl0R3VpZGVTdGVwKC0xMDApOwogICAgICB0aGlzLmNoYW5nZUVkaXRHdWlkZVN0ZXAoMSk7CiAgICAgIHRoaXMuY2hhbmdlSXNFZGl0R3VpZGVTaG93KCk7CiAgICB9LAoKICAgIC8qKgogICAgICog6I635Y+W57uf6K6h5pWw5o2u77yM5Y2z57uZIGRhdGEg5Lit55qEIGVudGl0aWVzX2RhdGEg5ZKMIHJlbGFpb25zX2RhdGEg6LWL5YC8CiAgICAgKi8KICAgIGdldF9zdGF0aXN0aWNfZGF0YTogZnVuY3Rpb24gZ2V0X3N0YXRpc3RpY19kYXRhKCkgewogICAgICB2YXIgZGF0YSA9IHRoaXMuZ2V0RGF0YUpzb25PYmplY3QoKTsKICAgICAgdmFyIG5vZGVzID0gZGF0YS5ub2RlcywKICAgICAgICAgIGVkZ2VzID0gZGF0YS5lZGdlczsKICAgICAgdmFyIEVEYXRhID0gewogICAgICAgIGluZGl2aWR1YWw6IDAsCiAgICAgICAgb3JnYW5pemF0aW9uOiAwLAogICAgICAgIHRoaW5nOiAwLAogICAgICAgIGRlZmF1bHQ6IDAsCiAgICAgICAgdG90YWw6IG5vZGVzLmxlbmd0aAogICAgICB9OwoKICAgICAgdmFyIF9pdGVyYXRvcjcgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihub2RlcyksCiAgICAgICAgICBfc3RlcDc7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yNy5zKCk7ICEoX3N0ZXA3ID0gX2l0ZXJhdG9yNy5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgbm9kZSA9IF9zdGVwNy52YWx1ZTsKCiAgICAgICAgICBpZiAoIShub2RlLmRhdGEudHlwZSA9PSAiaW5kaXZpZHVhbCIgfHwgbm9kZS5kYXRhLnR5cGUgPT0gIm9yZ2FuaXphdGlvbiIgfHwgbm9kZS5kYXRhLnR5cGUgPT0gInRoaW5nIikpIHsKICAgICAgICAgICAgRURhdGFbImRlZmF1bHQiXSsrOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgRURhdGFbbm9kZS5kYXRhLnR5cGVdKys7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3I3LmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3I3LmYoKTsKICAgICAgfQoKICAgICAgdmFyIFJEYXRhID0gewogICAgICAgIGNvbm5lY3Rpb246IDAsCiAgICAgICAgaW5oZXJpdGFuY2U6IDAsCiAgICAgICAgZGVmYXVsdDogMCwKICAgICAgICB0b3RhbDogZWRnZXMubGVuZ3RoCiAgICAgIH07CgogICAgICB2YXIgX2l0ZXJhdG9yOCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGVkZ2VzKSwKICAgICAgICAgIF9zdGVwODsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3I4LnMoKTsgIShfc3RlcDggPSBfaXRlcmF0b3I4Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlZGdlID0gX3N0ZXA4LnZhbHVlOwogICAgICAgICAgUkRhdGFbZWRnZS5kYXRhLnR5cGVdKys7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3I4LmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3I4LmYoKTsKICAgICAgfQoKICAgICAgdGhpcy5lbnRpdGllc19kYXRhID0gW0VEYXRhXTsKICAgICAgdGhpcy5yZWxhdGlvbnNfZGF0YSA9IFtSRGF0YV07CiAgICB9LAogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy/mraTlpITkuLrov4fmu6Tku6PnoIEvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIG5vZGVGaWx0ZXI6IGZ1bmN0aW9uIG5vZGVGaWx0ZXIoKSB7CiAgICAgIHZhciBjaGVja0xpc3QgPSB0aGlzLmZpbHRlcl9ub2RlX2NoZWNrTGlzdDsKICAgICAgdGhpcy5jeS5ub2RlcygpLmZvckVhY2goZnVuY3Rpb24gKHZhbCkgewogICAgICAgIHZhciBoaXQgPSBjaGVja0xpc3QuaW5jbHVkZXModmFsLmRhdGEoInR5cGUiKSk7CgogICAgICAgIGlmIChoaXQgJiYgIXZhbC5oYXNDbGFzcygicmVtb3ZlZCIpKSB7CiAgICAgICAgICB2YWwuYWRkQ2xhc3MoInJlbW92ZWQiKTsKICAgICAgICB9IGVsc2UgaWYgKCFoaXQgJiYgdmFsLmhhc0NsYXNzKCJyZW1vdmVkIikpIHsKICAgICAgICAgIHZhbC5yZW1vdmVDbGFzcygicmVtb3ZlZCIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZWRnZUZpbHRlcjogZnVuY3Rpb24gZWRnZUZpbHRlcigpIHsKICAgICAgdmFyIGNoZWNrTGlzdCA9IHRoaXMuZmlsdGVyX2VkZ2VfY2hlY2tMaXN0OwogICAgICB0aGlzLmN5LmVkZ2VzKCkuZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgdmFyIGhpdCA9IGNoZWNrTGlzdC5pbmNsdWRlcyh2YWwuZGF0YSgidHlwZSIpKTsKCiAgICAgICAgaWYgKGhpdCAmJiAhdmFsLmhhc0NsYXNzKCJoaWRkZW4iKSkgewogICAgICAgICAgdmFsLmFkZENsYXNzKCJoaWRkZW4iKTsKICAgICAgICB9IGVsc2UgaWYgKCFoaXQgJiYgdmFsLmhhc0NsYXNzKCJoaWRkZW4iKSkgewogICAgICAgICAgdmFsLnJlbW92ZUNsYXNzKCJoaWRkZW4iKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIG5vZGVEZWZpbHRlcjogZnVuY3Rpb24gbm9kZURlZmlsdGVyKCkgewogICAgICBpZiAodGhpcy5maWx0ZXJfbm9kZV9jaGVja0xpc3QubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICAgIHRoaXMuY3kubm9kZXMoKS5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICBpZiAodmFsLmhhc0NsYXNzKCJyZW1vdmVkIikpIHsKICAgICAgICAgIHZhbC5yZW1vdmVDbGFzcygicmVtb3ZlZCIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuZmlsdGVyX25vZGVfY2hlY2tMaXN0ID0gW107CiAgICB9LAogICAgZWRnZURlZmlsdGVyOiBmdW5jdGlvbiBlZGdlRGVmaWx0ZXIoKSB7CiAgICAgIGlmICh0aGlzLmZpbHRlcl9lZGdlX2NoZWNrTGlzdC5sZW5ndGggPT09IDApIHJldHVybjsKICAgICAgdGhpcy5jeS5lZGdlcygpLmZvckVhY2goZnVuY3Rpb24gKHZhbCkgewogICAgICAgIGlmICh2YWwuaGFzQ2xhc3MoImhpZGRlbiIpKSB7CiAgICAgICAgICB2YWwucmVtb3ZlQ2xhc3MoImhpZGRlbiIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuZmlsdGVyX2VkZ2VfY2hlY2tMaXN0ID0gW107CiAgICB9CiAgfSkKfTs="},{"version":3,"sources":["C:/Users/Zhaoning/Desktop/HCI/src/components/EditBar/EditBar.js"],"names":["mapState","mapMutations","inputKG","OpItem","EditBarBlock","MyButton","name","components","data","showEditBar","showExportOps","opInfo","entities_data","relations_data","filter_node_checkList","filter_edge_checkList","layout","layoutTypeNow","relation_label_enabled","font_size","node_radius","watch","cy","newValue","oldValue","get_statistic_data","options","statistic_data_change","console","log","newVal","oldVal","stop","nodes","elements","positions","node","nodeId","id","position","x","y","fit","d3_options","animate","fixedAfterDragging","linkId","d","linkDistance","manyBodyStrength","ready","tick","progress","randomize","infinite","run","edges","enabled","edge","hasClass","removeClass","addClass","setNodeFontSize","size","Number","isNaN","parseInt","style","informMsg","setNodeRadius","removeStyle","radius","realRadius","computed","state","workspace","nodeType","edgeType","layoutType","pid","node_checkList_disabled","get","filter_node_checked","edge_checkList_disabled","filter_edge_checked","mounted","document","addEventListener","ctrl_S","methods","e","preventDefault","currKey","event","window","keyCode","which","charCode","ctrlKey","metaKey","save","changeEditBarState","open","getElementsByClassName","click","getFilePath","selectedFile","files","reader","FileReader","readAsDataURL","that","onload","setJsonSrcPath","result","graphData","getDataJsonObject","getCleanData","loading","$loading","lock","text","spinner","background","then","res","success","setProject","$message","error","catch","err","finally","close","changeExportState","exportPng","blob","png","output","bg","full","scale","aLink","createElement","download","generateFileName","url","URL","createObjectURL","href","evt","createEvent","initEvent","dispatchEvent","revokeObjectURL","length","eles","JSON","parse","stringify","json","obj","undefined","forEach","val","push","type","relation","source","target","property","exportJson","filename","Blob","a","dataset","downloadurl","join","initMouseEvent","current_project","project_name","Date","getTime","showGuide","changeEditGuideStep","changeIsEditGuideShow","EData","individual","organization","thing","default","total","RData","connection","inheritance","nodeFilter","checkList","hit","includes","edgeFilter","nodeDefilter","edgeDefilter"],"mappings":"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","sourcesContent":["import { mapState, mapMutations } from \"vuex\";\nimport { inputKG } from \"../../api/basicAPI\";\nimport OpItem from \"./OpItem\";\nimport EditBarBlock from \"./EditBarBlock\";\nimport MyButton from \"@/components/Tools/MyButton\";\n\nexport default {\n  name: \"EditBar\",\n  components: { OpItem, EditBarBlock, MyButton },\n  data() {\n    return {\n      showEditBar: true,\n      showExportOps: false,\n      opInfo: \"未保存的修改将被丢弃且无法恢复\",\n      entities_data: [],\n      relations_data: [],\n\n      //////////////////////过滤相关/////////////////////////////\n      filter_node_checkList: [],\n      filter_edge_checkList: [],\n\n      //////////////////////展示效果相关////////////////////////////////\n      layout: null,\n      layoutTypeNow: \"\",\n      relation_label_enabled: true,\n      font_size: 20,\n      node_radius: 20,\n    };\n  },\n  watch: {\n    cy(newValue, oldValue) {\n      this.get_statistic_data();\n      this.layoutTypeNow = newValue.options().layout.name;\n    },\n    statistic_data_change(newValue, oldValue) {\n      console.log(\"检测到数据变化\");\n      this.get_statistic_data();\n    },\n\n    /////////////////////////////展示相关//////////////////////////////\n    layoutTypeNow(newVal, oldVal) {\n      // console.log(\"layout watched: '\",oldVal,\"' to '\",newVal,\"'\");\n      let layout = this.layout;\n      if (layout !== null) {\n        layout.stop();\n      }\n      if (newVal === \"preset\") {\n        //console.log(\"elements stored: \",this.elements);\n        let nodes = this.elements.nodes;\n        let positions = (node) => {\n          let nodeId = node.data(\"id\");\n          for (let node of nodes) {\n            if (node.data.id === nodeId) {\n              return node.position;\n            }\n          }\n          return { x: 0, y: 0 }; //可以拓展成随机放置\n        };\n        layout = this.cy.layout({\n          name: newVal,\n          fit: true,\n          positions: positions,\n        }); //若以后恢复的布局中新增颜色、大小等，可能需要为增加的部分渲染内容新写代码\n        //console.log(\"reset done\")\n      } else if (newVal === \"d3-force\") {\n        let d3_options = {\n          name: \"d3-force\",\n          animate: true,\n          fit: true, //适应viewport\n          fixedAfterDragging: false,\n          linkId: function id(d) {\n            return d.id;\n          },\n          linkDistance: 1000,\n          manyBodyStrength: -10000,\n          ready: function() {},\n          stop: function() {},\n          tick: function(progress) {\n            // console.log('progress - ', progress);\n          },\n          randomize: false,\n          infinite: true,\n        };\n        layout = this.cy.layout(d3_options);\n      } else {\n        layout = this.cy.layout({ name: newVal, fit: true });\n      }\n      this.layout = layout;\n      this.layout.run();\n    },\n    relation_label_enabled(newVal, oldVal) {\n      let edges = this.cy.edges();\n      let enabled = newVal;\n      for (let edge of edges) {\n        if (enabled && edge.hasClass(\"label_hidden\")) {\n          edge.removeClass(\"label_hidden\");\n        } else if (!enabled && !edge.hasClass(\"label_hidden\")) {\n          edge.addClass(\"label_hidden\");\n        }\n      }\n    },\n    font_size(newVal, oldVal) {\n      // let defaultSize = '25px';//默认值，25px是看workspace找到的\n      if (newVal === \"\") {\n        this.setNodeFontSize(\"\"); //同步改变workspace中的nodeNodeFontSize\n        //CytoscapeKG中在监听到workspace中nodeFontSize刚变回''时\n        //会根据节点大小和字数重新渲染各个节点的字体大小，所以不能用统一默认值\n        //此处什么也不需要做，因为CytoscapeKG里做了\n        return;\n      }\n      let size = Number(newVal);\n      if (!isNaN(size)) {\n        this.setNodeFontSize(newVal); //同步改变workspace中的nodeNodeFontSize\n        size = parseInt(size);\n        for (let node of this.cy.nodes()) {\n          node.style(\"font-size\", size + \"px\");\n        }\n      } else {\n        if (newVal !== \"\") {\n          this.informMsg(\"error\", \"请输入数字\");\n        }\n        this.setNodeFontSize(\"\"); //同步改变workspace中的nodeNodeFontSize\n        //CytoscapeKG中在监听到workspace中nodeFontSize刚变回''时\n        //会根据节点大小和字数重新渲染各个节点的字体大小，所以不能用统一默认值\n        //此处什么也不需要做，因为CytoscapeKG里做了\n      }\n    },\n    node_radius(newVal, oldVal) {\n      if (newVal === \"\") {\n        this.setNodeRadius(\"\"); //同步改变workspace中的nodeRadius\n        for (let node of this.cy.nodes()) {\n          node.removeStyle(\"width\");\n          node.removeStyle(\"height\");\n        }\n        return;\n      }\n      let radius = Number(newVal);\n      if (!isNaN(radius)) {\n        radius = parseInt(radius);\n        let realRadius = radius * 2;\n        this.setNodeRadius(realRadius + \"\"); //同步改变workspace中的nodeRadius\n        for (let node of this.cy.nodes()) {\n          //是不是要改成等比例扩大？\n          node.style(\"width\", realRadius + \"px\");\n          node.style(\"height\", realRadius + \"px\");\n        }\n      } else {\n        this.setNodeRadius(\"\"); //同步改变workspace中的nodeRadius\n        if (newVal !== \"\") {\n          this.informMsg(\"error\", \"请输入数字\");\n        }\n        for (let node of this.cy.nodes()) {\n          node.removeStyle(\"width\");\n          node.removeStyle(\"height\");\n        }\n      }\n    },\n  },\n  computed: {\n    ...mapState({\n      cy: (state) => state.workspace.cy,\n      statistic_data_change: (state) => state.workspace.statistic_data_change,\n      nodeType: (state) => state.workspace.nodeType,\n      edgeType: (state) => state.workspace.edgeType,\n      layoutType: (state) => state.workspace.layoutType,\n      elements: (state) => state.workspace.elements,\n      pid: (state) => state.pid,\n    }),\n    node_checkList_disabled: {\n      get() {\n        return !this.filter_node_checked;\n      },\n    },\n    edge_checkList_disabled: {\n      get() {\n        return !this.filter_edge_checked;\n      },\n    },\n  },\n  mounted() {\n    // const el = document.querySelector('#home');\n    // if (!el) return;\n    // el.addEventListener('keydown', this.ctrl_S);\n    document.addEventListener('keydown', this.ctrl_S);\n  },\n  methods: {\n    ...mapMutations([\n      \"setJsonSrcPath\",\n      \"setSeCurrentSearchParams\",\n      \"setCurrentSearchResult\",\n      \"setNodeRadius\",\n      \"setNodeFontSize\",\n      \"setProject\",\n      \"changeShowQAPanel\",\n      \"changeEditGuideStep\",\n      \"changeIsEditGuideShow\",\n    ]),\n\n    ctrl_S(e) {\n        e.preventDefault();\n        var currKey=0, e=e||event||window.event;\n        currKey = e.keyCode||e.which||e.charCode;\n        if(currKey == 83 && (e.ctrlKey||e.metaKey)){\n            this.save();\n            return false;\n        }\n    },\n\n    changeEditBarState() {\n      this.showEditBar = !this.showEditBar;\n    },\n\n    open() {\n      document.getElementsByClassName(\"choose-file\")[0].click();\n    },\n\n    getFilePath() {\n      //获取读取我文件的File对象\n      let selectedFile = document.getElementsByClassName(\"choose-file\")[0]\n        .files[0];\n      let reader = new FileReader(); //这是核心,读取操作就是由它完成.\n      reader.readAsDataURL(selectedFile);\n      reader.that = this;\n      reader.onload = function() {\n        //当读取完成后回调这个函数,然后此时文件的内容存储到了this.result中,直接操作即可\n        this.that.setJsonSrcPath(this.result);\n      };\n    },\n\n    save() {\n      let data = {};\n      let graphData = this.getDataJsonObject();\n      data = {\n        nodes: graphData.nodes,\n        edges: graphData.edges,\n      };\n\n      data = this.getCleanData(data);\n      console.log(\"要保存的数据：\", data);\n\n      const loading = this.$loading({\n        lock: true,\n        text: \"...保存中...\",\n        spinner: \"el-icon-loading\",\n        background: \"rgba(255, 255,255, 0.8)\",\n      });\n      inputKG({ ...data, pid: this.pid })\n        .then((res) => {\n          if (res.success) {\n            this.setProject(data);\n            this.$message.success(\"保存成功\");\n          } else {\n            this.$message.error(\"保存失败\");\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n          this.$message.error(\"网络错误或服务器错误\");\n        })\n        .finally(() => {\n          loading.close();\n        });\n    },\n\n    changeExportState() {\n      this.showExportOps = !this.showExportOps;\n    },\n\n    /**\n         * 导出全局图片.\n         * options: The export options.\n         output： Whether the output should be 'base64uri' (default), 'base64', 'blob', or 'blob-promise' (a promise that resolves to the blob is returned).\n         bg: The background colour of the image (transparent by default).\n         full: Whether to export the current viewport view (false, default) or the entire graph (true).\n         scale: This value specifies a positive number that scales the size of the resultant image.\n         maxWidth: Specifies the scale automatically in combination with maxHeight such that the resultant image is no wider than maxWidth.\n         maxHeight: Specifies the scale automatically in combination with maxWidth such that the resultant image is no taller than maxHeight\n         */\n    exportPng() {\n      this.$message.success(\"正在导出图片...\");\n      let blob = this.cy.png({\n        output: \"blob-promise\",\n        bg: \"white\",\n        full: true,\n        scale: 4,\n      });\n      blob\n        .then((res) => {\n          //创建下载链接\n          let aLink = document.createElement(\"a\");\n          aLink.download = this.generateFileName() + \".png\";\n          let url = window.URL.createObjectURL(res);\n          aLink.href = url;\n\n          //创建、分配并触发点击事件\n          let evt = document.createEvent(\"MouseEvents\");\n          evt.initEvent(\"click\", true, true);\n          aLink.dispatchEvent(evt);\n\n          // 释放掉blob对象\n          window.URL.revokeObjectURL(url);\n        })\n        .catch((err) => {\n          console.log(\"Error occured: \", err);\n          if (this.cy.elements().length === 0) {\n            this.$message.error(\"知识图谱已经空啦，导不出东西的呀\");\n          }\n        });\n    },\n\n    /**\n         * 对象拷贝\n         * JSON.parse(JSON.stringify(obj))我们一般用来深拷贝\n         但不是完全深拷贝，有以下特点：\n         1、如果obj里面有时间对象，则JSON.stringify后再JSON.parse的结果，时间将只是字符串的形式。而不是时间对象；\n         2、如果obj里有RegExp、Error对象，则序列化的结果将只得到空对象；\n         3、如果obj里有函数，undefined，则序列化的结果会把函数或 undefined丢失；\n         4、如果obj里有NaN、Infinity和-Infinity，则序列化的结果会变成null\n         5、JSON.stringify()只能序列化对象的可枚举的自有属性，例如 如果obj中的对象是有构造函数生成的， 则使用JSON.parse(JSON.stringify(obj))深拷贝后，会丢弃对象的constructor；\n         6、如果对象中存在循环引用的情况也无法正确实现深拷贝；\n\n         注：由于前后端数据格式不统一，这里对数据格式做了转化。\n         日后前/后端有修改时这里都要改！\n         */\n    getDataJsonObject() {\n      let eles = JSON.parse(JSON.stringify(this.cy.json().elements)); //其实深拷贝可能没啥意义，只是单纯直觉上想用一用(*╹▽╹*)\n      let obj = { edges: [], nodes: [] };\n      if (JSON.stringify(eles) !== \"{}\") {\n        if (eles.edges !== undefined && eles.edges.length > 0) {\n          eles.edges.forEach((val) => {\n            obj.edges.push({\n              data: val.data,\n            });\n          });\n        }\n        if (eles.nodes !== undefined && eles.nodes.length > 0) {\n          eles.nodes.forEach((val) => {\n            obj.nodes.push({\n              data: val.data,\n              position: val.position,\n            });\n          });\n        }\n      }\n      return obj;\n    },\n    getCleanData(eles) {\n      let obj = { edges: [], nodes: [] };\n      if (JSON.stringify(eles) !== \"{}\") {\n        if (eles.edges !== undefined && eles.edges.length > 0) {\n          eles.edges.forEach((val) => {\n            obj.edges.push({\n              data: {\n                id: val.data.id,\n                type: val.data.type,\n                relation: val.data.relation,\n                source: val.data.source,\n                target: val.data.target,\n              },\n            });\n          });\n        }\n        if (eles.nodes !== undefined && eles.nodes.length > 0) {\n          eles.nodes.forEach((val) => {\n            obj.nodes.push({\n              data: {\n                id: val.data.id,\n                type: val.data.type,\n                name: val.data.name,\n                property: val.data.property,\n              },\n              position: val.position,\n            });\n          });\n        }\n      }\n      return obj;\n    },\n    exportJson() {\n      this.$message(\"正在导出json...\");\n      //有空也可以改成promise式的\n      let data = this.getDataJsonObject();\n      let filename = this.generateFileName() + \".json\";\n      if (typeof data === \"object\") {\n        data = JSON.stringify(data, undefined, 4);\n      }\n      // 要创建一个 blob 数据\n      let blob = new Blob([data], { type: \"text/json\" }),\n        a = document.createElement(\"a\");\n      a.download = filename;\n\n      // 将blob转换为地址\n      // 创建 URL 的 Blob 对象\n      let url = window.URL.createObjectURL(blob);\n      a.href = url;\n\n      // 标签 data- 嵌入自定义属性  屏蔽后也可正常下载\n      a.dataset.downloadurl = [\"text/json\", a.download, a.href].join(\":\");\n\n      // 添加鼠标事件并向一个指定的事件目标派发\n      let e = document.createEvent(\"MouseEvents\");\n      e.initMouseEvent(\n        \"click\",\n        true,\n        false,\n        window,\n        0,\n        0,\n        0,\n        0,\n        0,\n        false,\n        false,\n        false,\n        false,\n        0,\n        null\n      );\n      a.dispatchEvent(e);\n\n      // 释放掉blob对象\n      window.URL.revokeObjectURL(url);\n    },\n\n    generateFileName() {\n      let name = \"\";\n      try {\n        // TODO: 项目名\n        name = this.current_project.project_name;\n      } catch (e) {\n        console.log(\"Error occurs:\" + e);\n        console.log(\"可能未连接到Server\");\n        name = new Date().getTime();\n      }\n      return name;\n    },\n\n    showGuide() {\n      this.changeEditGuideStep(-100);\n      this.changeEditGuideStep(1);\n      this.changeIsEditGuideShow();\n    },\n\n    /**\n     * 获取统计数据，即给 data 中的 entities_data 和 relaions_data 赋值\n     */\n    get_statistic_data() {\n      let data = this.getDataJsonObject();\n      let nodes = data.nodes,\n        edges = data.edges;\n      let EData = {\n        individual: 0,\n        organization: 0,\n        thing: 0,\n        default: 0,\n        total: nodes.length,\n      };\n      for (let node of nodes) {\n        if (\n          !(\n            node.data.type == \"individual\" ||\n            node.data.type == \"organization\" ||\n            node.data.type == \"thing\"\n          )\n        ) {\n          EData[\"default\"]++;\n        } else {\n          EData[node.data.type]++;\n        }\n      }\n      let RData = {\n        connection: 0,\n        inheritance: 0,\n        default: 0,\n        total: edges.length,\n      };\n      for (let edge of edges) {\n        RData[edge.data.type]++;\n      }\n      this.entities_data = [EData];\n      this.relations_data = [RData];\n    },\n\n    ///////////////////////////////////此处为过滤代码///////////////////////////////////////\n    nodeFilter() {\n      let checkList = this.filter_node_checkList;\n      this.cy.nodes().forEach((val) => {\n        let hit = checkList.includes(val.data(\"type\"));\n        if (hit && !val.hasClass(\"removed\")) {\n          val.addClass(\"removed\");\n        } else if (!hit && val.hasClass(\"removed\")) {\n          val.removeClass(\"removed\");\n        }\n      });\n    },\n    edgeFilter() {\n      let checkList = this.filter_edge_checkList;\n      this.cy.edges().forEach((val) => {\n        let hit = checkList.includes(val.data(\"type\"));\n        if (hit && !val.hasClass(\"hidden\")) {\n          val.addClass(\"hidden\");\n        } else if (!hit && val.hasClass(\"hidden\")) {\n          val.removeClass(\"hidden\");\n        }\n      });\n    },\n    nodeDefilter() {\n      if (this.filter_node_checkList.length === 0) return;\n      this.cy.nodes().forEach((val) => {\n        if (val.hasClass(\"removed\")) {\n          val.removeClass(\"removed\");\n        }\n      });\n      this.filter_node_checkList = [];\n    },\n    edgeDefilter() {\n      if (this.filter_edge_checkList.length === 0) return;\n      this.cy.edges().forEach((val) => {\n        if (val.hasClass(\"hidden\")) {\n          val.removeClass(\"hidden\");\n        }\n      });\n      this.filter_edge_checkList = [];\n    },\n  },\n};\n"]}]}