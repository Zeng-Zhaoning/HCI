{"remainingRequest":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\Zhaoning\\Desktop\\HCI\\src\\components\\TypesetGraph.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\src\\components\\TypesetGraph.vue","mtime":1640105290972},{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639148470021},{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\babel-loader\\lib\\index.js","mtime":1639148468681},{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639148470021},{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1639551855693}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkM6L1VzZXJzL1poYW9uaW5nL0Rlc2t0b3AvSENJL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvWmhhb25pbmcvRGVza3RvcC9IQ0kvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCBjeXRvc2NhcGUgZnJvbSAnY3l0b3NjYXBlJzsKaW1wb3J0IGNvbXBvdW5kRHJhZ0FuZERyb3AgZnJvbSAnY3l0b3NjYXBlLWNvbXBvdW5kLWRyYWctYW5kLWRyb3AnOwppbXBvcnQgZmNvc2UgZnJvbSAnY3l0b3NjYXBlLWZjb3NlJzsKaW1wb3J0IHsgbWFwR2V0dGVycywgbWFwTXV0YXRpb25zLCBtYXBTdGF0ZSB9IGZyb20gInZ1ZXgiOwppbXBvcnQgJCBmcm9tICJqcXVlcnkiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgdGlwcHksIHsgc3RpY2t5IH0gZnJvbSAidGlwcHkuanMiOwppbXBvcnQgRWRpdEJhckJsb2NrIGZyb20gIkAvY29tcG9uZW50cy9FZGl0QmFyL0VkaXRCYXJCbG9jayI7CmltcG9ydCBPcEl0ZW0gZnJvbSAiQC9jb21wb25lbnRzL0VkaXRCYXIvT3BJdGVtIjsKY3l0b3NjYXBlLnVzZShjb21wb3VuZERyYWdBbmREcm9wKTsKY3l0b3NjYXBlLnVzZShmY29zZSk7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVHlwZXNldEdyYXBoIiwKICBjb21wb25lbnRzOiB7CiAgICBFZGl0QmFyQmxvY2s6IEVkaXRCYXJCbG9jaywKICAgIE9wSXRlbTogT3BJdGVtCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2RuZDogbnVsbCwKICAgICAgLy/mi5bmi73lt6Xlhbflj6Xmn4QKICAgICAgdHlwZXNldF9jeTogbnVsbCwKICAgICAgLy9jeeWPpeafhAogICAgICBmY29zZV9vcHRpb25zOiB7CiAgICAgICAgbmFtZTogJ2Zjb3NlJywKICAgICAgICBxdWFsaXR5OiAicHJvb2YiLAogICAgICAgIHJhbmRvbWl6ZTogZmFsc2UsCiAgICAgICAgYW5pbWF0aW9uRHVyYXRpb246IDI1MCwKICAgICAgICBmaXQ6IGZhbHNlLAogICAgICAgIGFsaWdubWVudENvbnN0cmFpbnQ6IHsKICAgICAgICAgIHZlcnRpY2FsOiBbXSwKICAgICAgICAgIGhvcml6b250YWw6IFtdCiAgICAgICAgfQogICAgICB9IC8vZmNvc2XluIPlsYDpgInpobkKCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKHsKICAgIGN5OiBmdW5jdGlvbiBjeShzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUud29ya3NwYWNlLmN5OwogICAgfSwKICAgIG5vZGVGb250U2l6ZTogZnVuY3Rpb24gbm9kZUZvbnRTaXplKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS53b3Jrc3BhY2Uubm9kZUZvbnRTaXplOwogICAgfSwKICAgIG5vZGVSYWRpdXM6IGZ1bmN0aW9uIG5vZGVSYWRpdXMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLndvcmtzcGFjZS5ub2RlUmFkaXVzOwogICAgfSwKICAgIGRlZmF1bHRTdHlsZTogZnVuY3Rpb24gZGVmYXVsdFN0eWxlKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS53b3Jrc3BhY2UuZGVmYXVsdFN0eWxlOwogICAgfSwKICAgIHNoYXBlVHlwZTogZnVuY3Rpb24gc2hhcGVUeXBlKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS53b3Jrc3BhY2Uuc2hhcGVUeXBlOwogICAgfSwKICAgIG5vZGVUeXBlOiBmdW5jdGlvbiBub2RlVHlwZShzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUud29ya3NwYWNlLm5vZGVUeXBlOwogICAgfSwKICAgIGVkZ2VUeXBlOiBmdW5jdGlvbiBlZGdlVHlwZShzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUud29ya3NwYWNlLmVkZ2VUeXBlOwogICAgfSwKICAgIGxpbmVTdHlsZVR5cGU6IGZ1bmN0aW9uIGxpbmVTdHlsZVR5cGUoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLndvcmtzcGFjZS5saW5lU3R5bGVUeXBlOwogICAgfSwKICAgIHByb2plY3Q6IGZ1bmN0aW9uIHByb2plY3Qoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnByb2plY3Q7CiAgICB9CiAgfSkpLAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgZGF0YSA9IHsKICAgICAgZWRnZXM6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5wcm9qZWN0LmVkZ2VzKSksCiAgICAgIG5vZGVzOiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMucHJvamVjdC5ub2RlcykpCiAgICB9OwogICAgdGhpcy5kYXRhSGFuZGxlKGRhdGEpOwogIH0sCiAgd2F0Y2g6IHsvLyBjdXJyZW50X3Byb2plY3RfY2hhbmdlKG5vdywgb2xkKXsKICAgIC8vICAgY29uc29sZS5sb2coImN1cnJlbnRfcHJvamVjdOaUueWKqCIpCiAgICAvLyAgIGxldCBkYXRhID0gewogICAgLy8gICAgIGVkZ2VzOiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY3VycmVudF9wcm9qZWN0LmVkZ2VzKSksCiAgICAvLyAgICAgbm9kZXM6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5jdXJyZW50X3Byb2plY3Qubm9kZXMpKSwKICAgIC8vICAgfTsKICAgIC8vICAgdGhpcy5kYXRhSGFuZGxlKGRhdGEpOwogICAgLy8gfQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0RGF0YUpzb25PYmplY3Q6IGZ1bmN0aW9uIGdldERhdGFKc29uT2JqZWN0KGN5KSB7CiAgICAgIHZhciBlbGVzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjeS5qc29uKCkuZWxlbWVudHMpKTsKICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAiZWRnZXMiOiBbXSwKICAgICAgICAibm9kZXMiOiBbXQogICAgICB9OwoKICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KGVsZXMpICE9PSAne30nKSB7CiAgICAgICAgaWYgKGVsZXMuZWRnZXMgIT09IHVuZGVmaW5lZCAmJiBlbGVzLmVkZ2VzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGVsZXMuZWRnZXMuZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgICAgIG9iai5lZGdlcy5wdXNoKHsKICAgICAgICAgICAgICBkYXRhOiB2YWwuZGF0YQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKGVsZXMubm9kZXMgIT09IHVuZGVmaW5lZCAmJiBlbGVzLm5vZGVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGVsZXMubm9kZXMuZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgICAgIG9iai5ub2Rlcy5wdXNoKHsKICAgICAgICAgICAgICBkYXRhOiB2YWwuZGF0YSwKICAgICAgICAgICAgICBwb3NpdGlvbjogdmFsLnBvc2l0aW9uCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gb2JqOwogICAgfSwKICAgIC8v5pyA5ZCO5Y675o6JCiAgICAvL+ivu+aVsOaNru+8jOeEtuWQjuS6pOe7mWRhdGFIYW5kbGUKICAgIGdldERhdGE6IGZ1bmN0aW9uIGdldERhdGEodXJsKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBheGlvcy5nZXQodXJsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5kYXRhSGFuZGxlKHJlcy5kYXRhKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKCiAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aWh+S7tuaVsOaNruagvOW8j+S4jeato+ehricpOwogICAgICB9KTsKICAgIH0sCiAgICAvL+WcqGRhdGHkuK3lrZjmlbDmja7vvIzlubbov5vooYzmlbDmja7lsZXnpLrnmoTpooTlpITnkIYKICAgIGRhdGFIYW5kbGU6IGZ1bmN0aW9uIGRhdGFIYW5kbGUoZGF0YSkgewogICAgICBkYXRhLmVkZ2VzLmZvckVhY2goZnVuY3Rpb24gKHZhbCkgewogICAgICAgIHZhbC5jbGFzc2VzID0gJ2F1dG9yb3RhdGUnOwogICAgICAgIHZhbC5kYXRhLnR5cGUgPSB2YWwuZGF0YS50eXBlIHx8ICdkZWZhdWx0JzsKICAgICAgfSk7CiAgICAgIHZhciBkZWZhdWx0X2NvbG9yID0gIiM5YzhmOTYiOyAvL+WSjGFkZC1ub2Rl5pa55rOV5Lit5Yid5aeL5YyW6aKc6Imy6ICm5ZCI77yM5b+F6aG75ZCM5pe25L+u5pS5CgogICAgICBkYXRhLm5vZGVzLmZvckVhY2goZnVuY3Rpb24gKHZhbCkgewogICAgICAgIHZhbC5kYXRhLnR5cGUgPSB2YWwuZGF0YS50eXBlIHx8ICdkZWZhdWx0JzsKICAgICAgICB2YWwuZGF0YS5jb2xvciA9IHZhbC5kYXRhLmNvbG9yIHx8IGRlZmF1bHRfY29sb3I7IC8v5bCG6aKc6Imy57uR5a6a5Zyo5pWw5o2u6YeM77yM5Zyod29ya3NwYWNl5Lit5L+u5pS55Li6YmFja2dyb3VuZC1jb2xvcjpkYXRhKGNvbG9yKSzlrp7njrDpopzoibLmjIHkuYXljJYKICAgICAgICAvLyB2YWwucG9zaXRpb24ueCA9IHZhbC5kYXRhLnR5cGVzZXQueCA9PT0gLTE/IHZhbC5wb3NpdGlvbi54IDogdmFsLmRhdGEudHlwZXNldC54OwogICAgICAgIC8vIHZhbC5wb3NpdGlvbi55ID0gdmFsLmRhdGEudHlwZXNldC55ID09PSAtMT8gdmFsLnBvc2l0aW9uLnkgOiB2YWwuZGF0YS50eXBlc2V0Lnk7CiAgICAgIH0pOwogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHZhciBsb2FkaW5nID0gdGhpcy4kbG9hZGluZyh7CiAgICAgICAgbG9jazogdHJ1ZSwKICAgICAgICB0ZXh0OiAnLi4u5Yqg6L295LitLi4uJywKICAgICAgICBzcGlubmVyOiAnZWwtaWNvbi1sb2FkaW5nJywKICAgICAgICBiYWNrZ3JvdW5kOiAncmdiYSgyNTUsIDI1NSwyNTUsIDAuOCknCiAgICAgIH0pOwoKICAgICAgdHJ5IHsKICAgICAgICB0aGlzLmdyYXBoKHRoYXQsIGRhdGEpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGxvYWRpbmcuY2xvc2UoKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8v6K6p6L+H6ZW/55qE5YaF5a655L2c5Li65bGV56S655qE5qCH6aKY5pe255yB55WlCiAgICBmb250U2hvdzogZnVuY3Rpb24gZm9udFNob3codGV4dCkgewogICAgICBpZiAodGV4dCAmJiB0ZXh0Lmxlbmd0aCA+IDUpIHsKICAgICAgICByZXR1cm4gdGV4dC5zdWJzdHJpbmcoMCwgNCkgKyAiLi4uIjsKICAgICAgfQoKICAgICAgcmV0dXJuIHRleHQ7CiAgICB9LAogICAgLy/moLnmja7lhoXlrrnorr7nva7lrZfkvZPlpKflsI/vvIzkvb/kuYvkuI3kvJrotoXlh7roioLngrnvvIjmnKrpqozor4HvvIkKICAgIC8v5pyA5aW95pS55oiQ5qC55o2u6IqC54K55aSn5bCP6K6+572u5a2X5L2T5aSn5bCPCiAgICBmb250U3R5bGU6IGZ1bmN0aW9uIGZvbnRTdHlsZShsZW5ndGgsIHdpZHRoKSB7CiAgICAgIGlmICh0aGlzLm5vZGVGb250U2l6ZSAhPT0gJycpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgImZvbnQtc2l6ZSI6IHRoaXMubm9kZUZvbnRTaXplICsgInB4IgogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHZhciBkZWZhdWx0V2lkdGggPSAzMDsKICAgICAgdmFyIG1pbldpZHRoID0gMTk7CiAgICAgIHZhciBmb250U2l6ZSA9IGRlZmF1bHRXaWR0aCAtIChsZW5ndGggLSAyKSAqIDY7IC8v6L+Z5Liq6K6h566X5a2X5L2T5aSn5bCP55qE566X5byP5Y+v6IO95pyJ54K55ouJ6IOv77yMCiAgICAgIC8v5qC55o2u6IqC54K55aSn5bCP6LCD5pW05paH5a2X5aSn5bCPCgogICAgICB2YXIgbm9kZVdpZHRoID0gd2lkdGggPyB3aWR0aCA6IGRlZmF1bHRXaWR0aDsKICAgICAgZm9udFNpemUgPSBmb250U2l6ZSAqIG5vZGVXaWR0aCAvIGRlZmF1bHRXaWR0aDsKCiAgICAgIGlmICghZm9udFNpemUgfHwgZm9udFNpemUgPCBtaW5XaWR0aCkgewogICAgICAgIC8vIiFmb250U2l6ZSLmnInmlYjlkJfvvIzkuI3mh4Lor7YKICAgICAgICBmb250U2l6ZSA9IG1pbldpZHRoOwogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgICJmb250LXNpemUiOiBmb250U2l6ZSArICJweCIKICAgICAgfTsKICAgIH0sCiAgICAvL+W4ruWKqW5vZGXlkIjpgILlnLDlsZXnpLp0ZXh0CiAgICByZW5kTm9kZTogZnVuY3Rpb24gcmVuZE5vZGUodGFyZ2V0LCB0aGF0KSB7CiAgICAgIHZhciBkYXRhID0gdGFyZ2V0LmRhdGEoKTsKICAgICAgdmFyIHRleHQgPSB0aGF0LmZvbnRTaG93KGRhdGEubmFtZSk7IC8v5aaC5p6c5rKh5pyJ6K6+5a6a5aSn5bCP77yM5bCx5oyJ54Wn6IqC54K55pys6Lqr5aSn5bCP77yI6IqC54K55aSn5bCP5LiN5piv5pe25Yi75piv6K6+5a6a5aSn5bCP5ZCX77yf5oyJ546w5Zyo55qE5YaZ5rOV77yM5oiR6KeJ5b6X5paw5aKe55qE6IqC54K55rKh5pyJ5Yid5aeL5YyW5Yiw5riy5p+T5Yiw6K6+5a6a5aSn5bCP77yJCgogICAgICB2YXIgd2lkdGhOb3cgPSB0aGlzLm5vZGVSYWRpdXMgPT09ICcnID8gdGhpcy5nZXROb2RlV2lkdGgodGFyZ2V0KSA6IHRoaXMubm9kZVJhZGl1czsKICAgICAgd2lkdGhOb3cgPSBwYXJzZUludCh3aWR0aE5vdyArICcnKTsgLy/noa7kv53mmK/mlbDlrZfnsbvlnosKICAgICAgLy/ojrflj5boioLngrnlrr3luqbnmoTmlbDlrZflgLzmnaXosIPoioLlrZfkvZPlpKflsI8KCiAgICAgIHZhciBzdHlsZTsKCiAgICAgIGlmICh0ZXh0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBzdHlsZSA9IHRoYXQuZm9udFN0eWxlKHRleHQubGVuZ3RoLCB3aWR0aE5vdyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3R5bGUgPSB0aGF0LmZvbnRTdHlsZSgwLCB3aWR0aE5vdyk7CiAgICAgIH0KCiAgICAgIHN0eWxlLnNoYXBlID0gdGhpcy5zaGFwZVR5cGVbZGF0YS50eXBlXTsKICAgICAgc3R5bGUubGFiZWwgPSB0ZXh0OwoKICAgICAgaWYgKHRoaXMubm9kZVJhZGl1cyAhPT0gJycpIHsKICAgICAgICAvL+WSjEVkaXRCYXLkuK1ub2RlUmFkaXVz55uR5ZCs5pa55rOV6YC76L6R6ICm5ZCI77yM5b+F6aG75ZCM5pe25L+u5pS5CiAgICAgICAgc3R5bGUud2lkdGggPSB3aWR0aE5vdyArICdweCc7CiAgICAgICAgc3R5bGUuaGVpZ2h0ID0gd2lkdGhOb3cgKyAncHgnOwogICAgICB9CgogICAgICB0YXJnZXQuc3R5bGUoc3R5bGUpOwogICAgfSwKICAgIGdldE5vZGVXaWR0aDogZnVuY3Rpb24gZ2V0Tm9kZVdpZHRoKHRhcmdldCkgewogICAgICAvL+i/lOWbnuWAvOS4uuaVsOWtl+exu+WeiwogICAgICB2YXIgd2lkdGhQcm9wID0gdGFyZ2V0LnN0eWxlKCJ3aWR0aCIpOwogICAgICB2YXIgZGVmYXVsdFdpZHRoID0gMzA7CgogICAgICBpZiAod2lkdGhQcm9wKSB7CiAgICAgICAgcmV0dXJuIHBhcnNlSW50KHdpZHRoUHJvcC5tYXRjaCgvKFxTKilweC8pWzFdKTsgLy/pmo/kvr/mkJznmoTvvIzkuI3nn6XpgZPmnInmsqHmnInmm7Tlpb3lhpnms5UKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZGVmYXVsdFdpZHRoOwogICAgICB9CiAgICB9LAogICAgcmVuZEVkZ2U6IGZ1bmN0aW9uIHJlbmRFZGdlKHRhcmdldCwgdGhhdCkgewogICAgICB2YXIgZGF0YSA9IHRhcmdldC5kYXRhKCk7CiAgICAgIHZhciB0ZXh0ID0gdGhhdC5mb250U2hvdyhkYXRhLnJlbGF0aW9uKTsKICAgICAgdGFyZ2V0LnN0eWxlKHsKICAgICAgICBsYWJlbDogdGV4dCwKICAgICAgICAnbGluZS1zdHlsZSc6IHRoaXMubGluZVN0eWxlVHlwZVtkYXRhLnR5cGVdCiAgICAgIH0pOwogICAgfSwKICAgIGdyYXBoOiBmdW5jdGlvbiBncmFwaCh0aGF0LCBkYXRhKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIHByZXNldExheW91dCA9IHsKICAgICAgICBuYW1lOiAncHJlc2V0JywKICAgICAgICBwb3NpdGlvbnM6IHVuZGVmaW5lZCwKICAgICAgICAvLyBtYXAgb2YgKG5vZGUgaWQpID0+IChwb3NpdGlvbiBvYmopOyBvciBmdW5jdGlvbihub2RlKXsgcmV0dXJuIHNvbVBvczsgfQogICAgICAgIHpvb206IHVuZGVmaW5lZCwKICAgICAgICAvLyB0aGUgem9vbSBsZXZlbCB0byBzZXQgKHByb2Igd2FudCBmaXQgPSBmYWxzZSBpZiBzZXQpCiAgICAgICAgcGFuOiB1bmRlZmluZWQsCiAgICAgICAgLy8gdGhlIHBhbiBsZXZlbCB0byBzZXQgKHByb2Igd2FudCBmaXQgPSBmYWxzZSBpZiBzZXQpCiAgICAgICAgZml0OiB0cnVlLAogICAgICAgIC8vIHdoZXRoZXIgdG8gZml0IHRvIHZpZXdwb3J0CiAgICAgICAgcGFkZGluZzogMzAsCiAgICAgICAgLy8gcGFkZGluZyBvbiBmaXQKICAgICAgICBhbmltYXRlOiBmYWxzZSwKICAgICAgICAvLyB3aGV0aGVyIHRvIHRyYW5zaXRpb24gdGhlIG5vZGUgcG9zaXRpb25zCiAgICAgICAgYW5pbWF0aW9uRHVyYXRpb246IDUwMCwKICAgICAgICAvLyBkdXJhdGlvbiBvZiBhbmltYXRpb24gaW4gbXMgaWYgZW5hYmxlZAogICAgICAgIGFuaW1hdGlvbkVhc2luZzogdW5kZWZpbmVkLAogICAgICAgIC8vIGVhc2luZyBvZiBhbmltYXRpb24gaWYgZW5hYmxlZAogICAgICAgIGFuaW1hdGVGaWx0ZXI6IGZ1bmN0aW9uIGFuaW1hdGVGaWx0ZXIobm9kZSwgaSkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSwKICAgICAgICAvLyBhIGZ1bmN0aW9uIHRoYXQgZGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBub2RlIHNob3VsZCBiZSBhbmltYXRlZC4gIEFsbCBub2RlcyBhbmltYXRlZCBieSBkZWZhdWx0IG9uIGFuaW1hdGUgZW5hYmxlZC4gIE5vbi1hbmltYXRlZCBub2RlcyBhcmUgcG9zaXRpb25lZCBpbW1lZGlhdGVseSB3aGVuIHRoZSBsYXlvdXQgc3RhcnRzCiAgICAgICAgcmVhZHk6IHVuZGVmaW5lZCwKICAgICAgICAvLyBjYWxsYmFjayBvbiBsYXlvdXRyZWFkeQogICAgICAgIHN0b3A6IHVuZGVmaW5lZCwKICAgICAgICAvLyBjYWxsYmFjayBvbiBsYXlvdXRzdG9wCiAgICAgICAgdHJhbnNmb3JtOiBmdW5jdGlvbiB0cmFuc2Zvcm0obm9kZSwgcG9zaXRpb24pIHsKICAgICAgICAgIHJldHVybiBwb3NpdGlvbjsKICAgICAgICB9IC8vIHRyYW5zZm9ybSBhIGdpdmVuIG5vZGUgcG9zaXRpb24uIFVzZWZ1bCBmb3IgY2hhbmdpbmcgZmxvdyBkaXJlY3Rpb24gaW4gZGlzY3JldGUgbGF5b3V0cwoKICAgICAgfTsKICAgICAgdmFyIGN5ID0gY3l0b3NjYXBlKHsKICAgICAgICBjb250YWluZXI6ICQoJyN0eXBlc2V0LWdyYXBoJyksCiAgICAgICAgYm94U2VsZWN0aW9uRW5hYmxlZDogZmFsc2UsCiAgICAgICAgYXV0b3Vuc2VsZWN0aWZ5OiBmYWxzZSwKICAgICAgICBzdHlsZTogdGhpcy5kZWZhdWx0U3R5bGUsCiAgICAgICAgZWxlbWVudHM6IGRhdGEsCiAgICAgICAgaGlkZUxhYmVsc09uVmlld1BvcnQ6IGZhbHNlLAogICAgICAgIG1pblpvb206IDAuMTUsCiAgICAgICAgbWF4Wm9vbTogOCwKICAgICAgICB3aGVlbFNlbnNpdGl2aXR5OiAwLjEsCiAgICAgICAgLy93YXJuaW5nCiAgICAgICAgbGF5b3V0OiBwcmVzZXRMYXlvdXQKICAgICAgfSk7CiAgICAgIHRoYXQudHlwZXNldF9jeSA9IGN5OwogICAgICB2YXIgb3B0aW9ucyA9IHsKICAgICAgICBuZXdQYXJlbnROb2RlOiBmdW5jdGlvbiBuZXdQYXJlbnROb2RlKGdyYWJiZWROb2RlLCBkcm9wU2libGluZykgewogICAgICAgICAgcmV0dXJuIHt9OwogICAgICAgIH0sCiAgICAgICAgLy8gc3BlY2lmaWVzIGVsZW1lbnQganNvbiBmb3IgcGFyZW50IG5vZGVzIGFkZGVkIGJ5IGRyb3BwaW5nIGFuIG9ycGhhbiBub2RlIG9uIGFub3RoZXIgb3JwaGFuIChhIGRyb3Agc2libGluZykKICAgICAgICBvdmVyVGhyZXNob2xkOiAyMCwKICAgICAgICAvLyBtYWtlIGRyYWdnaW5nIG92ZXIgYSBkcm9wIHRhcmdldCBlYXNpZXIgYnkgZXhwYW5kaW5nIHRoZSBoaXQgYXJlYSBieSB0aGlzIGFtb3VudCBvbiBhbGwgc2lkZXMKICAgICAgICBvdXRUaHJlc2hvbGQ6IDUwIC8vIG1ha2UgZHJhZ2dpbmcgb3V0IG9mIGEgZHJvcCB0YXJnZXQgYSBiaXQgaGFyZGVyIGJ5IGV4cGFuZGluZyB0aGUgaGl0IGFyZWEgYnkgdGhpcyBhbW91bnQgb24gYWxsIHNpZGVzCgogICAgICB9OwogICAgICB0aGF0LmNkbmQgPSBjeS5jb21wb3VuZERyYWdBbmREcm9wKG9wdGlvbnMpOwogICAgICB0aGlzLmJhdGNoKGN5LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgY3kubm9kZXMoKS5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgIHRoYXQucmVuZE5vZGUodmFsLCB0aGF0KTsKICAgICAgICB9KTsKICAgICAgICBjeS5lZGdlcygpLmZvckVhY2goZnVuY3Rpb24gKHZhbCkgewogICAgICAgICAgdGhhdC5yZW5kRWRnZSh2YWwsIHRoYXQpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgY3kub24oJ21vdXNlb3ZlcicsICdub2RlJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldCB8fCBldmVudC5jeVRhcmdldDsgLy8gY29uc29sZS5sb2coIm1vdXNlb3ZlciBub2RlOiAiLHRhcmdldCk7CgogICAgICAgIHZhciBkYXRhID0gdGFyZ2V0LmRhdGEoKTsKICAgICAgICB2YXIgbWluU2l6ZSA9IDQ4OyAvL+eci+i1t+adpeWPr+S7peeahOivlemqjOWAvO+8jOaXoOeJueauiuaEj+S5iQoKICAgICAgICB2YXIgZm9udFNpemUgPSBwYXJzZUludCh0YXJnZXQuc3R5bGUoImZvbnQtc2l6ZSIpLm1hdGNoKC8oXFMqKXB4LylbMV0pICogMS4yOwogICAgICAgIGZvbnRTaXplID0gZm9udFNpemUgPCBtaW5TaXplID8gbWluU2l6ZSA6IGZvbnRTaXplOwogICAgICAgIHRhcmdldC5zdHlsZSh7CiAgICAgICAgICBsYWJlbDogZGF0YS5uYW1lLAogICAgICAgICAgZm9udFNpemU6IGZvbnRTaXplLAogICAgICAgICAgJ3otaW5kZXgnOiA5OTk5CiAgICAgICAgfSk7CgogICAgICAgIGlmICghdGFyZ2V0LnNjcmF0Y2goJ3RpcCcpKSB7CiAgICAgICAgICB2YXIgdHlwZUl0ZW0gPSBfdGhpczIubm9kZVR5cGUuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICByZXR1cm4gaXRlbS52YWx1ZSA9PT0gZGF0YS50eXBlOwogICAgICAgICAgfSk7CgogICAgICAgICAgdmFyIHR5cGVUZXh0ID0gdHlwZUl0ZW0gPyB0eXBlSXRlbS5sYWJlbCA6ICflhbbku5YnOwoKICAgICAgICAgIHZhciB0ZXh0ID0gIuexu+WeizogIiArIHR5cGVUZXh0ICsgJzxici8+JyArICLlsZ7mgKc6ICIgKyAnPGJyLz4nICsgX3RoaXMyLnByb3BlcnR5MlN0cmluZyhkYXRhLnByb3BlcnR5KTsKCiAgICAgICAgICB0YXJnZXQuc2NyYXRjaCgndGlwJywgdGhhdC5tYWtlVGlwcHkodGFyZ2V0LCB0ZXh0KSk7CiAgICAgICAgfQoKICAgICAgICB0YXJnZXQuc2NyYXRjaCgndGlwJykuc2hvdygpOwogICAgICB9KS5vbignbW91c2VvdXQnLCAnbm9kZScsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQgfHwgZXZlbnQuY3lUYXJnZXQ7CiAgICAgICAgdGhhdC5yZW5kTm9kZSh0YXJnZXQsIHRoYXQpOwoKICAgICAgICBpZiAodGFyZ2V0LnNjcmF0Y2goJ3RpcCcpKSB7CiAgICAgICAgICB0YXJnZXQuc2NyYXRjaCgndGlwJykuZGVzdHJveSgpOwogICAgICAgICAgdGFyZ2V0LnJlbW92ZVNjcmF0Y2goJ3RpcCcpOyAvLyBjb25zb2xlLmxvZyh0YXJnZXQuc2NyYXRjaCgpKTsKICAgICAgICB9CgogICAgICAgIHRhcmdldC5zdHlsZSh7CiAgICAgICAgICAnei1pbmRleCc6IDAKICAgICAgICB9KTsKICAgICAgfSkgLy9lZGdl5LiN6IO95pS55Y+Y6L6555qE6aKc6Imy77yM5ZCm5YiZ5ZKM6YCJ5Lit5py65Yi25Yay56qB77yI6YKj5aSE5Lmf5Lya5pS55Y+Y6aKc6Imy77yJCiAgICAgIC5vbignbW91c2VvdmVyJywgJ2VkZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IHx8IGV2ZW50LmN5VGFyZ2V0OyAvLyBjb25zb2xlLmxvZygibW91c2VvdmVyIGVkZ2U6ICIsdGFyZ2V0KTsKCiAgICAgICAgdmFyIGRhdGEgPSB0YXJnZXQuZGF0YSgpOyAvL+WmguaenOimgeaUueaXi+i9rO+8jOaYryJlZGdlLXRleHQtcm90YXRpb24iOiAibm9uZSLlkowiZWRnZS10ZXh0LXJvdGF0aW9uIjogImF1dG9yb3RhdGUiCgogICAgICAgIHRhcmdldC5zdHlsZSh7CiAgICAgICAgICBsYWJlbDogZGF0YS5yZWxhdGlvbiwKICAgICAgICAgIGZvbnRTaXplOiAzNiwKICAgICAgICAgIHdpZHRoOiA2LAogICAgICAgICAgY29sb3I6ICcjYmM1ZjZhJywKICAgICAgICAgICd6LWluZGV4JzogOTk5OQogICAgICAgIH0pOyAvL+atpOaVsOaXoOaEj+S5ie+8jOS7heS7hemcgOimgeavlHJlbmROb2Rl5pyA5aSnbGFiZWznmoQzNuabtOWkp+WNs+WPrwoKICAgICAgICBpZiAoIXRhcmdldC5zY3JhdGNoKCd0aXAnKSkgewogICAgICAgICAgdmFyIHRleHQgPSAi57G75Z6LOiAiICsgZGF0YS50eXBlOwogICAgICAgICAgdGFyZ2V0LnNjcmF0Y2goJ3RpcCcsIHRoYXQubWFrZVRpcHB5KHRhcmdldCwgdGV4dCkpOwogICAgICAgIH0KCiAgICAgICAgdGFyZ2V0LnNjcmF0Y2goJ3RpcCcpLnNob3coKTsKICAgICAgfSkub24oJ21vdXNlb3V0JywgJ2VkZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IHx8IGV2ZW50LmN5VGFyZ2V0OwogICAgICAgIHRoYXQucmVuZEVkZ2UodGFyZ2V0LCB0aGF0KTsKICAgICAgICB0YXJnZXQuc3R5bGUoewogICAgICAgICAgZm9udFNpemU6IDI0LAogICAgICAgICAgd2lkdGg6IDMsCiAgICAgICAgICBjb2xvcjogJyNlM2E2YTEnLAogICAgICAgICAgJ3otaW5kZXgnOiAwCiAgICAgICAgfSk7IC8v5LiO5LiK5paHZWRnZeeahOWIneWni+mFjee9ruS/neaMgeS4gOiHtAoKICAgICAgICBpZiAodGFyZ2V0LnNjcmF0Y2goJ3RpcCcpKSB7CiAgICAgICAgICB0YXJnZXQuc2NyYXRjaCgndGlwJykuZGVzdHJveSgpOwogICAgICAgICAgdGFyZ2V0LnJlbW92ZVNjcmF0Y2goJ3RpcCcpOwogICAgICAgIH0KICAgICAgfSkub24oJ3RhcCcsICdub2RlJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldCB8fCBldmVudC5jeVRhcmdldDsKICAgICAgICB2YXIgZGVzY2VuZGFudHMgPSB0YXJnZXQuZGVzY2VuZGFudHMoKTsKCiAgICAgICAgaWYgKGRlc2NlbmRhbnRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGRlc2NlbmRhbnRzLnNlbGVjdCgpOyAvLyB0YXJnZXQudW5zZWxlY3QoKTvml6DmlYgKICAgICAgICB9CiAgICAgIH0pOwogICAgICB2YXIgY29udGV4dE1lbnUgPSBjeS5jb250ZXh0TWVudXMoewogICAgICAgIG1lbnVJdGVtczogW3sKICAgICAgICAgIGlkOiAnY29sb3ItcmVkJywKICAgICAgICAgIGNvbnRlbnQ6ICfnuqInLAogICAgICAgICAgc2VsZWN0b3I6ICdub2RlJywKICAgICAgICAgIG9uQ2xpY2tGdW5jdGlvbjogZnVuY3Rpb24gb25DbGlja0Z1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQgfHwgZXZlbnQuY3lUYXJnZXQ7CiAgICAgICAgICAgIHZhciBjb2xvciA9ICcjZTg5ZDk2JzsKCiAgICAgICAgICAgIGlmICh0YXJnZXQuZGVzY2VuZGFudHMoKS5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICB0YXJnZXQuZGF0YSgnY29sb3InLCBjb2xvcik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGFyZ2V0LnN0eWxlKHsKICAgICAgICAgICAgICAgICdib3JkZXItY29sb3InOiBjb2xvciwKICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogY29sb3IKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGlkOiAnY29sb3IteWVsbG93JywKICAgICAgICAgIGNvbnRlbnQ6ICfpu4QnLAogICAgICAgICAgc2VsZWN0b3I6ICdub2RlJywKICAgICAgICAgIG9uQ2xpY2tGdW5jdGlvbjogZnVuY3Rpb24gb25DbGlja0Z1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQgfHwgZXZlbnQuY3lUYXJnZXQ7CiAgICAgICAgICAgIHZhciBjb2xvciA9ICcjZWJjNTdjJzsKCiAgICAgICAgICAgIGlmICh0YXJnZXQuZGVzY2VuZGFudHMoKS5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICB0YXJnZXQuZGF0YSgnY29sb3InLCBjb2xvcik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGFyZ2V0LnN0eWxlKHsKICAgICAgICAgICAgICAgICdib3JkZXItY29sb3InOiBjb2xvciwKICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogY29sb3IKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGlkOiAnY29sb3ItbGlnaHQtYmx1ZScsCiAgICAgICAgICBjb250ZW50OiAn5rWF6JOdJywKICAgICAgICAgIHNlbGVjdG9yOiAnbm9kZScsCiAgICAgICAgICBvbkNsaWNrRnVuY3Rpb246IGZ1bmN0aW9uIG9uQ2xpY2tGdW5jdGlvbihldmVudCkgewogICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IHx8IGV2ZW50LmN5VGFyZ2V0OwogICAgICAgICAgICB2YXIgY29sb3IgPSAnIzgxYzdlMCc7CgogICAgICAgICAgICBpZiAodGFyZ2V0LmRlc2NlbmRhbnRzKCkubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgdGFyZ2V0LmRhdGEoJ2NvbG9yJywgJ2xpZ2h0Ymx1ZScpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRhcmdldC5zdHlsZSh7CiAgICAgICAgICAgICAgICAnYm9yZGVyLWNvbG9yJzogY29sb3IsCiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1jb2xvcic6IGNvbG9yCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBpZDogJ2NvbG9yLWJsdWUtc2xhdGUnLAogICAgICAgICAgY29udGVudDogJ+mdm+mdkicsCiAgICAgICAgICBzZWxlY3RvcjogJ25vZGUnLAogICAgICAgICAgb25DbGlja0Z1bmN0aW9uOiBmdW5jdGlvbiBvbkNsaWNrRnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldCB8fCBldmVudC5jeVRhcmdldDsKICAgICAgICAgICAgdmFyIGNvbG9yID0gJyM2YTg1Y2UnOwoKICAgICAgICAgICAgaWYgKHRhcmdldC5kZXNjZW5kYW50cygpLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgIHRhcmdldC5kYXRhKCdjb2xvcicsIGNvbG9yKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0YXJnZXQuc3R5bGUoewogICAgICAgICAgICAgICAgJ2JvcmRlci1jb2xvcic6IGNvbG9yLAogICAgICAgICAgICAgICAgJ2JhY2tncm91bmQtY29sb3InOiBjb2xvcgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAgaWQ6ICdjb2xvci1icm93bicsCiAgICAgICAgICBjb250ZW50OiAn5qOVJywKICAgICAgICAgIHNlbGVjdG9yOiAnbm9kZScsCiAgICAgICAgICBvbkNsaWNrRnVuY3Rpb246IGZ1bmN0aW9uIG9uQ2xpY2tGdW5jdGlvbihldmVudCkgewogICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IHx8IGV2ZW50LmN5VGFyZ2V0OwogICAgICAgICAgICB2YXIgY29sb3IgPSAnIzljOGY5Nic7CgogICAgICAgICAgICBpZiAodGFyZ2V0LmRlc2NlbmRhbnRzKCkubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgdGFyZ2V0LmRhdGEoJ2NvbG9yJywgY29sb3IpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRhcmdldC5zdHlsZSh7CiAgICAgICAgICAgICAgICAnYm9yZGVyLWNvbG9yJzogY29sb3IsCiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1jb2xvcic6IGNvbG9yCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9XQogICAgICB9KTsKICAgIH0sCiAgICAvLyAqKkFsbG93IGZvciBtYW5pcHVsYXRpb24gb2YgZWxlbWVudHMgd2l0aG91dCB0cmlnZ2VyaW5nIG11bHRpcGxlIHN0eWxlIGNhbGN1bGF0aW9ucyBvciBtdWx0aXBsZSByZWRyYXdzLioqCiAgICBiYXRjaDogZnVuY3Rpb24gYmF0Y2goY3ksIGZ1bmMpIHsKICAgICAgY3kuc3RhcnRCYXRjaCgpOwogICAgICBmdW5jKCk7CiAgICAgIGN5LmVuZEJhdGNoKCk7CiAgICB9LAogICAgbWFrZVRpcHB5OiBmdW5jdGlvbiBtYWtlVGlwcHkoZWxlLCB0ZXh0KSB7CiAgICAgIC8vZWxl6ZyA5Lyg5YWlY3nnmoRlbGUKICAgICAgdmFyIHJlZiA9IGVsZS5wb3BwZXJSZWYoKTsgLy8gU2luY2UgdGlwcHkgY29uc3RydWN0b3IgcmVxdWlyZXMgRE9NIGVsZW1lbnQvZWxlbWVudHMsIGNyZWF0ZSBhIHBsYWNlaG9sZGVyCgogICAgICB2YXIgZHVtbXlEb21FbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgdmFyIHRpcCA9IHRpcHB5KGR1bW15RG9tRWxlLCB7CiAgICAgICAgZ2V0UmVmZXJlbmNlQ2xpZW50UmVjdDogcmVmLmdldEJvdW5kaW5nQ2xpZW50UmVjdCwKICAgICAgICB0cmlnZ2VyOiAnbWFudWFsJywKICAgICAgICAvLyBtYW5kYXRvcnkKICAgICAgICAvLyBkb20gZWxlbWVudCBpbnNpZGUgdGhlIHRpcHB5OgogICAgICAgIGNvbnRlbnQ6IGZ1bmN0aW9uIGNvbnRlbnQoKSB7CiAgICAgICAgICAvLyBmdW5jdGlvbiBjYW4gYmUgYmV0dGVyIGZvciBwZXJmb3JtYW5jZQogICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgZGl2LmlubmVySFRNTCA9IHRleHQ7CiAgICAgICAgICByZXR1cm4gZGl2OwogICAgICAgIH0sCiAgICAgICAgLy8geW91ciBvd24gcHJlZmVyZW5jZXM6CiAgICAgICAgYXJyb3c6IHRydWUsCiAgICAgICAgcGxhY2VtZW50OiAnYm90dG9tJywKICAgICAgICBvZmZzZXQ6IFsyMCwgMzBdLAogICAgICAgIGhpZGVPbkNsaWNrOiBmYWxzZSwKICAgICAgICAvLyBlbmFibGUgaXQKICAgICAgICAvLyBzdGlja3k6IHRydWUsCiAgICAgICAgLy8gb25seSBjaGVjayB0aGUgInJlZmVyZW5jZSIgcmVjdCBmb3IgY2hhbmdlcwogICAgICAgIHN0aWNreTogJ3JlZmVyZW5jZScsCiAgICAgICAgLy8gb25seSBjaGVjayB0aGUgInBvcHBlciIgcmVjdCBmb3IgY2hhbmdlcwogICAgICAgIC8vIHN0aWNreTogJ3BvcHBlcicsCiAgICAgICAgcGx1Z2luczogW3N0aWNreV0sCiAgICAgICAgekluZGV4OiAxMCwKICAgICAgICAvL+m7mOiupDk5OTnvvIzkv67mlLnlsI/kupvpgb/lhY3pga7kvY/lvLnnqpcKICAgICAgICAvLyBpZiBpbnRlcmFjdGl2ZToKICAgICAgICBpbnRlcmFjdGl2ZTogdHJ1ZSwKICAgICAgICBhcHBlbmRUbzogZG9jdW1lbnQuYm9keSAvLyBvciBhcHBlbmQgZHVtbXlEb21FbGUgdG8gZG9jdW1lbnQuYm9keQoKICAgICAgfSk7CiAgICAgIHJldHVybiB0aXA7CiAgICB9LAogICAgZXhwb3J0UG5nOiBmdW5jdGlvbiBleHBvcnRQbmcoY3kpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuato+WcqOWvvOWHuuWbvueJhy4uLiIpOwogICAgICB2YXIgYmxvYiA9IGN5LnBuZyh7CiAgICAgICAgb3V0cHV0OiAnYmxvYi1wcm9taXNlJywKICAgICAgICBiZzogJ3doaXRlJywKICAgICAgICBmdWxsOiB0cnVlLAogICAgICAgIHNjYWxlOiA0CiAgICAgIH0pOwogICAgICBibG9iLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIC8v5Yib5bu65LiL6L296ZO+5o6lCiAgICAgICAgdmFyIGFMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGFMaW5rLmRvd25sb2FkID0gX3RoaXMzLmdlbmVyYXRlRmlsZU5hbWUoKSArICcucG5nJzsKICAgICAgICB2YXIgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwocmVzKTsKICAgICAgICBhTGluay5ocmVmID0gdXJsOyAvL+WIm+W7uuOAgeWIhumFjeW5tuinpuWPkeeCueWHu+S6i+S7tgoKICAgICAgICB2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoIk1vdXNlRXZlbnRzIik7CiAgICAgICAgZXZ0LmluaXRFdmVudCgiY2xpY2siLCB0cnVlLCB0cnVlKTsKICAgICAgICBhTGluay5kaXNwYXRjaEV2ZW50KGV2dCk7IC8vIOmHiuaUvuaOiWJsb2Llr7nosaEKCiAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKCJFcnJvciBvY2N1cmVkOiAiLCBlcnIpOwoKICAgICAgICBpZiAoY3kuZWxlbWVudHMoKS5sZW5ndGggPT09IDApIHsKICAgICAgICAgIF90aGlzMy4kbWVzc2FnZS5lcnJvcigi55+l6K+G5Zu+6LCx5bey57uP56m65ZWm77yM5a+85LiN5Ye65Lic6KW/55qE5ZGAIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBnZW5lcmF0ZUZpbGVOYW1lOiBmdW5jdGlvbiBnZW5lcmF0ZUZpbGVOYW1lKCkgewogICAgICB2YXIgbmFtZSA9ICIiOwoKICAgICAgdHJ5IHsKICAgICAgICBuYW1lID0gdGhpcy5jdXJyZW50X3Byb2plY3QucHJvamVjdF9uYW1lOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coIkVycm9yIG9jY3VyczoiICsgZSk7CiAgICAgICAgY29uc29sZS5sb2coIuWPr+iDveacqui/nuaOpeWIsFNlcnZlciIpOwogICAgICAgIG5hbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG5hbWUgKyAnLeaOkueJiCc7CiAgICB9LAogICAgLy/lr7npvZAKICAgIGFsaWduOiBmdW5jdGlvbiBhbGlnbihkaXJlY3Rpb24pIHsKICAgICAgdmFyIGxheW91dF9jb25zdHJhaW50ID0gdGhpcy5mY29zZV9vcHRpb25zLmFsaWdubWVudENvbnN0cmFpbnRbZGlyZWN0aW9uXTsKICAgICAgdmFyIG5vZGVzID0gdGhpcy50eXBlc2V0X2N5LiQoJ25vZGU6c2VsZWN0ZWQnKTsKICAgICAgdmFyIG5vZGVfaWRzID0gW107CgogICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobm9kZXMpLAogICAgICAgICAgX3N0ZXA7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgbm9kZSA9IF9zdGVwLnZhbHVlOwoKICAgICAgICAgIGlmIChub2RlLmRlc2NlbmRhbnRzKCkubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIHZhciBpZCA9IG5vZGUuZGF0YSgnaWQnKTsKICAgICAgICAgICAgbm9kZV9pZHMucHVzaChpZCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgIH0KCiAgICAgIHRyeSB7CiAgICAgICAgbGF5b3V0X2NvbnN0cmFpbnQucHVzaChub2RlX2lkcyk7CiAgICAgICAgbm9kZXMubGF5b3V0KHRoaXMuZmNvc2Vfb3B0aW9ucykucnVuKCk7CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgbGF5b3V0X2NvbnN0cmFpbnQucG9wKCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDmiorlr7nosaHovazljJbkuLrlrZfnrKbkuLIKICAgIHByb3BlcnR5MlN0cmluZzogZnVuY3Rpb24gcHJvcGVydHkyU3RyaW5nKHByb3BzKSB7CiAgICAgIHZhciByZXN1bHQgPSAnJzsKCiAgICAgIGZvciAodmFyIGtleSBpbiBwcm9wcykgewogICAgICAgIHJlc3VsdCArPSBrZXkgKyAnLScgKyBwcm9wc1trZXldICsgJzwvYnI+JzsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICB9Cn07"},{"version":3,"sources":["C:\\Users\\Zhaoning\\Desktop\\HCI\\src\\components\\TypesetGraph.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"typeset-edit-panel-box\">\n    <edit-bar-block block-name=\"操作\">\n      <div class=\"operations\">\n        <op-item op-name=\"水平对齐\" icon=\"#iconalign-vertical\" @click=\"align('horizontal')\"></op-item>\n        <op-item op-name=\"垂直对齐\" icon=\"#iconalign-level\" @click=\"align('vertical')\"></op-item>\n        <op-item op-name=\"导出\" icon=\"#iconshare\" @click=\"exportPng(typeset_cy)\"></op-item>\n      </div>\n    </edit-bar-block>\n  </div>\n  <div id=\"typeset-graph\"></div>\n</template>\n\n<script>\nimport cytoscape from 'cytoscape';\nimport compoundDragAndDrop from 'cytoscape-compound-drag-and-drop';\nimport fcose from 'cytoscape-fcose';\nimport {mapGetters, mapMutations, mapState} from \"vuex\";\nimport $ from \"jquery\";\nimport axios from \"axios\";\nimport tippy, {sticky} from \"tippy.js\";\nimport EditBarBlock from \"@/components/EditBar/EditBarBlock\";\nimport OpItem from \"@/components/EditBar/OpItem\";\n\ncytoscape.use(compoundDragAndDrop);\ncytoscape.use( fcose );\n\nexport default {\n  name: \"TypesetGraph\",\n  components:{EditBarBlock,OpItem},\n  data(){\n    return{\n      cdnd: null, //拖拽工具句柄\n      typeset_cy: null,  //cy句柄\n      fcose_options: {\n        name: 'fcose',\n        quality: \"proof\",\n        randomize: false,\n        animationDuration: 250,\n        fit: false,\n        alignmentConstraint: {\n          vertical: [],\n          horizontal: [],\n        },\n      }, //fcose布局选项\n    }\n  },\n  computed:{\n    ...mapState({\n      cy: state => state.workspace.cy,\n      nodeFontSize: state => state.workspace.nodeFontSize,\n      nodeRadius: state => state.workspace.nodeRadius,\n      defaultStyle: state => state.workspace.defaultStyle,\n      shapeType: state => state.workspace.shapeType,\n      nodeType: state => state.workspace.nodeType,\n      edgeType: state => state.workspace.edgeType,\n      lineStyleType: state => state.workspace.lineStyleType,\n      project: state => state.project,\n    }),\n  },\n  mounted() {\n    let data = {\n      edges: JSON.parse(JSON.stringify(this.project.edges)),\n      nodes: JSON.parse(JSON.stringify(this.project.nodes)),\n    };\n    this.dataHandle(data);\n  },\n  watch:{\n    // current_project_change(now, old){\n    //   console.log(\"current_project改动\")\n    //   let data = {\n    //     edges: JSON.parse(JSON.stringify(this.current_project.edges)),\n    //     nodes: JSON.parse(JSON.stringify(this.current_project.nodes)),\n    //   };\n    //   this.dataHandle(data);\n    // }\n  },\n  methods: {\n    getDataJsonObject(cy) {\n      let eles = JSON.parse(JSON.stringify(cy.json().elements));\n      let obj = {\"edges\": [], \"nodes\": []};\n      if (JSON.stringify(eles) !== '{}') {\n        if (eles.edges !== undefined && eles.edges.length > 0) {\n          eles.edges.forEach(val => {\n            obj.edges.push({\n              data: val.data\n            });\n          });\n        }\n        if (eles.nodes !== undefined && eles.nodes.length > 0) {\n          eles.nodes.forEach(val => {\n            obj.nodes.push({\n              data: val.data,\n              position: val.position\n            });\n          });\n        }\n      }\n      return obj;\n    },\n\n    //最后去掉\n    //读数据，然后交给dataHandle\n    getData(url) {\n      axios.get(url)\n          .then(res => {\n            this.dataHandle(res.data);\n          })\n          .catch(err => {\n            console.error(err);\n            this.$message.error('文件数据格式不正确');\n          })\n    },\n\n    //在data中存数据，并进行数据展示的预处理\n    dataHandle(data) {\n      data.edges.forEach((val) => {\n        val.classes = 'autorotate';\n        val.data.type = val.data.type || 'default';\n      })\n      let default_color = \"#9c8f96\";//和add-node方法中初始化颜色耦合，必须同时修改\n      data.nodes.forEach((val) => {\n        val.data.type = val.data.type || 'default';\n        val.data.color = val.data.color || default_color;//将颜色绑定在数据里，在workspace中修改为background-color:data(color),实现颜色持久化\n        // val.position.x = val.data.typeset.x === -1? val.position.x : val.data.typeset.x;\n        // val.position.y = val.data.typeset.y === -1? val.position.y : val.data.typeset.y;\n      })\n      let that = this;\n      const loading = this.$loading({\n        lock: true,\n        text: '...加载中...',\n        spinner: 'el-icon-loading',\n        background: 'rgba(255, 255,255, 0.8)'\n      });\n      try{\n        this.graph(that, data);\n      }finally{\n        this.$nextTick(() => {\n          loading.close();\n        });\n      }\n    },\n\n    //让过长的内容作为展示的标题时省略\n    fontShow(text) {\n      if (text && text.length > 5) {\n        return text.substring(0, 4) + \"...\"\n      }\n      return text\n    },\n\n    //根据内容设置字体大小，使之不会超出节点（未验证）\n    //最好改成根据节点大小设置字体大小\n    fontStyle(length,width) {\n      if(this.nodeFontSize!==''){\n        return {\n          \"font-size\": this.nodeFontSize + \"px\"\n        };\n      }\n      let defaultWidth = 30;\n      let minWidth = 19;\n      let fontSize = defaultWidth - (length - 2) * 6;//这个计算字体大小的算式可能有点拉胯，\n      //根据节点大小调整文字大小\n      let nodeWidth = width?width:defaultWidth;\n      fontSize = fontSize*nodeWidth/defaultWidth;\n      if (!fontSize || fontSize < minWidth) {//\"!fontSize\"有效吗，不懂诶\n        fontSize = minWidth;\n      }\n      return {\n        \"font-size\": fontSize + \"px\"\n      };\n    },\n\n    //帮助node合适地展示text\n    rendNode(target, that) {\n      let data = target.data();\n      const text = that.fontShow(data.name)\n\n      //如果没有设定大小，就按照节点本身大小（节点大小不是时刻是设定大小吗？按现在的写法，我觉得新增的节点没有初始化到渲染到设定大小）\n      let widthNow = this.nodeRadius===''?this.getNodeWidth(target):this.nodeRadius;\n\n      widthNow = parseInt(widthNow+'');//确保是数字类型\n      //获取节点宽度的数字值来调节字体大小\n      let style;\n      if (text !== undefined){\n        style = that.fontStyle(text.length,widthNow);\n      }else{\n        style = that.fontStyle(0, widthNow);\n      }\n\n      style.shape = this.shapeType[data.type];\n      style.label = text;\n      if(this.nodeRadius!==''){//和EditBar中nodeRadius监听方法逻辑耦合，必须同时修改\n        style.width = widthNow+'px';\n        style.height = widthNow+'px';\n      }\n      target.style(style);\n    },\n\n    getNodeWidth(target){//返回值为数字类型\n      let widthProp = target.style(\"width\");\n      let defaultWidth = 30;\n      if(widthProp){\n        return parseInt(widthProp.match(/(\\S*)px/)[1]);//随便搜的，不知道有没有更好写法\n      }else{\n        return defaultWidth;\n      }\n    },\n\n    rendEdge(target,that){\n      let data = target.data();\n      const text = that.fontShow(data.relation);\n      target.style({label:text,'line-style':this.lineStyleType[data.type]});\n    },\n\n    graph(that, data) {\n      let presetLayout = {\n        name: 'preset',\n\n        positions: undefined, // map of (node id) => (position obj); or function(node){ return somPos; }\n        zoom: undefined, // the zoom level to set (prob want fit = false if set)\n        pan: undefined, // the pan level to set (prob want fit = false if set)\n        fit: true, // whether to fit to viewport\n        padding: 30, // padding on fit\n        animate: false, // whether to transition the node positions\n        animationDuration: 500, // duration of animation in ms if enabled\n        animationEasing: undefined, // easing of animation if enabled\n        animateFilter: function ( node, i ){ return true; }, // a function that determines whether the node should be animated.  All nodes animated by default on animate enabled.  Non-animated nodes are positioned immediately when the layout starts\n        ready: undefined, // callback on layoutready\n        stop: undefined, // callback on layoutstop\n        transform: function (node, position ){ return position; } // transform a given node position. Useful for changing flow direction in discrete layouts\n      };\n      let cy = cytoscape({\n        container: $('#typeset-graph'),\n        boxSelectionEnabled: false,\n        autounselectify: false,\n        style: this.defaultStyle,\n        elements: data,\n        hideLabelsOnViewPort: false,\n        minZoom: 0.15,\n        maxZoom: 8,\n        wheelSensitivity: 0.1,   //warning\n        layout: presetLayout\n      });\n      that.typeset_cy = cy;\n\n      const options = {\n        newParentNode: (grabbedNode, dropSibling) => ({}), // specifies element json for parent nodes added by dropping an orphan node on another orphan (a drop sibling)\n        overThreshold: 20, // make dragging over a drop target easier by expanding the hit area by this amount on all sides\n        outThreshold: 50 // make dragging out of a drop target a bit harder by expanding the hit area by this amount on all sides\n      };\n      that.cdnd = cy.compoundDragAndDrop(options);\n\n\n      this.batch(cy,()=>{\n        cy.nodes().forEach(val => {\n          that.rendNode(val, that);\n        });\n\n        cy.edges().forEach(val => {\n          that.rendEdge(val, that);\n        });\n      });\n\n\n      cy.on('mouseover', 'node', event => {\n        let target = event.target || event.cyTarget;\n        // console.log(\"mouseover node: \",target);\n        let data = target.data();\n        const minSize = 48;//看起来可以的试验值，无特殊意义\n        let fontSize = parseInt(target.style(\"font-size\").match(/(\\S*)px/)[1])*1.2;\n        fontSize = fontSize<minSize?minSize:fontSize;\n        target.style({label:data.name,fontSize: fontSize,'z-index':9999});\n        if(!target.scratch('tip')){\n          const typeItem = this.nodeType.find((item) => item.value === data.type);\n          const typeText = typeItem ? typeItem.label : '其他';\n          let text = \"类型: \"+ typeText +'<br/>'+\"属性: \" +'<br/>' + this.property2String(data.property)\n          target.scratch('tip',that.makeTippy(target,text));\n        }\n        target.scratch('tip').show();\n      })\n          .on('mouseout', 'node', event => {\n            let target = event.target || event.cyTarget;\n            that.rendNode(target, that);\n            if(target.scratch('tip')){\n              target.scratch('tip').destroy();\n              target.removeScratch('tip');\n              // console.log(target.scratch());\n            }\n            target.style({'z-index':0});\n          })\n          //edge不能改变边的颜色，否则和选中机制冲突（那处也会改变颜色）\n          .on('mouseover', 'edge', event => {\n            let target = event.target || event.cyTarget;\n            // console.log(\"mouseover edge: \",target);\n            let data = target.data();\n            //如果要改旋转，是\"edge-text-rotation\": \"none\"和\"edge-text-rotation\": \"autorotate\"\n            target.style({label:data.relation,fontSize: 36, width: 6, color: '#bc5f6a','z-index':9999});//此数无意义，仅仅需要比rendNode最大label的36更大即可\n            if(!target.scratch('tip')){\n              let text = \"类型: \"+data.type;\n              target.scratch('tip',that.makeTippy(target,text));\n            }\n            target.scratch('tip').show();\n          })\n          .on('mouseout', 'edge', event => {\n            let target = event.target || event.cyTarget;\n            that.rendEdge(target,that);\n            target.style({fontSize: 24, width: 3, color: '#e3a6a1','z-index':0});//与上文edge的初始配置保持一致\n            if(target.scratch('tip')){\n              target.scratch('tip').destroy();\n              target.removeScratch('tip');\n            }\n          })\n          .on('tap', 'node', event => {\n            let target = event.target || event.cyTarget;\n            let descendants = target.descendants();\n            if (descendants.length > 0){\n              descendants.select();\n              // target.unselect();无效\n            }\n          });\n\n      let contextMenu = cy.contextMenus({\n        menuItems: [\n          {\n            id: 'color-red',\n            content: '红',\n            selector: 'node',\n            onClickFunction: function (event) {\n              let target = event.target || event.cyTarget;\n              let color = '#e89d96'\n              if (target.descendants().length === 0){\n                target.data('color', color);\n              }else{\n                target.style({\n                  'border-color': color,\n                  'background-color': color,\n                });\n              }\n            },\n          },\n          {\n            id: 'color-yellow',\n            content: '黄',\n            selector: 'node',\n            onClickFunction: function (event) {\n              let target = event.target || event.cyTarget;\n              let color = '#ebc57c'\n              if (target.descendants().length === 0){\n                target.data('color', color);\n              }else{\n                target.style({\n                  'border-color': color,\n                  'background-color': color,\n                });\n              }\n            },\n          },\n          {\n            id: 'color-light-blue',\n            content: '浅蓝',\n            selector: 'node',\n            onClickFunction: function (event) {\n              let target = event.target || event.cyTarget;\n              let color = '#81c7e0'\n              if (target.descendants().length === 0){\n                target.data('color', 'lightblue');\n              }else{\n                target.style({\n                  'border-color': color,\n                  'background-color': color,\n                });\n              }\n            },\n          },\n          {\n            id: 'color-blue-slate',\n            content: '靛青',\n            selector: 'node',\n            onClickFunction: function (event) {\n              let target = event.target || event.cyTarget;\n              let color = '#6a85ce'\n              if (target.descendants().length === 0){\n                target.data('color', color);\n              }else{\n                target.style({\n                  'border-color': color,\n                  'background-color': color,\n                });\n              }\n            }\n          },\n          {\n            id: 'color-brown',\n            content: '棕',\n            selector: 'node',\n            onClickFunction: function (event) {\n              let target = event.target || event.cyTarget;\n              let color = '#9c8f96'\n              if (target.descendants().length === 0){\n                target.data('color', color);\n              }else{\n                target.style({\n                  'border-color': color,\n                  'background-color': color,\n                });\n              }\n            },\n          },\n        ],\n      });\n    },\n\n    // **Allow for manipulation of elements without triggering multiple style calculations or multiple redraws.**\n    batch(cy,func){\n      cy.startBatch();\n      func();\n      cy.endBatch();\n    },\n\n    makeTippy(ele, text){//ele需传入cy的ele\n      var ref = ele.popperRef();\n\n      // Since tippy constructor requires DOM element/elements, create a placeholder\n      var dummyDomEle = document.createElement('div');\n\n      var tip = tippy( dummyDomEle, {\n        getReferenceClientRect: ref.getBoundingClientRect,\n        trigger: 'manual', // mandatory\n        // dom element inside the tippy:\n        content: function(){ // function can be better for performance\n          var div = document.createElement('div');\n\n          div.innerHTML = text;\n\n          return div;\n        },\n        // your own preferences:\n        arrow: true,\n        placement: 'bottom',\n        offset: [20, 30],\n        hideOnClick: false,\n        // enable it\n        // sticky: true,\n        // only check the \"reference\" rect for changes\n        sticky: 'reference',\n        // only check the \"popper\" rect for changes\n        // sticky: 'popper',\n        plugins: [sticky],\n        zIndex: 10,//默认9999，修改小些避免遮住弹窗\n\n\n        // if interactive:\n        interactive: true,\n        appendTo: document.body // or append dummyDomEle to document.body\n      } );\n\n      return tip;\n    },\n\n    exportPng(cy){\n      this.$message.success(\"正在导出图片...\");\n      let blob = cy.png({\n        output: 'blob-promise', bg: 'white',\n        full: true, scale: 4\n      });\n      blob.then(res => {\n        //创建下载链接\n        let aLink = document.createElement('a');\n        aLink.download = this.generateFileName() + '.png';\n        let url = window.URL.createObjectURL(res);\n        aLink.href = url;\n\n        //创建、分配并触发点击事件\n        let evt = document.createEvent(\"MouseEvents\");\n        evt.initEvent(\"click\", true, true);\n        aLink.dispatchEvent(evt);\n\n        // 释放掉blob对象\n        window.URL.revokeObjectURL(url);\n      }).catch(err => {\n        console.log(\"Error occured: \", err);\n        if (cy.elements().length === 0) {\n          this.$message.error(\"知识图谱已经空啦，导不出东西的呀\");\n        }\n      });\n    },\n\n    generateFileName(){\n      let name = \"\";\n      try{\n        name = this.current_project.project_name;\n      }catch (e) {\n        console.log(\"Error occurs:\"+e);\n        console.log(\"可能未连接到Server\");\n        name = new Date().getTime();\n      }\n      return name + '-排版';\n    },\n\n    //对齐\n    align(direction){\n      let layout_constraint = this.fcose_options.alignmentConstraint[direction];\n      let nodes = this.typeset_cy.$('node:selected');\n      let node_ids = [];\n\n      for (let node of nodes){\n        if (node.descendants().length === 0){\n          let id = node.data('id');\n          node_ids.push(id);\n        }\n      }\n\n      try{\n        layout_constraint.push(node_ids);\n        nodes.layout(this.fcose_options).run();\n      }catch (err){\n        console.log(err)\n      }finally {\n        layout_constraint.pop();\n      }\n    },\n\n    // 把对象转化为字符串\n    property2String(props){\n      let result = '';\n      for(let key in props){\n        result += key + '-' + props[key] + '</br>';\n      }\n      return result;\n    }\n  }\n}\n</script>\n\n<style scoped>\n#typeset-graph{\n  width: 100%;\n  height: 100%;\n}\n.typeset-edit-panel-box{\n  position: fixed;\n  right: 5px;\n  top: 1%;\n  z-index: 100;\n}\n</style>"],"sourceRoot":""}]}