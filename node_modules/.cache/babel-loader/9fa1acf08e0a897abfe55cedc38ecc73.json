{"remainingRequest":"/Users/albert/Desktop/HCI/HCI/node_modules/babel-loader/lib/index.js!/Users/albert/Desktop/HCI/HCI/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/albert/Desktop/HCI/HCI/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/albert/Desktop/HCI/HCI/src/components/QAPanel.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/albert/Desktop/HCI/HCI/src/components/QAPanel.vue","mtime":1638694828506},{"path":"/Users/albert/Desktop/HCI/HCI/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/albert/Desktop/HCI/HCI/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/albert/Desktop/HCI/HCI/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/albert/Desktop/HCI/HCI/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBNeUJ1dHRvbiBmcm9tICJAL2NvbXBvbmVudHMvVG9vbHMvTXlCdXR0b24iOwppbXBvcnQgeyBzaW1wbGVfcXVlc3Rpb24gfSBmcm9tICJAL2FwaS9RQUFQSSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUUFQYW5lbCIsCiAgY29tcG9uZW50czogewogICAgTXlCdXR0b246IE15QnV0dG9uCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHF1ZXN0aW9uOiAi5ZOI5Yip5rOi54m5IiwKICAgICAgdGV4dHM6IFt7CiAgICAgICAgZnJvbTogMSwKICAgICAgICAvLzHmmK/ns7vnu5/vvIwy5piv55So5oi3CiAgICAgICAgdGV4dDogIuivleedgOmXruaIkemXrumimOWQp34iCiAgICAgIH1dCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAga2V5RG93bkhhbmRsZXI6IGZ1bmN0aW9uIGtleURvd25IYW5kbGVyKGV2ZW50KSB7CiAgICAgIGlmIChldmVudC5rZXlDb2RlID09ICcxMycpIHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9CiAgICB9LAogICAga2V5VXBIYW5kbGVyOiBmdW5jdGlvbiBrZXlVcEhhbmRsZXIoZXZlbnQpIHsKICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gJzEzJykgewogICAgICAgIHRoaXMucXVlcnkoZXZlbnQpOwogICAgICB9CiAgICB9LAogICAgcXVlcnk6IGZ1bmN0aW9uIHF1ZXJ5KGV2ZW50KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5xdWVzdGlvbiAhPT0gJycpIHsKICAgICAgICB0aGlzLnRleHRzLnB1c2goewogICAgICAgICAgZnJvbTogMiwKICAgICAgICAgIHRleHQ6IHRoaXMucXVlc3Rpb24KICAgICAgICB9KTsKICAgICAgICB2YXIgcXVlc3Rpb24gPSB0aGlzLnF1ZXN0aW9uOwogICAgICAgIHRoaXMucXVlc3Rpb24gPSAiIjsgLy/muIXnqbrovpPlhaXmoI8KCiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICB2YXIgc2Nyb2xsVmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImVsLXNjcm9sbGJhcl9fd3JhcCIpWzBdOwogICAgICAgIHNjcm9sbFZpZXcuc2Nyb2xsVG9wID0gc2Nyb2xsVmlldy5zY3JvbGxIZWlnaHQ7CiAgICAgICAgc2ltcGxlX3F1ZXN0aW9uKHF1ZXN0aW9uKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICBpZiAocmVzLmRhdGEuc3VjY2VzcykgewogICAgICAgICAgICBfdGhpcy50ZXh0cy5wdXNoKHsKICAgICAgICAgICAgICBmcm9tOiAxLAogICAgICAgICAgICAgIHRleHQ6IHJlcy5kYXRhLmNvbnRlbnQKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy50ZXh0cy5wdXNoKHsKICAgICAgICAgICAgICBmcm9tOiAxLAogICAgICAgICAgICAgIHRleHQ6ICLmn6Xor6LlpLHotKXlmaIuLi7kv6Hmga/vvJoiICsgcmVzLmRhdGEubWVzc2FnZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IoIuiuv+mXruWksei0pe+8jOivt+ajgOafpee9kee7nCIpOwogICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgc2Nyb2xsVmlldy5zY3JvbGxUb3AgPSBzY3JvbGxWaWV3LnNjcm9sbEhlaWdodDsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/albert/Desktop/HCI/HCI/src/components/QAPanel.vue"],"names":[],"mappings":";AA0BA,OAAO,QAAP,MAAqB,6BAArB;AACA,SAAQ,eAAR,QAA8B,aAA9B;AACA,eAAe;AACb,EAAA,IAAI,EAAE,SADO;AAEb,EAAA,UAAU,EAAE;AAAC,IAAA,QAAQ,EAAR;AAAD,GAFC;AAGb,EAAA,IAHa,kBAGP;AACJ,WAAM;AACJ,MAAA,OAAO,EAAE,KADL;AAEJ,MAAA,QAAQ,EAAE,MAFN;AAGJ,MAAA,KAAK,EAAE,CACL;AACE,QAAA,IAAI,EAAE,CADR;AACW;AACT,QAAA,IAAI,EAAE;AAFR,OADK;AAHH,KAAN;AAUD,GAdY;AAeb,EAAA,OAAO,EAAC;AACN,IAAA,cADM,0BACS,KADT,EACe;AACnB,UAAI,KAAK,CAAC,OAAN,IAAiB,IAArB,EAA0B;AACxB,QAAA,KAAK,CAAC,cAAN;AACF;AACD,KALK;AAMN,IAAA,YANM,wBAMO,KANP,EAMa;AACjB,UAAI,KAAK,CAAC,OAAN,IAAiB,IAArB,EAA0B;AACxB,aAAK,KAAL,CAAW,KAAX;AACF;AACD,KAVK;AAWN,IAAA,KAXM,iBAWA,KAXA,EAWM;AAAA;;AACV,UAAI,KAAK,QAAL,KAAkB,EAAtB,EAAyB;AACvB,aAAK,KAAL,CAAW,IAAX,CAAgB;AAAC,UAAA,IAAI,EAAE,CAAP;AAAU,UAAA,IAAI,EAAC,KAAK;AAApB,SAAhB;AACA,YAAI,QAAO,GAAI,KAAK,QAApB;AACA,aAAK,QAAL,GAAgB,EAAhB,CAHuB,CAGF;;AACrB,aAAK,OAAL,GAAe,IAAf;AACA,YAAI,UAAS,GAAI,QAAQ,CAAC,sBAAT,CAAgC,oBAAhC,EAAsD,CAAtD,CAAjB;AACA,QAAA,UAAU,CAAC,SAAX,GAAuB,UAAU,CAAC,YAAlC;AACA,QAAA,eAAe,CAAC,QAAD,CAAf,CAA0B,IAA1B,CAA+B,UAAA,GAAE,EAAK;AACpC,UAAA,KAAI,CAAC,OAAL,GAAe,KAAf;;AACA,cAAI,GAAG,CAAC,IAAJ,CAAS,OAAb,EAAqB;AACnB,YAAA,KAAI,CAAC,KAAL,CAAW,IAAX,CAAgB;AAAC,cAAA,IAAI,EAAE,CAAP;AAAU,cAAA,IAAI,EAAE,GAAG,CAAC,IAAJ,CAAS;AAAzB,aAAhB;AACD,WAFD,MAEM;AACJ,YAAA,KAAI,CAAC,KAAL,CAAW,IAAX,CAAgB;AAAC,cAAA,IAAI,EAAE,CAAP;AAAU,cAAA,IAAI,EAAE,gBAAgB,GAAG,CAAC,IAAJ,CAAS;AAAzC,aAAhB;AACF;AACD,SAPD,EAOG,KAPH,CAOS,UAAA,GAAE,EAAK;AACd,UAAA,KAAI,CAAC,OAAL,GAAe,KAAf;;AACA,UAAA,KAAI,CAAC,QAAL,CAAc,KAAd,CAAoB,YAApB;AACD,SAVD,EAUG,OAVH,CAUW,YAAM;AACf,UAAA,UAAU,CAAC,SAAX,GAAuB,UAAU,CAAC,YAAlC;AACD,SAZD;AAaF;AACD;AAjCK;AAfK,CAAf","sourcesContent":["<template>\n  <div class=\"qa-panel\">\n    <div class=\"title-box\">智能问答</div>\n    <div class=\"message-box\">\n      <el-scrollbar>\n        <div class=\"message-item\" v-for=\"text in texts\">\n          <div class=\"message-item-1\" v-if=\"text.from === 1\">\n            <div class=\"name\">小智</div>\n            <div class=\"message\">{{ text.text }}</div>\n          </div>\n          <div class=\"message-item-2\" v-if=\"text.from === 2\">\n            <div class=\"name\">我</div>\n            <div class=\"message\">{{ text.text }}</div>\n          </div>\n        </div>\n        <img src=\"../../public/icons/loading.gif\" v-show=\"loading\"/>\n      </el-scrollbar>\n    </div>\n    <div class=\"input-box\">\n      <textarea v-model=\"question\" @keyup=\"keyUpHandler\" @keydown=\"keyDownHandler\"></textarea>\n      <my-button class=\"query-btn\" @click=\"query\">询问</my-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport MyButton from \"@/components/Tools/MyButton\";\nimport {simple_question} from \"@/api/QAAPI\"\nexport default {\n  name: \"QAPanel\",\n  components: {MyButton},\n  data(){\n    return{\n      loading: false,\n      question: \"哈利波特\",\n      texts: [\n        {\n          from: 1, //1是系统，2是用户\n          text: \"试着问我问题吧~\",\n        }\n      ]\n    }\n  },\n  methods:{\n    keyDownHandler(event){\n      if (event.keyCode == '13'){\n        event.preventDefault();\n      }\n    },\n    keyUpHandler(event){\n      if (event.keyCode == '13'){\n        this.query(event);\n      }\n    },\n    query(event){\n      if (this.question !== ''){\n        this.texts.push({from: 2, text:this.question});\n        let question = this.question;\n        this.question = \"\";  //清空输入栏\n        this.loading = true;\n        let scrollView = document.getElementsByClassName(\"el-scrollbar__wrap\")[0];\n        scrollView.scrollTop = scrollView.scrollHeight;\n        simple_question(question).then(res => {\n          this.loading = false;\n          if (res.data.success){\n            this.texts.push({from: 1, text: res.data.content});\n          }else {\n            this.texts.push({from: 1, text: \"查询失败噢...信息：\" + res.data.message});\n          }\n        }).catch(err => {\n          this.loading = false;\n          this.$message.error(\"访问失败，请检查网络\")\n        }).finally(() => {\n          scrollView.scrollTop = scrollView.scrollHeight;\n        });\n      }\n    },\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n@import \"../assets/css/colors.less\";\n.qa-panel{\n  width: 300px;\n  height: 630px;\n  box-shadow: 0px 0 1px #e6e6e6;\n  background-color: white;\n  border-radius: 4px;\n  border: 1px solid #eeeeee;\n  display: flex;\n  flex-direction: column;\n}\n\n.title-box{\n  color: @theme;\n  font-weight: bold;\n  font-size: 15px;\n  font-family: 微软雅黑;\n  height: 20px;\n  line-height: 20px;\n  padding: 14px;\n  border-bottom: 1px solid #eeeeee;\n}\n\n.message-box{\n  flex: 1;\n  padding: 14px 0 14px 14px;\n  display: flex;\n  flex-direction: column;\n  overflow-x: hidden;\n}\n\n.el-scrollbar{\n  padding-right: 14px;\n}\n\n.message-item{\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 5px;\n}\n\n.name{\n  color: @myblack;\n  font-size: 14px;\n  font-family: 微软雅黑;\n  letter-spacing:1px;\n  margin-bottom: 5px;\n  width: 100%;\n}\n\n.message{\n  color: @myblack;\n  font-size: 14px;\n  font-family: 微软雅黑;\n  letter-spacing:1px;\n  max-width: 75%;\n  width: fit-content;\n  padding: 10px 13px;\n  border-radius: 8px;\n}\n\n.message-item-1{\n  .message{\n    border: 1px solid #d8d8ff;\n  }\n}\n\n.message-item-2{\n  .name{\n    text-align: right;\n  }\n  .message{\n    background: #ededfd;\n    float: right;\n  }\n}\n\n.input-box{\n  height: 150px;\n  border-top: 1px solid #eeeeee;\n  position: relative;\n}\n\ntextarea{\n  resize: none;\n  border: none;\n  margin: 10px 10px 0 10px;\n  outline: none;\n  font-size: 15px;\n  font-family: 微软雅黑;\n  letter-spacing:1px;\n  height: 100% - 40px;\n  width: 100% - 10px;\n  color: #565657;\n}\n\n.query-btn{\n  margin-bottom: 14px;\n  position: absolute;\n  right: 14px;\n  bottom: 0;\n}\n\n</style>"],"sourceRoot":""}]}