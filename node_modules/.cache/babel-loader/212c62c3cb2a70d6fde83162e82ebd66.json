{"remainingRequest":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\Zhaoning\\Desktop\\HCI\\src\\components\\SideBar.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\src\\components\\SideBar.vue","mtime":1638705736060},{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1616796459000},{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvWmhhb25pbmcvRGVza3RvcC9IQ0kvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCB7IGdldFJlY29tbWVuZCB9IGZyb20gIkAvYXBpL1JlY29tbWVuZEFQSSI7CmltcG9ydCB7IG1hcE11dGF0aW9ucywgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJTaWRlQmFyIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VhcmNoZWQ6IGZhbHNlLAogICAgICBpbnB1dDogJycsCiAgICAgIHJlc3VsdExvYWRpbmc6IGZhbHNlLAogICAgICByZXN1bHQ6IHt9LAogICAgICAvL+i/lOWbnueahOe7k+aenAogICAgICBzaG93Tm9SZXN1bHQ6IGZhbHNlLAogICAgICBhbnM6IFtdLAogICAgICBzaG93QW5zOiBmYWxzZSwKICAgICAgc2hvd05vZGVJbmZvOiBmYWxzZSwKICAgICAgcmVjc0xvYWRpbmc6IGZhbHNlLAogICAgICByZWNvbW1lbmRhdGlvbnM6IFtdLAogICAgICAvL+aOqOiNkOadoeebrgogICAgICBpbmRleENsYXNzOiBbJ2luZGV4LTEnLCAnaW5kZXgtMicsICdpbmRleC0zJ10sCiAgICAgIHNob3dOb1JlY3M6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKHsKICAgIHByb2plY3Q6IGZ1bmN0aW9uIHByb2plY3Qoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnByb2plY3Q7CiAgICB9LAogICAgcGlkOiBmdW5jdGlvbiBwaWQoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnBpZDsKICAgIH0KICB9KSksCiAgbWV0aG9kczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBNdXRhdGlvbnMoWydzZXRQcm9qZWN0J10pKSwge30sIHsKICAgIGtleURvd25IYW5kbGVyOiBmdW5jdGlvbiBrZXlEb3duSGFuZGxlcihldmVudCkgewogICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSAnMTMnKSB7CiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgfQogICAgfSwKICAgIGtleVVwSGFuZGxlcjogZnVuY3Rpb24ga2V5VXBIYW5kbGVyKGV2ZW50KSB7CiAgICAgIGlmIChldmVudC5rZXlDb2RlID09ICcxMycpIHsKICAgICAgICB0aGlzLnF1ZXJ5KGV2ZW50KTsKICAgICAgfQogICAgfSwKICAgIHF1ZXJ5OiBmdW5jdGlvbiBxdWVyeShldmVudCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuaW5wdXQgPT09ICcnKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgaW5wdXQgPSB0aGlzLmlucHV0OwogICAgICB0aGlzLnNlYXJjaGVkID0gdHJ1ZTsKICAgICAgdGhpcy5yZWNzTG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMucmVzdWx0TG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMuc2hvd05vUmVzdWx0ID0gZmFsc2U7CiAgICAgIHRoaXMuc2hvd05vUmVjcyA9IGZhbHNlOwogICAgICB0aGlzLnNob3dBbnMgPSBmYWxzZTsKICAgICAgdGhpcy5zaG93Tm9kZUluZm8gPSBmYWxzZTsKICAgICAgdGhpcy5yZWNvbW1lbmRhdGlvbnMgPSBbXTsKICAgICAgdGhpcy5hbnMgPSBbXTsKICAgICAgdGhpcy5yZXN1bHQgPSB7fTsgLy9UT0RPOiDmjKrnlKjlj7PovrnmoI/nmoTmkJzntKLlip/og70KICAgICAgLy/or7fmsYJhcGnojrflvpfigJznjJzkvaDmg7PnnIvigJ3nu5PmnpwKCiAgICAgIGdldFJlY29tbWVuZChpbnB1dCwgdGhpcy5waWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgdmFyIHJlY3NPYmogPSByZXMuY29udGVudDsKCiAgICAgICAgICBpZiAocmVzLmNvbnRlbnQgIT09IG51bGwpIHsKICAgICAgICAgICAgLy/moLnmja7plK7lgLzmjpLluo/lvpfliLDplK7lkI1saXN0CiAgICAgICAgICAgIF90aGlzLnJlY29tbWVuZGF0aW9ucyA9IE9iamVjdC5rZXlzKHJlY3NPYmopLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVjc09ialtiXSAtIHJlY3NPYmpbYV07CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBfdGhpcy5yZWNvbW1lbmRhdGlvbnMgPSBfdGhpcy5yZWNvbW1lbmRhdGlvbnMuc2xpY2UoMCwgMTApOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMuc2hvd05vUmVjcyA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tZXNzYWdlKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcigi6K+356Gu5L+d572R57uc6L+e5o6l5q2j5bi4Iik7CgogICAgICAgIGNvbnNvbGUubG9nKCLopoHkuYjmlq3nvZHvvIzopoHkuYjmnI3liqHlmajltKnkuoYiLCBlcnIpOwogICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy5yZWNzTG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0KICB9KQp9Ow=="},{"version":3,"sources":["C:\\Users\\Zhaoning\\Desktop\\HCI\\src\\components\\SideBar.vue"],"names":[],"mappings":"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","sourcesContent":["<template xmlns=\"http://www.w3.org/1999/html\">\n  <div class=\"container\">\n    <div class=\"search-box\">\n      <div class=\"header\">\n        <span>搜索</span>\n        <div class=\"input-box\">\n          <input v-model=\"input\" @keyup=\"keyUpHandler\" @keydown=\"keyDownHandler\"/>\n          <svg class=\"icon\" aria-hidden=\"true\" @click=\"query\">\n            <use xlink:href=\"#iconyou\"></use>\n          </svg>\n        </div>\n      </div>\n    </div>\n\n    <el-scrollbar>\n      <div class=\"result-box\" v-loading=\"resultLoading\">\n        <div class=\"title\"><span>搜索结果</span></div>\n        <div class=\"empty\" v-if=\"!searched\">先输入关键词搜索吧~</div>\n        <div class=\"empty\" v-if=\"showNoResult\">无匹配，换个关键词搜索吧</div>\n        <div class=\"ans\" v-if=\"showAns\">\n          <div v-for=\"ansItem in ans\" :key=\"ansItem\">{{ ansItem }}</div>\n        </div>\n        <div v-if=\"showNodeInfo\">\n          <div class=\"result-item\">\n            <div class=\"result-name\">{{ result.data.name }}</div>\n          </div>\n          <div class=\"result-item\" v-for=\"(value, key) in result.data.property\" :key=\"key\">\n            <span class=\"key\">{{ key }}</span>\n            <span class=\"value\">\n              <span v-if=\"typeof value === 'string'\">{{ value }}</span>\n              <span v-else-if=\"Array.isArray(value)\">{{ value.join('，') }}</span>\n            </span>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"recommendations-box\" v-loading=\"recsLoading\">\n        <div class=\"title\"><span>猜你想看</span></div>\n        <div class=\"empty\" v-if=\"!searched\">先输入关键词搜索吧~</div>\n        <div class=\"empty\" v-if=\"showNoRecs\">暂无推荐</div>\n        <div>\n          <div class=\"recommendation-item\"\n               v-for=\"(rec, index) in recommendations\"\n               :key=\"rec\">\n            <div class=\"index\" :class=\"indexClass[index]\">{{ index + 1 }}</div>\n            <div class=\"rec-text\">{{ rec }}</div>\n          </div>\n        </div>\n      </div>\n    </el-scrollbar>\n  </div>\n</template>\n\n<script>\nimport { getRecommend } from \"@/api/RecommendAPI\"\nimport {mapMutations, mapState} from \"vuex\";\n\nexport default {\n  name: \"SideBar\",\n  data(){\n    return {\n      searched: false,\n      input: '',\n      resultLoading: false,\n      result: {}, //返回的结果\n      showNoResult: false,\n      ans: [],\n      showAns: false,\n      showNodeInfo: false,\n      recsLoading: false,\n      recommendations: [],  //推荐条目\n      indexClass: ['index-1', 'index-2', 'index-3'],\n      showNoRecs: false,\n    }\n  },\n  computed: {\n    ...mapState({\n      project: state => state.project,\n      pid: state => state.pid,\n    }),\n  },\n  methods:{\n    ...mapMutations(['setProject']),\n    keyDownHandler(event){\n      if (event.keyCode == '13'){\n        event.preventDefault();\n      }\n    },\n    keyUpHandler(event){\n      if (event.keyCode == '13'){\n        this.query(event);\n      }\n    },\n    query(event){\n      if (this.input === ''){ return; }\n\n      let input = this.input;\n      this.searched = true;\n      this.recsLoading = true;\n      this.resultLoading = true;\n      this.showNoResult = false;\n      this.showNoRecs = false;\n      this.showAns = false;\n      this.showNodeInfo = false;\n      this.recommendations = [];\n      this.ans = [];\n      this.result = {};\n\n      //TODO: 挪用右边栏的搜索功能\n\n      //请求api获得“猜你想看”结果\n      getRecommend(input, this.pid).then(res => {\n        if (res.success){\n          let recsObj = res.content;\n          if (res.content !== null){\n            //根据键值排序得到键名list\n            this.recommendations = Object.keys(recsObj).sort(function(a,b){return recsObj[b]-recsObj[a]});\n            this.recommendations = this.recommendations.slice(0,10);\n          }else{\n            this.showNoRecs = true;\n          }\n        }else {\n          this.$message.error(res.message);\n        }\n      }).catch(err => {\n        this.$message.error(\"请确保网络连接正常\");\n        console.log(\"要么断网，要么服务器崩了\",err);\n      }).finally(() => {\n        this.recsLoading = false;\n      });\n    },\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n@import \"../assets/css/colors.less\";\n@pad : 15px;\n@len1 : 20px;\n\n.container{\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.header{\n  background: @theme;\n  padding-top: @pad;\n  height: 65px;\n  line-height: 30px;\n  width: 300px;\n  font-size: 17px;\n  font-weight: bold;\n  color: white;\n  text-align: center;\n  margin-bottom: 30px;\n}\n\n.search-box{\n  .input-box{\n    height: 40px;\n    width: 100% - 15px;\n    margin: 8px auto;\n    position: relative;\n  }\n  input{\n    border: 2px solid @separator;\n    border-radius: 8px;\n    padding-left: 10px;\n    padding-right: 10px;\n    outline: none;\n    font-size: 15px;\n    font-family: 微软雅黑;\n    letter-spacing:1px;\n    width: 100% - 8px;\n    height: 100%;\n    color: #565657;\n  }\n  input:hover{\n    border-color: @prompt;\n  }\n  input:focus{\n    border-color: @theme;\n  }\n}\n\nsvg{\n  position: absolute;\n  right: 5px;\n  top: 13px;\n  width: 20px;\n  height: 20px;\n  background: white;\n}\nsvg:hover{\n  cursor: pointer;\n}\n\n.title{\n  color: @theme;\n  font-size: 14px;\n  font-family: 微软雅黑;\n  height: @len1;\n  span{\n    line-height: @len1;\n  }\n}\n\n.result-box{\n  padding: @pad;\n  min-height: 100px;\n  font-family: 微软雅黑;\n  font-size: 14px;\n  color: #565657;\n}\n\n.ans{\n  margin: 8px;\n}\n\n.result-name{\n  font-size: 17px;\n  font-weight: bold;\n  color: #565657;\n  margin: 25px 0;\n}\n\n.result-item{\n  //display: flex;\n  //flex-direction: row;\n  margin: 8px;\n}\n\n.key{\n  display: inline-block;\n  letter-spacing: 1px;\n  //color: @theme;\n  height: 20px;\n  line-height: 20px;\n  border-radius: 4px;\n  text-align: center;\n  color: white;\n  background: @theme;\n  padding: 1px 4px;\n  font-size: 13px;\n  margin-right: 8px;\n}\n\n\n\n/* 建议栏 */\n.recommendations-box{\n  padding: @pad;\n  font-family: 微软雅黑;\n  font-size: 14px;\n}\n.recommendation-item{\n  display: flex;\n  flex-direction: row;\n  margin: 8px;\n  color: #565657;\n}\n.index{\n  height: 20px;\n  line-height: 20px;\n  width: 20px;\n  border-radius: 4px;\n  text-align: center;\n}\n.index-1{\n  background: @set2-blush;\n  color: white;\n}\n.index-2{\n  background: @set1-dandelion;\n  color: white;\n}\n.index-3{\n  background: @set4-neptune;\n  color: white;\n}\n.rec-text{\n  margin-left: 10px;\n  letter-spacing: 0.5px;\n}\n\n.empty{\n  color: @prompt;\n  font-size: 14px;\n  font-family: 微软雅黑;\n  text-align: center;\n  margin: 20px;\n}\n\n</style>"],"sourceRoot":""}]}