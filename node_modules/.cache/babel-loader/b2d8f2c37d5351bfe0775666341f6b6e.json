{"remainingRequest":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\Zhaoning\\Desktop\\HCI\\src\\components\\QAPanel.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\src\\components\\QAPanel.vue","mtime":1638605971079},{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Zhaoning\\Desktop\\HCI\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvWmhhb25pbmcvRGVza3RvcC9IQ0kvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0IE15QnV0dG9uIGZyb20gIkAvY29tcG9uZW50cy9Ub29scy9NeUJ1dHRvbiI7CmltcG9ydCB7IHNpbXBsZV9xdWVzdGlvbiB9IGZyb20gIkAvYXBpL1FBQVBJIjsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJRQVBhbmVsIiwKICBjb21wb25lbnRzOiB7CiAgICBNeUJ1dHRvbjogTXlCdXR0b24KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgcXVlc3Rpb246ICLlk4jliKnms6LnibkiLAogICAgICB0ZXh0czogW3sKICAgICAgICBmcm9tOiAxLAogICAgICAgIC8vMeaYr+ezu+e7n++8jDLmmK/nlKjmiLcKICAgICAgICB0ZXh0OiAi6K+V552A6Zeu5oiR6Zeu6aKY5ZCnfiIKICAgICAgfV0KICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoewogICAgcGlkOiBmdW5jdGlvbiBwaWQoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnBpZDsKICAgIH0KICB9KSksCiAgbWV0aG9kczogewogICAga2V5RG93bkhhbmRsZXI6IGZ1bmN0aW9uIGtleURvd25IYW5kbGVyKGV2ZW50KSB7CiAgICAgIGlmIChldmVudC5rZXlDb2RlID09ICcxMycpIHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9CiAgICB9LAogICAga2V5VXBIYW5kbGVyOiBmdW5jdGlvbiBrZXlVcEhhbmRsZXIoZXZlbnQpIHsKICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gJzEzJykgewogICAgICAgIHRoaXMucXVlcnkoZXZlbnQpOwogICAgICB9CiAgICB9LAogICAgcXVlcnk6IGZ1bmN0aW9uIHF1ZXJ5KGV2ZW50KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5xdWVzdGlvbiAhPT0gJycpIHsKICAgICAgICB0aGlzLnRleHRzLnB1c2goewogICAgICAgICAgZnJvbTogMiwKICAgICAgICAgIHRleHQ6IHRoaXMucXVlc3Rpb24KICAgICAgICB9KTsKICAgICAgICB2YXIgcXVlc3Rpb24gPSB0aGlzLnF1ZXN0aW9uOwogICAgICAgIHRoaXMucXVlc3Rpb24gPSAiIjsgLy/muIXnqbrovpPlhaXmoI8KCiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICB2YXIgc2Nyb2xsVmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImVsLXNjcm9sbGJhcl9fd3JhcCIpWzBdOwogICAgICAgIHNjcm9sbFZpZXcuc2Nyb2xsVG9wID0gc2Nyb2xsVmlldy5zY3JvbGxIZWlnaHQ7CiAgICAgICAgc2ltcGxlX3F1ZXN0aW9uKHF1ZXN0aW9uLCB0aGlzLnBpZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgaWYgKHJlcy5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgX3RoaXMudGV4dHMucHVzaCh7CiAgICAgICAgICAgICAgZnJvbTogMSwKICAgICAgICAgICAgICB0ZXh0OiByZXMuZGF0YS5jb250ZW50CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMudGV4dHMucHVzaCh7CiAgICAgICAgICAgICAgZnJvbTogMSwKICAgICAgICAgICAgICB0ZXh0OiAi5p+l6K+i5aSx6LSl5ZmiLi4u5L+h5oGv77yaIiArIHJlcy5kYXRhLm1lc3NhZ2UKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKCLorr/pl67lpLHotKXvvIzor7fmo4Dmn6XnvZHnu5wiKTsKICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHNjcm9sbFZpZXcuc2Nyb2xsVG9wID0gc2Nyb2xsVmlldy5zY3JvbGxIZWlnaHQ7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["C:\\Users\\Zhaoning\\Desktop\\HCI\\src\\components\\QAPanel.vue"],"names":[],"mappings":";;AA0BA,OAAO,QAAP,MAAqB,6BAArB;AACA,SAAQ,eAAR,QAA8B,aAA9B;AACA,SAAS,QAAT,QAAyB,MAAzB;AACA,eAAe;AACb,EAAA,IAAI,EAAE,SADO;AAEb,EAAA,UAAU,EAAE;AAAC,IAAA,QAAQ,EAAR;AAAD,GAFC;AAGb,EAAA,IAHa,kBAGP;AACJ,WAAM;AACJ,MAAA,OAAO,EAAE,KADL;AAEJ,MAAA,QAAQ,EAAE,MAFN;AAGJ,MAAA,KAAK,EAAE,CACL;AACE,QAAA,IAAI,EAAE,CADR;AACW;AACT,QAAA,IAAI,EAAE;AAFR,OADK;AAHH,KAAN;AAUD,GAdY;AAeb,EAAA,QAAQ,oBACH,QAAQ,CAAC;AACV,IAAA,GAAG,EAAE,aAAA,KAAI;AAAA,aAAK,KAAK,CAAC,GAAX;AAAA;AADC,GAAD,CADL,CAfK;AAoBb,EAAA,OAAO,EAAC;AACN,IAAA,cADM,0BACS,KADT,EACe;AACnB,UAAI,KAAK,CAAC,OAAN,IAAiB,IAArB,EAA0B;AACxB,QAAA,KAAK,CAAC,cAAN;AACF;AACD,KALK;AAMN,IAAA,YANM,wBAMO,KANP,EAMa;AACjB,UAAI,KAAK,CAAC,OAAN,IAAiB,IAArB,EAA0B;AACxB,aAAK,KAAL,CAAW,KAAX;AACF;AACD,KAVK;AAWN,IAAA,KAXM,iBAWA,KAXA,EAWM;AAAA;;AACV,UAAI,KAAK,QAAL,KAAkB,EAAtB,EAAyB;AACvB,aAAK,KAAL,CAAW,IAAX,CAAgB;AAAC,UAAA,IAAI,EAAE,CAAP;AAAU,UAAA,IAAI,EAAC,KAAK;AAApB,SAAhB;AACA,YAAI,QAAO,GAAI,KAAK,QAApB;AACA,aAAK,QAAL,GAAgB,EAAhB,CAHuB,CAGF;;AACrB,aAAK,OAAL,GAAe,IAAf;AACA,YAAI,UAAS,GAAI,QAAQ,CAAC,sBAAT,CAAgC,oBAAhC,EAAsD,CAAtD,CAAjB;AACA,QAAA,UAAU,CAAC,SAAX,GAAuB,UAAU,CAAC,YAAlC;AACA,QAAA,eAAe,CAAC,QAAD,EAAW,KAAK,GAAhB,CAAf,CAAoC,IAApC,CAAyC,UAAA,GAAE,EAAK;AAC9C,UAAA,KAAI,CAAC,OAAL,GAAe,KAAf;;AACA,cAAI,GAAG,CAAC,IAAJ,CAAS,OAAb,EAAqB;AACnB,YAAA,KAAI,CAAC,KAAL,CAAW,IAAX,CAAgB;AAAC,cAAA,IAAI,EAAE,CAAP;AAAU,cAAA,IAAI,EAAE,GAAG,CAAC,IAAJ,CAAS;AAAzB,aAAhB;AACD,WAFD,MAEM;AACJ,YAAA,KAAI,CAAC,KAAL,CAAW,IAAX,CAAgB;AAAC,cAAA,IAAI,EAAE,CAAP;AAAU,cAAA,IAAI,EAAE,gBAAgB,GAAG,CAAC,IAAJ,CAAS;AAAzC,aAAhB;AACF;AACD,SAPD,EAOG,KAPH,CAOS,UAAA,GAAE,EAAK;AACd,UAAA,KAAI,CAAC,OAAL,GAAe,KAAf;;AACA,UAAA,KAAI,CAAC,QAAL,CAAc,KAAd,CAAoB,YAApB;AACD,SAVD,EAUG,OAVH,CAUW,YAAM;AACf,UAAA,UAAU,CAAC,SAAX,GAAuB,UAAU,CAAC,YAAlC;AACD,SAZD;AAaF;AACD;AAjCK;AApBK,CAAf","sourcesContent":["<template>\n  <div class=\"qa-panel\">\n    <div class=\"title-box\">智能问答</div>\n    <div class=\"message-box\">\n      <el-scrollbar>\n        <div class=\"message-item\" v-for=\"text in texts\">\n          <div class=\"message-item-1\" v-if=\"text.from === 1\">\n            <div class=\"name\">小智</div>\n            <div class=\"message\">{{ text.text }}</div>\n          </div>\n          <div class=\"message-item-2\" v-if=\"text.from === 2\">\n            <div class=\"name\">我</div>\n            <div class=\"message\">{{ text.text }}</div>\n          </div>\n        </div>\n        <img src=\"../../public/icons/loading.gif\" v-show=\"loading\"/>\n      </el-scrollbar>\n    </div>\n    <div class=\"input-box\">\n      <textarea v-model=\"question\" @keyup=\"keyUpHandler\" @keydown=\"keyDownHandler\"></textarea>\n      <my-button class=\"query-btn\" @click=\"query\">询问</my-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport MyButton from \"@/components/Tools/MyButton\";\nimport {simple_question} from \"@/api/QAAPI\"\nimport { mapState } from 'vuex';\nexport default {\n  name: \"QAPanel\",\n  components: {MyButton},\n  data(){\n    return{\n      loading: false,\n      question: \"哈利波特\",\n      texts: [\n        {\n          from: 1, //1是系统，2是用户\n          text: \"试着问我问题吧~\",\n        }\n      ]\n    }\n  },\n  computed: {\n    ...mapState({\n      pid: state => state.pid,\n    }),\n  },\n  methods:{\n    keyDownHandler(event){\n      if (event.keyCode == '13'){\n        event.preventDefault();\n      }\n    },\n    keyUpHandler(event){\n      if (event.keyCode == '13'){\n        this.query(event);\n      }\n    },\n    query(event){\n      if (this.question !== ''){\n        this.texts.push({from: 2, text:this.question});\n        let question = this.question;\n        this.question = \"\";  //清空输入栏\n        this.loading = true;\n        let scrollView = document.getElementsByClassName(\"el-scrollbar__wrap\")[0];\n        scrollView.scrollTop = scrollView.scrollHeight;\n        simple_question(question, this.pid).then(res => {\n          this.loading = false;\n          if (res.data.success){\n            this.texts.push({from: 1, text: res.data.content});\n          }else {\n            this.texts.push({from: 1, text: \"查询失败噢...信息：\" + res.data.message});\n          }\n        }).catch(err => {\n          this.loading = false;\n          this.$message.error(\"访问失败，请检查网络\")\n        }).finally(() => {\n          scrollView.scrollTop = scrollView.scrollHeight;\n        });\n      }\n    },\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n@import \"../assets/css/colors.less\";\n.qa-panel{\n  width: 300px;\n  height: 630px;\n  box-shadow: 0px 0 1px #e6e6e6;\n  background-color: white;\n  border-radius: 4px;\n  border: 1px solid #eeeeee;\n  display: flex;\n  flex-direction: column;\n}\n\n.title-box{\n  color: @theme;\n  font-weight: bold;\n  font-size: 15px;\n  font-family: 微软雅黑;\n  height: 20px;\n  line-height: 20px;\n  padding: 14px;\n  border-bottom: 1px solid #eeeeee;\n}\n\n.message-box{\n  flex: 1;\n  padding: 14px 0 14px 14px;\n  display: flex;\n  flex-direction: column;\n  overflow-x: hidden;\n}\n\n.el-scrollbar{\n  padding-right: 14px;\n}\n\n.message-item{\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 5px;\n}\n\n.name{\n  color: @myblack;\n  font-size: 14px;\n  font-family: 微软雅黑;\n  letter-spacing:1px;\n  margin-bottom: 5px;\n  width: 100%;\n}\n\n.message{\n  color: @myblack;\n  font-size: 14px;\n  font-family: 微软雅黑;\n  letter-spacing:1px;\n  max-width: 75%;\n  width: fit-content;\n  padding: 10px 13px;\n  border-radius: 8px;\n}\n\n.message-item-1{\n  .message{\n    border: 1px solid #d8d8ff;\n  }\n}\n\n.message-item-2{\n  .name{\n    text-align: right;\n  }\n  .message{\n    background: #ededfd;\n    float: right;\n  }\n}\n\n.input-box{\n  height: 150px;\n  border-top: 1px solid #eeeeee;\n  position: relative;\n}\n\ntextarea{\n  resize: none;\n  border: none;\n  margin: 10px 10px 0 10px;\n  outline: none;\n  font-size: 15px;\n  font-family: 微软雅黑;\n  letter-spacing:1px;\n  height: 100% - 40px;\n  width: 100% - 10px;\n  color: #565657;\n}\n\n.query-btn{\n  margin-bottom: 14px;\n  position: absolute;\n  right: 14px;\n  bottom: 0;\n}\n\n</style>"],"sourceRoot":""}]}