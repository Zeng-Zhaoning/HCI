{"remainingRequest":"/Users/albert/Desktop/数据科学方向实践/HCI的副本/node_modules/babel-loader/lib/index.js!/Users/albert/Desktop/数据科学方向实践/HCI的副本/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/albert/Desktop/数据科学方向实践/HCI的副本/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/albert/Desktop/数据科学方向实践/HCI的副本/src/components/CytoscapeKG.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/albert/Desktop/数据科学方向实践/HCI的副本/src/components/CytoscapeKG.vue","mtime":1638694828504},{"path":"/Users/albert/Desktop/数据科学方向实践/HCI的副本/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/albert/Desktop/数据科学方向实践/HCI的副本/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/albert/Desktop/数据科学方向实践/HCI的副本/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/albert/Desktop/数据科学方向实践/HCI的副本/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy9hbGJlcnQvRGVza3RvcC9cdTY1NzBcdTYzNkVcdTc5RDFcdTVCNjZcdTY1QjlcdTU0MTFcdTVCOUVcdThERjUvSENJXHU3Njg0XHU1MjZGXHU2NzJDL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvYWxiZXJ0L0Rlc2t0b3AvXHU2NTcwXHU2MzZFXHU3OUQxXHU1QjY2XHU2NUI5XHU1NDExXHU1QjlFXHU4REY1L0hDSVx1NzY4NFx1NTI2Rlx1NjcyQy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvVXNlcnMvYWxiZXJ0L0Rlc2t0b3AvXHU2NTcwXHU2MzZFXHU3OUQxXHU1QjY2XHU2NUI5XHU1NDExXHU1QjlFXHU4REY1L0hDSVx1NzY4NFx1NTI2Rlx1NjcyQy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwovL+azqOaEj++8ge+8ge+8gQovL+aJgOacieWvuXByb3BlcnR555qE5aSE55CG6YO95qCH5rOo5LqG5rOo6YeK77yacHJvcGVydHnlpITnkIYKLy/ml6XlkI7kv67mlLnvvJoKLy/popzoibLmlLnlj5jlop7liqDosIPoibLmnb/pgInpobkKLy/popzoibLnmoTlrZjlgqjlj6/ku6XmlL7lnKhkYXRh77yI5aSn5bCP5ZCM55CG77yJ77yM6K+75Y+W5pe25Zyo5riy5p+T5Ye95pWw5Lit6K6/6ZeuZGF0YeS4reebuOW6lOWtl+auteadpea4suafk++8jOS9huaYr+WcqOWFtuS7luagt+W8j+S4juminOiJsuino+iApuS5i+WJjeaXoOaEj+S5ie+8iOS+i++8muS8muaKiumAieS4reeKtuaAgeS5i+exu+eahOminOiJsuWtmOi/m+WOu++8iQovL+i+ueeahOa3u+WKoOWSjOS/ruaUueWinuWKoHNvdXJjZeWSjHRhcmdldOeahOWPr+S/ruaUueWKn+iDvQovL2VsZXMuaGFzQ2xhc3MoKeWSjC5hZGRDbGFzcygp5biu5YqpZWRnZeaKimNsYXNz5bGe5oCn55qE5re75Yqg56e75Yqo5YiwcmVuZEVkZ2Xph4wKLy9lbGUuaXNOb2RlKCnluK7liqlhZGTnrYnmlrnms5XkvJjljJZncm91cD09PSdub2RlcyfnmoTpgLvovpEKLy9ub2RlMEVkZ2Ux6L+Z5Liq5bGe5oCn5o2i5oiQ5a2X56ym5LiyCi8vIOWuvemrmOS/ruaUuemAu+i+keaaguaXtuWcqEVkaXRCYXLvvIzogIPomZHov5nkuKrmoLflvI/nmoTogYzotKPopoHkuI3opoHmlL7lnKjmnKxLR+e7hOS7tueahHVwZGF0YUFsbE5vZGVGb250U2l6Ze+8iOWIsOaXtuWAmeWGjeaUueS4quaWueazleWQjeihqOekuuWQjOaXtuS/ruaUueiKgueCueWkp+Wwj+WSjOWtl+S9k+Wkp+Wwj++8iQovL+iAg+iZkeW8leWFpWh0dHBzOi8vZ2l0aHViLmNvbS9rYWx1Z2luc2VyZy9jeXRvc2NhcGUtbm9kZS1odG1sLWxhYmVsCi8vY29sYeW4g+WxgOaMuuWlveeahOaEn+inie+8jOacieepuuWKoOS4gOS4iwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgJCBmcm9tICdqcXVlcnknOwppbXBvcnQgY3l0b3NjYXBlIGZyb20gJ2N5dG9zY2FwZSc7CmltcG9ydCB7IG1hcFN0YXRlLCBtYXBNdXRhdGlvbnMsIG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IGQzRm9yY2UgZnJvbSAnY3l0b3NjYXBlLWQzLWZvcmNlJzsKY3l0b3NjYXBlLnVzZShkM0ZvcmNlKTsKaW1wb3J0IGNvbnRleHRNZW51cyBmcm9tICdjeXRvc2NhcGUtY29udGV4dC1tZW51cyc7CmN5dG9zY2FwZS51c2UoY29udGV4dE1lbnVzKTsKaW1wb3J0IHBvcHBlciBmcm9tICdjeXRvc2NhcGUtcG9wcGVyJzsKY3l0b3NjYXBlLnVzZShwb3BwZXIpOwppbXBvcnQgdGlwcHksIHsgc3RpY2t5IH0gZnJvbSAndGlwcHkuanMnOwppbXBvcnQgJ3RpcHB5LmpzL2Rpc3QvdGlwcHkuY3NzJzsKd2luZG93LmpRdWVyeSA9IHdpbmRvdy4kID0gJDsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDeXRvc2NhcGVLRycsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIG5hbWVDaGVjayA9IGZ1bmN0aW9uIG5hbWVDaGVjayhydWxlLCB2YWx1ZSwgY2FsbGJhY2spIHsKICAgICAgY29uc29sZS5sb2coJ25hbWVDaGVjaycpOwogICAgICB2YXIgdmFsaWROYW1lID0gdmFsdWUudHJpbSgpOwoKICAgICAgaWYgKF90aGlzLmZvcm0ubmFtZU5vdyAmJiBfdGhpcy5mb3JtLm5hbWVOb3cgPT09IHZhbGlkTmFtZSkgewogICAgICAgIHJldHVybiBjYWxsYmFjaygpOwogICAgICB9CgogICAgICB2YXIgbmFtZVZhbGlkID0gL1xTLzsKCiAgICAgIGlmICghbmFtZVZhbGlkLnRlc3QodmFsaWROYW1lKSkgewogICAgICAgIC8v5Y+v5re75Yqg5q2j5YiZ6KGo6L6+5byP562J6YC76L6RCiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcign5ZCN56ew5LiN6IO95Li656m65ZOfJykpOwogICAgICB9CgogICAgICBpZiAoX3RoaXMubm9kZTBFZGdlMSA9PT0gMCkgewogICAgICAgIGlmIChfdGhpcy5pc1VuaXF1ZShfdGhpcy5jeS5ub2RlcygpLCBmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgICByZXR1cm4gdmFsLmRhdGEoIm5hbWUiKTsKICAgICAgICB9LCB2YWxpZE5hbWUpKSB7CiAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivpeWunuS9k+W3suWtmOWcqOWTpu+8jOaNouS4gOS4quWQjeWtl+WQp++8jOS6sn4nKSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHZhciBfdGhpcyRmb3JtJGVkZ2VDb25kaXQgPSBfdGhpcy5mb3JtLmVkZ2VDb25kaXRpb24sCiAgICAgICAgICAgIHNvdXJjZSA9IF90aGlzJGZvcm0kZWRnZUNvbmRpdC5zb3VyY2UsCiAgICAgICAgICAgIHRhcmdldCA9IF90aGlzJGZvcm0kZWRnZUNvbmRpdC50YXJnZXQ7CgogICAgICAgIHZhciBkdXBFZGdlcyA9IF90aGlzLmN5LmVkZ2VzKCkuZmlsdGVyKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgIHJldHVybiB2YWwuZGF0YSgic291cmNlIikgPT09IHNvdXJjZTsKICAgICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKHZhbCkgewogICAgICAgICAgcmV0dXJuIHZhbC5kYXRhKCJ0YXJnZXQiKSA9PT0gdGFyZ2V0OwogICAgICAgIH0pOwoKICAgICAgICBpZiAoZHVwRWRnZXMubGVuZ3RoID09PSAwIHx8IF90aGlzLmlzVW5pcXVlKGR1cEVkZ2VzLCBmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgICByZXR1cm4gdmFsLmRhdGEoInJlbGF0aW9uIik7CiAgICAgICAgfSwgdmFsaWROYW1lKSkgewogICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfor6XlhbPns7vlt7LlrZjlnKjlk6bvvIzmjaLkuIDkuKrlkI3lrZflkKfvvIzkurJ+JykpOwogICAgICAgIH0KICAgICAgfQogICAgfTsgLy9wcm9wZXJ0eeWkhOeQhgogICAgLy8gbGV0IHByb3BMZW5DaGVjayA9IChydWxlLHZhbHVlLGNhbGxiYWNrKSA9PiB7CiAgICAvLyAgICAgY29uc29sZS5sb2coJ3Byb3BMZW5DaGVjaycpOwogICAgLy8gICAgIGxldCBsZW4gPSAwOwogICAgLy8gICAgIGNvbnN0IGxpbWl0ID0gMjU1OwogICAgLy8gICAgIGxldCBpbnZhbGlkID0gZmFsc2U7CiAgICAvLyAgICAgbGV0IGVycm9yUmVnID0gL1xzLzsKICAgIC8vICAgICBmb3IobGV0IGkgPSAwO2kgPCB2YWx1ZS5sZW5ndGg7aSsrKXsKICAgIC8vICAgICAgICAgaWYoZXJyb3JSZWcudGVzdCh2YWx1ZVtpXSkpewogICAgLy8gICAgICAgICAgICAgaW52YWxpZCA9IHRydWU7CiAgICAvLyAgICAgICAgICAgICBicmVhazsKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgICAgICBsZW4gKz0gdmFsdWVbaV0rMTsKICAgIC8vICAgICB9CiAgICAvLyAgICAgbGVuLT0xOwogICAgLy8gICAgIGlmKGludmFsaWQpewogICAgLy8gICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuWxnuaAp+S4reS4jeiDveWQq+acieepuuWTn34iKSk7CiAgICAvLyAgICAgfWVsc2UgaWYobGVuPmxpbWl0KXsKICAgIC8vICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLlsZ7mgKflgLzmlbDmja7ph4/lpKrlpKfllabvvIzpurvng6bljrvmjonplb/luqbov4fplb/nmoTlsZ7mgKflk59+IikpOwogICAgLy8gICAgIH1lbHNlewogICAgLy8gICAgICAgICBjYWxsYmFjaygpOwogICAgLy8gICAgIH0KICAgIC8vIH07CgoKICAgIHJldHVybiB7CiAgICAgIG5vZGUwRWRnZTE6IDAsCiAgICAgIC8vIGVkaXRNb2RlOiBmYWxzZSwKICAgICAgYWRkRm9ybVZpc2libGU6IGZhbHNlLAogICAgICBnaXZlblR5cGU6IFtdLAogICAgICBmb3JtOiB7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgdHlwZTogJycsCiAgICAgICAgcHJvcGVydHk6IFtdLAogICAgICAgIGVkZ2VDb25kaXRpb246IHsKICAgICAgICAgIHNvdXJjZTogJycsCiAgICAgICAgICB0YXJnZXQ6ICcnCiAgICAgICAgfSwKICAgICAgICAvL+S7peS4i+S4uuWAn+eUqGZvcm3nmoRyZXNldOadpeiHquWKqOa4heepuueahOWxnuaApwogICAgICAgIG5hbWVOb3c6ICcnLAogICAgICAgIGZvcm1DYWxsYmFjazogZnVuY3Rpb24gZm9ybUNhbGxiYWNrKCkgewogICAgICAgICAgY29uc29sZS5sb2coInRoaXMuZm9ybS5mb3JtQ2FsbGJhY2vooqvmhI/lpJbosIPnlKgiKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIC8v5q2k5aSE55qE5YC85Lya5L2c5Li65Yid5aeL5YC85a2Y5Zyo77yM5ZyodGhpcy4kcmVmc1sncnVsZUZvcm0nXS5yZXNldEZpZWxkcygp5ZCO5Lya5oGi5aSN5oiQ5Yid5aeL5YC8CiAgICAgIHJ1bGVzOiB7CiAgICAgICAgbmFtZTogW3sKICAgICAgICAgIHZhbGlkYXRvcjogbmFtZUNoZWNrLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgdHlwZTogWy8v5aaC5p6c6K6+572u5LqG5Yid5aeL5YC877yM6L+Z6YeM5bCx5LiN5Lya6KKr55So5YiwCiAgICAgICAgewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup57G75Z6LJywKICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgICAgfV0gLy9wcm9wZXJ0eeWkhOeQhgogICAgICAgIC8vIHByb3BlcnR5OlsKICAgICAgICAvLyAgICAge3ZhbGlkYXRvcjpwcm9wTGVuQ2hlY2ssdHJpZ2dlcjonY2hhbmdlJ30KICAgICAgICAvLyBdCgogICAgICB9LAogICAgICBmb3JtTGFiZWxXaWR0aDogJzEyJScgLy8g6Ieq5a6a5LmJ5qCh6aqMIGNhbGxiYWNrIOW/hemhu+iiq+iwg+eUqOOAgiDmm7TlpJrpq5jnuqfnlKjms5Xlj6/lj4LogIMgYXN5bmMtdmFsaWRhdG9yCiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS95aW1pbmdoZS9hc3luYy12YWxpZGF0b3IKCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKHsKICAgIGRlZmF1bHRTdHlsZTogZnVuY3Rpb24gZGVmYXVsdFN0eWxlKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS53b3Jrc3BhY2UuZGVmYXVsdFN0eWxlOwogICAgfSwKICAgIHNoYXBlVHlwZTogZnVuY3Rpb24gc2hhcGVUeXBlKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS53b3Jrc3BhY2Uuc2hhcGVUeXBlOwogICAgfSwKICAgIGxpbmVTdHlsZVR5cGU6IGZ1bmN0aW9uIGxpbmVTdHlsZVR5cGUoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLndvcmtzcGFjZS5saW5lU3R5bGVUeXBlOwogICAgfSwKICAgIG5vZGVUeXBlOiBmdW5jdGlvbiBub2RlVHlwZShzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUud29ya3NwYWNlLm5vZGVUeXBlOwogICAgfSwKICAgIGVkZ2VUeXBlOiBmdW5jdGlvbiBlZGdlVHlwZShzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUud29ya3NwYWNlLmVkZ2VUeXBlOwogICAgfSwKICAgIGN5OiBmdW5jdGlvbiBjeShzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUud29ya3NwYWNlLmN5OwogICAgfSwKICAgIG5vZGVSYWRpdXM6IGZ1bmN0aW9uIG5vZGVSYWRpdXMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLndvcmtzcGFjZS5ub2RlUmFkaXVzOwogICAgfSwKICAgIG5vZGVGb250U2l6ZTogZnVuY3Rpb24gbm9kZUZvbnRTaXplKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS53b3Jrc3BhY2Uubm9kZUZvbnRTaXplOwogICAgfSwKICAgIGpzb25fc3JjX3BhdGg6IGZ1bmN0aW9uIGpzb25fc3JjX3BhdGgoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLndvcmtzcGFjZS5qc29uX3NyY19wYXRoOwogICAgfSwKICAgIHByb2plY3Q6IGZ1bmN0aW9uIHByb2plY3Qoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnByb2plY3Q7CiAgICB9CiAgfSkpLAogIHdhdGNoOiB7CiAgICBqc29uX3NyY19wYXRoOiBmdW5jdGlvbiBqc29uX3NyY19wYXRoKG5vdywgb2xkKSB7CiAgICAgIHRoaXMuZ2V0RGF0YShub3cpOwogICAgfSwKICAgIHByb2plY3Q6IGZ1bmN0aW9uIHByb2plY3Qobm93LCBvbGQpIHsKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgZWRnZXM6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5wcm9qZWN0LmVkZ2VzKSksCiAgICAgICAgbm9kZXM6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5wcm9qZWN0Lm5vZGVzKSkKICAgICAgfTsKICAgICAgdGhpcy5kYXRhSGFuZGxlKGRhdGEpOwogICAgfSwKICAgIG5vZGVGb250U2l6ZTogZnVuY3Rpb24gbm9kZUZvbnRTaXplKG5vdywgb2xkKSB7CiAgICAgIC8v55uR5ZCs6IqC54K55aSn5bCP5Y+Y5YyW77yM5aaC5p6c5Yia5Y+Y5Li65pyq6K6+5a6a5bCx6ZyA6KaB5L+u5pS56IqC54K55a2X5L2T5aSn5bCPCiAgICAgIGNvbnNvbGUubG9nKCJub2RlRm9udFNpemUgd2F0Y2hlZCIpOwoKICAgICAgaWYgKHRoaXMubm9kZUZvbnRTaXplID09PSAnJykgewogICAgICAgIHRoaXMudXBkYXRlQWxsTm9kZUZvbnRTaXplKCk7CiAgICAgIH0KICAgIH0sCiAgICBub2RlUmFkaXVzOiBmdW5jdGlvbiBub2RlUmFkaXVzKG5vdywgb2xkKSB7CiAgICAgIC8v55uR5ZCs6IqC54K55aSn5bCP5p2l5pS55Y+Y5paH5a2X5aSn5bCP77yM5L2G5piv5a2X5L2T5aSn5bCP5aaC5p6c5aSE5LqO6KKr6K6+5a6a54q25oCB5bCx5LiN6IO95pS5CiAgICAgIGNvbnNvbGUubG9nKCJub2RlUmFkaXVzIHdhdGNoZWQiKTsKCiAgICAgIGlmICh0aGlzLm5vZGVGb250U2l6ZSA9PT0gJycpIHsKICAgICAgICB0aGlzLnVwZGF0ZUFsbE5vZGVGb250U2l6ZSgpOwogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgLy/npoHnlKjlj7PplK7oj5zljZXvvIjlupTor6XpmLLmraLmtY/op4jlmajoj5zljZXooYzkuLrlubLmibBjeeeahOiPnOWNleihjOS4uu+8iQogICAgLy8gZG9jdW1lbnQub25jb250ZXh0bWVudSA9ICgpID0+IHsKICAgIC8vICAgICBldmVudC5yZXR1cm5WYWx1ZSA9IGZhbHNlOwogICAgLy8gfQogICAgaWYgKHRoaXMucHJvamVjdCAhPT0gdW5kZWZpbmVkICYmIHRoaXMucHJvamVjdCAhPT0gbnVsbCkgewogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICBlZGdlczogdGhpcy5wcm9qZWN0LmVkZ2VzLAogICAgICAgIG5vZGVzOiB0aGlzLnByb2plY3Qubm9kZXMKICAgICAgfTsKICAgICAgdGhpcy5kYXRhSGFuZGxlKGRhdGEpOwogICAgfQogIH0sCiAgbWV0aG9kczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBNdXRhdGlvbnMoWydzZXRDeScsICdzZXRFbGVtZW50cycsICd0cmlnZ2VyX3N0YXRpc3RpY19kYXRhX2NoYW5nZScsICdzZXRQcm9qZWN0J10pKSwge30sIHsKICAgIC8v6K+75pWw5o2u77yM54S25ZCO5Lqk57uZZGF0YUhhbmRsZQogICAgZ2V0RGF0YTogZnVuY3Rpb24gZ2V0RGF0YSh1cmwpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBheGlvcy5nZXQodXJsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczIuZGF0YUhhbmRsZShyZXMuZGF0YSk7CgogICAgICAgIF90aGlzMi5zZXRQcm9qZWN0KHJlcy5kYXRhKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKCiAgICAgICAgX3RoaXMyLiRtZXNzYWdlLmVycm9yKCfmlofku7bmlbDmja7moLzlvI/kuI3mraPnoa4nKTsKICAgICAgfSk7CiAgICB9LAogICAgLy/lnKhkYXRh5Lit5a2Y5pWw5o2u77yM5bm26L+b6KGM5pWw5o2u5bGV56S655qE6aKE5aSE55CGCiAgICBkYXRhSGFuZGxlOiBmdW5jdGlvbiBkYXRhSGFuZGxlKGRhdGEpIHsKICAgICAgLy8gdGhpcy5kYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkYXRhKSkKICAgICAgZGF0YS5lZGdlcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICB2YWwuY2xhc3NlcyA9ICdhdXRvcm90YXRlJzsKICAgICAgICB2YWwuZGF0YS50eXBlID0gdmFsLmRhdGEudHlwZSB8fCAnZGVmYXVsdCc7CiAgICAgIH0pOwogICAgICB2YXIgZGVmYXVsdF9jb2xvciA9ICIjOWM4Zjk2IjsgLy/lkoxhZGQtbm9kZeaWueazleS4reWIneWni+WMluminOiJsuiApuWQiO+8jOW/hemhu+WQjOaXtuS/ruaUuQoKICAgICAgZGF0YS5ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICB2YWwuZGF0YS50eXBlID0gdmFsLmRhdGEudHlwZSB8fCAnZGVmYXVsdCc7CiAgICAgICAgdmFsLmRhdGEuY29sb3IgPSB2YWwuZGF0YS5jb2xvciB8fCBkZWZhdWx0X2NvbG9yOyAvL+WwhuminOiJsue7keWumuWcqOaVsOaNrumHjO+8jOWcqHdvcmtzcGFjZeS4reS/ruaUueS4umJhY2tncm91bmQtY29sb3I6ZGF0YShjb2xvciks5a6e546w6aKc6Imy5oyB5LmF5YyWCgogICAgICAgIHZhbC5kYXRhLnR5cGVzZXQgPSB2YWwuZGF0YS50eXBlc2V0IHx8IHsKICAgICAgICAgIHg6IC0xLAogICAgICAgICAgeTogLTEsCiAgICAgICAgICBwYXJlbnQ6ICcnCiAgICAgICAgfTsKICAgICAgfSk7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdmFyIGxvYWRpbmcgPSB0aGlzLiRsb2FkaW5nKHsKICAgICAgICBsb2NrOiB0cnVlLAogICAgICAgIHRleHQ6ICcuLi7liqDovb3kuK0uLi4nLAogICAgICAgIHNwaW5uZXI6ICdlbC1pY29uLWxvYWRpbmcnLAogICAgICAgIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSwgMjU1LDI1NSwgMC44KScKICAgICAgfSk7CgogICAgICB0cnkgewogICAgICAgIHRoaXMuZ3JhcGgodGhhdCwgZGF0YSk7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgLy/orqnov4fplb/nmoTlhoXlrrnkvZzkuLrlsZXnpLrnmoTmoIfpopjml7bnnIHnlaUKICAgIGZvbnRTaG93OiBmdW5jdGlvbiBmb250U2hvdyh0ZXh0KSB7CiAgICAgIGlmICh0ZXh0ICYmIHRleHQubGVuZ3RoID4gNSkgewogICAgICAgIHJldHVybiB0ZXh0LnN1YnN0cmluZygwLCAzKSArICIuLi4iOwogICAgICB9CgogICAgICByZXR1cm4gdGV4dDsKICAgIH0sCiAgICAvL+agueaNruWGheWuueiuvue9ruWtl+S9k+Wkp+Wwj++8jOS9v+S5i+S4jeS8mui2heWHuuiKgueCue+8iOacqumqjOivge+8iQogICAgLy/mnIDlpb3mlLnmiJDmoLnmja7lrp7kvZPlpKflsI/orr7nva7lrZfkvZPlpKflsI8KICAgIGZvbnRTdHlsZTogZnVuY3Rpb24gZm9udFN0eWxlKGxlbmd0aCwgd2lkdGgpIHsKICAgICAgaWYgKHRoaXMubm9kZUZvbnRTaXplICE9PSAnJykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAiZm9udC1zaXplIjogdGhpcy5ub2RlRm9udFNpemUgKyAicHgiCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdmFyIGRlZmF1bHRXaWR0aCA9IDMwOwogICAgICB2YXIgbWluV2lkdGggPSAxMjsKICAgICAgdmFyIGZvbnRTaXplID0gZGVmYXVsdFdpZHRoIC0gKGxlbmd0aCAtIDIpICogNjsgLy/ov5nkuKrorqHnrpflrZfkvZPlpKflsI/nmoTnrpflvI/lj6/og73mnInngrnmi4nog6/vvIwKICAgICAgLy/moLnmja7oioLngrnlpKflsI/osIPmlbTmloflrZflpKflsI8KCiAgICAgIHZhciBub2RlV2lkdGggPSB3aWR0aCA/IHdpZHRoIDogZGVmYXVsdFdpZHRoOwogICAgICBmb250U2l6ZSA9IGZvbnRTaXplICogbm9kZVdpZHRoIC8gZGVmYXVsdFdpZHRoOwoKICAgICAgaWYgKCFmb250U2l6ZSB8fCBmb250U2l6ZSA8IG1pbldpZHRoKSB7CiAgICAgICAgLy8iIWZvbnRTaXplIuacieaViOWQl++8jOS4jeaHguivtgogICAgICAgIGZvbnRTaXplID0gbWluV2lkdGg7CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgImZvbnQtc2l6ZSI6IGZvbnRTaXplICsgInB4IgogICAgICB9OwogICAgfSwKICAgIC8v5biu5Yqpbm9kZeWQiOmAguWcsOWxleekunRleHQKICAgIHJlbmROb2RlOiBmdW5jdGlvbiByZW5kTm9kZSh0YXJnZXQsIHRoYXQpIHsKICAgICAgdmFyIGRhdGEgPSB0YXJnZXQuZGF0YSgpOwogICAgICB2YXIgdGV4dCA9IHRoYXQuZm9udFNob3coZGF0YS5uYW1lKTsgLy/lpoLmnpzmsqHmnInorr7lrprlpKflsI/vvIzlsLHmjInnhafoioLngrnmnKzouqvlpKflsI/vvIjoioLngrnlpKflsI/kuI3mmK/ml7bliLvmmK/orr7lrprlpKflsI/lkJfvvJ/mjInnjrDlnKjnmoTlhpnms5XvvIzmiJHop4nlvpfmlrDlop7nmoToioLngrnmsqHmnInliJ3lp4vljJbliLDmuLLmn5PliLDorr7lrprlpKflsI/vvIkKCiAgICAgIHZhciB3aWR0aE5vdyA9IHRoaXMubm9kZVJhZGl1cyA9PT0gJycgPyB0aGlzLmdldE5vZGVXaWR0aCh0YXJnZXQpIDogdGhpcy5ub2RlUmFkaXVzOwogICAgICB3aWR0aE5vdyA9IHBhcnNlSW50KHdpZHRoTm93ICsgJycpOyAvL+ehruS/neaYr+aVsOWtl+exu+WeiwogICAgICAvL+iOt+WPluiKgueCueWuveW6pueahOaVsOWtl+WAvOadpeiwg+iKguWtl+S9k+Wkp+WwjwoKICAgICAgdmFyIHN0eWxlID0gdGhhdC5mb250U3R5bGUodGV4dC5sZW5ndGgsIHdpZHRoTm93KTsKICAgICAgc3R5bGUuc2hhcGUgPSB0aGlzLnNoYXBlVHlwZVtkYXRhLnR5cGVdOwogICAgICBzdHlsZS5sYWJlbCA9IHRleHQ7CgogICAgICBpZiAodGhpcy5ub2RlUmFkaXVzICE9PSAnJykgewogICAgICAgIC8v5ZKMRWRpdEJhcuS4rW5vZGVSYWRpdXPnm5HlkKzmlrnms5XpgLvovpHogKblkIjvvIzlv4XpobvlkIzml7bkv67mlLkKICAgICAgICBzdHlsZS53aWR0aCA9IHdpZHRoTm93ICsgJ3B4JzsKICAgICAgICBzdHlsZS5oZWlnaHQgPSB3aWR0aE5vdyArICdweCc7CiAgICAgIH0KCiAgICAgIHRhcmdldC5zdHlsZShzdHlsZSk7CiAgICB9LAogICAgZ2V0Tm9kZVdpZHRoOiBmdW5jdGlvbiBnZXROb2RlV2lkdGgodGFyZ2V0KSB7CiAgICAgIC8v6L+U5Zue5YC85Li65pWw5a2X57G75Z6LCiAgICAgIHZhciB3aWR0aFByb3AgPSB0YXJnZXQuc3R5bGUoIndpZHRoIik7CiAgICAgIHZhciBkZWZhdWx0V2lkdGggPSAzMDsKCiAgICAgIGlmICh3aWR0aFByb3ApIHsKICAgICAgICByZXR1cm4gcGFyc2VJbnQod2lkdGhQcm9wLm1hdGNoKC8oXFMqKXB4LylbMV0pOyAvL+maj+S+v+aQnOeahO+8jOS4jeefpemBk+acieayoeacieabtOWlveWGmeazlQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBkZWZhdWx0V2lkdGg7CiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVBbGxOb2RlRm9udFNpemU6IGZ1bmN0aW9uIHVwZGF0ZUFsbE5vZGVGb250U2l6ZSgpIHsKICAgICAgLy/lrr3pq5jkv67mlLnpgLvovpHmmoLml7blnKhFZGl0QmFy77yM5oSf6KeJ6L+Z5Liq5qC35byP55qE6IGM6LSj5bqU6K+l5pS+5ZyoS0fnu4Tku7YKICAgICAgLy/nlLHkuo7lrr3pq5jkv67mlLnlnKhFZGl0QmFy77yM5q2k5aSE6buY6K6kTm9kZVJhZGl1c+WmguaenOW3suiuvuWumumCo+WwseW3sue7j+abtOaWsOWIsOWFqOmDqOiKgueCueS6hu+8jOS+i+WkluaDheWGteW3suWcqHJlbmROb2Rl5Lit6ICD6JmRCiAgICAgIC8v5q2k5aSE5Li65LqG6Ziy5q2i5aSa5YGa5pON5L2c5bCx5rKh5pyJ6LCD55SocmVuZE5vZGXvvIznu5PmnpzmmK/pgLvovpHkuIDpg6jliIblkoxyZW5kTm9kZemHjeWkje+8jOW9ouaIkOmHjeWkjeiApuWQiAogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHZhciBjeSA9IHRoYXQuY3k7CiAgICAgIHRoYXQuYmF0Y2goY3ksIGZ1bmN0aW9uICgpIHsKICAgICAgICBjeS5ub2RlcygpLmZvckVhY2goZnVuY3Rpb24gKHZhbCkgewogICAgICAgICAgdmFyIHdpZHRoTm93ID0gdGhhdC5nZXROb2RlV2lkdGgodmFsKTsgLy/pu5jorqROb2RlUmFkaXVz5aaC5p6c6KKr6K6+572u5YiZ6IqC54K55bGe5oCn5bey57uP5pu05paw5Yiw5ZKM5a6D5LiA5qC3CgogICAgICAgICAgdmFyIG5hbWVTaG93biA9IHZhbC5zdHlsZSgibGFiZWwiKTsKICAgICAgICAgIHZhciBzdHlsZSA9IHRoYXQuZm9udFN0eWxlKG5hbWVTaG93bi5sZW5ndGgsIHdpZHRoTm93KTsKICAgICAgICAgIHZhbC5zdHlsZShzdHlsZSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHJlbmRFZGdlOiBmdW5jdGlvbiByZW5kRWRnZSh0YXJnZXQsIHRoYXQpIHsKICAgICAgdmFyIGRhdGEgPSB0YXJnZXQuZGF0YSgpOwogICAgICB2YXIgdGV4dCA9IHRoYXQuZm9udFNob3coZGF0YS5yZWxhdGlvbik7CiAgICAgIHRhcmdldC5zdHlsZSh7CiAgICAgICAgbGFiZWw6IHRleHQsCiAgICAgICAgJ2xpbmUtc3R5bGUnOiB0aGlzLmxpbmVTdHlsZVR5cGVbZGF0YS50eXBlXQogICAgICB9KTsgLy8gY29uc3Qgc3R5bGUgPSB0aGF0LmZvbnRTdHlsZSh0ZXh0Lmxlbmd0aCk7CiAgICAgIC8vIHRhcmdldC5zdHlsZShzdHlsZSk7CiAgICAgIC8vIHRhcmdldC5hZGRDbGFzcygnYXV0b3JvdGF0ZScpOwogICAgfSwKICAgIC8v5L2c5Zu+5pyJ5YWz55qE6K6+572uCiAgICBncmFwaDogZnVuY3Rpb24gZ3JhcGgodGhhdCwgZGF0YSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBiZkxheW91dCA9IHsKICAgICAgICBuYW1lOiAnYnJlYWR0aGZpcnN0JywKICAgICAgICBtaW5EaXN0OiA0MCwKICAgICAgICBmaXQ6IHRydWUsCiAgICAgICAgcGFkZGluZzogMzAsCiAgICAgICAgYm91bmRpbmdCb3g6IHVuZGVmaW5lZCwKICAgICAgICBhbmltYXRlOiBmYWxzZSwKICAgICAgICBhbmltYXRpb25EdXJhdGlvbjogNTAwLAogICAgICAgIGFuaW1hdGlvbkVhc2luZzogdW5kZWZpbmVkLAogICAgICAgIGFuaW1hdGVGaWx0ZXI6IGZ1bmN0aW9uIGFuaW1hdGVGaWx0ZXIobm9kZSwgaSkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSwKICAgICAgICByZWFkeTogdW5kZWZpbmVkLAogICAgICAgIHN0b3A6IHVuZGVmaW5lZCwKICAgICAgICB0cmFuc2Zvcm06IGZ1bmN0aW9uIHRyYW5zZm9ybShub2RlLCBwb3NpdGlvbikgewogICAgICAgICAgcmV0dXJuIHBvc2l0aW9uOwogICAgICAgIH0KICAgICAgfTsKICAgICAgdmFyIHByZXNldExheW91dCA9IHsKICAgICAgICBuYW1lOiAncHJlc2V0JywKICAgICAgICBwb3NpdGlvbnM6IHVuZGVmaW5lZCwKICAgICAgICAvLyBtYXAgb2YgKG5vZGUgaWQpID0+IChwb3NpdGlvbiBvYmopOyBvciBmdW5jdGlvbihub2RlKXsgcmV0dXJuIHNvbVBvczsgfQogICAgICAgIHpvb206IHVuZGVmaW5lZCwKICAgICAgICAvLyB0aGUgem9vbSBsZXZlbCB0byBzZXQgKHByb2Igd2FudCBmaXQgPSBmYWxzZSBpZiBzZXQpCiAgICAgICAgcGFuOiB1bmRlZmluZWQsCiAgICAgICAgLy8gdGhlIHBhbiBsZXZlbCB0byBzZXQgKHByb2Igd2FudCBmaXQgPSBmYWxzZSBpZiBzZXQpCiAgICAgICAgZml0OiB0cnVlLAogICAgICAgIC8vIHdoZXRoZXIgdG8gZml0IHRvIHZpZXdwb3J0CiAgICAgICAgcGFkZGluZzogMzAsCiAgICAgICAgLy8gcGFkZGluZyBvbiBmaXQKICAgICAgICBhbmltYXRlOiBmYWxzZSwKICAgICAgICAvLyB3aGV0aGVyIHRvIHRyYW5zaXRpb24gdGhlIG5vZGUgcG9zaXRpb25zCiAgICAgICAgYW5pbWF0aW9uRHVyYXRpb246IDUwMCwKICAgICAgICAvLyBkdXJhdGlvbiBvZiBhbmltYXRpb24gaW4gbXMgaWYgZW5hYmxlZAogICAgICAgIGFuaW1hdGlvbkVhc2luZzogdW5kZWZpbmVkLAogICAgICAgIC8vIGVhc2luZyBvZiBhbmltYXRpb24gaWYgZW5hYmxlZAogICAgICAgIGFuaW1hdGVGaWx0ZXI6IGZ1bmN0aW9uIGFuaW1hdGVGaWx0ZXIobm9kZSwgaSkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSwKICAgICAgICAvLyBhIGZ1bmN0aW9uIHRoYXQgZGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBub2RlIHNob3VsZCBiZSBhbmltYXRlZC4gIEFsbCBub2RlcyBhbmltYXRlZCBieSBkZWZhdWx0IG9uIGFuaW1hdGUgZW5hYmxlZC4gIE5vbi1hbmltYXRlZCBub2RlcyBhcmUgcG9zaXRpb25lZCBpbW1lZGlhdGVseSB3aGVuIHRoZSBsYXlvdXQgc3RhcnRzCiAgICAgICAgcmVhZHk6IHVuZGVmaW5lZCwKICAgICAgICAvLyBjYWxsYmFjayBvbiBsYXlvdXRyZWFkeQogICAgICAgIHN0b3A6IHVuZGVmaW5lZCwKICAgICAgICAvLyBjYWxsYmFjayBvbiBsYXlvdXRzdG9wCiAgICAgICAgdHJhbnNmb3JtOiBmdW5jdGlvbiB0cmFuc2Zvcm0obm9kZSwgcG9zaXRpb24pIHsKICAgICAgICAgIHJldHVybiBwb3NpdGlvbjsKICAgICAgICB9IC8vIHRyYW5zZm9ybSBhIGdpdmVuIG5vZGUgcG9zaXRpb24uIFVzZWZ1bCBmb3IgY2hhbmdpbmcgZmxvdyBkaXJlY3Rpb24gaW4gZGlzY3JldGUgbGF5b3V0cwoKICAgICAgfTsKICAgICAgdmFyIGN5ID0gY3l0b3NjYXBlKHsKICAgICAgICBjb250YWluZXI6ICQoJyNncmFwaCcpLAogICAgICAgIGJveFNlbGVjdGlvbkVuYWJsZWQ6IGZhbHNlLAogICAgICAgIGF1dG91bnNlbGVjdGlmeTogZmFsc2UsCiAgICAgICAgc3R5bGU6IHRoaXMuZGVmYXVsdFN0eWxlLAogICAgICAgIGVsZW1lbnRzOiBkYXRhLAogICAgICAgIGhpZGVMYWJlbHNPblZpZXdQb3J0OiBmYWxzZSwKICAgICAgICBtaW5ab29tOiAwLjE1LAogICAgICAgIG1heFpvb206IDgsCiAgICAgICAgd2hlZWxTZW5zaXRpdml0eTogMC4xLAogICAgICAgIC8vd2FybmluZwogICAgICAgIGxheW91dDogcHJlc2V0TGF5b3V0CiAgICAgIH0pOwogICAgICB0aGlzLnNldEN5KGN5KTsgLy/kuLrkuobmgaLlpI3miZPlvIDml7bnmoTluIPlsYDogIzlrZjnmoRlbGVtZW50c++8jOebruWJjeeUqOWIsOeahOWPquaciWVsZW1lbnRz5Litbm9kZXPnmoRpZOWSjHBvc2l0aW9u5pig5bCE5YWz57O7CiAgICAgIC8v6Jm954S25a6M5YWo5Y+v5Lul5Y+q5a2Y6L+Z5LiqbWFwPGlkLHBvc2l0aW9uPu+8jOS9huS4uuS6huWPr+aJqeWxleaAp+iAg+iZkeaaguaXtuWFiOWtmGVsZW1lbnRzKOaJqeWxleaXtuWPr+iDveS5n+eUqOS4jeWIsGhoaCkKCiAgICAgIHZhciBlbGVtZW50cyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5jeS5qc29uKCkuZWxlbWVudHMpKTsgLy/lrZjlhaXov5DooYzml7bnmoRjee+8jOehruS/nemDveaciWlkCgogICAgICB0aGlzLnNldEVsZW1lbnRzKGVsZW1lbnRzKTsKICAgICAgdGhpcy5iYXRjaChjeSwgZnVuY3Rpb24gKCkgewogICAgICAgIGN5Lm5vZGVzKCkuZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgICB0aGF0LnJlbmROb2RlKHZhbCwgdGhhdCk7CiAgICAgICAgfSk7CiAgICAgICAgY3kuZWRnZXMoKS5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgIHRoYXQucmVuZEVkZ2UodmFsLCB0aGF0KTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIGN5Lm9uKCdtb3VzZW92ZXInLCAnbm9kZScsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQgfHwgZXZlbnQuY3lUYXJnZXQ7IC8vIGNvbnNvbGUubG9nKCJtb3VzZW92ZXIgbm9kZTogIix0YXJnZXQpOwoKICAgICAgICB2YXIgZGF0YSA9IHRhcmdldC5kYXRhKCk7CiAgICAgICAgdmFyIG1pblNpemUgPSA0ODsgLy/nnIvotbfmnaXlj6/ku6XnmoTor5XpqozlgLzvvIzml6DnibnmrormhI/kuYkKCiAgICAgICAgdmFyIGZvbnRTaXplID0gcGFyc2VJbnQodGFyZ2V0LnN0eWxlKCJmb250LXNpemUiKS5tYXRjaCgvKFxTKilweC8pWzFdKSAqIDEuMjsKICAgICAgICBmb250U2l6ZSA9IGZvbnRTaXplIDwgbWluU2l6ZSA/IG1pblNpemUgOiBmb250U2l6ZTsKICAgICAgICB0YXJnZXQuc3R5bGUoewogICAgICAgICAgbGFiZWw6IGRhdGEubmFtZSwKICAgICAgICAgIGZvbnRTaXplOiBmb250U2l6ZSwKICAgICAgICAgICd6LWluZGV4JzogOTk5OQogICAgICAgIH0pOwoKICAgICAgICBpZiAoIXRhcmdldC5zY3JhdGNoKCd0aXAnKSkgewogICAgICAgICAgdmFyIHRleHQgPSAi57G75Z6LOiAiICsgZGF0YS50eXBlICsgJzxici8+JyArICLlsZ7mgKc6ICIgKyAnPGJyLz4nICsgX3RoaXMzLnByb3BlcnR5MlN0cmluZyhkYXRhLnByb3BlcnR5KTsKCiAgICAgICAgICB0YXJnZXQuc2NyYXRjaCgndGlwJywgdGhhdC5tYWtlVGlwcHkodGFyZ2V0LCB0ZXh0KSk7CiAgICAgICAgfQoKICAgICAgICB0YXJnZXQuc2NyYXRjaCgndGlwJykuc2hvdygpOwogICAgICB9KS5vbignbW91c2VvdXQnLCAnbm9kZScsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQgfHwgZXZlbnQuY3lUYXJnZXQ7CiAgICAgICAgdGhhdC5yZW5kTm9kZSh0YXJnZXQsIHRoYXQpOwoKICAgICAgICBpZiAodGFyZ2V0LnNjcmF0Y2goJ3RpcCcpKSB7CiAgICAgICAgICB0YXJnZXQuc2NyYXRjaCgndGlwJykuZGVzdHJveSgpOwogICAgICAgICAgdGFyZ2V0LnJlbW92ZVNjcmF0Y2goJ3RpcCcpOyAvLyBjb25zb2xlLmxvZyh0YXJnZXQuc2NyYXRjaCgpKTsKICAgICAgICB9CgogICAgICAgIHRhcmdldC5zdHlsZSh7CiAgICAgICAgICAnei1pbmRleCc6IDAKICAgICAgICB9KTsKICAgICAgfSkgLy9lZGdl5LiN6IO95pS55Y+Y6L6555qE6aKc6Imy77yM5ZCm5YiZ5ZKM6YCJ5Lit5py65Yi25Yay56qB77yI6YKj5aSE5Lmf5Lya5pS55Y+Y6aKc6Imy77yJCiAgICAgIC5vbignbW91c2VvdmVyJywgJ2VkZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IHx8IGV2ZW50LmN5VGFyZ2V0OyAvLyBjb25zb2xlLmxvZygibW91c2VvdmVyIGVkZ2U6ICIsdGFyZ2V0KTsKCiAgICAgICAgdmFyIGRhdGEgPSB0YXJnZXQuZGF0YSgpOyAvL+WmguaenOimgeaUueaXi+i9rO+8jOaYryJlZGdlLXRleHQtcm90YXRpb24iOiAibm9uZSLlkowiZWRnZS10ZXh0LXJvdGF0aW9uIjogImF1dG9yb3RhdGUiCgogICAgICAgIHRhcmdldC5zdHlsZSh7CiAgICAgICAgICBsYWJlbDogZGF0YS5yZWxhdGlvbiwKICAgICAgICAgIGZvbnRTaXplOiAzNiwKICAgICAgICAgIHdpZHRoOiA2LAogICAgICAgICAgY29sb3I6ICcjYmM1ZjZhJywKICAgICAgICAgICd6LWluZGV4JzogOTk5OQogICAgICAgIH0pOyAvL+atpOaVsOaXoOaEj+S5ie+8jOS7heS7hemcgOimgeavlHJlbmROb2Rl5pyA5aSnbGFiZWznmoQzNuabtOWkp+WNs+WPrwoKICAgICAgICBpZiAoIXRhcmdldC5zY3JhdGNoKCd0aXAnKSkgewogICAgICAgICAgdmFyIHRleHQgPSAi57G75Z6LOiAiICsgZGF0YS50eXBlOwogICAgICAgICAgdGFyZ2V0LnNjcmF0Y2goJ3RpcCcsIHRoYXQubWFrZVRpcHB5KHRhcmdldCwgdGV4dCkpOwogICAgICAgIH0KCiAgICAgICAgdGFyZ2V0LnNjcmF0Y2goJ3RpcCcpLnNob3coKTsKICAgICAgfSkub24oJ21vdXNlb3V0JywgJ2VkZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IHx8IGV2ZW50LmN5VGFyZ2V0OwogICAgICAgIHRoYXQucmVuZEVkZ2UodGFyZ2V0LCB0aGF0KTsKICAgICAgICB0YXJnZXQuc3R5bGUoewogICAgICAgICAgZm9udFNpemU6IDI0LAogICAgICAgICAgd2lkdGg6IDMsCiAgICAgICAgICBjb2xvcjogJyNlM2E2YTEnLAogICAgICAgICAgJ3otaW5kZXgnOiAwCiAgICAgICAgfSk7IC8v5LiO5LiK5paHZWRnZeeahOWIneWni+mFjee9ruS/neaMgeS4gOiHtAoKICAgICAgICBpZiAodGFyZ2V0LnNjcmF0Y2goJ3RpcCcpKSB7CiAgICAgICAgICB0YXJnZXQuc2NyYXRjaCgndGlwJykuZGVzdHJveSgpOwogICAgICAgICAgdGFyZ2V0LnJlbW92ZVNjcmF0Y2goJ3RpcCcpOyAvLyBjb25zb2xlLmxvZyh0YXJnZXQuc2NyYXRjaCgpKTsKICAgICAgICB9CiAgICAgIH0pOyAvLyDnu5Hlrprlj7PplK7ljZXlh7vnmoTkuovku7YKCiAgICAgIHZhciBiYXJIYW5kbGVyID0gZnVuY3Rpb24gYmFySGFuZGxlcihldmVudCkgewogICAgICAgIGlmIChhbGxTZWxlY3RlZCgnbm9kZScpKSB7CiAgICAgICAgICBjb250ZXh0TWVudS5oaWRlTWVudUl0ZW0oJ3NlbGVjdC1hbGwtbm9kZXMnKTsKICAgICAgICAgIGNvbnRleHRNZW51LnNob3dNZW51SXRlbSgndW5zZWxlY3QtYWxsLW5vZGVzJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnRleHRNZW51LmhpZGVNZW51SXRlbSgndW5zZWxlY3QtYWxsLW5vZGVzJyk7CiAgICAgICAgICBjb250ZXh0TWVudS5zaG93TWVudUl0ZW0oJ3NlbGVjdC1hbGwtbm9kZXMnKTsKICAgICAgICB9CgogICAgICAgIGlmIChhbGxTZWxlY3RlZCgnZWRnZScpKSB7CiAgICAgICAgICBjb250ZXh0TWVudS5oaWRlTWVudUl0ZW0oJ3NlbGVjdC1hbGwtZWRnZXMnKTsKICAgICAgICAgIGNvbnRleHRNZW51LnNob3dNZW51SXRlbSgndW5zZWxlY3QtYWxsLWVkZ2VzJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnRleHRNZW51LmhpZGVNZW51SXRlbSgndW5zZWxlY3QtYWxsLWVkZ2VzJyk7CiAgICAgICAgICBjb250ZXh0TWVudS5zaG93TWVudUl0ZW0oJ3NlbGVjdC1hbGwtZWRnZXMnKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBjeS5vbignY3h0dGFwJywgYmFySGFuZGxlcik7IC8vY3h0dGFw5Li65Y+z6ZSu5Y2V5Ye7CgogICAgICB2YXIgYWxsU2VsZWN0ZWQgPSBmdW5jdGlvbiBhbGxTZWxlY3RlZCh0eXBlKSB7CiAgICAgICAgaWYgKHR5cGUgPT09ICdub2RlJykgewogICAgICAgICAgcmV0dXJuIGN5Lm5vZGVzKCkubGVuZ3RoID09PSBjeS5ub2RlcygnOnNlbGVjdGVkJykubGVuZ3RoOwogICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2VkZ2UnKSB7CiAgICAgICAgICByZXR1cm4gY3kuZWRnZXMoKS5sZW5ndGggPT09IGN5LmVkZ2VzKCc6c2VsZWN0ZWQnKS5sZW5ndGg7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH07CgogICAgICB2YXIgc2VsZWN0QWxsT2ZUaGVTYW1lVHlwZSA9IGZ1bmN0aW9uIHNlbGVjdEFsbE9mVGhlU2FtZVR5cGUodHlwZSkgewogICAgICAgIGlmICh0eXBlID09PSAnbm9kZScpIHsKICAgICAgICAgIGN5Lm5vZGVzKCkuc2VsZWN0KCk7CiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnZWRnZScpIHsKICAgICAgICAgIGN5LmVkZ2VzKCkuc2VsZWN0KCk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgdmFyIHVuc2VsZWN0QWxsT2ZUaGVTYW1lVHlwZSA9IGZ1bmN0aW9uIHVuc2VsZWN0QWxsT2ZUaGVTYW1lVHlwZSh0eXBlKSB7CiAgICAgICAgaWYgKHR5cGUgPT09ICdub2RlJykgewogICAgICAgICAgY3kubm9kZXMoKS51bnNlbGVjdCgpOwogICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2VkZ2UnKSB7CiAgICAgICAgICBjeS5lZGdlcygpLnVuc2VsZWN0KCk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgdmFyIHJlbW92ZWQgPSBbXTsgLy/kuLrkuobmkqTplIDliKDpmaTogIzkvb/nlKjnmoTnvJPlrZjvvIzku6XlkI7lj6/ku6XmlLnmiJDmgaLlpI3lpJrmrKEKCiAgICAgIHZhciBjb250ZXh0TWVudSA9IGN5LmNvbnRleHRNZW51cyh7CiAgICAgICAgbWVudUl0ZW1zOiBbewogICAgICAgICAgaWQ6ICdlZGl0JywKICAgICAgICAgIGNvbnRlbnQ6ICfnvJbovpEnLAogICAgICAgICAgc2VsZWN0b3I6ICdub2RlLCBlZGdlJywKICAgICAgICAgIGhhc1RyYWlsaW5nRGl2aWRlcjogZmFsc2UsCiAgICAgICAgICBvbkNsaWNrRnVuY3Rpb246IGZ1bmN0aW9uIG9uQ2xpY2tGdW5jdGlvbihldmVudCkgewogICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IHx8IGV2ZW50LmN5VGFyZ2V0OwogICAgICAgICAgICB2YXIgZ3JvdXAgPSB0YXJnZXQuZ3JvdXAoKTsKICAgICAgICAgICAgdmFyIGRhdGEgPSB0YXJnZXQuZGF0YSgpOwogICAgICAgICAgICB2YXIgbmFtZSA9IGdyb3VwID09PSAnbm9kZXMnID8gJ25hbWUnIDogJ3JlbGF0aW9uJzsKCiAgICAgICAgICAgIGlmIChncm91cCA9PT0gJ25vZGVzJykgewogICAgICAgICAgICAgIC8vcHJvcGVydHnlpITnkIYKICAgICAgICAgICAgICB0aGF0Lm5vZGUwRWRnZTEgPSAwOwogICAgICAgICAgICAgIHRoYXQuZ2l2ZW5UeXBlID0gdGhhdC5ub2RlVHlwZTsKICAgICAgICAgICAgICB0aGF0LmZvcm0ucHJvcGVydHkgPSB0aGF0LnByb3BlcnR5VG9BcnJheShkYXRhLnByb3BlcnR5KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGF0Lm5vZGUwRWRnZTEgPSAxOwogICAgICAgICAgICAgIHRoYXQuZ2l2ZW5UeXBlID0gdGhhdC5lZGdlVHlwZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhhdC5mb3JtLm5hbWVOb3cgPSB0aGF0LmZvcm0ubmFtZSA9IGRhdGFbbmFtZV07CiAgICAgICAgICAgIHRoYXQuZm9ybS50eXBlID0gZGF0YS50eXBlOwogICAgICAgICAgICB0aGF0LmFkZEZvcm1WaXNpYmxlID0gdHJ1ZTsKCiAgICAgICAgICAgIHRoYXQuZm9ybS5mb3JtQ2FsbGJhY2sgPSBmdW5jdGlvbiAoYWRkRm9ybSkgewogICAgICAgICAgICAgIHZhciBfb2JqOwoKICAgICAgICAgICAgICBjb25zb2xlLmxvZygiYmVmb3JlIGVkaXQ6IHRhcmdldCIsIHRhcmdldCk7CiAgICAgICAgICAgICAgdmFyIG9iaiA9IChfb2JqID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfb2JqLCBuYW1lLCBhZGRGb3JtLm5hbWUpLCBfZGVmaW5lUHJvcGVydHkoX29iaiwgInR5cGUiLCBhZGRGb3JtLnR5cGUpLCBfb2JqKTsKCiAgICAgICAgICAgICAgaWYgKGdyb3VwID09PSAnbm9kZXMnKSB7CiAgICAgICAgICAgICAgICAvL3Byb3BlcnR55aSE55CGCiAgICAgICAgICAgICAgICBvYmoucHJvcGVydHkgPSB0aGF0LmFycmF5VG9Qcm9wZXJ0eShhZGRGb3JtLnByb3BlcnR5KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHRhcmdldC5kYXRhKG9iaik7CiAgICAgICAgICAgICAgdmFyIGNvbmZsaWN0ID0gZmFsc2U7CgogICAgICAgICAgICAgIGlmIChncm91cCA9PT0gJ25vZGVzJykgewogICAgICAgICAgICAgICAgdGhhdC5yZW5kTm9kZSh0YXJnZXQsIHRoYXQpOwoKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVtb3ZlZC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICB2YXIgdmFsID0gcmVtb3ZlZFtpXTsKCiAgICAgICAgICAgICAgICAgIGlmICh2YWwuZ3JvdXAoKSA9PT0gJ25vZGVzJyAmJiB2YWwuZGF0YShuYW1lKSA9PT0gYWRkRm9ybS5uYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgY29uZmxpY3QgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoYXQucmVuZEVkZ2UodGFyZ2V0LCB0aGF0KTsKCiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgcmVtb3ZlZC5sZW5ndGg7IF9pKyspIHsKICAgICAgICAgICAgICAgICAgdmFyIF92YWwgPSByZW1vdmVkW19pXTsKCiAgICAgICAgICAgICAgICAgIHZhciB2YWxEYXRhID0gX3ZhbC5kYXRhKCk7CgogICAgICAgICAgICAgICAgICBpZiAoX3ZhbC5ncm91cCgpID09PSAnZWRnZXMnICYmIHZhbERhdGEuc291cmNlID09PSBkYXRhLnNvdXJjZSAmJiB2YWxEYXRhLnRhcmdldCA9PT0gZGF0YS50YXJnZXQgJiYgdmFsRGF0YVtuYW1lXSA9PT0gYWRkRm9ybS5uYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgY29uZmxpY3QgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoY29uZmxpY3QpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJjb25mbGljdCBpbiByZW1vdmVkLCBkZWxldGUgaXQgYWxsIik7CiAgICAgICAgICAgICAgICBjb250ZXh0TWVudS5oaWRlTWVudUl0ZW0oJ3VuZG8tbGFzdC1yZW1vdmUnKTsKICAgICAgICAgICAgICAgIHJlbW92ZWQgPSBbXTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJhZnRlciBlZGl0OiB0YXJnZXQiLCB0YXJnZXQpOwogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGlkOiAnY29sb3InLAogICAgICAgICAgY29udGVudDogJ+minOiJsicsCiAgICAgICAgICBzZWxlY3RvcjogJ25vZGUnLAogICAgICAgICAgaGFzVHJhaWxpbmdEaXZpZGVyOiB0cnVlLAogICAgICAgICAgc3VibWVudTogW3sKICAgICAgICAgICAgaWQ6ICdjb2xvci1yZWQnLAogICAgICAgICAgICBjb250ZW50OiAn57qiJywKICAgICAgICAgICAgb25DbGlja0Z1bmN0aW9uOiBmdW5jdGlvbiBvbkNsaWNrRnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IHx8IGV2ZW50LmN5VGFyZ2V0OwogICAgICAgICAgICAgIHRhcmdldC5kYXRhKCdjb2xvcicsICcjZTg5ZDk2Jyk7IC8v6aKc6Imy5oyB5LmF5YyWCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIHsKICAgICAgICAgICAgaWQ6ICdjb2xvci15ZWxsb3cnLAogICAgICAgICAgICBjb250ZW50OiAn6buEJywKICAgICAgICAgICAgb25DbGlja0Z1bmN0aW9uOiBmdW5jdGlvbiBvbkNsaWNrRnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IHx8IGV2ZW50LmN5VGFyZ2V0OwogICAgICAgICAgICAgIHRhcmdldC5kYXRhKCdjb2xvcicsICcjZWJjNTdjJyk7IC8v6aKc6Imy5oyB5LmF5YyWCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIHsKICAgICAgICAgICAgaWQ6ICdjb2xvci1saWdodC1ibHVlJywKICAgICAgICAgICAgY29udGVudDogJ+a1heiTnScsCiAgICAgICAgICAgIG9uQ2xpY2tGdW5jdGlvbjogZnVuY3Rpb24gb25DbGlja0Z1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldCB8fCBldmVudC5jeVRhcmdldDsKICAgICAgICAgICAgICB0YXJnZXQuZGF0YSgnY29sb3InLCAnbGlnaHRibHVlJyk7IC8v6aKc6Imy5oyB5LmF5YyWCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIHsKICAgICAgICAgICAgaWQ6ICdjb2xvci1ibHVlLXNsYXRlJywKICAgICAgICAgICAgY29udGVudDogJ+mdm+mdkicsCiAgICAgICAgICAgIG9uQ2xpY2tGdW5jdGlvbjogZnVuY3Rpb24gb25DbGlja0Z1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldCB8fCBldmVudC5jeVRhcmdldDsKICAgICAgICAgICAgICB0YXJnZXQuZGF0YSgnY29sb3InLCAnIzZhODVjZScpOyAvL+minOiJsuaMgeS5heWMlgogICAgICAgICAgICB9CiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGlkOiAnY29sb3ItYnJvd24nLAogICAgICAgICAgICBjb250ZW50OiAn5qOVJywKICAgICAgICAgICAgb25DbGlja0Z1bmN0aW9uOiBmdW5jdGlvbiBvbkNsaWNrRnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IHx8IGV2ZW50LmN5VGFyZ2V0OwogICAgICAgICAgICAgIHRhcmdldC5kYXRhKCdjb2xvcicsICcjOWM4Zjk2Jyk7IC8v6aKc6Imy5oyB5LmF5YyWCiAgICAgICAgICAgIH0KICAgICAgICAgIH1dCiAgICAgICAgfSwgewogICAgICAgICAgaWQ6ICd1bmRvLWxhc3QtcmVtb3ZlJywKICAgICAgICAgIGNvbnRlbnQ6ICfmkqTplIDmnIDov5HkuIDmrKHliKDpmaQnLAogICAgICAgICAgc2VsZWN0b3I6ICdub2RlLCBlZGdlJywKICAgICAgICAgIHNob3c6IGZhbHNlLAogICAgICAgICAgY29yZUFzV2VsbDogdHJ1ZSwKICAgICAgICAgIG9uQ2xpY2tGdW5jdGlvbjogZnVuY3Rpb24gb25DbGlja0Z1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgIGlmIChyZW1vdmVkKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coImJlZm9yZSB1bmRvaW5nIHJlbW92ZTogbm9kZUNvdW50IiwgY3kubm9kZXMoKS5sZW5ndGgpOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJiZWZvcmUgdW5kb2luZyByZW1vdmU6IGVkZ2VDb3VudCIsIGN5LmVkZ2VzKCkubGVuZ3RoKTsKICAgICAgICAgICAgICByZW1vdmVkLnJlc3RvcmUoKTsKICAgICAgICAgICAgICByZW1vdmVkID0gW107CiAgICAgICAgICAgICAgY29uc29sZS5sb2coImFmdGVyIHVuZG9pbmcgcmVtb3ZlOiBub2RlQ291bnQiLCBjeS5ub2RlcygpLmxlbmd0aCk7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coImFmdGVyIHVuZG9pbmcgcmVtb3ZlOiBlZGdlQ291bnQiLCBjeS5lZGdlcygpLmxlbmd0aCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoYXQudHJpZ2dlcl9zdGF0aXN0aWNfZGF0YV9jaGFuZ2UoKTsKICAgICAgICAgICAgY29udGV4dE1lbnUuaGlkZU1lbnVJdGVtKCd1bmRvLWxhc3QtcmVtb3ZlJyk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAgaWQ6ICdhZGQtbm9kZScsCiAgICAgICAgICBjb250ZW50OiAn5a6e5L2TJywKICAgICAgICAgIGltYWdlOiB7CiAgICAgICAgICAgIHNyYzogIi9pY29ucy9hZGQuc3ZnIiwKICAgICAgICAgICAgeDogNywKICAgICAgICAgICAgeTogOAogICAgICAgICAgfSwKICAgICAgICAgIC8vIG1lbnUgaWNvbgogICAgICAgICAgY29yZUFzV2VsbDogdHJ1ZSwKICAgICAgICAgIGhhc1RyYWlsaW5nRGl2aWRlcjogdHJ1ZSwKICAgICAgICAgIG9uQ2xpY2tGdW5jdGlvbjogZnVuY3Rpb24gb25DbGlja0Z1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgIHRoYXQubm9kZTBFZGdlMSA9IDA7CiAgICAgICAgICAgIHRoYXQuZ2l2ZW5UeXBlID0gdGhhdC5ub2RlVHlwZTsKICAgICAgICAgICAgdGhhdC5hZGRGb3JtVmlzaWJsZSA9IHRydWU7CiAgICAgICAgICAgIHZhciBwb3MgPSBldmVudC5wb3NpdGlvbiB8fCBldmVudC5jeVBvc2l0aW9uOwogICAgICAgICAgICB2YXIgbmV3T2JqID0gewogICAgICAgICAgICAgIGdyb3VwOiAnbm9kZXMnLAogICAgICAgICAgICAgIHBvc2l0aW9uOiB7CiAgICAgICAgICAgICAgICB4OiBwb3MueCwKICAgICAgICAgICAgICAgIHk6IHBvcy55CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdGhhdC5mb3JtLmZvcm1DYWxsYmFjayA9IGZ1bmN0aW9uIChhZGRGb3JtKSB7CiAgICAgICAgICAgICAgdmFyIGRlZmF1bHRfY29sb3IgPSAiIzljOGY5NiI7CiAgICAgICAgICAgICAgbmV3T2JqLmRhdGEgPSB7CiAgICAgICAgICAgICAgICBuYW1lOiBhZGRGb3JtLm5hbWUsCiAgICAgICAgICAgICAgICB0eXBlOiBhZGRGb3JtLnR5cGUsCiAgICAgICAgICAgICAgICBjb2xvcjogZGVmYXVsdF9jb2xvciwKICAgICAgICAgICAgICAgIC8v5ZKM5Yid5aeL5YyW5pe255qE6aKc6Imy6ICm5ZCI77yM5b+F6aG75piv55u45ZCM55qEZGVmYXVsdF9jb2xvcgogICAgICAgICAgICAgICAgcHJvcGVydHk6IHRoYXQuYXJyYXlUb1Byb3BlcnR5KGFkZEZvcm0ucHJvcGVydHkpIC8vcHJvcGVydHnlpITnkIYKCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IGN5LmFkZChuZXdPYmopOwogICAgICAgICAgICAgIHRoYXQucmVuZE5vZGUoY29sbGVjdGlvblswXSwgdGhhdCk7CiAgICAgICAgICAgICAgdGhhdC50cmlnZ2VyX3N0YXRpc3RpY19kYXRhX2NoYW5nZSgpOwogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGlkOiAnYWRkLWVkZ2UnLAogICAgICAgICAgY29udGVudDogJ+WFs+ezuycsCiAgICAgICAgICBzZWxlY3RvcjogJ25vZGUnLAogICAgICAgICAgaW1hZ2U6IHsKICAgICAgICAgICAgc3JjOiAiL2ljb25zL2FkZC5zdmciLAogICAgICAgICAgICB4OiA3LAogICAgICAgICAgICB5OiA4CiAgICAgICAgICB9LAogICAgICAgICAgLy8gbWVudSBpY29uCiAgICAgICAgICBvbkNsaWNrRnVuY3Rpb246IGZ1bmN0aW9uIG9uQ2xpY2tGdW5jdGlvbihldmVudCkgewogICAgICAgICAgICB2YXIgc3RhcmdldCA9IGV2ZW50LnRhcmdldCB8fCBldmVudC5jeVRhcmdldDsKICAgICAgICAgICAgdmFyIGNvbG9yX2JlZm9yZSA9IHN0YXJnZXQuc3R5bGUoJ2JhY2tncm91bmQtY29sb3InKTsgLy8gc3RhcmdldC5zdHlsZSh7CiAgICAgICAgICAgIC8vICAgICAvLyJib3JkZXItd2lkdGgiOiA0LAogICAgICAgICAgICAvLyAgICAgLy8iYm9yZGVyLWNvbG9yIjogIiM4NDcwNzIiLAogICAgICAgICAgICAvLyAgICAgImJhY2tncm91bmQtY29sb3IiOiAnI2RjYzFiMCcsCiAgICAgICAgICAgIC8vICAgICAvLyd0ZXh0LW91dGxpbmUtY29sb3InOiAiIzg0NzA3MiIsCiAgICAgICAgICAgIC8vICAgICAvLyd0ZXh0LW91dGxpbmUtd2lkdGgnOiA0LAogICAgICAgICAgICAvLyB9KTsKCiAgICAgICAgICAgIHN0YXJnZXQuZGF0YSgiY29sb3IiLCAnI2RjYzFiMCcpOyAvL+minOiJsuaMgeS5heWMlgoKICAgICAgICAgICAgdmFyIHNpZCA9IHN0YXJnZXQuZGF0YSgiaWQiKTsKICAgICAgICAgICAgY3kub25jZSgndGFwJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coInN0YXJ0IGFkZGluZyBhbiBlZGdlIik7CiAgICAgICAgICAgICAgdmFyIHR0YXJnZXQgPSBldmVudC50YXJnZXQgfHwgZXZlbnQuY3lUYXJnZXQ7CgogICAgICAgICAgICAgIGlmICh0dGFyZ2V0ICE9PSBjeSAmJiB0dGFyZ2V0Lmdyb3VwKCkgPT09ICdub2RlcycpIHsKICAgICAgICAgICAgICAgIHZhciB0aWQgPSB0dGFyZ2V0LmRhdGEoImlkIik7CiAgICAgICAgICAgICAgICB0aGF0Lm5vZGUwRWRnZTEgPSAxOwogICAgICAgICAgICAgICAgdGhhdC5naXZlblR5cGUgPSB0aGF0LmVkZ2VUeXBlOwogICAgICAgICAgICAgICAgdGhhdC5mb3JtLmVkZ2VDb25kaXRpb24gPSB7CiAgICAgICAgICAgICAgICAgIHNvdXJjZTogc2lkLAogICAgICAgICAgICAgICAgICB0YXJnZXQ6IHRpZAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoYXQuYWRkRm9ybVZpc2libGUgPSB0cnVlOwogICAgICAgICAgICAgICAgdmFyIG5ld0VkZ2UgPSB7CiAgICAgICAgICAgICAgICAgIGdyb3VwOiAnZWRnZXMnLAogICAgICAgICAgICAgICAgICBjbGFzc2VzOiAnYXV0b3JvdGF0ZScKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdGhhdC5mb3JtLmZvcm1DYWxsYmFjayA9IGZ1bmN0aW9uIChhZGRGb3JtKSB7CiAgICAgICAgICAgICAgICAgIG5ld0VkZ2UuZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICByZWxhdGlvbjogYWRkRm9ybS5uYW1lLAogICAgICAgICAgICAgICAgICAgIHNvdXJjZTogYWRkRm9ybS5lZGdlQ29uZGl0aW9uLnNvdXJjZSwKICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IGFkZEZvcm0uZWRnZUNvbmRpdGlvbi50YXJnZXQsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogYWRkRm9ybS50eXBlCiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uID0gY3kuYWRkKG5ld0VkZ2UpOwogICAgICAgICAgICAgICAgICB0aGF0LnJlbmRFZGdlKGNvbGxlY3Rpb25bMF0sIHRoYXQpOwogICAgICAgICAgICAgICAgICB0aGF0LnRyaWdnZXJfc3RhdGlzdGljX2RhdGFfY2hhbmdlKCk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgc3RhcmdldC5kYXRhKHsKICAgICAgICAgICAgICAgICdjb2xvcic6IGNvbG9yX2JlZm9yZQogICAgICAgICAgICAgIH0pOyAvL+minOiJsuaMgeS5heWMlgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBpZDogJ3JlbW92ZScsCiAgICAgICAgICBjb250ZW50OiAn5Yig6ZmkJywKICAgICAgICAgIGhhc1RyYWlsaW5nRGl2aWRlcjogdHJ1ZSwKICAgICAgICAgIGltYWdlOiB7CiAgICAgICAgICAgIHNyYzogIi9pY29ucy9yZW1vdmUuc3ZnIiwKICAgICAgICAgICAgeDogNywKICAgICAgICAgICAgeTogOAogICAgICAgICAgfSwKICAgICAgICAgIC8vIG1lbnUgaWNvbgogICAgICAgICAgc2VsZWN0b3I6ICdub2RlLCBlZGdlJywKICAgICAgICAgIG9uQ2xpY2tGdW5jdGlvbjogZnVuY3Rpb24gb25DbGlja0Z1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQgfHwgZXZlbnQuY3lUYXJnZXQ7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJiZWZvcmUgcmVtb3ZlOiBub2RlQ291bnQiLCBjeS5ub2RlcygpLmxlbmd0aCk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJiZWZvcmUgcmVtb3ZlOiBlZGdlQ291bnQiLCBjeS5lZGdlcygpLmxlbmd0aCk7CiAgICAgICAgICAgIHJlbW92ZWQgPSB0YXJnZXQucmVtb3ZlKCk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJhZnRlciByZW1vdmU6IG5vZGVDb3VudCIsIGN5Lm5vZGVzKCkubGVuZ3RoKTsKICAgICAgICAgICAgY29uc29sZS5sb2coImFmdGVyIHJlbW92ZTogZWRnZUNvdW50IiwgY3kuZWRnZXMoKS5sZW5ndGgpOwogICAgICAgICAgICB0aGF0LnRyaWdnZXJfc3RhdGlzdGljX2RhdGFfY2hhbmdlKCk7CiAgICAgICAgICAgIGNvbnRleHRNZW51LnNob3dNZW51SXRlbSgndW5kby1sYXN0LXJlbW92ZScpOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGlkOiAnc2VsZWN0LWFsbC1ub2RlcycsCiAgICAgICAgICBjb250ZW50OiAn5YWo6YCJ5a6e5L2TJywKICAgICAgICAgIHNlbGVjdG9yOiAnbm9kZScsCiAgICAgICAgICBjb3JlQXNXZWxsOiB0cnVlLAogICAgICAgICAgc2hvdzogdHJ1ZSwKICAgICAgICAgIG9uQ2xpY2tGdW5jdGlvbjogZnVuY3Rpb24gb25DbGlja0Z1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgIHNlbGVjdEFsbE9mVGhlU2FtZVR5cGUoJ25vZGUnKTsKICAgICAgICAgICAgY29udGV4dE1lbnUuaGlkZU1lbnVJdGVtKCdzZWxlY3QtYWxsLW5vZGVzJyk7CiAgICAgICAgICAgIGNvbnRleHRNZW51LnNob3dNZW51SXRlbSgndW5zZWxlY3QtYWxsLW5vZGVzJyk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAgaWQ6ICd1bnNlbGVjdC1hbGwtbm9kZXMnLAogICAgICAgICAgY29udGVudDogJ+WPlua2iOWFqOmAieWunuS9kycsCiAgICAgICAgICBzZWxlY3RvcjogJ25vZGUnLAogICAgICAgICAgY29yZUFzV2VsbDogdHJ1ZSwKICAgICAgICAgIHNob3c6IGZhbHNlLAogICAgICAgICAgb25DbGlja0Z1bmN0aW9uOiBmdW5jdGlvbiBvbkNsaWNrRnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgICAgdW5zZWxlY3RBbGxPZlRoZVNhbWVUeXBlKCdub2RlJyk7CiAgICAgICAgICAgIGNvbnRleHRNZW51LnNob3dNZW51SXRlbSgnc2VsZWN0LWFsbC1ub2RlcycpOwogICAgICAgICAgICBjb250ZXh0TWVudS5oaWRlTWVudUl0ZW0oJ3Vuc2VsZWN0LWFsbC1ub2RlcycpOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGlkOiAnc2VsZWN0LWFsbC1lZGdlcycsCiAgICAgICAgICBjb250ZW50OiAn5YWo6YCJ5YWz57O7JywKICAgICAgICAgIHNlbGVjdG9yOiAnZWRnZScsCiAgICAgICAgICBjb3JlQXNXZWxsOiB0cnVlLAogICAgICAgICAgc2hvdzogdHJ1ZSwKICAgICAgICAgIG9uQ2xpY2tGdW5jdGlvbjogZnVuY3Rpb24gb25DbGlja0Z1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgIHNlbGVjdEFsbE9mVGhlU2FtZVR5cGUoJ2VkZ2UnKTsKICAgICAgICAgICAgY29udGV4dE1lbnUuaGlkZU1lbnVJdGVtKCdzZWxlY3QtYWxsLWVkZ2VzJyk7CiAgICAgICAgICAgIGNvbnRleHRNZW51LnNob3dNZW51SXRlbSgndW5zZWxlY3QtYWxsLWVkZ2VzJyk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAgaWQ6ICd1bnNlbGVjdC1hbGwtZWRnZXMnLAogICAgICAgICAgY29udGVudDogJ+WPlua2iOWFqOmAieWFs+ezuycsCiAgICAgICAgICBzZWxlY3RvcjogJ2VkZ2UnLAogICAgICAgICAgY29yZUFzV2VsbDogdHJ1ZSwKICAgICAgICAgIHNob3c6IGZhbHNlLAogICAgICAgICAgaGFzVHJhaWxpbmdEaXZpZGVyOiB0cnVlLAogICAgICAgICAgb25DbGlja0Z1bmN0aW9uOiBmdW5jdGlvbiBvbkNsaWNrRnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgICAgdW5zZWxlY3RBbGxPZlRoZVNhbWVUeXBlKCdlZGdlJyk7CiAgICAgICAgICAgIGNvbnRleHRNZW51LnNob3dNZW51SXRlbSgnc2VsZWN0LWFsbC1lZGdlcycpOwogICAgICAgICAgICBjb250ZXh0TWVudS5oaWRlTWVudUl0ZW0oJ3Vuc2VsZWN0LWFsbC1lZGdlcycpOwogICAgICAgICAgfQogICAgICAgIH1dLAogICAgICAgIC8vIGNzcyBjbGFzc2VzIHRoYXQgbWVudSBpdGVtcyB3aWxsIGhhdmUKICAgICAgICBtZW51SXRlbUNsYXNzZXM6IFsvLyBhZGQgY2xhc3MgbmFtZXMgdG8gdGhpcyBsaXN0LCBsaWtlOiAnY3VzdG9tLW1lbnUtaXRlbScKICAgICAgICBdLAogICAgICAgIC8vIGNzcyBjbGFzc2VzIHRoYXQgY29udGV4dCBtZW51IHdpbGwgaGF2ZQogICAgICAgIGNvbnRleHRNZW51Q2xhc3NlczogW10sCiAgICAgICAgLy8gSW5kaWNhdGVzIHRoYXQgdGhlIG1lbnUgaXRlbSBoYXMgYSBzdWJtZW51LiBJZiBub3QgcHJvdmlkZWQgZGVmYXVsdCBvbmUgd2lsbCBiZSB1c2VkCiAgICAgICAgc3VibWVudUluZGljYXRvcjogewogICAgICAgICAgc3JjOiAnL2ljb25zL3N1Ym1lbnUtaW5kaWNhdG9yLWRlZmF1bHQuc3ZnJywKICAgICAgICAgIHdpZHRoOiAxMiwKICAgICAgICAgIGhlaWdodDogMTIKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGlzVW5pcXVlOiBmdW5jdGlvbiBpc1VuaXF1ZShhcnJheXMsIHByb3BGdW5jLCBuYW1lKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHByb3BGdW5jKGFycmF5c1tpXSkgPT09IG5hbWUpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIC8vZGlhbG9n57uE5Lu2CiAgICByZXNldEZvcm06IGZ1bmN0aW9uIHJlc2V0Rm9ybSgpIHsKICAgICAgdGhpcy4kcmVmc1sncnVsZUZvcm0nXS5yZXNldEZpZWxkcygpOyAvL+acrOadpeWPqumcgOimgeS4iumdoui/meS4gOihjAogICAgICAvL+eUseS6juS4iuS4gOihjOeahOS9nOeUqOaYr+aBouWkjeiHs+WIneWni+WAvO+8jOiAjOeUseS6jue8lui+keWSjOa3u+WKoGRpYWxvZ+WFseeUqO+8jOWmguaenOWFiOS9v+eUqOe8lui+ke+8jOWImee8lui+keeahOWAvOaIkOS4uuWIneWni+WAvAogICAgICAvL+S4uueugOWNleino+WGs+i/meS4gOmXrumimO+8jOmZhOWKoOS4gOS4quaJi+WKqOa4heepumZvcm3nmoTmk43kvZzlpoLkuIsKCiAgICAgIHRoaXMuZm9ybSA9IHsKICAgICAgICBuYW1lOiAnJywKICAgICAgICB0eXBlOiAnJywKICAgICAgICBwcm9wZXJ0eTogW10sCiAgICAgICAgZWRnZUNvbmRpdGlvbjogewogICAgICAgICAgc291cmNlOiAnJywKICAgICAgICAgIHRhcmdldDogJycKICAgICAgICB9LAogICAgICAgIG5hbWVOb3c6ICcnLAogICAgICAgIGZvcm1DYWxsYmFjazogZnVuY3Rpb24gZm9ybUNhbGxiYWNrKCkgewogICAgICAgICAgY29uc29sZS5sb2coInRoaXMuZm9ybS5mb3JtQ2FsbGJhY2vooqvmhI/lpJbosIPnlKgiKTsKICAgICAgICB9CiAgICAgIH07CiAgICB9LAogICAgaGFuZGxlQ2xvc2U6IGZ1bmN0aW9uIGhhbmRsZUNsb3NlKGRvbmUpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICB0aGlzLiRjb25maXJtKCfmiYDkvZznmoTnvJbovpHlsIbkuI3kvJrkv53lrZgnKS50aGVuKGZ1bmN0aW9uIChfKSB7CiAgICAgICAgZG9uZSgpOwogICAgICAgIHRoYXQucmVzZXRGb3JtKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChfKSB7fSk7CiAgICB9LAogICAgLy9hZGRGb3Jt57uE5Lu2CiAgICBhZGRDYW5jZWw6IGZ1bmN0aW9uIGFkZENhbmNlbCgpIHsKICAgICAgdGhpcy5hZGRGb3JtVmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLnJlc2V0Rm9ybSgpOwogICAgfSwKICAgIGFkZENvbmZpcm06IGZ1bmN0aW9uIGFkZENvbmZpcm0oKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdGhpcy4kcmVmc1sncnVsZUZvcm0nXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIF90aGlzNC5hZGRGb3JtVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgdmFyIGFkZEZvcm0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzNC5mb3JtKSk7IC8v5rex5ou36LSd5ZCO5Lyg5Y+C77yM5LiN56C05Z2P5Y6f5p2l55qE5YC8Ly/lj6/og73msqHlv4XopoEKCiAgICAgICAgICBhZGRGb3JtLm5hbWUgPSBhZGRGb3JtLm5hbWUudHJpbSgpOyAvL+WQjeensOWSjOagoemqjOaXtuS4gOagt+WJjeWQjuaXoOepuuagvAoKICAgICAgICAgIF90aGlzNC5mb3JtLmZvcm1DYWxsYmFjayhhZGRGb3JtKTsKCiAgICAgICAgICBfdGhpczQucmVzZXRGb3JtKCk7IC8vIHRoaXMudHJpZ2dlcl9zdGF0aXN0aWNfZGF0YV9jaGFuZ2UoKTsvL+WboOS4uuWcqOWQhOS4qmNhbGxiYWNr5Ye95pWw5Lit5bey57uP5YaZ5LqG77yM55Sx5LqO6IOM5ZCO5py65Yi25piv5biD5bCU5YC85Y+W5Y+N77yM5omA5Lul6YeN5aSN5pON5L2c5Lya5a+86Ie05peg5rOV55uR5ZCs5Yiw5biD5bCU5YC85Y+Y5YyWCgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhbGVydCgn5aW95YOP5ZOq6YeM5pyJ6Zeu6aKY77yM5pON5L2c5aSx6LSl5LqG5ZGi4oCm4oCmJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBtYWtlVGlwcHk6IGZ1bmN0aW9uIG1ha2VUaXBweShlbGUsIHRleHQpIHsKICAgICAgLy9lbGXpnIDkvKDlhaVjeeeahGVsZQogICAgICB2YXIgcmVmID0gZWxlLnBvcHBlclJlZigpOyAvLyBTaW5jZSB0aXBweSBjb25zdHJ1Y3RvciByZXF1aXJlcyBET00gZWxlbWVudC9lbGVtZW50cywgY3JlYXRlIGEgcGxhY2Vob2xkZXIKCiAgICAgIHZhciBkdW1teURvbUVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICB2YXIgdGlwID0gdGlwcHkoZHVtbXlEb21FbGUsIHsKICAgICAgICBnZXRSZWZlcmVuY2VDbGllbnRSZWN0OiByZWYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0LAogICAgICAgIHRyaWdnZXI6ICdtYW51YWwnLAogICAgICAgIC8vIG1hbmRhdG9yeQogICAgICAgIC8vIGRvbSBlbGVtZW50IGluc2lkZSB0aGUgdGlwcHk6CiAgICAgICAgY29udGVudDogZnVuY3Rpb24gY29udGVudCgpIHsKICAgICAgICAgIC8vIGZ1bmN0aW9uIGNhbiBiZSBiZXR0ZXIgZm9yIHBlcmZvcm1hbmNlCiAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gdGV4dDsKICAgICAgICAgIHJldHVybiBkaXY7CiAgICAgICAgfSwKICAgICAgICAvLyB5b3VyIG93biBwcmVmZXJlbmNlczoKICAgICAgICBhcnJvdzogdHJ1ZSwKICAgICAgICBwbGFjZW1lbnQ6ICdib3R0b20nLAogICAgICAgIG9mZnNldDogWzIwLCAzMF0sCiAgICAgICAgaGlkZU9uQ2xpY2s6IGZhbHNlLAogICAgICAgIC8vIGVuYWJsZSBpdAogICAgICAgIC8vIHN0aWNreTogdHJ1ZSwKICAgICAgICAvLyBvbmx5IGNoZWNrIHRoZSAicmVmZXJlbmNlIiByZWN0IGZvciBjaGFuZ2VzCiAgICAgICAgc3RpY2t5OiAncmVmZXJlbmNlJywKICAgICAgICAvLyBvbmx5IGNoZWNrIHRoZSAicG9wcGVyIiByZWN0IGZvciBjaGFuZ2VzCiAgICAgICAgLy8gc3RpY2t5OiAncG9wcGVyJywKICAgICAgICBwbHVnaW5zOiBbc3RpY2t5XSwKICAgICAgICB6SW5kZXg6IDEwLAogICAgICAgIC8v6buY6K6kOTk5Oe+8jOS/ruaUueWwj+S6m+mBv+WFjemBruS9j+W8ueeqlwogICAgICAgIC8vIGlmIGludGVyYWN0aXZlOgogICAgICAgIGludGVyYWN0aXZlOiB0cnVlLAogICAgICAgIGFwcGVuZFRvOiBkb2N1bWVudC5ib2R5IC8vIG9yIGFwcGVuZCBkdW1teURvbUVsZSB0byBkb2N1bWVudC5ib2R5CgogICAgICB9KTsKICAgICAgcmV0dXJuIHRpcDsKICAgIH0sCiAgICAvLyAqKkFsbG93IGZvciBtYW5pcHVsYXRpb24gb2YgZWxlbWVudHMgd2l0aG91dCB0cmlnZ2VyaW5nIG11bHRpcGxlIHN0eWxlIGNhbGN1bGF0aW9ucyBvciBtdWx0aXBsZSByZWRyYXdzLioqCiAgICBiYXRjaDogZnVuY3Rpb24gYmF0Y2goY3ksIGZ1bmMpIHsKICAgICAgY3kuc3RhcnRCYXRjaCgpOwogICAgICBmdW5jKCk7CiAgICAgIGN5LmVuZEJhdGNoKCk7CiAgICB9LAogICAgLy8gQSBiYXRjaCBzaG91bGQgY29ycmVzcG9uZCB0byBhIHNpbmdsZSB2aXN1YWwgb3BlcmF0aW9uLiBVc3VhbGx5IGEgYmF0Y2ggc2hvdWxkIGNvbnRhaW4gY2FsbHMgb25seSB0byB0aGUgZm9sbG93aW5nIGZ1bmN0aW9uczoKICAgIC8vIE1vZGlmeWluZyBzdGF0ZTogZWxlcy5kYXRhKCksIGVsZXMuc2NyYXRjaCgpLCBlbGVzLmFkZENsYXNzKCksIGVsZXMucmVtb3ZlQ2xhc3MoKSwgZXRjLgogICAgLy8gQnVpbGRpbmcgY29sbGVjdGlvbnM6IGVsZXMudW5pb24oKSwgZWxlcy5kaWZmZXJlbmNlKCksIGVsZXMuaW50ZXJzZWN0aW9uKCksIGV0Yy4KICAgIC8vIENvbXBhcmlzb246IGVsZXMuc2FtZSgpLCBlbGVzLnNvbWUoKSwgZXRjLgogICAgLy8gSXRlcmF0aW9uOiBlbGVzLmZvckVhY2goKSwgZWxlcy5lbXB0eSgpLCBldGMuCiAgICAvLyBUcmF2ZXJzYWw6IG5vZGUub3V0Z29lcnMoKSwgZWxlcy5iZnMoKSwgZXRjLgogICAgLy8gQWxnb3JpdGhtczogZWxlcy5kaWprc3RyYSgpLCBlbGVzLmRlZ3JlZUNlbnRyYWxpdHkoKSwgZXRjLgogICAgLy8g5oqK5a+56LGh6L2s5YyW5Li65a2X56ym5LiyCiAgICBwcm9wZXJ0eTJTdHJpbmc6IGZ1bmN0aW9uIHByb3BlcnR5MlN0cmluZyhwcm9wcykgewogICAgICB2YXIgcmVzdWx0ID0gJyc7CgogICAgICBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHsKICAgICAgICB2YXIgdmFsID0gcHJvcHNba2V5XTsKCiAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgICByZXN1bHQgKz0gJ8K3ICcgKyBrZXkgKyAnLScgKyB2YWwuam9pbignLCcpICsgJzwvYnI+JzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzdWx0ICs9ICfCtyAnICsga2V5ICsgJy0nICsgdmFsICsgJzwvYnI+JzsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9LAogICAgcHJvcGVydHlUb0FycmF5OiBmdW5jdGlvbiBwcm9wZXJ0eVRvQXJyYXkocHJvcHMpIHsKICAgICAgdmFyIHJlc3VsdCA9IFtdOwoKICAgICAgZm9yICh2YXIga2V5IGluIHByb3BzKSB7CiAgICAgICAgdmFyIHZhbCA9IHByb3BzW2tleV07CgogICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBBcnJheSkgewogICAgICAgICAgcmVzdWx0LnB1c2goa2V5ICsgJzonICsgdmFsLmpvaW4oJywnKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdC5wdXNoKGtleSArICc6JyArIHZhbCk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKICAgIGFycmF5VG9Qcm9wZXJ0eTogZnVuY3Rpb24gYXJyYXlUb1Byb3BlcnR5KGFycmF5KSB7CiAgICAgIHZhciByZXN1bHQgPSB7fTsKICAgICAgdmFyIGRlZmF1bHRJdGVtID0gW107CiAgICAgIGlmICghYXJyYXkpIHJldHVybiByZXN1bHQ7CgogICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoYXJyYXkpLAogICAgICAgICAgX3N0ZXA7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgaXRlbSA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgdmFyIGluZGV4ID0gaXRlbS5zZWFyY2goL1s677yaXS8pOwogICAgICAgICAgdmFyIGtleSA9ICcnLAogICAgICAgICAgICAgIGNvbnRlbnQgPSAnJzsKCiAgICAgICAgICBpZiAoaW5kZXggPj0gMCAmJiBpbmRleCA8IGl0ZW0ubGVuZ3RoIC0gMSkgewogICAgICAgICAgICBrZXkgPSBpdGVtLnNsaWNlKDAsIGluZGV4KTsKICAgICAgICAgICAgY29udGVudCA9IGl0ZW0uc2xpY2UoaW5kZXggKyAxKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnRlbnQgPSBpdGVtOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBwYXVzZVdvcmQgPSAvWzssLu+8m++8jOOAgl0vOwoKICAgICAgICAgIGlmIChjb250ZW50LnNlYXJjaChwYXVzZVdvcmQpID09PSAtMSkgewogICAgICAgICAgICB2YXIgZXJyb3JSZWcgPSAvXHMvOwoKICAgICAgICAgICAgaWYgKGtleSAmJiAhZXJyb3JSZWcudGVzdChrZXkpKSB7CiAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBjb250ZW50OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGRlZmF1bHRJdGVtLnB1c2goaXRlbSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnNwbGl0KHBhdXNlV29yZCk7CgogICAgICAgICAgICBpZiAoY29udGVudC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgLy8gbGV0IGVycm9yUmVnID0gL1xzLzsKICAgICAgICAgICAgICB2YXIgdmFsaWRJbmRleCA9IFtdOwoKICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRlbnQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGNvbnRlbnRbaV0gPSBjb250ZW50W2ldLnRyaW0oKTsKCiAgICAgICAgICAgICAgICBpZiAoY29udGVudFtpXSkgewogICAgICAgICAgICAgICAgICB2YWxpZEluZGV4LnB1c2goaSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAodmFsaWRJbmRleC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICB2YXIgdmFsaWRJdGVtID0gW107CgogICAgICAgICAgICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih2YWxpZEluZGV4KSwKICAgICAgICAgICAgICAgICAgICBfc3RlcDI7CgogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IyLnMoKTsgIShfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX2kyID0gX3N0ZXAyLnZhbHVlOwogICAgICAgICAgICAgICAgICAgIHZhbGlkSXRlbS5wdXNoKGNvbnRlbnRbX2kyXSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBfZXJyb3JSZWcgPSAvXHMvOwoKICAgICAgICAgICAgICAgIGlmIChrZXkgJiYgIV9lcnJvclJlZy50ZXN0KGtleSkpIHsKICAgICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSB2YWxpZEl0ZW07CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBkZWZhdWx0SXRlbSArPSB2YWxpZEl0ZW07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgIH0KCiAgICAgIGlmIChkZWZhdWx0SXRlbS5sZW5ndGggPiAwKSB7CiAgICAgICAgdmFyIGRlZmF1bHRLZXkgPSAi5pyq5ZG95ZCNIjsKCiAgICAgICAgaWYgKHJlc3VsdC5oYXNPd25Qcm9wZXJ0eShkZWZhdWx0S2V5KSkgewogICAgICAgICAgaWYgKHJlc3VsdFtkZWZhdWx0S2V5XSBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgICAgIHJlc3VsdFtkZWZhdWx0S2V5XSArPSBkZWZhdWx0SXRlbTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdFtkZWZhdWx0S2V5XSA9IFtyZXN1bHRbZGVmYXVsdEtleV1dICsgZGVmYXVsdEl0ZW07CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdFtkZWZhdWx0S2V5XSA9IGRlZmF1bHRJdGVtOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICB9KQp9Ow=="},{"version":3,"sources":["/Users/albert/Desktop/数据科学方向实践/HCI的副本/src/components/CytoscapeKG.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class='knowledge-graph-cy'>\n        <div id=\"graph\">\n          <el-dialog title=\"信息完善\" v-model=\"addFormVisible\" :before-close=\"handleClose\" :append-to-body=\"true\"><!--:append-to-body保证了弹窗时周围背景不能触发事件-->\n                <el-form :model=\"form\" :rules=\"rules\" ref=\"ruleForm\" :label-width=\"formLabelWidth\" class=\"demo-ruleForm\"><!-- class=\"demo-ruleForm\"意义何在？-->\n                    <el-form-item label=\"名称\" prop=\"name\" required>\n                        <el-input v-model=\"form.name\" autocomplete=\"off\" style=\"width:90%\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"类型\" prop=\"type\">\n                        <el-select v-model=\"form.type\" placeholder=\"请选择类型\" style=\"width:90%\">\n                            <el-option v-for=\"item in givenType\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\"></el-option>\n                        </el-select>\n                    </el-form-item>\n                    <el-form-item label=\"属性\" prop=\"property\" v-if=\"node0Edge1===0\">\n                        <el-select\n                                v-model=\"form.property\"\n                                style=\"width:90%\"\n                                multiple\n                                filterable\n                                allow-create\n                                default-first-option\n                                no-data-text=\"输入已存在的属性会取消勾选哦\"\n                                placeholder=\"在这里可以输入属性哦\">\n                        </el-select>\n                    </el-form-item>\n\n                </el-form>\n                <template #footer>\n                    <span class=\"dialog-footer\">\n                        <el-button @click=\"addCancel\">取 消</el-button>\n                        <el-button type=\"primary\" @click=\"addConfirm\">确 定</el-button>\n                    </span>\n                </template>\n            </el-dialog>\n        </div>\n\n    </div>\n</template>\n\n<script>\n    //注意！！！\n    //所有对property的处理都标注了注释：property处理\n\n    //日后修改：\n    //颜色改变增加调色板选项\n    //颜色的存储可以放在data（大小同理），读取时在渲染函数中访问data中相应字段来渲染，但是在其他样式与颜色解耦之前无意义（例：会把选中状态之类的颜色存进去）\n    //边的添加和修改增加source和target的可修改功能\n    //eles.hasClass()和.addClass()帮助edge把class属性的添加移动到rendEdge里\n    //ele.isNode()帮助add等方法优化group==='nodes'的逻辑\n    //node0Edge1这个属性换成字符串\n    // 宽高修改逻辑暂时在EditBar，考虑这个样式的职责要不要放在本KG组件的updataAllNodeFontSize（到时候再改个方法名表示同时修改节点大小和字体大小）\n    //考虑引入https://github.com/kaluginserg/cytoscape-node-html-label\n    //cola布局挺好的感觉，有空加一下\n    import axios from 'axios'\n    import $ from 'jquery'\n    import cytoscape from 'cytoscape'\n    import { mapState,mapMutations,mapGetters } from 'vuex';\n\n    import d3Force from 'cytoscape-d3-force';\n    cytoscape.use( d3Force );\n\n    import contextMenus from 'cytoscape-context-menus';\n    cytoscape.use(contextMenus);\n\n    import popper from 'cytoscape-popper';\n    cytoscape.use( popper );\n    import tippy,{sticky} from 'tippy.js';\n    import 'tippy.js/dist/tippy.css';\n\n    window.jQuery = window.$ = $\n\n    export default {\n        name: 'CytoscapeKG',\n        data() {\n              let nameCheck = (rule,value,callback) => {\n                  console.log('nameCheck');\n                  let validName = value.trim();\n                  if(this.form.nameNow&&this.form.nameNow===validName){\n                      return callback();\n                  }\n                  let nameValid = /\\S/;\n                  if(!nameValid.test(validName)){//可添加正则表达式等逻辑\n                      return callback(new Error('名称不能为空哟'));\n                  }\n                  if(this.node0Edge1===0){\n                      if(this.isUnique(this.cy.nodes(),val=>val.data(\"name\"),validName)){\n                          callback();\n                      }else {\n                          callback(new Error('该实体已存在哦，换一个名字吧，亲~'));\n                      }\n                  }else{\n                      let {source,target} = this.form.edgeCondition;\n                      let dupEdges = this.cy.edges().filter(val=>val.data(\"source\")===source).filter(val=>val.data(\"target\")===target);\n                      if(dupEdges.length===0||this.isUnique(dupEdges,val=>val.data(\"relation\"),validName)){\n                          callback();\n                      }else{\n                          callback(new Error('该关系已存在哦，换一个名字吧，亲~'));\n                      }\n                  }\n\n            };\n            //property处理\n            // let propLenCheck = (rule,value,callback) => {\n            //     console.log('propLenCheck');\n            //     let len = 0;\n            //     const limit = 255;\n            //     let invalid = false;\n            //     let errorReg = /\\s/;\n            //     for(let i = 0;i < value.length;i++){\n            //         if(errorReg.test(value[i])){\n            //             invalid = true;\n            //             break;\n            //         }\n            //         len += value[i]+1;\n            //     }\n            //     len-=1;\n            //     if(invalid){\n            //         callback(new Error(\"属性中不能含有空哟~\"));\n            //     }else if(len>limit){\n            //         callback(new Error(\"属性值数据量太大啦，麻烦去掉长度过长的属性哟~\"));\n            //     }else{\n            //         callback();\n            //     }\n            // };\n            return {\n                node0Edge1: 0,\n                // editMode: false,\n                addFormVisible : false,\n                givenType: [],\n                form: {\n                    name: '',\n                    type: '',\n                    property: [],\n                    edgeCondition:{source:'',target:''},\n                    //以下为借用form的reset来自动清空的属性\n                    nameNow: '',\n                    formCallback: ()=>{console.log(\"this.form.formCallback被意外调用\")}\n                },//此处的值会作为初始值存在，在this.$refs['ruleForm'].resetFields()后会恢复成初始值\n                rules:{\n                    name:[\n                        {validator:nameCheck, trigger:'blur'}\n                    ],\n                    type:[//如果设置了初始值，这里就不会被用到\n                        {required:true,message:'请选择类型',trigger:'change'}\n                    ],\n                    //property处理\n                    // property:[\n                    //     {validator:propLenCheck,trigger:'change'}\n                    // ]\n                },\n                formLabelWidth: '12%'\n                // 自定义校验 callback 必须被调用。 更多高级用法可参考 async-validator\n                // https://github.com/yiminghe/async-validator\n            };\n        },\n\n        computed: {\n            ...mapState({\n                defaultStyle: state => state.workspace.defaultStyle,\n                shapeType: state => state.workspace.shapeType,\n                lineStyleType: state => state.workspace.lineStyleType,\n                nodeType: state => state.workspace.nodeType,\n                edgeType: state => state.workspace.edgeType,\n                cy: state => state.workspace.cy,\n                nodeRadius: state => state.workspace.nodeRadius,\n                nodeFontSize: state => state.workspace.nodeFontSize,\n                json_src_path: state => state.workspace.json_src_path,\n                project: state => state.project,\n            }),\n        },\n        watch: {\n            json_src_path(now, old){\n                this.getData(now);\n            },\n            project(now, old){\n              let data = {\n                edges: JSON.parse(JSON.stringify(this.project.edges)),\n                nodes: JSON.parse(JSON.stringify(this.project.nodes)),\n              };\n              this.dataHandle(data);\n            },\n            nodeFontSize(now,old){//监听节点大小变化，如果刚变为未设定就需要修改节点字体大小\n                console.log(\"nodeFontSize watched\")\n                if(this.nodeFontSize===''){\n                    this.updateAllNodeFontSize();\n                }\n            },\n            nodeRadius(now,old){//监听节点大小来改变文字大小，但是字体大小如果处于被设定状态就不能改\n                console.log(\"nodeRadius watched\")\n                if(this.nodeFontSize===''){\n                    this.updateAllNodeFontSize();\n                }\n            }\n        },\n        mounted () {\n            //禁用右键菜单（应该防止浏览器菜单行为干扰cy的菜单行为）\n            // document.oncontextmenu = () => {\n            //     event.returnValue = false;\n            // }\n            if (this.project !== undefined && this.project !== null){\n              let data = {\n                edges: this.project.edges,\n                nodes: this.project.nodes,\n              };\n              this.dataHandle(data);\n            }\n        },\n        methods: {\n            ...mapMutations(['setCy','setElements','trigger_statistic_data_change', 'setProject']),\n\n            //读数据，然后交给dataHandle\n            getData(url) {\n                axios.get(url)\n                    .then(res => {\n                        this.dataHandle(res.data);\n                        this.setProject(res.data);\n                    })\n                    .catch(err => {\n                        console.error(err);\n                        this.$message.error('文件数据格式不正确');\n                    })\n            },\n\n            //在data中存数据，并进行数据展示的预处理\n            dataHandle(data) {\n                // this.data = JSON.parse(JSON.stringify(data))\n                data.edges.forEach((val) => {\n                    val.classes = 'autorotate';\n                    val.data.type = val.data.type || 'default';\n                })\n                let default_color = \"#9c8f96\";//和add-node方法中初始化颜色耦合，必须同时修改\n                data.nodes.forEach((val) => {\n                    val.data.type = val.data.type || 'default';\n                    val.data.color = val.data.color || default_color;//将颜色绑定在数据里，在workspace中修改为background-color:data(color),实现颜色持久化\n                    val.data.typeset = val.data.typeset || {x: -1, y: -1, parent: ''};\n                })\n                let that = this;\n                const loading = this.$loading({\n                  lock: true,\n                  text: '...加载中...',\n                  spinner: 'el-icon-loading',\n                  background: 'rgba(255, 255,255, 0.8)'\n                });\n                try{\n                    this.graph(that, data);\n                }finally{\n                    this.$nextTick(() => {\n                      loading.close();\n                    });\n                }\n\n            },\n\n            //让过长的内容作为展示的标题时省略\n            fontShow(text) {\n                if (text && text.length > 5) {\n                    return text.substring(0, 3) + \"...\"\n                }\n                return text\n            },\n\n            //根据内容设置字体大小，使之不会超出节点（未验证）\n            //最好改成根据实体大小设置字体大小\n            fontStyle(length,width) {\n                if(this.nodeFontSize!==''){\n                    return {\n                        \"font-size\": this.nodeFontSize + \"px\"\n                    };\n                }\n                let defaultWidth = 30;\n                let minWidth = 12;\n                let fontSize = defaultWidth - (length - 2) * 6;//这个计算字体大小的算式可能有点拉胯，\n                //根据节点大小调整文字大小\n                let nodeWidth = width?width:defaultWidth;\n                fontSize = fontSize*nodeWidth/defaultWidth;\n                if (!fontSize || fontSize < minWidth) {//\"!fontSize\"有效吗，不懂诶\n                    fontSize = minWidth;\n                }\n                return {\n                    \"font-size\": fontSize + \"px\"\n                };\n            },\n\n            //帮助node合适地展示text\n            rendNode(target, that) {\n                let data = target.data();\n                const text = that.fontShow(data.name)\n\n                //如果没有设定大小，就按照节点本身大小（节点大小不是时刻是设定大小吗？按现在的写法，我觉得新增的节点没有初始化到渲染到设定大小）\n                let widthNow = this.nodeRadius===''?this.getNodeWidth(target):this.nodeRadius;\n\n                widthNow = parseInt(widthNow+'');//确保是数字类型\n                //获取节点宽度的数字值来调节字体大小\n                let style = that.fontStyle(text.length,widthNow);\n\n                style.shape = this.shapeType[data.type];\n                style.label = text;\n                if(this.nodeRadius!==''){//和EditBar中nodeRadius监听方法逻辑耦合，必须同时修改\n                    style.width = widthNow+'px';\n                    style.height = widthNow+'px';\n                }\n                target.style(style);\n            },\n\n            getNodeWidth(target){//返回值为数字类型\n                let widthProp = target.style(\"width\");\n                let defaultWidth = 30;\n                if(widthProp){\n                    return parseInt(widthProp.match(/(\\S*)px/)[1]);//随便搜的，不知道有没有更好写法\n                }else{\n                    return defaultWidth;\n                }\n            },\n\n            updateAllNodeFontSize(){\n                //宽高修改逻辑暂时在EditBar，感觉这个样式的职责应该放在KG组件\n                //由于宽高修改在EditBar，此处默认NodeRadius如果已设定那就已经更新到全部节点了，例外情况已在rendNode中考虑\n                //此处为了防止多做操作就没有调用rendNode，结果是逻辑一部分和rendNode重复，形成重复耦合\n                let that = this;\n                let cy = that.cy;\n                that.batch(cy,()=>{\n                    cy.nodes().forEach(val => {\n                        let widthNow = that.getNodeWidth(val);//默认NodeRadius如果被设置则节点属性已经更新到和它一样\n                        let nameShown = val.style(\"label\");\n                        let style = that.fontStyle(nameShown.length,widthNow);\n                        val.style(style);\n                    });\n                });\n            },\n\n            rendEdge(target,that){\n                let data = target.data();\n                const text = that.fontShow(data.relation);\n                target.style({label:text,'line-style':this.lineStyleType[data.type]});\n                // const style = that.fontStyle(text.length);\n                // target.style(style);\n                // target.addClass('autorotate');\n            },\n\n            //作图有关的设置\n            graph(that, data) {\n                let bfLayout = {\n                    name: 'breadthfirst',\n                        minDist: 40,\n                        fit: true,\n                        padding: 30,\n                        boundingBox: undefined,\n                        animate: false,\n                        animationDuration: 500,\n                        animationEasing: undefined,\n                        animateFilter: function (node, i) {\n                        return true;\n                    },\n                    ready: undefined,\n                        stop: undefined,\n                        transform: (node, position) => {\n                        return position\n                    }\n                };\n                let presetLayout = {\n                    name: 'preset',\n\n                    positions: undefined, // map of (node id) => (position obj); or function(node){ return somPos; }\n                    zoom: undefined, // the zoom level to set (prob want fit = false if set)\n                    pan: undefined, // the pan level to set (prob want fit = false if set)\n                    fit: true, // whether to fit to viewport\n                    padding: 30, // padding on fit\n                    animate: false, // whether to transition the node positions\n                    animationDuration: 500, // duration of animation in ms if enabled\n                    animationEasing: undefined, // easing of animation if enabled\n                    animateFilter: function ( node, i ){ return true; }, // a function that determines whether the node should be animated.  All nodes animated by default on animate enabled.  Non-animated nodes are positioned immediately when the layout starts\n                    ready: undefined, // callback on layoutready\n                    stop: undefined, // callback on layoutstop\n                    transform: function (node, position ){ return position; } // transform a given node position. Useful for changing flow direction in discrete layouts\n                };\n                let cy = cytoscape({\n                    container: $('#graph'),\n                    boxSelectionEnabled: false,\n                    autounselectify: false,\n                    style: this.defaultStyle,\n                    elements: data,\n                    hideLabelsOnViewPort: false,\n                    minZoom: 0.15,\n                    maxZoom: 8,\n                    wheelSensitivity: 0.1,   //warning\n                    layout: presetLayout\n                });\n                this.setCy(cy);\n                //为了恢复打开时的布局而存的elements，目前用到的只有elements中nodes的id和position映射关系\n                //虽然完全可以只存这个map<id,position>，但为了可扩展性考虑暂时先存elements(扩展时可能也用不到hhh)\n                let elements = JSON.parse(JSON.stringify(this.cy.json().elements));//存入运行时的cy，确保都有id\n                this.setElements(elements);\n\n                this.batch(cy,()=>{\n                    cy.nodes().forEach(val => {\n                        that.rendNode(val, that);\n                    });\n\n                    cy.edges().forEach(val => {\n                        that.rendEdge(val, that);\n                    });\n                });\n\n\n                cy.on('mouseover', 'node', event => {\n                    let target = event.target || event.cyTarget;\n                    // console.log(\"mouseover node: \",target);\n                    let data = target.data();\n                    const minSize = 48;//看起来可以的试验值，无特殊意义\n                    let fontSize = parseInt(target.style(\"font-size\").match(/(\\S*)px/)[1])*1.2;\n                    fontSize = fontSize<minSize?minSize:fontSize;\n                    target.style({label:data.name,fontSize: fontSize,'z-index':9999});\n                    if(!target.scratch('tip')){\n                        let text = \"类型: \"+data.type+'<br/>'+\"属性: \" +'<br/>' + this.property2String(data.property)\n                        target.scratch('tip',that.makeTippy(target,text));\n                    }\n                    target.scratch('tip').show();\n                })\n                    .on('mouseout', 'node', event => {\n                        let target = event.target || event.cyTarget;\n                        that.rendNode(target, that);\n                        if(target.scratch('tip')){\n                            target.scratch('tip').destroy();\n                            target.removeScratch('tip');\n                            // console.log(target.scratch());\n                        }\n                        target.style({'z-index':0});\n                    })\n                    //edge不能改变边的颜色，否则和选中机制冲突（那处也会改变颜色）\n                    .on('mouseover', 'edge', event => {\n                        let target = event.target || event.cyTarget;\n                        // console.log(\"mouseover edge: \",target);\n                        let data = target.data();\n                        //如果要改旋转，是\"edge-text-rotation\": \"none\"和\"edge-text-rotation\": \"autorotate\"\n                        target.style({label:data.relation,fontSize: 36, width: 6, color: '#bc5f6a','z-index':9999});//此数无意义，仅仅需要比rendNode最大label的36更大即可\n                        if(!target.scratch('tip')){\n                            let text = \"类型: \"+data.type;\n                            target.scratch('tip',that.makeTippy(target,text));\n                        }\n                        target.scratch('tip').show();\n                    })\n                    .on('mouseout', 'edge', event => {\n                        let target = event.target || event.cyTarget;\n                        that.rendEdge(target,that);\n                        target.style({fontSize: 24, width: 3, color: '#e3a6a1','z-index':0});//与上文edge的初始配置保持一致\n                        if(target.scratch('tip')){\n                            target.scratch('tip').destroy();\n                            target.removeScratch('tip');\n                            // console.log(target.scratch());\n                        }\n                    })\n\n                // 绑定右键单击的事件\n                const barHandler = event => {\n                    if (allSelected('node')) {\n                        contextMenu.hideMenuItem('select-all-nodes');\n                        contextMenu.showMenuItem('unselect-all-nodes');\n                    } else {\n                        contextMenu.hideMenuItem('unselect-all-nodes');\n                        contextMenu.showMenuItem('select-all-nodes');\n                    }\n                    if (allSelected('edge')) {\n                        contextMenu.hideMenuItem('select-all-edges');\n                        contextMenu.showMenuItem('unselect-all-edges');\n                    } else {\n                        contextMenu.hideMenuItem('unselect-all-edges');\n                        contextMenu.showMenuItem('select-all-edges');\n                    }\n\n                };\n                cy.on('cxttap', barHandler);  //cxttap为右键单击\n\n                const allSelected = function (type) {\n                    if (type === 'node') {\n                        return cy.nodes().length === cy.nodes(':selected').length;\n                    } else if (type === 'edge') {\n                        return cy.edges().length === cy.edges(':selected').length;\n                    }\n                    return false;\n                };\n                const selectAllOfTheSameType = function (type) {\n                    if (type === 'node') {\n                        cy.nodes().select();\n                    } else if (type === 'edge') {\n                        cy.edges().select();\n                    }\n                };\n                const unselectAllOfTheSameType = function (type) {\n                    if (type === 'node') {\n                        cy.nodes().unselect();\n                    } else if (type === 'edge') {\n                        cy.edges().unselect();\n                    }\n                };\n\n\n                let removed = [];  //为了撤销删除而使用的缓存，以后可以改成恢复多次\n\n                let contextMenu = cy.contextMenus({\n                    menuItems: [\n                        {\n                            id: 'edit',\n                            content: '编辑',\n                            selector: 'node, edge',\n                            hasTrailingDivider: false,\n                            onClickFunction: function (event) {\n                                let target = event.target || event.cyTarget;\n                                const group = target.group()\n                                const data = target.data()\n\n                                const name = group === 'nodes' ? 'name' : 'relation'\n                                if(group==='nodes'){//property处理\n                                    that.node0Edge1 = 0;\n                                    that.givenType = that.nodeType;\n                                    that.form.property = that.propertyToArray(data.property);\n                                }else{\n                                    that.node0Edge1 = 1;\n                                    that.givenType = that.edgeType;\n                                }\n                                that.form.nameNow = that.form.name = data[name];\n                                that.form.type = data.type;\n                                that.addFormVisible = true;\n                                that.form.formCallback = addForm => {\n                                    console.log(\"before edit: target\", target);\n                                    let obj = {\n                                        [name]: addForm.name,\n                                        type: addForm.type,\n                                    };\n                                    if(group==='nodes'){//property处理\n                                        obj.property = that.arrayToProperty(addForm.property);\n                                    }\n                                    target.data(obj);\n                                    let conflict = false;\n                                    if (group==='nodes') {\n                                        that.rendNode(target, that);\n                                        for(let i=0;i<removed.length;i++){\n                                            let val = removed[i];\n                                            if(val.group()==='nodes'&&val.data(name)===addForm.name){\n                                                conflict = true;\n                                                break;\n                                            }\n                                        }\n                                    }else{\n                                        that.rendEdge(target,that);\n                                        for(let i=0;i<removed.length;i++){\n                                            let val = removed[i];\n                                            let valData = val.data();\n                                            if(val.group()==='edges'\n                                                &&valData.source===data.source\n                                                &&valData.target===data.target\n                                                &&valData[name]===addForm.name){\n                                                conflict = true;\n                                                break;\n                                            }\n                                        }\n                                    }\n                                    if(conflict){\n                                        console.log(\"conflict in removed, delete it all\");\n                                        contextMenu.hideMenuItem('undo-last-remove');\n                                        removed = [];\n                                    }\n                                    console.log(\"after edit: target\", target);\n                                };\n                            }\n                        },\n                        {\n                          id: 'color',\n                          content: '颜色',\n                          selector: 'node',\n                          hasTrailingDivider: true,\n                          submenu: [\n                            {\n                              id: 'color-red',\n                              content: '红',\n                              onClickFunction: function (event) {\n                                let target = event.target || event.cyTarget;\n                                target.data('color', '#e89d96');//颜色持久化\n                              },\n                            },\n                            {\n                              id: 'color-yellow',\n                              content: '黄',\n                              onClickFunction: function (event) {\n                                let target = event.target || event.cyTarget;\n                                target.data('color', '#ebc57c');//颜色持久化\n                              },\n                            },\n                            {\n                              id: 'color-light-blue',\n                              content: '浅蓝',\n                              onClickFunction: function (event) {\n                                let target = event.target || event.cyTarget;\n                                target.data('color', 'lightblue');//颜色持久化\n                              },\n                            },\n                            {\n                                id: 'color-blue-slate',\n                                content: '靛青',\n                                onClickFunction: function (event) {\n                                  let target = event.target || event.cyTarget;\n                                  target.data('color', '#6a85ce');//颜色持久化\n                                }\n                            },\n                            {\n                              id: 'color-brown',\n                              content: '棕',\n                              onClickFunction: function (event) {\n                                let target = event.target || event.cyTarget;\n                                target.data('color', '#9c8f96');//颜色持久化\n                              },\n                            },\n                          ]\n                        },\n                        {\n                            id: 'undo-last-remove',\n                            content: '撤销最近一次删除',\n                            selector: 'node, edge',\n                            show: false,\n                            coreAsWell: true,\n                            onClickFunction: function (event) {\n                                if (removed) {\n                                    console.log(\"before undoing remove: nodeCount\", cy.nodes().length);\n                                    console.log(\"before undoing remove: edgeCount\", cy.edges().length);\n                                    removed.restore();\n                                    removed = [];\n                                    console.log(\"after undoing remove: nodeCount\", cy.nodes().length);\n                                    console.log(\"after undoing remove: edgeCount\", cy.edges().length);\n                                }\n\n                                that.trigger_statistic_data_change();\n                                contextMenu.hideMenuItem('undo-last-remove');\n                            }\n                        },\n                        {\n                            id: 'add-node',\n                            content: '实体',\n                            image: {src: \"/icons/add.svg\", x: 7, y: 8}, // menu icon\n                            coreAsWell: true,\n                            hasTrailingDivider: true,\n                            onClickFunction: function (event) {\n                                that.node0Edge1 = 0;\n                                that.givenType = that.nodeType;\n                                that.addFormVisible = true;\n                                let pos = event.position || event.cyPosition;\n                                let newObj = {\n                                    group: 'nodes',\n                                    position: {\n                                        x: pos.x,\n                                        y: pos.y\n                                    }\n                                };\n                                that.form.formCallback = addForm => {\n                                    let default_color = \"#9c8f96\";\n                                    newObj.data = {\n                                        name:addForm.name,\n                                        type:addForm.type,\n                                        color:default_color,//和初始化时的颜色耦合，必须是相同的default_color\n                                        property:that.arrayToProperty(addForm.property)//property处理\n                                    };\n                                    let collection = cy.add(newObj);\n                                    that.rendNode(collection[0], that);\n                                    that.trigger_statistic_data_change();\n                                };\n                            }\n                        },\n                        {\n                            id: 'add-edge',\n                            content: '关系',\n                            selector: 'node',\n                            image: {src: \"/icons/add.svg\", x: 7, y: 8}, // menu icon\n                            onClickFunction: function (event) {\n                                let starget = event.target || event.cyTarget;\n                                let color_before = starget.style('background-color');\n                                // starget.style({\n                                //     //\"border-width\": 4,\n                                //     //\"border-color\": \"#847072\",\n                                //     \"background-color\": '#dcc1b0',\n                                //     //'text-outline-color': \"#847072\",\n                                //     //'text-outline-width': 4,\n                                // });\n                                starget.data(\"color\",'#dcc1b0');//颜色持久化\n                                let sid = starget.data(\"id\");\n                                cy.once('tap', event => {\n                                    console.log(\"start adding an edge\");\n                                    let ttarget = event.target || event.cyTarget;\n                                    if (ttarget !== cy && ttarget.group() === 'nodes') {\n                                        let tid = ttarget.data(\"id\");\n                                        that.node0Edge1 = 1;\n                                        that.givenType = that.edgeType;\n                                        that.form.edgeCondition = {source:sid,target:tid};\n                                        that.addFormVisible = true;\n                                        let newEdge = {\n                                            group: 'edges',\n                                            classes: 'autorotate'\n                                        };\n                                        that.form.formCallback = addForm => {\n                                            newEdge.data = {\n                                                relation: addForm.name,\n                                                source: addForm.edgeCondition.source,\n                                                target: addForm.edgeCondition.target,\n                                                type: addForm.type\n                                            };\n                                            let collection = cy.add(newEdge);\n                                            that.rendEdge(collection[0], that);\n                                            that.trigger_statistic_data_change();\n                                        };\n                                    }\n                                    starget.data({'color': color_before});//颜色持久化\n                                });\n                            }\n                        },\n                        {\n                            id: 'remove',\n                            content: '删除',\n                            hasTrailingDivider: true,\n                            image: {src: \"/icons/remove.svg\", x: 7, y: 8}, // menu icon\n                            selector: 'node, edge',\n                            onClickFunction: function (event) {\n                                let target = event.target || event.cyTarget;\n                                console.log(\"before remove: nodeCount\", cy.nodes().length);\n                                console.log(\"before remove: edgeCount\", cy.edges().length);\n                                removed = target.remove();\n                                console.log(\"after remove: nodeCount\", cy.nodes().length);\n                                console.log(\"after remove: edgeCount\", cy.edges().length);\n\n                                that.trigger_statistic_data_change();\n                                contextMenu.showMenuItem('undo-last-remove');\n                            }\n                        },\n                        {\n                            id: 'select-all-nodes',\n                            content: '全选实体',\n                            selector: 'node',\n                            coreAsWell: true,\n                            show: true,\n                            onClickFunction: function (event) {\n                                selectAllOfTheSameType('node');\n\n                                contextMenu.hideMenuItem('select-all-nodes');\n                                contextMenu.showMenuItem('unselect-all-nodes');\n                            }\n                        },\n                        {\n                            id: 'unselect-all-nodes',\n                            content: '取消全选实体',\n                            selector: 'node',\n                            coreAsWell: true,\n                            show: false,\n                            onClickFunction: function (event) {\n                                unselectAllOfTheSameType('node');\n\n                                contextMenu.showMenuItem('select-all-nodes');\n                                contextMenu.hideMenuItem('unselect-all-nodes');\n                            }\n                        },\n                        {\n                            id: 'select-all-edges',\n                            content: '全选关系',\n                            selector: 'edge',\n                            coreAsWell: true,\n                            show: true,\n                            onClickFunction: function (event) {\n                                selectAllOfTheSameType('edge');\n\n                                contextMenu.hideMenuItem('select-all-edges');\n                                contextMenu.showMenuItem('unselect-all-edges');\n                            }\n                        },\n                        {\n                            id: 'unselect-all-edges',\n                            content: '取消全选关系',\n                            selector: 'edge',\n                            coreAsWell: true,\n                            show: false,\n                            hasTrailingDivider: true,\n                            onClickFunction: function (event) {\n                                unselectAllOfTheSameType('edge');\n\n                                contextMenu.showMenuItem('select-all-edges');\n                                contextMenu.hideMenuItem('unselect-all-edges');\n                            }\n                        },\n                    ],\n                    // css classes that menu items will have\n                    menuItemClasses: [\n                        // add class names to this list, like: 'custom-menu-item'\n                    ],\n                    // css classes that context menu will have\n                    contextMenuClasses: [],\n                    // Indicates that the menu item has a submenu. If not provided default one will be used\n                    submenuIndicator: {src: '/icons/submenu-indicator-default.svg', width: 12, height: 12}\n                });\n            },\n\n            isUnique(arrays,propFunc,name){\n                for(let i=0;i<arrays.length;i++){\n                    if(propFunc(arrays[i])===name){\n                        return false\n                    }\n                }\n                return true\n            },\n\n            //dialog组件\n            resetForm(){\n                this.$refs['ruleForm'].resetFields();\n                //本来只需要上面这一行\n                //由于上一行的作用是恢复至初始值，而由于编辑和添加dialog共用，如果先使用编辑，则编辑的值成为初始值\n                //为简单解决这一问题，附加一个手动清空form的操作如下\n                this.form = {\n                    name: '',\n                    type: '',\n                    property: [],\n                    edgeCondition:{source:'',target:''},\n                    nameNow: '',\n                    formCallback: ()=>{console.log(\"this.form.formCallback被意外调用\")}\n                };\n            },\n\n            handleClose(done) {\n                let that = this;\n                this.$confirm('所作的编辑将不会保存')\n                    .then(_ => {\n                        done();\n                        that.resetForm();\n                    })\n                    .catch(_ => {});\n            },\n\n            //addForm组件\n            addCancel(){\n                this.addFormVisible = false;\n                this.resetForm();\n\n            },\n            addConfirm(){\n                this.$refs['ruleForm'].validate((valid) => {\n                    if (valid) {\n                        this.addFormVisible = false;\n                        let addForm = JSON.parse(JSON.stringify(this.form));//深拷贝后传参，不破坏原来的值//可能没必要\n                        addForm.name = addForm.name.trim();//名称和校验时一样前后无空格\n                        this.form.formCallback(addForm);\n                        this.resetForm();\n                        // this.trigger_statistic_data_change();//因为在各个callback函数中已经写了，由于背后机制是布尔值取反，所以重复操作会导致无法监听到布尔值变化\n                    } else {\n                        alert('好像哪里有问题，操作失败了呢……');\n                    }\n                });\n            },\n\n            makeTippy(ele, text){//ele需传入cy的ele\n                var ref = ele.popperRef();\n\n                // Since tippy constructor requires DOM element/elements, create a placeholder\n                var dummyDomEle = document.createElement('div');\n\n                var tip = tippy( dummyDomEle, {\n                    getReferenceClientRect: ref.getBoundingClientRect,\n                    trigger: 'manual', // mandatory\n                    // dom element inside the tippy:\n                    content: function(){ // function can be better for performance\n                        var div = document.createElement('div');\n\n                        div.innerHTML = text;\n\n                        return div;\n                    },\n                    // your own preferences:\n                    arrow: true,\n                    placement: 'bottom',\n                    offset: [20, 30],\n                    hideOnClick: false,\n                    // enable it\n                    // sticky: true,\n                    // only check the \"reference\" rect for changes\n                    sticky: 'reference',\n                    // only check the \"popper\" rect for changes\n                    // sticky: 'popper',\n                    plugins: [sticky],\n                    zIndex: 10,//默认9999，修改小些避免遮住弹窗\n\n\n                    // if interactive:\n                    interactive: true,\n                    appendTo: document.body // or append dummyDomEle to document.body\n                } );\n\n                return tip;\n            },\n\n            // **Allow for manipulation of elements without triggering multiple style calculations or multiple redraws.**\n            batch(cy,func){\n                cy.startBatch();\n                func();\n                cy.endBatch();\n            },\n            // A batch should correspond to a single visual operation. Usually a batch should contain calls only to the following functions:\n            // Modifying state: eles.data(), eles.scratch(), eles.addClass(), eles.removeClass(), etc.\n            // Building collections: eles.union(), eles.difference(), eles.intersection(), etc.\n            // Comparison: eles.same(), eles.some(), etc.\n            // Iteration: eles.forEach(), eles.empty(), etc.\n            // Traversal: node.outgoers(), eles.bfs(), etc.\n            // Algorithms: eles.dijkstra(), eles.degreeCentrality(), etc.\n\n            // 把对象转化为字符串\n            property2String(props){\n                let result = '';\n                for(let key in props){\n                    let val = props[key];\n                    if(val instanceof Array){\n                        result += '· ' + key + '-' + val.join(',') + '</br>';\n                    }else{\n                        result += '· ' + key + '-' + val + '</br>';\n                    }\n\n                }\n                return result;\n            },\n\n            propertyToArray(props){\n                let result = [];\n                for(let key in props){\n                    let val = props[key];\n                    if(val instanceof Array){\n                        result.push(key + ':' + val.join(','));\n                    }else{\n                        result.push(key + ':' + val);\n                    }\n\n                }\n                return result;\n            },\n\n            arrayToProperty(array){\n                let result = {};\n                let defaultItem = [];\n                if(!array) return result;\n                for(let item of array){\n                    let index = item.search(/[:：]/);\n                    let key='',content='';\n                    if(index>=0 && index<item.length-1){\n                        key = item.slice(0,index);\n                        content = item.slice(index+1);\n                    } else{\n                        content = item;\n                    }\n\n                    let pauseWord = /[;,.；，。]/;\n                    if(content.search(pauseWord)===-1){\n                        let errorReg = /\\s/;\n                        if(key&&!errorReg.test(key)){\n                            result[key] = content;\n                        }else{\n                            defaultItem.push(item);\n                        }\n                    }else{\n                        content = content.split(pauseWord);\n                        if(content.length>0){\n                            // let errorReg = /\\s/;\n                            let validIndex = []\n                            for(let i = 0;i < content.length;i++){\n                                content[i] = content[i].trim();\n                                if(content[i]){\n                                    validIndex.push(i)\n                                }\n                            }\n                            if(validIndex.length>0){\n                                let validItem = []\n                                for(let i of validIndex){\n                                    validItem.push(content[i]);\n                                }\n                                let errorReg = /\\s/;\n                                if(key&&!errorReg.test(key)){\n                                    result[key] = validItem;\n                                }else{\n                                    defaultItem += validItem;\n                                }\n                            }\n                        }\n                    }\n                }\n                if(defaultItem.length>0){\n                    let defaultKey = \"未命名\";\n                    if(result.hasOwnProperty(defaultKey)){\n                        if(result[defaultKey] instanceof Array){\n                            result[defaultKey] += defaultItem;\n                        }else {\n                            result[defaultKey] = [result[defaultKey]] + defaultItem;\n                        }\n                    }else{\n                        result[defaultKey] = defaultItem;\n                    }\n                }\n                return result;\n            }\n        }\n    }\n</script>\n\n<style lang=\"less\">\n@import \"../assets/css/colors\";\n    .knowledge-graph-cy{\n      height: 100%;\n    }\n    #graph {\n        width: 100%;\n        height: 100%;\n        min-height: 500px;\n        cursor: move;\n    }\n\n    //菜单\n    .cy-context-menus-cxt-menu {\n        display: none;\n        z-index: 1001;\n        position:absolute;\n        border:1px solid @separator;\n        border-radius: 3px;\n        background-color: white;\n    }\n\n    //菜单条目\n    .cy-context-menus-cxt-menuitem {\n        border-radius: 3px;\n        display:block;\n        width: 100%;\n        padding: 7px 30px;\n        position:relative;\n        background-color: white;\n        font-size: 13px;\n        white-space:nowrap;\n        color: @myblack;\n        border: 0;\n        text-align: left;\n        img{\n            width: 15px;\n            height: 15px;\n        }\n    }\n\n    //菜单条目：enabled\n    .cy-context-menus-cxt-menuitem:enabled {}\n\n    //菜单条目：focus\n    .cy-context-menus-ctx-operation:focus {\n        //outline: none;\n    }\n\n    //菜单条目：hover\n    .cy-context-menus-cxt-menuitem:hover {\n        color: @theme;\n        text-decoration: none;\n        background-color: @hover;\n        background-image: none;\n        cursor: pointer;\n        border-radius: 0;\n    }\n\n    //？？\n    .cy-context-menus-cxt-menuitem[content]:before {\n        content:attr(content);\n    }\n\n    .cy-context-menus-divider {\n        border-bottom:1px solid @separator;\n    }\n\n    .cy-context-menus-submenu-indicator {\n        position: absolute;\n        right: 2px;\n        top: 50%;\n        transform: translateY(-50%);\n    }\n</style>\n"],"sourceRoot":""}]}