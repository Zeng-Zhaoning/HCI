{"remainingRequest":"C:\\Users\\Owen Liu\\Desktop\\稳定版\\HCI\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Owen Liu\\Desktop\\稳定版\\HCI\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Owen Liu\\Desktop\\稳定版\\HCI\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\Owen Liu\\Desktop\\稳定版\\HCI\\src\\components\\QAPanel.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Owen Liu\\Desktop\\稳定版\\HCI\\src\\components\\QAPanel.vue","mtime":1639462903582},{"path":"C:\\Users\\Owen Liu\\Desktop\\稳定版\\HCI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Owen Liu\\Desktop\\稳定版\\HCI\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Owen Liu\\Desktop\\稳定版\\HCI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Owen Liu\\Desktop\\稳定版\\HCI\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvT3dlbiBMaXUvRGVza3RvcC9cdTdBMzNcdTVCOUFcdTcyNDgvSENJL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBNeUJ1dHRvbiBmcm9tICJAL2NvbXBvbmVudHMvVG9vbHMvTXlCdXR0b24iOwppbXBvcnQgeyBzaW1wbGVfcXVlc3Rpb24gfSBmcm9tICJAL2FwaS9RQUFQSSI7CmltcG9ydCB7IG1hcE11dGF0aW9ucywgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJRQVBhbmVsIiwKICBjb21wb25lbnRzOiB7CiAgICBNeUJ1dHRvbjogTXlCdXR0b24KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgcXVlc3Rpb246ICLlk4jliKnms6LnibkiLAogICAgICB0ZXh0czogW3sKICAgICAgICBmcm9tOiAxLAogICAgICAgIC8vMeaYr+ezu+e7n++8jDLmmK/nlKjmiLcKICAgICAgICB0ZXh0OiAi6K+V552A6Zeu5oiR6Zeu6aKY5ZCnfiIKICAgICAgfV0KICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoewogICAgcGlkOiBmdW5jdGlvbiBwaWQoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnBpZDsKICAgIH0KICB9KSksCiAgbWV0aG9kczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBNdXRhdGlvbnMoWyJjaGFuZ2VTaG93UUFQYW5lbCJdKSksIHt9LCB7CiAgICBrZXlEb3duSGFuZGxlcjogZnVuY3Rpb24ga2V5RG93bkhhbmRsZXIoZXZlbnQpIHsKICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gIjEzIikgewogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIH0KICAgIH0sCiAgICBrZXlVcEhhbmRsZXI6IGZ1bmN0aW9uIGtleVVwSGFuZGxlcihldmVudCkgewogICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSAiMTMiKSB7CiAgICAgICAgdGhpcy5xdWVyeShldmVudCk7CiAgICAgIH0KICAgIH0sCiAgICBxdWVyeTogZnVuY3Rpb24gcXVlcnkoZXZlbnQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnF1ZXN0aW9uICE9PSAiIikgewogICAgICAgIHRoaXMudGV4dHMucHVzaCh7CiAgICAgICAgICBmcm9tOiAyLAogICAgICAgICAgdGV4dDogdGhpcy5xdWVzdGlvbgogICAgICAgIH0pOwogICAgICAgIHZhciBxdWVzdGlvbiA9IHRoaXMucXVlc3Rpb247CiAgICAgICAgdGhpcy5xdWVzdGlvbiA9ICIiOyAvL+a4heepuui+k+WFpeagjwoKICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgIHZhciBzY3JvbGxWaWV3ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiZWwtc2Nyb2xsYmFyX193cmFwIilbMF07CiAgICAgICAgc2Nyb2xsVmlldy5zY3JvbGxUb3AgPSBzY3JvbGxWaWV3LnNjcm9sbEhlaWdodDsKICAgICAgICBzaW1wbGVfcXVlc3Rpb24ocXVlc3Rpb24sIHRoaXMucGlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICBpZiAocmVzLmRhdGEuc3VjY2VzcykgewogICAgICAgICAgICBfdGhpcy50ZXh0cy5wdXNoKHsKICAgICAgICAgICAgICBmcm9tOiAxLAogICAgICAgICAgICAgIHRleHQ6IHJlcy5kYXRhLmNvbnRlbnQKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy50ZXh0cy5wdXNoKHsKICAgICAgICAgICAgICBmcm9tOiAxLAogICAgICAgICAgICAgIHRleHQ6ICLmn6Xor6LlpLHotKXlmaIuLi7kv6Hmga/vvJoiICsgcmVzLmRhdGEubWVzc2FnZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IoIuiuv+mXruWksei0pe+8jOivt+ajgOafpee9kee7nCIpOwogICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgc2Nyb2xsVmlldy5zY3JvbGxUb3AgPSBzY3JvbGxWaWV3LnNjcm9sbEhlaWdodDsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0pCn07"},{"version":3,"sources":["C:\\Users\\Owen Liu\\Desktop\\稳定版\\HCI\\src\\components\\QAPanel.vue"],"names":[],"mappings":";;AAwCA,OAAO,QAAP,MAAqB,6BAArB;AACA,SAAS,eAAT,QAAgC,aAAhC;AACA,SAAS,YAAT,EAAuB,QAAvB,QAAuC,MAAvC;AACA,eAAe;AACb,EAAA,IAAI,EAAE,SADO;AAEb,EAAA,UAAU,EAAE;AAAE,IAAA,QAAO,EAAP;AAAF,GAFC;AAGb,EAAA,IAHa,kBAGN;AACL,WAAO;AACL,MAAA,OAAO,EAAE,KADJ;AAEL,MAAA,QAAQ,EAAE,MAFL;AAGL,MAAA,KAAK,EAAE,CACL;AACE,QAAA,IAAI,EAAE,CADR;AACW;AACT,QAAA,IAAI,EAAE;AAFR,OADK;AAHF,KAAP;AAUD,GAdY;AAeb,EAAA,QAAQ,oBACH,QAAQ,CAAC;AACV,IAAA,GAAG,EAAE,aAAC,KAAD;AAAA,aAAW,KAAK,CAAC,GAAjB;AAAA;AADK,GAAD,CADL,CAfK;AAoBb,EAAA,OAAO,kCACF,YAAY,CAAC,CAAC,mBAAD,CAAD,CADV;AAEL,IAAA,cAFK,0BAEU,KAFV,EAEiB;AACpB,UAAI,KAAK,CAAC,OAAN,IAAiB,IAArB,EAA2B;AACzB,QAAA,KAAK,CAAC,cAAN;AACF;AACD,KANI;AAOL,IAAA,YAPK,wBAOQ,KAPR,EAOe;AAClB,UAAI,KAAK,CAAC,OAAN,IAAiB,IAArB,EAA2B;AACzB,aAAK,KAAL,CAAW,KAAX;AACF;AACD,KAXI;AAYL,IAAA,KAZK,iBAYC,KAZD,EAYQ;AAAA;;AACX,UAAI,KAAK,QAAL,KAAkB,EAAtB,EAA0B;AACxB,aAAK,KAAL,CAAW,IAAX,CAAgB;AAAE,UAAA,IAAI,EAAE,CAAR;AAAW,UAAA,IAAI,EAAE,KAAK;AAAtB,SAAhB;AACA,YAAI,QAAO,GAAI,KAAK,QAApB;AACA,aAAK,QAAL,GAAgB,EAAhB,CAHwB,CAGJ;;AACpB,aAAK,OAAL,GAAe,IAAf;AACA,YAAI,UAAS,GACX,QAAQ,CAAC,sBAAT,CAAgC,oBAAhC,EAAsD,CAAtD,CADF;AAEA,QAAA,UAAU,CAAC,SAAX,GAAuB,UAAU,CAAC,YAAlC;AACA,QAAA,eAAe,CAAC,QAAD,EAAW,KAAK,GAAhB,CAAf,CACG,IADH,CACQ,UAAC,GAAD,EAAS;AACb,UAAA,KAAI,CAAC,OAAL,GAAe,KAAf;;AACA,cAAI,GAAG,CAAC,IAAJ,CAAS,OAAb,EAAsB;AACpB,YAAA,KAAI,CAAC,KAAL,CAAW,IAAX,CAAgB;AAAE,cAAA,IAAI,EAAE,CAAR;AAAW,cAAA,IAAI,EAAE,GAAG,CAAC,IAAJ,CAAS;AAA1B,aAAhB;AACF,WAFA,MAEO;AACL,YAAA,KAAI,CAAC,KAAL,CAAW,IAAX,CAAgB;AACd,cAAA,IAAI,EAAE,CADQ;AAEd,cAAA,IAAI,EAAE,gBAAgB,GAAG,CAAC,IAAJ,CAAS;AAFjB,aAAhB;AAIF;AACD,SAXH,EAYG,KAZH,CAYS,UAAC,GAAD,EAAS;AACd,UAAA,KAAI,CAAC,OAAL,GAAe,KAAf;;AACA,UAAA,KAAI,CAAC,QAAL,CAAc,KAAd,CAAoB,YAApB;AACD,SAfH,EAgBG,OAhBH,CAgBW,YAAM;AACb,UAAA,UAAU,CAAC,SAAX,GAAuB,UAAU,CAAC,YAAlC;AACD,SAlBH;AAmBF;AACD;AAzCI;AApBM,CAAf","sourcesContent":["<template>\n  <div class=\"qa-panel\">\n    <div class=\"title-box\">\n      <div style=\"min-width: 60px; margin-top: 12px\">智能问答</div>\n      <div class=\"qa-button\">\n        <el-button\n          icon=\"el-icon-close\"\n          circle\n          @click=\"changeShowQAPanel\"\n        ></el-button>\n      </div>\n    </div>\n\n    <div class=\"message-box\">\n      <el-scrollbar>\n        <div class=\"message-item\" v-for=\"text in texts\">\n          <div class=\"message-item-1\" v-if=\"text.from === 1\">\n            <div class=\"name\">小智</div>\n            <div class=\"message\">{{ text.text }}</div>\n          </div>\n          <div class=\"message-item-2\" v-if=\"text.from === 2\">\n            <div class=\"name\">我</div>\n            <div class=\"message\">{{ text.text }}</div>\n          </div>\n        </div>\n        <img src=\"../../public/icons/loading.gif\" v-show=\"loading\" />\n      </el-scrollbar>\n    </div>\n    <div class=\"input-box\">\n      <textarea\n        v-model=\"question\"\n        @keyup=\"keyUpHandler\"\n        @keydown=\"keyDownHandler\"\n      ></textarea>\n      <my-button class=\"query-btn\" @click=\"query\">询问</my-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport MyButton from \"@/components/Tools/MyButton\";\nimport { simple_question } from \"@/api/QAAPI\";\nimport { mapMutations, mapState } from \"vuex\";\nexport default {\n  name: \"QAPanel\",\n  components: { MyButton },\n  data() {\n    return {\n      loading: false,\n      question: \"哈利波特\",\n      texts: [\n        {\n          from: 1, //1是系统，2是用户\n          text: \"试着问我问题吧~\",\n        },\n      ],\n    };\n  },\n  computed: {\n    ...mapState({\n      pid: (state) => state.pid,\n    }),\n  },\n  methods: {\n    ...mapMutations([\"changeShowQAPanel\"]),\n    keyDownHandler(event) {\n      if (event.keyCode == \"13\") {\n        event.preventDefault();\n      }\n    },\n    keyUpHandler(event) {\n      if (event.keyCode == \"13\") {\n        this.query(event);\n      }\n    },\n    query(event) {\n      if (this.question !== \"\") {\n        this.texts.push({ from: 2, text: this.question });\n        let question = this.question;\n        this.question = \"\"; //清空输入栏\n        this.loading = true;\n        let scrollView =\n          document.getElementsByClassName(\"el-scrollbar__wrap\")[0];\n        scrollView.scrollTop = scrollView.scrollHeight;\n        simple_question(question, this.pid)\n          .then((res) => {\n            this.loading = false;\n            if (res.data.success) {\n              this.texts.push({ from: 1, text: res.data.content });\n            } else {\n              this.texts.push({\n                from: 1,\n                text: \"查询失败噢...信息：\" + res.data.message,\n              });\n            }\n          })\n          .catch((err) => {\n            this.loading = false;\n            this.$message.error(\"访问失败，请检查网络\");\n          })\n          .finally(() => {\n            scrollView.scrollTop = scrollView.scrollHeight;\n          });\n      }\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n@import \"../assets/css/colors.less\";\n.qa-panel {\n  width: 300px;\n  height: 630px;\n  box-shadow: 0px 0 1px #e6e6e6;\n  background-color: white;\n  border-radius: 4px;\n  border: 1px solid #eeeeee;\n  display: flex;\n  flex-direction: column;\n}\n\n.title-box {\n  color: @theme;\n  font-weight: bold;\n  font-size: 15px;\n  font-family: 微软雅黑;\n  height: 40px;\n  line-height: 20px;\n  padding: 14px;\n  border-bottom: 1px solid #eeeeee;\n  display: flex;\n  flex-direction: row;\n}\n\n.message-box {\n  flex: 1;\n  padding: 14px 0 14px 14px;\n  display: flex;\n  flex-direction: column;\n  overflow-x: hidden;\n}\n\n.el-scrollbar {\n  padding-right: 14px;\n}\n\n.message-item {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 5px;\n}\n.qa-button {\n  margin-left: 180px;\n  margin-bottom: 30px;\n  align-content: center;\n}\n.name {\n  color: @myblack;\n  font-size: 14px;\n  font-family: 微软雅黑;\n  letter-spacing: 1px;\n  margin-bottom: 5px;\n  width: 100%;\n}\n\n.message {\n  color: @myblack;\n  font-size: 14px;\n  font-family: 微软雅黑;\n  letter-spacing: 1px;\n  max-width: 75%;\n  width: fit-content;\n  padding: 10px 13px;\n  border-radius: 8px;\n}\n\n.message-item-1 {\n  .message {\n    border: 1px solid #d8d8ff;\n  }\n}\n\n.message-item-2 {\n  .name {\n    text-align: right;\n  }\n  .message {\n    background: #ededfd;\n    float: right;\n  }\n}\n\n.input-box {\n  height: 150px;\n  border-top: 1px solid #eeeeee;\n  position: relative;\n}\n\ntextarea {\n  resize: none;\n  border: none;\n  margin: 10px 10px 0 10px;\n  outline: none;\n  font-size: 15px;\n  font-family: 微软雅黑;\n  letter-spacing: 1px;\n  height: 100% - 40px;\n  width: 100% - 10px;\n  color: #565657;\n}\n\n.query-btn {\n  margin-bottom: 14px;\n  position: absolute;\n  right: 14px;\n  bottom: 0;\n}\n</style>"],"sourceRoot":""}]}