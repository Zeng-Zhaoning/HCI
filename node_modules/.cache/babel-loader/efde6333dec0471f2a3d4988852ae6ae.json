{"remainingRequest":"C:\\Users\\Owen Liu\\Desktop\\init\\HCI\\HCI\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Owen Liu\\Desktop\\init\\HCI\\HCI\\src\\components\\EditBar\\EditBar.js?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Owen Liu\\Desktop\\init\\HCI\\HCI\\src\\components\\EditBar\\EditBar.js","mtime":1638694828000},{"path":"C:\\Users\\Owen Liu\\Desktop\\init\\HCI\\HCI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Owen Liu\\Desktop\\init\\HCI\\HCI\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiQzovVXNlcnMvT3dlbiBMaXUvRGVza3RvcC9pbml0L0hDSS9IQ0kvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZiI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkM6L1VzZXJzL093ZW4gTGl1L0Rlc2t0b3AvaW5pdC9IQ0kvSENJL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkM6L1VzZXJzL093ZW4gTGl1L0Rlc2t0b3AvaW5pdC9IQ0kvSENJL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLWFsbC5qcyI7CmltcG9ydCB7IG1hcFN0YXRlLCBtYXBNdXRhdGlvbnMsIG1hcEFjdGlvbnMsIG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgaW5wdXRLRyB9IGZyb20gIi4uLy4uL2FwaS9iYXNpY0FQSSI7CmltcG9ydCBPcEl0ZW0gZnJvbSAnLi9PcEl0ZW0nOwppbXBvcnQgRWRpdEJhckJsb2NrIGZyb20gIi4vRWRpdEJhckJsb2NrIjsKaW1wb3J0IE15QnV0dG9uIGZyb20gIkAvY29tcG9uZW50cy9Ub29scy9NeUJ1dHRvbiI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRWRpdEJhciIsCiAgY29tcG9uZW50czogewogICAgT3BJdGVtOiBPcEl0ZW0sCiAgICBFZGl0QmFyQmxvY2s6IEVkaXRCYXJCbG9jaywKICAgIE15QnV0dG9uOiBNeUJ1dHRvbgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3dFZGl0QmFyOiB0cnVlLAogICAgICBzaG93RXhwb3J0T3BzOiBmYWxzZSwKICAgICAgb3BJbmZvOiAn5omT5byA55qE5paH5Lu25ZCO57yA5Li6Ii5qc29uIu+8jOWFtuihqOekuuS4gOS4quefpeivhuWbvuiwsVxuJywKICAgICAgZW50aXRpZXNfZGF0YTogW10sCiAgICAgIHJlbGF0aW9uc19kYXRhOiBbXSwKICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL+aQnOe0ouebuOWFsy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICBtYXhfbG9nX2xlbjogMTAsCiAgICAgIHNlYXJjaF9ub2RlX3RleHQ6IFtdLAogICAgICBzZWFyY2hfbm9kZV9jb25kaXRpb246IFtdLAogICAgICBub2RlX3NlYXJjaGVkOiBmYWxzZSwKICAgICAgc2VhcmNoX25vZGVfbG9nOiBbXSwKICAgICAgc2VhcmNoX2VkZ2VfdGV4dDogW10sCiAgICAgIHNlYXJjaF9lZGdlX2NvbmRpdGlvbjogW10sCiAgICAgIGVkZ2Vfc2VhcmNoZWQ6IGZhbHNlLAogICAgICBzZWFyY2hfZWRnZV9sb2c6IFtdLAogICAgICAvLyBzZWFyY2hfdGV4dDogJycsCiAgICAgIC8vIHNlYXJjaF90eXBlOiAnJywKICAgICAgLy8gc2VsZWN0X3ZhbHVlOiAnJywKICAgICAgLy8gc2hvd0VuYWJsZWQ6IGZhbHNlLAogICAgICAvLyBlZGdlRGlzYWJsZWQ6IHRydWUsCiAgICAgIC8vIHR5cGVzOiBbCiAgICAgIC8vICAgICB7CiAgICAgIC8vICAgICAgICAgbGFiZWw6ICfoioLngrknLAogICAgICAvLyAgICAgICAgIHZhbHVlOiAnMScKICAgICAgLy8gICAgIH0sCiAgICAgIC8vICAgICB7CiAgICAgIC8vICAgICAgICAgbGFiZWw6ICflhbPns7snLAogICAgICAvLyAgICAgICAgIHZhbHVlOiAnMicKICAgICAgLy8gICAgIH0KICAgICAgLy8gXSwKICAgICAgLy8gY3VycmVudFNlYXJjaDogewogICAgICAvLyAgICAgcGFyYW1zOiB7fSwKICAgICAgLy8gICAgIHJlc3VsdDogW10KICAgICAgLy8gfSwKICAgICAgLy8gc2VhcmNoTG9nOiBbXSwKICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vL+i/h+a7pOebuOWFsy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAgIGZpbHRlcl9ub2RlX2NoZWNrTGlzdDogW10sCiAgICAgIGZpbHRlcl9lZGdlX2NoZWNrTGlzdDogW10sCiAgICAgIC8vIGZpbHRlcl9kaXNhYmxlZDogdHJ1ZSwKICAgICAgLy8gZmlsdGVyU2hvd0VuYWJsZWQ6IGZhbHNlLAogICAgICAvLwogICAgICAvLyBmaWx0ZXJfbm9kZV9jaGVja2VkOiBmYWxzZSwKICAgICAgLy8gZmlsdGVyX25vZGVfY2hlY2tMaXN0OiBbXSwKICAgICAgLy8gZmlsdGVyX2VkZ2VfY2hlY2tlZDogZmFsc2UsCiAgICAgIC8vIGZpbHRlcl9lZGdlX2NoZWNrTGlzdDogW10sCiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy/lsZXnpLrmlYjmnpznm7jlhbMvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICBsYXlvdXQ6IG51bGwsCiAgICAgIGxheW91dFR5cGVOb3c6ICcnLAogICAgICByZWxhdGlvbl9sYWJlbF9lbmFibGVkOiB0cnVlLAogICAgICBmb250X3NpemU6IDIwLAogICAgICBub2RlX3JhZGl1czogMjAKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgY3k6IGZ1bmN0aW9uIGN5KG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgICB0aGlzLmdldF9zdGF0aXN0aWNfZGF0YSgpOwogICAgICB0aGlzLmxheW91dFR5cGVOb3cgPSBuZXdWYWx1ZS5vcHRpb25zKCkubGF5b3V0Lm5hbWU7CiAgICB9LAogICAgc3RhdGlzdGljX2RhdGFfY2hhbmdlOiBmdW5jdGlvbiBzdGF0aXN0aWNfZGF0YV9jaGFuZ2UobmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICAgIGNvbnNvbGUubG9nKCLmo4DmtYvliLDmlbDmja7lj5jljJYiKTsKICAgICAgdGhpcy5nZXRfc3RhdGlzdGljX2RhdGEoKTsKICAgIH0sCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL+WxleekuuebuOWFsy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgbGF5b3V0VHlwZU5vdzogZnVuY3Rpb24gbGF5b3V0VHlwZU5vdyhuZXdWYWwsIG9sZFZhbCkgewogICAgICBjb25zb2xlLmxvZygibGF5b3V0IHdhdGNoZWQ6ICciLCBvbGRWYWwsICInIHRvICciLCBuZXdWYWwsICInIik7CiAgICAgIHZhciBsYXlvdXQgPSB0aGlzLmxheW91dDsKCiAgICAgIGlmIChsYXlvdXQgIT09IG51bGwpIHsKICAgICAgICBsYXlvdXQuc3RvcCgpOwogICAgICB9CgogICAgICBpZiAobmV3VmFsID09PSAncHJlc2V0JykgewogICAgICAgIC8vY29uc29sZS5sb2coImVsZW1lbnRzIHN0b3JlZDogIix0aGlzLmVsZW1lbnRzKTsKICAgICAgICB2YXIgbm9kZXMgPSB0aGlzLmVsZW1lbnRzLm5vZGVzOwoKICAgICAgICB2YXIgcG9zaXRpb25zID0gZnVuY3Rpb24gcG9zaXRpb25zKG5vZGUpIHsKICAgICAgICAgIHZhciBub2RlSWQgPSBub2RlLmRhdGEoImlkIik7CgogICAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG5vZGVzKSwKICAgICAgICAgICAgICBfc3RlcDsKCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgICAgIHZhciBfbm9kZSA9IF9zdGVwLnZhbHVlOwoKICAgICAgICAgICAgICBpZiAoX25vZGUuZGF0YS5pZCA9PT0gbm9kZUlkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX25vZGUucG9zaXRpb247CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgeDogMCwKICAgICAgICAgICAgeTogMAogICAgICAgICAgfTsgLy/lj6/ku6Xmi5PlsZXmiJDpmo/mnLrmlL7nva4KICAgICAgICB9OwoKICAgICAgICBsYXlvdXQgPSB0aGlzLmN5LmxheW91dCh7CiAgICAgICAgICBuYW1lOiBuZXdWYWwsCiAgICAgICAgICBmaXQ6IHRydWUsCiAgICAgICAgICBwb3NpdGlvbnM6IHBvc2l0aW9ucwogICAgICAgIH0pOyAvL+iLpeS7peWQjuaBouWkjeeahOW4g+WxgOS4reaWsOWinuminOiJsuOAgeWkp+Wwj+etie+8jOWPr+iDvemcgOimgeS4uuWinuWKoOeahOmDqOWIhua4suafk+WGheWuueaWsOWGmeS7o+eggQogICAgICAgIC8vY29uc29sZS5sb2coInJlc2V0IGRvbmUiKQogICAgICB9IGVsc2UgaWYgKG5ld1ZhbCA9PT0gJ2QzLWZvcmNlJykgewogICAgICAgIHZhciBkM19vcHRpb25zID0gewogICAgICAgICAgbmFtZTogJ2QzLWZvcmNlJywKICAgICAgICAgIGFuaW1hdGU6IHRydWUsCiAgICAgICAgICBmaXQ6IHRydWUsCiAgICAgICAgICAvL+mAguW6lHZpZXdwb3J0CiAgICAgICAgICBmaXhlZEFmdGVyRHJhZ2dpbmc6IGZhbHNlLAogICAgICAgICAgbGlua0lkOiBmdW5jdGlvbiBpZChkKSB7CiAgICAgICAgICAgIHJldHVybiBkLmlkOwogICAgICAgICAgfSwKICAgICAgICAgIGxpbmtEaXN0YW5jZTogMTAwMCwKICAgICAgICAgIG1hbnlCb2R5U3RyZW5ndGg6IC0xMDAwMCwKICAgICAgICAgIHJlYWR5OiBmdW5jdGlvbiByZWFkeSgpIHt9LAogICAgICAgICAgc3RvcDogZnVuY3Rpb24gc3RvcCgpIHt9LAogICAgICAgICAgdGljazogZnVuY3Rpb24gdGljayhwcm9ncmVzcykgey8vIGNvbnNvbGUubG9nKCdwcm9ncmVzcyAtICcsIHByb2dyZXNzKTsKICAgICAgICAgIH0sCiAgICAgICAgICByYW5kb21pemU6IGZhbHNlLAogICAgICAgICAgaW5maW5pdGU6IHRydWUKICAgICAgICB9OwogICAgICAgIGxheW91dCA9IHRoaXMuY3kubGF5b3V0KGQzX29wdGlvbnMpOwogICAgICB9IGVsc2UgewogICAgICAgIGxheW91dCA9IHRoaXMuY3kubGF5b3V0KHsKICAgICAgICAgIG5hbWU6IG5ld1ZhbCwKICAgICAgICAgIGZpdDogdHJ1ZQogICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGlzLmxheW91dCA9IGxheW91dDsKICAgICAgdGhpcy5sYXlvdXQucnVuKCk7CiAgICB9LAogICAgcmVsYXRpb25fbGFiZWxfZW5hYmxlZDogZnVuY3Rpb24gcmVsYXRpb25fbGFiZWxfZW5hYmxlZChuZXdWYWwsIG9sZFZhbCkgewogICAgICB2YXIgZWRnZXMgPSB0aGlzLmN5LmVkZ2VzKCk7CiAgICAgIHZhciBlbmFibGVkID0gbmV3VmFsOwoKICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihlZGdlcyksCiAgICAgICAgICBfc3RlcDI7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZWRnZSA9IF9zdGVwMi52YWx1ZTsKCiAgICAgICAgICBpZiAoZW5hYmxlZCAmJiBlZGdlLmhhc0NsYXNzKCdsYWJlbF9oaWRkZW4nKSkgewogICAgICAgICAgICBlZGdlLnJlbW92ZUNsYXNzKCdsYWJlbF9oaWRkZW4nKTsKICAgICAgICAgIH0gZWxzZSBpZiAoIWVuYWJsZWQgJiYgIWVkZ2UuaGFzQ2xhc3MoJ2xhYmVsX2hpZGRlbicpKSB7CiAgICAgICAgICAgIGVkZ2UuYWRkQ2xhc3MoJ2xhYmVsX2hpZGRlbicpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgIH0KICAgIH0sCiAgICBmb250X3NpemU6IGZ1bmN0aW9uIGZvbnRfc2l6ZShuZXdWYWwsIG9sZFZhbCkgewogICAgICAvLyBsZXQgZGVmYXVsdFNpemUgPSAnMjVweCc7Ly/pu5jorqTlgLzvvIwyNXB45piv55yLd29ya3NwYWNl5om+5Yiw55qECiAgICAgIGlmIChuZXdWYWwgPT09ICcnKSB7CiAgICAgICAgdGhpcy5zZXROb2RlRm9udFNpemUoJycpOyAvL+WQjOatpeaUueWPmHdvcmtzcGFjZeS4reeahG5vZGVOb2RlRm9udFNpemUKICAgICAgICAvL0N5dG9zY2FwZUtH5Lit5Zyo55uR5ZCs5Yiwd29ya3NwYWNl5Litbm9kZUZvbnRTaXpl5Yia5Y+Y5ZueJyfml7YKICAgICAgICAvL+S8muagueaNruiKgueCueWkp+Wwj+WSjOWtl+aVsOmHjeaWsOa4suafk+WQhOS4quiKgueCueeahOWtl+S9k+Wkp+Wwj++8jOaJgOS7peS4jeiDveeUqOe7n+S4gOm7mOiupOWAvAogICAgICAgIC8v5q2k5aSE5LuA5LmI5Lmf5LiN6ZyA6KaB5YGa77yM5Zug5Li6Q3l0b3NjYXBlS0fph4zlgZrkuoYKCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgc2l6ZSA9IE51bWJlcihuZXdWYWwpOwoKICAgICAgaWYgKCFpc05hTihzaXplKSkgewogICAgICAgIHRoaXMuc2V0Tm9kZUZvbnRTaXplKG5ld1ZhbCk7IC8v5ZCM5q2l5pS55Y+Yd29ya3NwYWNl5Lit55qEbm9kZU5vZGVGb250U2l6ZQoKICAgICAgICBzaXplID0gcGFyc2VJbnQoc2l6ZSk7CgogICAgICAgIHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5jeS5ub2RlcygpKSwKICAgICAgICAgICAgX3N0ZXAzOwoKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIG5vZGUgPSBfc3RlcDMudmFsdWU7CiAgICAgICAgICAgIG5vZGUuc3R5bGUoJ2ZvbnQtc2l6ZScsIHNpemUgKyAncHgnKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvcjMuZShlcnIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBfaXRlcmF0b3IzLmYoKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKG5ld1ZhbCAhPT0gJycpIHsKICAgICAgICAgIHRoaXMuaW5mb3JtTXNnKCdlcnJvcicsICfor7fovpPlhaXmlbDlrZcnKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuc2V0Tm9kZUZvbnRTaXplKCcnKTsgLy/lkIzmraXmlLnlj5h3b3Jrc3BhY2XkuK3nmoRub2RlTm9kZUZvbnRTaXplCiAgICAgICAgLy9DeXRvc2NhcGVLR+S4reWcqOebkeWQrOWIsHdvcmtzcGFjZeS4rW5vZGVGb250U2l6ZeWImuWPmOWbnicn5pe2CiAgICAgICAgLy/kvJrmoLnmja7oioLngrnlpKflsI/lkozlrZfmlbDph43mlrDmuLLmn5PlkITkuKroioLngrnnmoTlrZfkvZPlpKflsI/vvIzmiYDku6XkuI3og73nlKjnu5/kuIDpu5jorqTlgLwKICAgICAgICAvL+atpOWkhOS7gOS5iOS5n+S4jemcgOimgeWBmu+8jOWboOS4ukN5dG9zY2FwZUtH6YeM5YGa5LqGCiAgICAgIH0KICAgIH0sCiAgICBub2RlX3JhZGl1czogZnVuY3Rpb24gbm9kZV9yYWRpdXMobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgaWYgKG5ld1ZhbCA9PT0gJycpIHsKICAgICAgICB0aGlzLnNldE5vZGVSYWRpdXMoJycpOyAvL+WQjOatpeaUueWPmHdvcmtzcGFjZeS4reeahG5vZGVSYWRpdXMKCiAgICAgICAgdmFyIF9pdGVyYXRvcjQgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLmN5Lm5vZGVzKCkpLAogICAgICAgICAgICBfc3RlcDQ7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKF9pdGVyYXRvcjQucygpOyAhKF9zdGVwNCA9IF9pdGVyYXRvcjQubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgbm9kZSA9IF9zdGVwNC52YWx1ZTsKICAgICAgICAgICAgbm9kZS5yZW1vdmVTdHlsZSgnd2lkdGgnKTsKICAgICAgICAgICAgbm9kZS5yZW1vdmVTdHlsZSgnaGVpZ2h0Jyk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3I0LmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yNC5mKCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciByYWRpdXMgPSBOdW1iZXIobmV3VmFsKTsKCiAgICAgIGlmICghaXNOYU4ocmFkaXVzKSkgewogICAgICAgIHJhZGl1cyA9IHBhcnNlSW50KHJhZGl1cyk7CiAgICAgICAgdmFyIHJlYWxSYWRpdXMgPSByYWRpdXMgKiAyOwogICAgICAgIHRoaXMuc2V0Tm9kZVJhZGl1cyhyZWFsUmFkaXVzICsgIiIpOyAvL+WQjOatpeaUueWPmHdvcmtzcGFjZeS4reeahG5vZGVSYWRpdXMKCiAgICAgICAgdmFyIF9pdGVyYXRvcjUgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLmN5Lm5vZGVzKCkpLAogICAgICAgICAgICBfc3RlcDU7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKF9pdGVyYXRvcjUucygpOyAhKF9zdGVwNSA9IF9pdGVyYXRvcjUubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgX25vZGUyID0gX3N0ZXA1LnZhbHVlOwoKICAgICAgICAgICAgLy/mmK/kuI3mmK/opoHmlLnmiJDnrYnmr5TkvovmianlpKfvvJ8KICAgICAgICAgICAgX25vZGUyLnN0eWxlKCd3aWR0aCcsIHJlYWxSYWRpdXMgKyAncHgnKTsKCiAgICAgICAgICAgIF9ub2RlMi5zdHlsZSgnaGVpZ2h0JywgcmVhbFJhZGl1cyArICdweCcpOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2l0ZXJhdG9yNS5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvcjUuZigpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNldE5vZGVSYWRpdXMoJycpOyAvL+WQjOatpeaUueWPmHdvcmtzcGFjZeS4reeahG5vZGVSYWRpdXMKCiAgICAgICAgaWYgKG5ld1ZhbCAhPT0gJycpIHsKICAgICAgICAgIHRoaXMuaW5mb3JtTXNnKCdlcnJvcicsICfor7fovpPlhaXmlbDlrZcnKTsKICAgICAgICB9CgogICAgICAgIHZhciBfaXRlcmF0b3I2ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5jeS5ub2RlcygpKSwKICAgICAgICAgICAgX3N0ZXA2OwoKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3I2LnMoKTsgIShfc3RlcDYgPSBfaXRlcmF0b3I2Lm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIF9ub2RlMyA9IF9zdGVwNi52YWx1ZTsKCiAgICAgICAgICAgIF9ub2RlMy5yZW1vdmVTdHlsZSgnd2lkdGgnKTsKCiAgICAgICAgICAgIF9ub2RlMy5yZW1vdmVTdHlsZSgnaGVpZ2h0Jyk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3I2LmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yNi5mKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBTdGF0ZSh7CiAgICBjeTogZnVuY3Rpb24gY3koc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLndvcmtzcGFjZS5jeTsKICAgIH0sCiAgICBzdGF0aXN0aWNfZGF0YV9jaGFuZ2U6IGZ1bmN0aW9uIHN0YXRpc3RpY19kYXRhX2NoYW5nZShzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUud29ya3NwYWNlLnN0YXRpc3RpY19kYXRhX2NoYW5nZTsKICAgIH0sCiAgICBub2RlVHlwZTogZnVuY3Rpb24gbm9kZVR5cGUoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLndvcmtzcGFjZS5ub2RlVHlwZTsKICAgIH0sCiAgICBlZGdlVHlwZTogZnVuY3Rpb24gZWRnZVR5cGUoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLndvcmtzcGFjZS5lZGdlVHlwZTsKICAgIH0sCiAgICBsYXlvdXRUeXBlOiBmdW5jdGlvbiBsYXlvdXRUeXBlKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS53b3Jrc3BhY2UubGF5b3V0VHlwZTsKICAgIH0sCiAgICBlbGVtZW50czogZnVuY3Rpb24gZWxlbWVudHMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLndvcmtzcGFjZS5lbGVtZW50czsKICAgIH0sCiAgICBwcm9qZWN0X2xlZnQ6IGZ1bmN0aW9uIHByb2plY3RfbGVmdChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUucHJvamVjdF9sZWZ0OwogICAgfQogIH0pKSwge30sIHsKICAgIG5vZGVfY2hlY2tMaXN0X2Rpc2FibGVkOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHJldHVybiAhdGhpcy5maWx0ZXJfbm9kZV9jaGVja2VkOwogICAgICB9CiAgICB9LAogICAgZWRnZV9jaGVja0xpc3RfZGlzYWJsZWQ6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgcmV0dXJuICF0aGlzLmZpbHRlcl9lZGdlX2NoZWNrZWQ7CiAgICAgIH0KICAgIH0KICB9KSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcE11dGF0aW9ucyhbJ3NldEpzb25TcmNQYXRoJywgJ3NldFNlQ3VycmVudFNlYXJjaFBhcmFtcycsICdzZXRDdXJyZW50U2VhcmNoUmVzdWx0JywgJ3NldE5vZGVSYWRpdXMnLCAnc2V0Tm9kZUZvbnRTaXplJywgJ3NldFByb2plY3QnLCAnY2hhbmdlU2hvd1FBUGFuZWwnLCAnc2V0V2hvbGVQcm9qZWN0J10pKSwge30sIHsKICAgIGNoYW5nZUVkaXRCYXJTdGF0ZTogZnVuY3Rpb24gY2hhbmdlRWRpdEJhclN0YXRlKCkgewogICAgICB0aGlzLnNob3dFZGl0QmFyID0gIXRoaXMuc2hvd0VkaXRCYXI7CiAgICB9LAogICAgb3BlbjogZnVuY3Rpb24gb3BlbigpIHsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiY2hvb3NlLWZpbGUiKVswXS5jbGljaygpOwogICAgfSwKICAgIGdldEZpbGVQYXRoOiBmdW5jdGlvbiBnZXRGaWxlUGF0aCgpIHsKICAgICAgLy/ojrflj5bor7vlj5bmiJHmlofku7bnmoRGaWxl5a+56LGhCiAgICAgIHZhciBzZWxlY3RlZEZpbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJjaG9vc2UtZmlsZSIpWzBdLmZpbGVzWzBdOwogICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsgLy/ov5nmmK/moLjlv4Ms6K+75Y+W5pON5L2c5bCx5piv55Sx5a6D5a6M5oiQLgoKICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoc2VsZWN0ZWRGaWxlKTsKICAgICAgcmVhZGVyLnRoYXQgPSB0aGlzOwoKICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAvL+W9k+ivu+WPluWujOaIkOWQjuWbnuiwg+i/meS4quWHveaVsCznhLblkI7mraTml7bmlofku7bnmoTlhoXlrrnlrZjlgqjliLDkuoZ0aGlzLnJlc3VsdOS4rSznm7TmjqXmk43kvZzljbPlj68KICAgICAgICB0aGlzLnRoYXQuc2V0SnNvblNyY1BhdGgodGhpcy5yZXN1bHQpOwogICAgICB9OwogICAgfSwKICAgIHNhdmU6IGZ1bmN0aW9uIHNhdmUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZGF0YSA9IHt9OyAvLyDmiorkuIvpnaLov5nmrrXojrflvpflvoXkv53lrZjmlbDmja7nmoTmlrnms5XmlLnmiJDvvJrlkIjlubYgLi4udGhpcy5nZXREYXRhSnNvbk9iamVjdCgpIOWSjHN0YXRlLnByb2plY3RfbGVmdAoKICAgICAgdmFyIGdyYXBoRGF0YSA9IHRoaXMuZ2V0RGF0YUpzb25PYmplY3QoKTsKICAgICAgZGF0YSA9IHsKICAgICAgICBub2RlczogZ3JhcGhEYXRhLm5vZGVzLmNvbmNhdCh0aGlzLnByb2plY3RfbGVmdC5ub2RlcyksCiAgICAgICAgZWRnZXM6IGdyYXBoRGF0YS5lZGdlcy5jb25jYXQodGhpcy5wcm9qZWN0X2xlZnQuZWRnZXMpCiAgICAgIH07CiAgICAgIGRhdGEgPSB0aGlzLmdldENsZWFuRGF0YShkYXRhKTsgLy8gZm9yIChsZXQgbm9kZSBvZiBkYXRhLm5vZGVzKXsKICAgICAgLy8gICAgIGxldCB0ZW1wX25vZGVzID0gdGhpcy5jeS5ub2RlcygpOwogICAgICAvLyAgICAgZm9yIChsZXQgdGVtcF9ub2RlIG9mIHRlbXBfbm9kZXMpewogICAgICAvLyAgICAgICAgIGlmICh0ZW1wX25vZGUuZGF0YSgnaWQnKSA9PT0gbm9kZS5kYXRhLmlkKXsKICAgICAgLy8gICAgICAgICAgICAgbm9kZS5kYXRhLnR5cGVzZXQgPSB0ZW1wX25vZGUuZGF0YSgndHlwZXNldCcpOwogICAgICAvLyAgICAgICAgICAgICBicmVhazsKICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICB9CiAgICAgIC8vIH0KCiAgICAgIGNvbnNvbGUubG9nKCLopoHkv53lrZjnmoTmlbDmja7vvJoiLCBkYXRhKTsKICAgICAgdmFyIGxvYWRpbmcgPSB0aGlzLiRsb2FkaW5nKHsKICAgICAgICBsb2NrOiB0cnVlLAogICAgICAgIHRleHQ6ICcuLi7kv53lrZjkuK0uLi4nLAogICAgICAgIHNwaW5uZXI6ICdlbC1pY29uLWxvYWRpbmcnLAogICAgICAgIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSwgMjU1LDI1NSwgMC44KScKICAgICAgfSk7CiAgICAgIGlucHV0S0coZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICBfdGhpcy5zZXRXaG9sZVByb2plY3QoZGF0YSk7CgogICAgICAgICAgX3RoaXMuc2V0UHJvamVjdChKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGdyYXBoRGF0YSkpKTsKCiAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfkv53lrZjmiJDlip8nKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S/neWtmOWksei0pScpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CgogICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKCfnvZHnu5zplJnor6/miJbmnI3liqHlmajplJnor68nKTsKICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICB9KTsKICAgIH0sCiAgICBjaGFuZ2VFeHBvcnRTdGF0ZTogZnVuY3Rpb24gY2hhbmdlRXhwb3J0U3RhdGUoKSB7CiAgICAgIHRoaXMuc2hvd0V4cG9ydE9wcyA9ICF0aGlzLnNob3dFeHBvcnRPcHM7CiAgICB9LAoKICAgIC8qKgogICAgICog5a+85Ye65YWo5bGA5Zu+54mHLgogICAgICogb3B0aW9uczogVGhlIGV4cG9ydCBvcHRpb25zLgogICAgIG91dHB1dO+8miBXaGV0aGVyIHRoZSBvdXRwdXQgc2hvdWxkIGJlICdiYXNlNjR1cmknIChkZWZhdWx0KSwgJ2Jhc2U2NCcsICdibG9iJywgb3IgJ2Jsb2ItcHJvbWlzZScgKGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBibG9iIGlzIHJldHVybmVkKS4KICAgICBiZzogVGhlIGJhY2tncm91bmQgY29sb3VyIG9mIHRoZSBpbWFnZSAodHJhbnNwYXJlbnQgYnkgZGVmYXVsdCkuCiAgICAgZnVsbDogV2hldGhlciB0byBleHBvcnQgdGhlIGN1cnJlbnQgdmlld3BvcnQgdmlldyAoZmFsc2UsIGRlZmF1bHQpIG9yIHRoZSBlbnRpcmUgZ3JhcGggKHRydWUpLgogICAgIHNjYWxlOiBUaGlzIHZhbHVlIHNwZWNpZmllcyBhIHBvc2l0aXZlIG51bWJlciB0aGF0IHNjYWxlcyB0aGUgc2l6ZSBvZiB0aGUgcmVzdWx0YW50IGltYWdlLgogICAgIG1heFdpZHRoOiBTcGVjaWZpZXMgdGhlIHNjYWxlIGF1dG9tYXRpY2FsbHkgaW4gY29tYmluYXRpb24gd2l0aCBtYXhIZWlnaHQgc3VjaCB0aGF0IHRoZSByZXN1bHRhbnQgaW1hZ2UgaXMgbm8gd2lkZXIgdGhhbiBtYXhXaWR0aC4KICAgICBtYXhIZWlnaHQ6IFNwZWNpZmllcyB0aGUgc2NhbGUgYXV0b21hdGljYWxseSBpbiBjb21iaW5hdGlvbiB3aXRoIG1heFdpZHRoIHN1Y2ggdGhhdCB0aGUgcmVzdWx0YW50IGltYWdlIGlzIG5vIHRhbGxlciB0aGFuIG1heEhlaWdodAogICAgICovCiAgICBleHBvcnRQbmc6IGZ1bmN0aW9uIGV4cG9ydFBuZygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuato+WcqOWvvOWHuuWbvueJhy4uLiIpOwogICAgICB2YXIgYmxvYiA9IHRoaXMuY3kucG5nKHsKICAgICAgICBvdXRwdXQ6ICdibG9iLXByb21pc2UnLAogICAgICAgIGJnOiAnd2hpdGUnLAogICAgICAgIGZ1bGw6IHRydWUsCiAgICAgICAgc2NhbGU6IDQKICAgICAgfSk7CiAgICAgIGJsb2IudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgLy/liJvlu7rkuIvovb3pk77mjqUKICAgICAgICB2YXIgYUxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgYUxpbmsuZG93bmxvYWQgPSBfdGhpczIuZ2VuZXJhdGVGaWxlTmFtZSgpICsgJy5wbmcnOwogICAgICAgIHZhciB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChyZXMpOwogICAgICAgIGFMaW5rLmhyZWYgPSB1cmw7IC8v5Yib5bu644CB5YiG6YWN5bm26Kem5Y+R54K55Ye75LqL5Lu2CgogICAgICAgIHZhciBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgiTW91c2VFdmVudHMiKTsKICAgICAgICBldnQuaW5pdEV2ZW50KCJjbGljayIsIHRydWUsIHRydWUpOwogICAgICAgIGFMaW5rLmRpc3BhdGNoRXZlbnQoZXZ0KTsgLy8g6YeK5pS+5o6JYmxvYuWvueixoQoKICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coIkVycm9yIG9jY3VyZWQ6ICIsIGVycik7CgogICAgICAgIGlmIChfdGhpczIuY3kuZWxlbWVudHMoKS5sZW5ndGggPT09IDApIHsKICAgICAgICAgIF90aGlzMi4kbWVzc2FnZS5lcnJvcigi55+l6K+G5Zu+6LCx5bey57uP56m65ZWm77yM5a+85LiN5Ye65Lic6KW/55qE5ZGAIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgLyoqCiAgICAgKiDlr7nosaHmi7fotJ0KICAgICAqIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSnmiJHku6zkuIDoiKznlKjmnaXmt7Hmi7fotJ0KICAgICDkvYbkuI3mmK/lrozlhajmt7Hmi7fotJ3vvIzmnInku6XkuIvnibnngrnvvJoKICAgICAx44CB5aaC5p6cb2Jq6YeM6Z2i5pyJ5pe26Ze05a+56LGh77yM5YiZSlNPTi5zdHJpbmdpZnnlkI7lho1KU09OLnBhcnNl55qE57uT5p6c77yM5pe26Ze05bCG5Y+q5piv5a2X56ym5Liy55qE5b2i5byP44CC6ICM5LiN5piv5pe26Ze05a+56LGh77ybCiAgICAgMuOAgeWmguaenG9iaumHjOaciVJlZ0V4cOOAgUVycm9y5a+56LGh77yM5YiZ5bqP5YiX5YyW55qE57uT5p6c5bCG5Y+q5b6X5Yiw56m65a+56LGh77ybCiAgICAgM+OAgeWmguaenG9iaumHjOacieWHveaVsO+8jHVuZGVmaW5lZO+8jOWImeW6j+WIl+WMlueahOe7k+aenOS8muaKiuWHveaVsOaIliB1bmRlZmluZWTkuKLlpLHvvJsKICAgICA044CB5aaC5p6cb2Jq6YeM5pyJTmFO44CBSW5maW5pdHnlkowtSW5maW5pdHnvvIzliJnluo/liJfljJbnmoTnu5PmnpzkvJrlj5jmiJBudWxsCiAgICAgNeOAgUpTT04uc3RyaW5naWZ5KCnlj6rog73luo/liJfljJblr7nosaHnmoTlj6/mnprkuL7nmoToh6rmnInlsZ7mgKfvvIzkvovlpoIg5aaC5p6cb2Jq5Lit55qE5a+56LGh5piv5pyJ5p6E6YCg5Ye95pWw55Sf5oiQ55qE77yMIOWImeS9v+eUqEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSnmt7Hmi7fotJ3lkI7vvIzkvJrkuKLlvIPlr7nosaHnmoRjb25zdHJ1Y3Rvcu+8mwogICAgIDbjgIHlpoLmnpzlr7nosaHkuK3lrZjlnKjlvqrnjq/lvJXnlKjnmoTmg4XlhrXkuZ/ml6Dms5XmraPnoa7lrp7njrDmt7Hmi7fotJ3vvJsKICAgICAg5rOo77ya55Sx5LqO5YmN5ZCO56uv5pWw5o2u5qC85byP5LiN57uf5LiA77yM6L+Z6YeM5a+55pWw5o2u5qC85byP5YGa5LqG6L2s5YyW44CCCiAgICAg5pel5ZCO5YmNL+WQjuerr+acieS/ruaUueaXtui/memHjOmDveimgeaUue+8gQogICAgICovCiAgICBnZXREYXRhSnNvbk9iamVjdDogZnVuY3Rpb24gZ2V0RGF0YUpzb25PYmplY3QoKSB7CiAgICAgIHZhciBlbGVzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmN5Lmpzb24oKS5lbGVtZW50cykpOyAvL+WFtuWunua3seaLt+i0neWPr+iDveayoeWVpeaEj+S5ie+8jOWPquaYr+WNlee6r+ebtOinieS4iuaDs+eUqOS4gOeUqCgq4pW54pa94pW5KikKCiAgICAgIHZhciBvYmogPSB7CiAgICAgICAgImVkZ2VzIjogW10sCiAgICAgICAgIm5vZGVzIjogW10KICAgICAgfTsKCiAgICAgIGlmIChKU09OLnN0cmluZ2lmeShlbGVzKSAhPT0gJ3t9JykgewogICAgICAgIGlmIChlbGVzLmVkZ2VzICE9PSB1bmRlZmluZWQgJiYgZWxlcy5lZGdlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBlbGVzLmVkZ2VzLmZvckVhY2goZnVuY3Rpb24gKHZhbCkgewogICAgICAgICAgICBvYmouZWRnZXMucHVzaCh7CiAgICAgICAgICAgICAgZGF0YTogdmFsLmRhdGEKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGlmIChlbGVzLm5vZGVzICE9PSB1bmRlZmluZWQgJiYgZWxlcy5ub2Rlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBlbGVzLm5vZGVzLmZvckVhY2goZnVuY3Rpb24gKHZhbCkgewogICAgICAgICAgICBvYmoubm9kZXMucHVzaCh7CiAgICAgICAgICAgICAgZGF0YTogdmFsLmRhdGEsCiAgICAgICAgICAgICAgcG9zaXRpb246IHZhbC5wb3NpdGlvbgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG9iajsKICAgIH0sCiAgICBnZXRDbGVhbkRhdGE6IGZ1bmN0aW9uIGdldENsZWFuRGF0YShlbGVzKSB7CiAgICAgIHZhciBvYmogPSB7CiAgICAgICAgImVkZ2VzIjogW10sCiAgICAgICAgIm5vZGVzIjogW10KICAgICAgfTsKCiAgICAgIGlmIChKU09OLnN0cmluZ2lmeShlbGVzKSAhPT0gJ3t9JykgewogICAgICAgIGlmIChlbGVzLmVkZ2VzICE9PSB1bmRlZmluZWQgJiYgZWxlcy5lZGdlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBlbGVzLmVkZ2VzLmZvckVhY2goZnVuY3Rpb24gKHZhbCkgewogICAgICAgICAgICBvYmouZWRnZXMucHVzaCh7CiAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgaWQ6IHZhbC5kYXRhLmlkLAogICAgICAgICAgICAgICAgdHlwZTogdmFsLmRhdGEudHlwZSwKICAgICAgICAgICAgICAgIHJlbGF0aW9uOiB2YWwuZGF0YS5yZWxhdGlvbiwKICAgICAgICAgICAgICAgIHNvdXJjZTogdmFsLmRhdGEuc291cmNlLAogICAgICAgICAgICAgICAgdGFyZ2V0OiB2YWwuZGF0YS50YXJnZXQKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoZWxlcy5ub2RlcyAhPT0gdW5kZWZpbmVkICYmIGVsZXMubm9kZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgZWxlcy5ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgICAgb2JqLm5vZGVzLnB1c2goewogICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgIGlkOiB2YWwuZGF0YS5pZCwKICAgICAgICAgICAgICAgIHR5cGU6IHZhbC5kYXRhLnR5cGUsCiAgICAgICAgICAgICAgICBuYW1lOiB2YWwuZGF0YS5uYW1lLAogICAgICAgICAgICAgICAgcHJvcGVydHk6IHZhbC5kYXRhLnByb3BlcnR5CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBwb3NpdGlvbjogdmFsLnBvc2l0aW9uCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gb2JqOwogICAgfSwKICAgIGV4cG9ydEpzb246IGZ1bmN0aW9uIGV4cG9ydEpzb24oKSB7CiAgICAgIHRoaXMuJG1lc3NhZ2UoIuato+WcqOWvvOWHumpzb24uLi4iKTsgLy/mnInnqbrkuZ/lj6/ku6XmlLnmiJBwcm9taXNl5byP55qECgogICAgICB2YXIgZGF0YSA9IHRoaXMuZ2V0RGF0YUpzb25PYmplY3QoKTsKICAgICAgdmFyIGZpbGVuYW1lID0gdGhpcy5nZW5lcmF0ZUZpbGVOYW1lKCkgKyAnLmpzb24nOwoKICAgICAgaWYgKF90eXBlb2YoZGF0YSkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgZGF0YSA9IEpTT04uc3RyaW5naWZ5KGRhdGEsIHVuZGVmaW5lZCwgNCk7CiAgICAgIH0gLy8g6KaB5Yib5bu65LiA5LiqIGJsb2Ig5pWw5o2uCgoKICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbZGF0YV0sIHsKICAgICAgICB0eXBlOiAndGV4dC9qc29uJwogICAgICB9KSwKICAgICAgICAgIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgIGEuZG93bmxvYWQgPSBmaWxlbmFtZTsgLy8g5bCGYmxvYui9rOaNouS4uuWcsOWdgAogICAgICAvLyDliJvlu7ogVVJMIOeahCBCbG9iIOWvueixoQoKICAgICAgdmFyIHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICBhLmhyZWYgPSB1cmw7IC8vIOagh+etviBkYXRhLSDltYzlhaXoh6rlrprkuYnlsZ7mgKcgIOWxj+iUveWQjuS5n+WPr+ato+W4uOS4i+i9vQoKICAgICAgYS5kYXRhc2V0LmRvd25sb2FkdXJsID0gWyd0ZXh0L2pzb24nLCBhLmRvd25sb2FkLCBhLmhyZWZdLmpvaW4oJzonKTsgLy8g5re75Yqg6byg5qCH5LqL5Lu25bm25ZCR5LiA5Liq5oyH5a6a55qE5LqL5Lu255uu5qCH5rS+5Y+RCgogICAgICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdNb3VzZUV2ZW50cycpOwogICAgICBlLmluaXRNb3VzZUV2ZW50KCdjbGljaycsIHRydWUsIGZhbHNlLCB3aW5kb3csIDAsIDAsIDAsIDAsIDAsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCAwLCBudWxsKTsKICAgICAgYS5kaXNwYXRjaEV2ZW50KGUpOyAvLyDph4rmlL7mjolibG9i5a+56LGhCgogICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOwogICAgfSwKICAgIGdlbmVyYXRlRmlsZU5hbWU6IGZ1bmN0aW9uIGdlbmVyYXRlRmlsZU5hbWUoKSB7CiAgICAgIHZhciBuYW1lID0gIiI7CgogICAgICB0cnkgewogICAgICAgIG5hbWUgPSB0aGlzLmN1cnJlbnRfcHJvamVjdC5wcm9qZWN0X25hbWU7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjb25zb2xlLmxvZygiRXJyb3Igb2NjdXJzOiIgKyBlKTsKICAgICAgICBjb25zb2xlLmxvZygi5Y+v6IO95pyq6L+e5o6l5YiwU2VydmVyIik7CiAgICAgICAgbmFtZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICB9CgogICAgICByZXR1cm4gbmFtZTsKICAgIH0sCgogICAgLyoqCiAgICAgKiDlr7zlh7rlsYDpg6jlm77niYcu5pqC5pe25LiN55SoCiAgICAgKi8KICAgIGV4cG9ydEN1dFBuZzogZnVuY3Rpb24gZXhwb3J0Q3V0UG5nKCkgewogICAgICB2YXIgdW5zZWxlY3RlZFZlcnRleGVzID0gdGhpcy5jeS5lbGVtZW50cygnbm9kZTp1bnNlbGVjdGVkJyk7CgogICAgICBpZiAoIXVuc2VsZWN0ZWRWZXJ0ZXhlcyB8fCAwID09PSB1bnNlbGVjdGVkVmVydGV4ZXMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5leHBvcnRQbmcoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgcmVtb3ZlID0gdW5zZWxlY3RlZFZlcnRleGVzLnJlbW92ZSgpOyAvLyDkv53nlZnliKDpmaTlhoXlrrkKCiAgICAgICAgdGhpcy5leHBvcnRQbmcoKTsKICAgICAgICByZW1vdmUgJiYgcmVtb3ZlLmxlbmd0aCAmJiByZW1vdmUucmVzdG9yZSgpOyAvLyDmgaLlpI3liKDpmaTlhoXlrrkKICAgICAgfQogICAgfSwKCiAgICAvKioKICAgICAqIOS/neWtmOi+k+WFpeeahOaWh+acrOW5tuino+aekOaIkOWbvgogICAgICovCiAgICBzYXZlQW5kQW5hbHlzZTogZnVuY3Rpb24gc2F2ZUFuZEFuYWx5c2UoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgcGlkOiB0aGlzLmN1cnJlbnRfcGlkLAogICAgICAgIHRleHQ6IHRoaXMud29ya3NwYWNlX3RleHQKICAgICAgfTsKICAgICAgdGhpcy5wb3N0VGV4dChkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogJ+S/neWtmOaWh+acrOaIkOWKnycsCiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICBkdXJhdGlvbjogMTUwMAogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgX3RoaXMzLiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICfkv53lrZjmlofmnKzlpLHotKUnLAogICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgIGR1cmF0aW9uOiAxNTAwCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKCiAgICAvKioKICAgICAqIOiOt+WPlue7n+iuoeaVsOaNru+8jOWNs+e7mSBkYXRhIOS4reeahCBlbnRpdGllc19kYXRhIOWSjCByZWxhaW9uc19kYXRhIOi1i+WAvAogICAgICovCiAgICBnZXRfc3RhdGlzdGljX2RhdGE6IGZ1bmN0aW9uIGdldF9zdGF0aXN0aWNfZGF0YSgpIHsKICAgICAgdmFyIGRhdGEgPSB0aGlzLmdldERhdGFKc29uT2JqZWN0KCk7CiAgICAgIHZhciBub2RlcyA9IGRhdGEubm9kZXMsCiAgICAgICAgICBlZGdlcyA9IGRhdGEuZWRnZXM7CiAgICAgIHZhciBFRGF0YSA9IHsKICAgICAgICBpbmRpdmlkdWFsOiAwLAogICAgICAgIG9yZ2FuaXphdGlvbjogMCwKICAgICAgICB0aGluZzogMCwKICAgICAgICBkZWZhdWx0OiAwLAogICAgICAgIHRvdGFsOiBub2Rlcy5sZW5ndGgKICAgICAgfTsKCiAgICAgIHZhciBfaXRlcmF0b3I3ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobm9kZXMpLAogICAgICAgICAgX3N0ZXA3OwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjcucygpOyAhKF9zdGVwNyA9IF9pdGVyYXRvcjcubigpKS5kb25lOykgewogICAgICAgICAgdmFyIG5vZGUgPSBfc3RlcDcudmFsdWU7CgogICAgICAgICAgaWYgKCEobm9kZS5kYXRhLnR5cGUgPT0gJ2luZGl2aWR1YWwnIHx8IG5vZGUuZGF0YS50eXBlID09ICdvcmdhbml6YXRpb24nIHx8IG5vZGUuZGF0YS50eXBlID09ICd0aGluZycpKSB7CiAgICAgICAgICAgIEVEYXRhWydkZWZhdWx0J10rKzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIEVEYXRhW25vZGUuZGF0YS50eXBlXSsrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yNy5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yNy5mKCk7CiAgICAgIH0KCiAgICAgIHZhciBSRGF0YSA9IHsKICAgICAgICBjb25uZWN0aW9uOiAwLAogICAgICAgIGluaGVyaXRhbmNlOiAwLAogICAgICAgIGRlZmF1bHQ6IDAsCiAgICAgICAgdG90YWw6IGVkZ2VzLmxlbmd0aAogICAgICB9OwoKICAgICAgdmFyIF9pdGVyYXRvcjggPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihlZGdlcyksCiAgICAgICAgICBfc3RlcDg7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yOC5zKCk7ICEoX3N0ZXA4ID0gX2l0ZXJhdG9yOC5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZWRnZSA9IF9zdGVwOC52YWx1ZTsKICAgICAgICAgIFJEYXRhW2VkZ2UuZGF0YS50eXBlXSsrOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yOC5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yOC5mKCk7CiAgICAgIH0KCiAgICAgIHRoaXMuZW50aXRpZXNfZGF0YSA9IFtFRGF0YV07CiAgICAgIHRoaXMucmVsYXRpb25zX2RhdGEgPSBbUkRhdGFdOwogICAgfSwKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v5q2k5aSE5Li65pCc57Si55u45YWz5Luj56CB5q61Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8vIGdldFNlYXJjaFR5cGUoc2VhcmNoX3R5cGUpIHsKICAgIC8vICAgICByZXR1cm4gc2VhcmNoX3R5cGUgPT09ICcxJyA/IHRoaXMuY3kubm9kZXMoKSA6IHRoaXMuY3kuZWRnZXMoKTsKICAgIC8vIH0sCiAgICAvLwogICAgLy8KICAgIC8vIGdldE5hbWUoc2VhcmNoX3R5cGUsIHZhbCkgewogICAgLy8gICAgIHJldHVybiBzZWFyY2hfdHlwZSA9PT0gJzEnID8gdmFsLmRhdGEoKS5uYW1lIDogdmFsLmRhdGEoKS5yZWxhdGlvbjsKICAgIC8vIH0sCiAgICAvLwogICAgLy8gc2V0U2VhcmNoUGFyYW1zKCkgewogICAgLy8gICAgIHRoaXMuY3VycmVudFNlYXJjaC5wYXJhbXMgPSB7CiAgICAvLyAgICAgICAgIHNlYXJjaF90ZXh0OiB0aGlzLnNlYXJjaF90ZXh0LAogICAgLy8gICAgICAgICBzZWFyY2hfdHlwZTogdGhpcy5zZWFyY2hfdHlwZSwKICAgIC8vICAgICAgICAgc2VsZWN0X3ZhbHVlOiB0aGlzLnNlbGVjdF92YWx1ZQogICAgLy8gICAgIH0KICAgIC8vIH0sCiAgICAvLwogICAgLy8gY2xlYXJTZWFyY2hDb250ZW50KCkgewogICAgLy8gICAgIHRoaXMuc2VhcmNoX3RleHQgPSAnJzsKICAgIC8vICAgICB0aGlzLnNlYXJjaF90eXBlID0gJyc7CiAgICAvLyAgICAgdGhpcy5zZWxlY3RfdmFsdWUgPSAnJzsKICAgIC8vICAgICB0aGlzLmN1cnJlbnRTZWFyY2ggPSB7CiAgICAvLyAgICAgICAgIHBhcmFtczoge30sCiAgICAvLyAgICAgICAgIHJlc3VsdDogW10KICAgIC8vICAgICB9OwogICAgLy8gfSwKICAgIGNoZWNrS2V5V29yZHM6IGZ1bmN0aW9uIGNoZWNrS2V5V29yZHModGV4dCkgewogICAgICB2YXIgbmFtZVZhbGlkID0gL1xTLzsKICAgICAgdmFyIGtleVdvcmRzID0gW107CiAgICAgIHRleHQuZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgLy/moKHpqozjgIHljrvph40KICAgICAgICBpZiAobmFtZVZhbGlkLnRlc3QodmFsKSkgewogICAgICAgICAgdmFyIGl0ZW0gPSB2YWwudHJpbSgpOwogICAgICAgICAgaWYgKCFrZXlXb3Jkcy5pbmNsdWRlcyhpdGVtKSkga2V5V29yZHMucHVzaChpdGVtKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4ga2V5V29yZHM7CiAgICB9LAogICAgc2F2ZVNlYXJjaExvZzogZnVuY3Rpb24gc2F2ZVNlYXJjaExvZyhrZXlXb3JkcywgbG9nKSB7CiAgICAgIC8v5re75Yqg5pCc57Si5pel5b+XCiAgICAgIGtleVdvcmRzLmZvckVhY2goZnVuY3Rpb24gKHZhbCkgewogICAgICAgIHZhciBpbmRleCA9IGxvZy5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBpdGVtID09PSB2YWw7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChpbmRleCA8IDApIHsKICAgICAgICAgIC8v5pu05paw5pel5b+X5L2N572uCiAgICAgICAgICBsb2cudW5zaGlmdCh2YWwpOyAvL+a3u+WKoOWcqOWktOmDqAogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHZhciBtYXhMZW4gPSB0aGlzLm1heF9sb2dfbGVuOwoKICAgICAgaWYgKGxvZy5sZW5ndGggPiBtYXhMZW4pIHsKICAgICAgICAvL+a4hemZpOWkmuS9meeahOaXqeacn+WOhuWPsuiusOW9lQogICAgICAgIGxvZy5zbGljZShtYXhMZW4sIGxvZy5sZW5ndGggLSBtYXhMZW4pOwogICAgICB9CiAgICB9LAogICAgc2VhcmNoTm9kZTogZnVuY3Rpb24gc2VhcmNoTm9kZSgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB2YXIga2V5V29yZHMgPSB0aGlzLmNoZWNrS2V5V29yZHModGhpcy5zZWFyY2hfbm9kZV90ZXh0KTsKICAgICAgdmFyIGNvbmRpdGlvbiA9IHRoaXMuc2VhcmNoX25vZGVfY29uZGl0aW9uOwogICAgICB0aGlzLnNlYXJjaF9ub2RlX3RleHQgPSBrZXlXb3JkczsgLy/oh6rliqjnroDljJbmkJzntKLmoYblhoXlrrkKCiAgICAgIGlmIChrZXlXb3Jkcy5sZW5ndGggPT09IDAgfHwgY29uZGl0aW9uLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHRoaXMuaW5mb3JtTXNnKCdlcnJvcicsICfor7fnoa7orqTmkJzntKLlhoXlrrnlkoznrZvpgInmnaHku7bpg73kuI3kuLrnqbrlk6YnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKCIoa2V5V29yZHMsIGNvbmRpdGlvbiwgbG9nKSBiZWZvcmUgc2F2ZUxvZyIsIGtleVdvcmRzLCBjb25kaXRpb24sIHRoaXMuc2VhcmNoX25vZGVfbG9nKTsgLy/lvIDlp4vkuIDmrKHmkJzntKIKCiAgICAgIHRoaXMuc2F2ZVNlYXJjaExvZyhrZXlXb3JkcywgdGhpcy5zZWFyY2hfbm9kZV9sb2cpOyAvL+S/neWtmOaQnOe0ouWOhuWPsgoKICAgICAgY29uc29sZS5sb2coIihrZXlXb3JkcywgY29uZGl0aW9uLCBsb2cpIGFmdGVyIHNhdmVMb2ciLCBrZXlXb3JkcywgY29uZGl0aW9uLCB0aGlzLnNlYXJjaF9ub2RlX2xvZyk7CiAgICAgIHZhciBieU5hbWUgPSBjb25kaXRpb24uaW5jbHVkZXMoJ25hbWUnKTsKICAgICAgdmFyIGJ5UmVsYXRpb24gPSBjb25kaXRpb24uaW5jbHVkZXMoJ3JlbGF0aW9uJyk7CiAgICAgIHZhciBieVByb3AgPSBjb25kaXRpb24uaW5jbHVkZXMoJ3Byb3BlcnR5Jyk7CiAgICAgIHZhciBub2RlcyA9IHRoaXMuY3kubm9kZXMoKTsKICAgICAgdmFyIGNvdW50ID0gMDsKICAgICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgaWYgKHZhbC5oYXNDbGFzcygnc2VhcmNoZWROb2RlJykpIHsKICAgICAgICAgIHZhbC5yZW1vdmVDbGFzcygnc2VhcmNoZWROb2RlJyk7CiAgICAgICAgfQoKICAgICAgICB2YXIgdmFsTmFtZSA9IHZhbC5kYXRhKCJuYW1lIik7CiAgICAgICAgdmFyIHZhbFByb3BzID0gdmFsLmRhdGEoInByb3BlcnR5Iik7CiAgICAgICAgdmFyIGVkZ2VzID0gdmFsLmNvbm5lY3RlZEVkZ2VzKCk7CiAgICAgICAgdmFyIGhpdCA9IGZhbHNlOwogICAgICAgIHZhciByZWxhSGl0OwogICAgICAgIHZhciBwcm9wSGl0OwoKICAgICAgICB2YXIgX2l0ZXJhdG9yOSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGtleVdvcmRzKSwKICAgICAgICAgICAgX3N0ZXA5OwoKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3I5LnMoKTsgIShfc3RlcDkgPSBfaXRlcmF0b3I5Lm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIGtleSA9IF9zdGVwOS52YWx1ZTsKCiAgICAgICAgICAgIGlmIChieU5hbWUgJiYgX3RoaXM0LmZ1enp5TWF0Y2godmFsTmFtZSwga2V5KSkgewogICAgICAgICAgICAgIGhpdCA9IHRydWU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChieVByb3ApIHsKICAgICAgICAgICAgICBwcm9wSGl0ID0gZmFsc2U7CgogICAgICAgICAgICAgIHZhciBfaXRlcmF0b3IxMCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHZhbFByb3BzKSwKICAgICAgICAgICAgICAgICAgX3N0ZXAxMDsKCiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMTAucygpOyAhKF9zdGVwMTAgPSBfaXRlcmF0b3IxMC5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX3N0ZXAxMC52YWx1ZTsKCiAgICAgICAgICAgICAgICAgIGlmIChfdGhpczQuZnV6enlNYXRjaChwcm9wLCBrZXkpKSB7CiAgICAgICAgICAgICAgICAgICAgcHJvcEhpdCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgIF9pdGVyYXRvcjEwLmUoZXJyKTsKICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgX2l0ZXJhdG9yMTAuZigpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKHByb3BIaXQpIHsKICAgICAgICAgICAgICAgIGhpdCA9IHRydWU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChieVJlbGF0aW9uKSB7CiAgICAgICAgICAgICAgcmVsYUhpdCA9IGZhbHNlOwoKICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yMTEgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihlZGdlcyksCiAgICAgICAgICAgICAgICAgIF9zdGVwMTE7CgogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjExLnMoKTsgIShfc3RlcDExID0gX2l0ZXJhdG9yMTEubigpKS5kb25lOykgewogICAgICAgICAgICAgICAgICB2YXIgZWRnZSA9IF9zdGVwMTEudmFsdWU7CiAgICAgICAgICAgICAgICAgIHZhciBlZGdlTmFtZSA9IGVkZ2UuZGF0YSgicmVsYXRpb24iKTsKCiAgICAgICAgICAgICAgICAgIGlmIChfdGhpczQuZnV6enlNYXRjaChlZGdlTmFtZSwga2V5KSkgewogICAgICAgICAgICAgICAgICAgIHJlbGFIaXQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3IxMS5lKGVycik7CiAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgIF9pdGVyYXRvcjExLmYoKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChyZWxhSGl0KSB7CiAgICAgICAgICAgICAgICBoaXQgPSB0cnVlOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3I5LmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yOS5mKCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoaGl0KSB7CiAgICAgICAgICBjb3VudCArPSAxOwogICAgICAgICAgdmFsLmFkZENsYXNzKCdzZWFyY2hlZE5vZGUnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmluZm9ybVJlc3VsdChjb3VudCA+IDAsICfmkJzntKLlrozmr5UnLCAn5pyq5om+5Yiw56ym5ZCI5p2h5Lu255qE57uT5p6cJyk7CiAgICAgIHRoaXMubm9kZV9zZWFyY2hlZCA9IHRydWU7CiAgICB9LAogICAgc2VhcmNoRWRnZTogZnVuY3Rpb24gc2VhcmNoRWRnZSgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB2YXIga2V5V29yZHMgPSB0aGlzLmNoZWNrS2V5V29yZHModGhpcy5zZWFyY2hfZWRnZV90ZXh0KTsKICAgICAgdmFyIGNvbmRpdGlvbiA9IHRoaXMuc2VhcmNoX2VkZ2VfY29uZGl0aW9uOwogICAgICB0aGlzLnNlYXJjaF9lZGdlX3RleHQgPSBrZXlXb3JkczsgLy/oh6rliqjnroDljJbmkJzntKLmoYblhoXlrrkKCiAgICAgIGlmIChrZXlXb3Jkcy5sZW5ndGggPT09IDAgfHwgY29uZGl0aW9uLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHRoaXMuaW5mb3JtTXNnKCdlcnJvcicsICfor7fnoa7orqTmkJzntKLlhoXlrrnlkoznrZvpgInmnaHku7bpg73kuI3kuLrnqbrlk6YnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy/lvIDlp4vkuIDmrKHmkJzntKIKCgogICAgICB0aGlzLnNhdmVTZWFyY2hMb2coa2V5V29yZHMsIHRoaXMuc2VhcmNoX2VkZ2VfbG9nKTsgLy/kv53lrZjmkJzntKLljoblj7IKCiAgICAgIHZhciBieU5hbWUgPSBjb25kaXRpb24uaW5jbHVkZXMoJ3JlbGF0aW9uJyk7CiAgICAgIHZhciBieVNvdXJjZSA9IGNvbmRpdGlvbi5pbmNsdWRlcygnc291cmNlJyk7CiAgICAgIHZhciBieVRhcmdldCA9IGNvbmRpdGlvbi5pbmNsdWRlcygndGFyZ2V0Jyk7CiAgICAgIHZhciBlZGdlcyA9IHRoaXMuY3kuZWRnZXMoKTsKICAgICAgdmFyIGNvdW50ID0gMDsKICAgICAgZWRnZXMuZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgaWYgKHZhbC5oYXNDbGFzcygnc2VhcmNoZWRFZGdlJykpIHsKICAgICAgICAgIHZhbC5yZW1vdmVDbGFzcygnc2VhcmNoZWRFZGdlJyk7CiAgICAgICAgfQoKICAgICAgICB2YXIgdmFsTmFtZSA9IHZhbC5kYXRhKCJyZWxhdGlvbiIpOwoKICAgICAgICB2YXIgdmFsU291cmNlID0gX3RoaXM1LmN5LiRpZCh2YWwuZGF0YSgic291cmNlIikpLmRhdGEoIm5hbWUiKTsKCiAgICAgICAgdmFyIHZhbFRhcmdldCA9IF90aGlzNS5jeS4kaWQodmFsLmRhdGEoInRhcmdldCIpKS5kYXRhKCJuYW1lIik7CgogICAgICAgIHZhciBoaXQgPSBmYWxzZTsKICAgICAgICB2YXIgbmFtZUhpdDsKICAgICAgICB2YXIgc0hpdDsKICAgICAgICB2YXIgdEhpdDsKCiAgICAgICAgdmFyIF9pdGVyYXRvcjEyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoa2V5V29yZHMpLAogICAgICAgICAgICBfc3RlcDEyOwoKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3IxMi5zKCk7ICEoX3N0ZXAxMiA9IF9pdGVyYXRvcjEyLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIGtleSA9IF9zdGVwMTIudmFsdWU7CgogICAgICAgICAgICBpZiAoYnlOYW1lICYmIF90aGlzNS5mdXp6eU1hdGNoKHZhbE5hbWUsIGtleSkgfHwgYnlTb3VyY2UgJiYgX3RoaXM1LmZ1enp5TWF0Y2godmFsU291cmNlLCBrZXkpIHx8IGJ5VGFyZ2V0ICYmIF90aGlzNS5mdXp6eU1hdGNoKHZhbFRhcmdldCwga2V5KSkgewogICAgICAgICAgICAgIGhpdCA9IHRydWU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvcjEyLmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yMTIuZigpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGhpdCkgewogICAgICAgICAgY291bnQgKz0gMTsKICAgICAgICAgIHZhbC5hZGRDbGFzcygnc2VhcmNoZWRFZGdlJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5pbmZvcm1SZXN1bHQoY291bnQgPiAwLCAn5pCc57Si5a6M5q+VJywgJ+acquaJvuWIsOespuWQiOadoeS7tueahOe7k+aenCcpOwogICAgICB0aGlzLmVkZ2Vfc2VhcmNoZWQgPSB0cnVlOwogICAgfSwKICAgIGluZm9ybVJlc3VsdDogZnVuY3Rpb24gaW5mb3JtUmVzdWx0KGlzU3VjY2Vzcywgc3VjY2Vzc19tc2csIGVycm9yX21zZykgewogICAgICBpZiAoaXNTdWNjZXNzKSB7CiAgICAgICAgdGhpcy5pbmZvcm1Nc2coJ3N1Y2Nlc3MnLCBzdWNjZXNzX21zZyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pbmZvcm1Nc2coJ2Vycm9yJywgZXJyb3JfbXNnKTsKICAgICAgfQogICAgfSwKICAgIGluZm9ybU1zZzogZnVuY3Rpb24gaW5mb3JtTXNnKHR5cGUsIG1zZykgewogICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICBtZXNzYWdlOiBtc2csCiAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICBkdXJhdGlvbjogMTUwMAogICAgICB9KTsKICAgIH0sCiAgICAvLyAvL+agueaNruWFt+S9k+aQnOe0ouadoeS7tui/mOmcgOi/m+ihjOS/ruaUuQogICAgLy8gc2VhcmNoKCkgewogICAgLy8gICAgIGxldCBmbGFnID0gdGhpcy5jaGVja1BhcmFtcygpOwogICAgLy8KICAgIC8vICAgICBpZiAoIWZsYWcpIHsKICAgIC8vICAgICAgICAgcmV0dXJuOwogICAgLy8gICAgIH0KICAgIC8vICAgICAvL+S/neWtmOaQnOe0ouWPguaVsAogICAgLy8gICAgIHRoaXMuc2V0U2VhcmNoUGFyYW1zKCk7CiAgICAvLwogICAgLy8gICAgIC8v5pCc57SiCiAgICAvLyAgICAgbGV0IHBhcmFtcyA9IHRoaXMuY3VycmVudFNlYXJjaC5wYXJhbXM7CiAgICAvLyAgICAgbGV0IHRhcmdldCA9IHRoaXMuZ2V0U2VhcmNoVHlwZShwYXJhbXMuc2VhcmNoX3R5cGUpOwogICAgLy8gICAgIGxldCBuYW1lOwogICAgLy8gICAgIGxldCBjb3VudCA9IDA7CiAgICAvLyAgICAgY29uc29sZS5sb2codGFyZ2V0KQogICAgLy8gICAgIHRhcmdldC5mb3JFYWNoKCh2YWwpID0+ewogICAgLy8gICAgICAgICBuYW1lID0gdGhpcy5nZXROYW1lKHBhcmFtcy5zZWFyY2hfdHlwZSwgdmFsKTsKICAgIC8vICAgICAgICAgY29uc29sZS5sb2cobmFtZSk7CiAgICAvLyAgICAgICAgIGxldCBmbGFnTmFtZSA9IHBhcmFtcy5zZWFyY2hfdGV4dCA9PT0gJycgPyB0cnVlIDogdGhpcy5mdXp6eU1hdGNoKG5hbWUsIHBhcmFtcy5zZWFyY2hfdGV4dCk7CiAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKCdmbGFnTmFtZScsIGZsYWdOYW1lKQogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8gICAgICAgICBpZiAodGhpcy5zZWFyY2hfdHlwZSA9PT0gJzInKSB7CiAgICAvLyAgICAgICAgICAgICBpZiAoZmxhZ05hbWUpIHsKICAgIC8vICAgICAgICAgICAgICAgICBjb3VudCsrOwogICAgLy8gICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFNlYXJjaC5yZXN1bHQucHVzaCh2YWwuZGF0YSgpKTsKICAgIC8vICAgICAgICAgICAgICAgICB2YWwuc291cmNlKCkuYWRkQ2xhc3MoJ3NlYXJjaGVkTm9kZScpOwogICAgLy8gICAgICAgICAgICAgICAgIHZhbC50YXJnZXQoKS5hZGRDbGFzcygnc2VhcmNoZWROb2RlJykKICAgIC8vICAgICAgICAgICAgIH0KICAgIC8vICAgICAgICAgICAgIGNvbnNvbGUubG9nKHZhbCkKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgICAgICBlbHNlIHsKICAgIC8vICAgICAgICAgICAgIGxldCBmbGFnUHJvcGVydHk7CiAgICAvLyAgICAgICAgICAgICBmbGFnUHJvcGVydHkgPSBwYXJhbXMuc2VsZWN0X3ZhbHVlID09PSAnJyA/IHRydWUgOiB2YWwuZGF0YSgpLnByb3BlcnR5LmluY2x1ZGVzKHBhcmFtcy5zZWxlY3RfdmFsdWUpOwogICAgLy8gICAgICAgICAgICAgY29uc29sZS5sb2coJ2ZsYWdQcm9wZXJ0eScsIGZsYWdQcm9wZXJ0eSkKICAgIC8vICAgICAgICAgICAgIGlmIChmbGFnTmFtZSAmJiBmbGFnUHJvcGVydHkpIHsKICAgIC8vICAgICAgICAgICAgICAgICBjb3VudCsrOwogICAgLy8gICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFNlYXJjaC5yZXN1bHQucHVzaCh2YWwuZGF0YSgpKTsKICAgIC8vICAgICAgICAgICAgICAgICB2YWwuYWRkQ2xhc3MoJ3NlYXJjaGVkTm9kZScpOwogICAgLy8gICAgICAgICAgICAgfQogICAgLy8gICAgICAgICB9CiAgICAvLwogICAgLy8KICAgIC8vICAgICB9KTsKICAgIC8vCiAgICAvLyAgICAgY29uc29sZS5sb2codGhpcy5jdXJyZW50U2VhcmNoKQogICAgLy8KICAgIC8vICAgICBpZiAoY291bnQgPiAwKSB7CiAgICAvLyAgICAgICAgIC8vbGV0IGRpc3BsYXkgPSB0aGlzLmdldERpc3BsYXkocGFyYW1zLnNlYXJjaF90eXBlKTsKICAgIC8vICAgICAgICAgLy90aGlzLnNlYXJjaERpc3BsYXkoZGlzcGxheSk7CiAgICAvLyAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgLy8gICAgICAgICAgICAgbWVzc2FnZTogJ+aQnOe0ouWujOavlScsCiAgICAvLyAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAvLyAgICAgICAgICAgICBkdXJhdGlvbjogMTUwMAogICAgLy8gICAgICAgICB9KTsKICAgIC8vICAgICB9CiAgICAvLyAgICAgZWxzZSB7CiAgICAvLyAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgLy8gICAgICAgICAgICAgbWVzc2FnZTogJ+acquaJvuWIsOespuWQiOadoeS7tueahOe7k+aenCcsCiAgICAvLyAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgLy8gICAgICAgICAgICAgZHVyYXRpb246IDE1MDAKICAgIC8vICAgICAgICAgfSk7CiAgICAvLyAgICAgfQogICAgLy8KICAgIC8vICAgICB0aGlzLnNob3dFbmFibGVkID0gdHJ1ZTsKICAgIC8vCiAgICAvLyB9LAogICAgZnV6enlNYXRjaDogZnVuY3Rpb24gZnV6enlNYXRjaChzdHIsIGtleSkgewogICAgICAvL+S4jeefpemBk+mcgOS4jemcgOimgeWGjeWKoOS4gOS4i+W/veeVpeWkp+Wwj+WGme+8nwogICAgICB2YXIgaW5kZXggPSAtMSwKICAgICAgICAgIGZsYWcgPSBmYWxzZTsKCiAgICAgIGZvciAodmFyIGkgPSAwLCBhcnIgPSBrZXkuc3BsaXQoIiIpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgLy/mnInkuIDkuKrlhbPplK7lrZfpg73msqHljLnphY3liLDvvIzliJnmsqHmnInljLnphY3liLDmlbDmja4KICAgICAgICBpZiAoc3RyLmluZGV4T2YoYXJyW2ldKSA8IDApIHsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgbWF0Y2ggPSBzdHIubWF0Y2hBbGwoYXJyW2ldKTsKICAgICAgICAgIHZhciBuZXh0ID0gbWF0Y2gubmV4dCgpOwoKICAgICAgICAgIHdoaWxlICghbmV4dC5kb25lKSB7CiAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlLmluZGV4ID4gaW5kZXgpIHsKICAgICAgICAgICAgICBpbmRleCA9IG5leHQudmFsdWUuaW5kZXg7CgogICAgICAgICAgICAgIGlmIChpID09PSBhcnIubGVuZ3RoIC0gMSkgewogICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbmV4dCA9IG1hdGNoLm5leHQoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBmbGFnOwogICAgfSwKICAgIGRlc2VhcmNoTm9kZTogZnVuY3Rpb24gZGVzZWFyY2hOb2RlKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHZhciBub2RlcyA9IHRoaXMuY3kubm9kZXMoKTsKICAgICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgaWYgKHZhbC5oYXNDbGFzcygnc2VhcmNoZWROb2RlJykpIHsKICAgICAgICAgIHZhbC5yZW1vdmVDbGFzcygnc2VhcmNoZWROb2RlJyk7CiAgICAgICAgfQoKICAgICAgICBfdGhpczYuc2VhcmNoX25vZGVfY29uZGl0aW9uID0gW107CiAgICAgICAgX3RoaXM2LnNlYXJjaF9ub2RlX3RleHQgPSBbXTsKICAgICAgICBfdGhpczYubm9kZV9zZWFyY2hlZCA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBkZXNlYXJjaEVkZ2U6IGZ1bmN0aW9uIGRlc2VhcmNoRWRnZSgpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICB2YXIgZWRnZXMgPSB0aGlzLmN5LmVkZ2VzKCk7CiAgICAgIGVkZ2VzLmZvckVhY2goZnVuY3Rpb24gKHZhbCkgewogICAgICAgIGlmICh2YWwuaGFzQ2xhc3MoJ3NlYXJjaGVkRWRnZScpKSB7CiAgICAgICAgICB2YWwucmVtb3ZlQ2xhc3MoJ3NlYXJjaGVkRWRnZScpOwogICAgICAgIH0KCiAgICAgICAgX3RoaXM3LnNlYXJjaF9lZGdlX2NvbmRpdGlvbiA9IFtdOwogICAgICAgIF90aGlzNy5zZWFyY2hfZWRnZV90ZXh0ID0gW107CiAgICAgICAgX3RoaXM3LmVkZ2Vfc2VhcmNoZWQgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgLy8gZGVzZWFyY2goKSB7CiAgICAvLyAgICAgbGV0IHBhcmFtcyA9IHRoaXMuY3VycmVudFNlYXJjaC5wYXJhbXM7CiAgICAvLyAgICAgbGV0IHRhcmdldCA9IHRoaXMuY3kubm9kZXMoKTsKICAgIC8vCiAgICAvLyAgICAgdGFyZ2V0LmZvckVhY2goKHZhbCkgPT57CiAgICAvLwogICAgLy8gICAgICAgICBpZiAodmFsLmhhc0NsYXNzKCdzZWFyY2hlZE5vZGUnKSkgewogICAgLy8gICAgICAgICAgICAgY29uc29sZS5sb2codmFsKTsKICAgIC8vICAgICAgICAgICAgIHZhbC5yZW1vdmVDbGFzcygnc2VhcmNoZWROb2RlJyk7CiAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICB9KTsKICAgIC8vCiAgICAvLyAgICAgdGhpcy5jbGVhclNlYXJjaENvbnRlbnQoKTsKICAgIC8vCiAgICAvLyAgICAgdGhpcy5zaG93RW5hYmxlZCA9IGZhbHNlOwogICAgLy8KICAgIC8vICAgICB0aGlzLnNlYXJjaExvZy5wdXNoKHRoaXMuY3VycmVudFNlYXJjaCk7CiAgICAvLwogICAgLy8gICAgIGNvbnNvbGUubG9nKCdzZWFyY2hMb2cnLCB0aGlzLnNlYXJjaExvZykKICAgIC8vIH0sCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL+atpOWkhOS4uui/h+a7pOS7o+eggS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgbm9kZUZpbHRlcjogZnVuY3Rpb24gbm9kZUZpbHRlcigpIHsKICAgICAgdmFyIGNoZWNrTGlzdCA9IHRoaXMuZmlsdGVyX25vZGVfY2hlY2tMaXN0OwogICAgICB0aGlzLmN5Lm5vZGVzKCkuZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgdmFyIGhpdCA9IGNoZWNrTGlzdC5pbmNsdWRlcyh2YWwuZGF0YSgndHlwZScpKTsKCiAgICAgICAgaWYgKGhpdCAmJiAhdmFsLmhhc0NsYXNzKCdyZW1vdmVkJykpIHsKICAgICAgICAgIHZhbC5hZGRDbGFzcygncmVtb3ZlZCcpOwogICAgICAgIH0gZWxzZSBpZiAoIWhpdCAmJiB2YWwuaGFzQ2xhc3MoJ3JlbW92ZWQnKSkgewogICAgICAgICAgdmFsLnJlbW92ZUNsYXNzKCdyZW1vdmVkJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBlZGdlRmlsdGVyOiBmdW5jdGlvbiBlZGdlRmlsdGVyKCkgewogICAgICB2YXIgY2hlY2tMaXN0ID0gdGhpcy5maWx0ZXJfZWRnZV9jaGVja0xpc3Q7CiAgICAgIHRoaXMuY3kuZWRnZXMoKS5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICB2YXIgaGl0ID0gY2hlY2tMaXN0LmluY2x1ZGVzKHZhbC5kYXRhKCd0eXBlJykpOwoKICAgICAgICBpZiAoaGl0ICYmICF2YWwuaGFzQ2xhc3MoJ2hpZGRlbicpKSB7CiAgICAgICAgICB2YWwuYWRkQ2xhc3MoJ2hpZGRlbicpOwogICAgICAgIH0gZWxzZSBpZiAoIWhpdCAmJiB2YWwuaGFzQ2xhc3MoJ2hpZGRlbicpKSB7CiAgICAgICAgICB2YWwucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgbm9kZURlZmlsdGVyOiBmdW5jdGlvbiBub2RlRGVmaWx0ZXIoKSB7CiAgICAgIGlmICh0aGlzLmZpbHRlcl9ub2RlX2NoZWNrTGlzdC5sZW5ndGggPT09IDApIHJldHVybjsKICAgICAgdGhpcy5jeS5ub2RlcygpLmZvckVhY2goZnVuY3Rpb24gKHZhbCkgewogICAgICAgIGlmICh2YWwuaGFzQ2xhc3MoJ3JlbW92ZWQnKSkgewogICAgICAgICAgdmFsLnJlbW92ZUNsYXNzKCdyZW1vdmVkJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5maWx0ZXJfbm9kZV9jaGVja0xpc3QgPSBbXTsKICAgIH0sCiAgICBlZGdlRGVmaWx0ZXI6IGZ1bmN0aW9uIGVkZ2VEZWZpbHRlcigpIHsKICAgICAgaWYgKHRoaXMuZmlsdGVyX2VkZ2VfY2hlY2tMaXN0Lmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICB0aGlzLmN5LmVkZ2VzKCkuZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgaWYgKHZhbC5oYXNDbGFzcygnaGlkZGVuJykpIHsKICAgICAgICAgIHZhbC5yZW1vdmVDbGFzcygnaGlkZGVuJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5maWx0ZXJfZWRnZV9jaGVja0xpc3QgPSBbXTsKICAgIH0gLy8gZmlsdGVyKCkgewogICAgLy8gICAgIGNvbnNvbGUubG9nKCJleGVjdXRlIGZpbHRlciIpCiAgICAvLyAgICAgbGV0IGZsYWcgPSB0aGlzLmZpbHRlcl9ub2RlX2NoZWNrZWQgfHwgdGhpcy5maWx0ZXJfZWRnZV9jaGVja2VkOwogICAgLy8gICAgIGlmICghZmxhZykgewogICAgLy8gICAgICAgICB0aGlzLmluZm9ybU1zZygnZXJyb3InLCfor7fpgInmi6nov4fmu6TnsbvlnosnKQogICAgLy8gICAgICAgICByZXR1cm47CiAgICAvLyAgICAgfQogICAgLy8KICAgIC8vICAgICBpZiAodGhpcy5maWx0ZXJfbm9kZV9jaGVja2VkKSB7CiAgICAvLyAgICAgICAgIGxldCBjaGVja0xpc3QgPSB0aGlzLmZpbHRlcl9ub2RlX2NoZWNrTGlzdDsKICAgIC8vICAgICAgICAgbGV0IHRhcmdldF9ub2RlcyA9IHRoaXMuY3kubm9kZXMoKS5maWx0ZXIoZnVuY3Rpb24gKGVsZSkgewogICAgLy8gICAgICAgICAgICAgcmV0dXJuICFjaGVja0xpc3QuaW5jbHVkZXMoZWxlLmRhdGEoJ3R5cGUnKSk7CiAgICAvLyAgICAgICAgIH0pOwogICAgLy8gICAgICAgICBmb3IgKGxldCBub2RlIG9mIHRhcmdldF9ub2RlcykgewogICAgLy8gICAgICAgICAgICAgbm9kZS5hZGRDbGFzcygncmVtb3ZkZScpOwogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgfQogICAgLy8gICAgIGlmICh0aGlzLmZpbHRlcl9lZGdlX2NoZWNrZWQpIHsKICAgIC8vICAgICAgICAgbGV0IGNoZWNrTGlzdCA9IHRoaXMuZmlsdGVyX2VkZ2VfY2hlY2tMaXN0OwogICAgLy8gICAgICAgICBsZXQgdGFyZ2V0X2VkZ2VzID0gdGhpcy5jeS5lZGdlcygpLmZpbHRlcihmdW5jdGlvbiAoZWxlKSB7CiAgICAvLyAgICAgICAgICAgICByZXR1cm4gIWNoZWNrTGlzdC5pbmNsdWRlcyhlbGUuZGF0YSgndHlwZScpKTsKICAgIC8vICAgICAgICAgfSkKICAgIC8vICAgICAgICAgZm9yIChsZXQgZWRnZSBvZiB0YXJnZXRfZWRnZXMpIHsKICAgIC8vICAgICAgICAgICAgIGVkZ2UuYWRkQ2xhc3MoJ2hpZGRlbicpOwogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgfQogICAgLy8gICAgIHRoaXMuZmlsdGVyU2hvd0VuYWJsZWQgPSB0cnVlOwogICAgLy8gfSwKICAgIC8vCiAgICAvLyBkZWZpbHRlcigpIHsKICAgIC8vICAgICBmb3IgKGxldCB0YXJnZXQgb2YgdGhpcy5jeS5lbGVtZW50cygpKSB7CiAgICAvLyAgICAgICAgIGlmKHRhcmdldC5oYXNDbGFzcygncmVtb3ZlZCcpKXsKICAgIC8vICAgICAgICAgICAgIHRhcmdldC5yZW1vdmVDbGFzcygncmVtb3ZlZCcpOwogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgICAgIGlmKHRhcmdldC5oYXNDbGFzcygnaGlkZGVuJykpewogICAgLy8gICAgICAgICAgICAgdGFyZ2V0LnJlbW92ZUNsYXNzKCdoaWRkZW4nKTsKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgIH0KICAgIC8vICAgICB0aGlzLmZpbHRlclNob3dFbmFibGVkID0gZmFsc2U7CiAgICAvLyAgICAgdGhpcy5jbGVhckZpbHRlclBhcmFtcygpOwogICAgLy8gfSwKICAgIC8vCiAgICAvLyBjbGVhckZpbHRlclBhcmFtcygpIHsKICAgIC8vICAgICB0aGlzLmZpbHRlcl9ub2RlX2NoZWNrTGlzdCA9IFtdOwogICAgLy8gICAgIHRoaXMuZmlsdGVyX2VkZ2VfY2hlY2tMaXN0ID0gW107CiAgICAvLyAgICAgdGhpcy5maWx0ZXJfbm9kZV9jaGVja2VkID0gZmFsc2U7CiAgICAvLyAgICAgdGhpcy5maWx0ZXJfZWRnZV9jaGVja2VkID0gZmFsc2U7CiAgICAvLyB9CiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL+atpOWkhOS4uuinhuWbvuS7o+eggS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICB9KQp9Ow=="},{"version":3,"sources":["C:/Users/Owen Liu/Desktop/init/HCI/HCI/src/components/EditBar/EditBar.js"],"names":["mapState","mapMutations","mapActions","mapGetters","inputKG","OpItem","EditBarBlock","MyButton","name","components","data","showEditBar","showExportOps","opInfo","entities_data","relations_data","max_log_len","search_node_text","search_node_condition","node_searched","search_node_log","search_edge_text","search_edge_condition","edge_searched","search_edge_log","filter_node_checkList","filter_edge_checkList","layout","layoutTypeNow","relation_label_enabled","font_size","node_radius","watch","cy","newValue","oldValue","get_statistic_data","options","statistic_data_change","console","log","newVal","oldVal","stop","nodes","elements","positions","node","nodeId","id","position","x","y","fit","d3_options","animate","fixedAfterDragging","linkId","d","linkDistance","manyBodyStrength","ready","tick","progress","randomize","infinite","run","edges","enabled","edge","hasClass","removeClass","addClass","setNodeFontSize","size","Number","isNaN","parseInt","style","informMsg","setNodeRadius","removeStyle","radius","realRadius","computed","state","workspace","nodeType","edgeType","layoutType","project_left","node_checkList_disabled","get","filter_node_checked","edge_checkList_disabled","filter_edge_checked","methods","changeEditBarState","open","document","getElementsByClassName","click","getFilePath","selectedFile","files","reader","FileReader","readAsDataURL","that","onload","setJsonSrcPath","result","save","graphData","getDataJsonObject","concat","getCleanData","loading","$loading","lock","text","spinner","background","then","res","success","setWholeProject","setProject","JSON","parse","stringify","$message","error","catch","err","finally","close","changeExportState","exportPng","blob","png","output","bg","full","scale","aLink","createElement","download","generateFileName","url","window","URL","createObjectURL","href","evt","createEvent","initEvent","dispatchEvent","revokeObjectURL","length","eles","json","obj","undefined","forEach","val","push","type","relation","source","target","property","exportJson","filename","Blob","a","dataset","downloadurl","join","e","initMouseEvent","current_project","project_name","Date","getTime","exportCutPng","unselectedVertexes","remove","restore","saveAndAnalyse","pid","current_pid","workspace_text","postText","message","duration","EData","individual","organization","thing","default","total","RData","connection","inheritance","checkKeyWords","nameValid","keyWords","test","item","trim","includes","saveSearchLog","index","findIndex","unshift","maxLen","slice","searchNode","condition","byName","byRelation","byProp","count","valName","valProps","connectedEdges","hit","relaHit","propHit","key","fuzzyMatch","prop","edgeName","informResult","searchEdge","bySource","byTarget","valSource","$id","valTarget","nameHit","sHit","tHit","isSuccess","success_msg","error_msg","msg","str","flag","i","arr","split","indexOf","match","matchAll","next","done","value","desearchNode","desearchEdge","nodeFilter","checkList","edgeFilter","nodeDefilter","edgeDefilter"],"mappings":"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","sourcesContent":["import { mapState,mapMutations,mapActions,mapGetters } from 'vuex';\nimport { inputKG } from \"../../api/basicAPI\";\nimport OpItem from './OpItem';\nimport EditBarBlock from \"./EditBarBlock\";\nimport MyButton from \"@/components/Tools/MyButton\";\n\n\nexport default {\n    name: \"EditBar\",\n    components: {OpItem,EditBarBlock, MyButton},\n    data(){\n        return{\n            showEditBar: true,\n            showExportOps: false,\n            opInfo: '\".json\"\\n',\n            entities_data: [],\n            relations_data: [],\n\n            /////////////////////////////////////////////////////////////\n            max_log_len: 10,\n\n            search_node_text: [],\n            search_node_condition: [],\n            node_searched: false,\n            search_node_log: [],\n\n            search_edge_text:[],\n            search_edge_condition: [],\n            edge_searched:false,\n            search_edge_log: [],\n\n            // search_text: '',\n            // search_type: '',\n            // select_value: '',\n            // showEnabled: false,\n            // edgeDisabled: true,\n            // types: [\n            //     {\n            //         label: '',\n            //         value: '1'\n            //     },\n            //     {\n            //         label: '',\n            //         value: '2'\n            //     }\n            // ],\n            // currentSearch: {\n            //     params: {},\n            //     result: []\n            // },\n            // searchLog: [],\n\n            ///////////////////////////////////////////////////\n\n            filter_node_checkList: [],\n            filter_edge_checkList: [],\n\n            // filter_disabled: true,\n            // filterShowEnabled: false,\n            //\n            // filter_node_checked: false,\n            // filter_node_checkList: [],\n            // filter_edge_checked: false,\n            // filter_edge_checkList: [],\n\n            //////////////////////////////////////////////////////\n\n            layout: null,\n\n            layoutTypeNow : '',\n\n            relation_label_enabled: true,\n            font_size: 20,\n            node_radius: 20,\n        }\n    },\n    watch: {\n        cy(newValue, oldValue){\n            this.get_statistic_data();\n            this.layoutTypeNow = newValue.options().layout.name;\n        },\n        statistic_data_change(newValue, oldValue){\n            console.log(\"\")\n            this.get_statistic_data();\n        },\n\n        ///////////////////////////////////////////////////////////\n        layoutTypeNow(newVal, oldVal) {\n            console.log(\"layout watched: '\",oldVal,\"' to '\",newVal,\"'\");\n            let layout = this.layout;\n            if(layout!==null){\n                layout.stop();\n            }\n            if(newVal==='preset'){\n                //console.log(\"elements stored: \",this.elements);\n                let nodes = this.elements.nodes;\n                let positions = node=>{\n                    let nodeId = node.data(\"id\");\n                    for(let node of nodes){\n                        if(node.data.id===nodeId){\n                            return node.position;\n                        }\n                    }\n                    return {x:0,y:0};//\n                };\n                layout = this.cy.layout({name: newVal,fit:true,positions:positions});//\n                //console.log(\"reset done\")\n\n            }else if(newVal==='d3-force'){\n                let d3_options = {\n                    name: 'd3-force',\n                    animate: true,\n                    fit: true,//viewport\n                    fixedAfterDragging: false,\n                    linkId: function id(d) {\n                        return d.id;\n                    },\n                    linkDistance: 1000,\n                    manyBodyStrength: -10000,\n                    ready: function(){},\n                    stop: function(){},\n                    tick: function(progress) {\n                        // console.log('progress - ', progress);\n                    },\n                    randomize: false,\n                    infinite: true\n                }\n                layout = this.cy.layout(d3_options)\n            }else{\n                layout = this.cy.layout({name: newVal, fit: true})\n            }\n            this.layout = layout;\n            this.layout.run();\n        },\n        relation_label_enabled(newVal, oldVal) {\n            let edges = this.cy.edges();\n            let enabled = newVal;\n            for (let edge of edges) {\n                if(enabled&&edge.hasClass('label_hidden')){\n                    edge.removeClass('label_hidden');\n                }else if(!enabled&&!edge.hasClass('label_hidden')){\n                    edge.addClass('label_hidden');\n                }\n            }\n        },\n        font_size(newVal, oldVal) {\n            // let defaultSize = '25px';//25pxworkspace\n            if (newVal === '') {\n                this.setNodeFontSize('');//workspacenodeNodeFontSize\n                //CytoscapeKGworkspacenodeFontSize''\n                //\n                //CytoscapeKG\n                return;\n            }\n            let size = Number(newVal);\n            if (!isNaN(size)) {\n                this.setNodeFontSize(newVal);//workspacenodeNodeFontSize\n                size = parseInt(size);\n                for (let node of this.cy.nodes()) {\n                    node.style('font-size', size + 'px');\n                }\n            }\n            else {\n                if (newVal !== '') {\n                    this.informMsg('error','');\n                }\n                this.setNodeFontSize('');//workspacenodeNodeFontSize\n                //CytoscapeKGworkspacenodeFontSize''\n                //\n                //CytoscapeKG\n            }\n        },\n        node_radius(newVal, oldVal) {\n            if (newVal === '') {\n                this.setNodeRadius('');//workspacenodeRadius\n                for (let node of this.cy.nodes()) {\n                    node.removeStyle('width');\n                    node.removeStyle('height');\n                }\n                return;\n            }\n            let radius = Number(newVal);\n            if (!isNaN(radius)) {\n                radius = parseInt(radius);\n                let realRadius = radius * 2;\n                this.setNodeRadius(realRadius+\"\");//workspacenodeRadius\n                for (let node of this.cy.nodes()) {//\n                    node.style('width', realRadius + 'px');\n                    node.style('height', realRadius + 'px');\n                }\n            }\n            else {\n                this.setNodeRadius('');//workspacenodeRadius\n                if (newVal !== '') {\n                    this.informMsg('error','');\n                }\n                for (let node of this.cy.nodes()) {\n                    node.removeStyle('width');\n                    node.removeStyle('height');\n                }\n            }\n        }\n    },\n    computed: {\n        ...mapState({\n            cy: state => state.workspace.cy,\n            statistic_data_change: state => state.workspace.statistic_data_change,\n            nodeType: state => state.workspace.nodeType,\n            edgeType: state => state.workspace.edgeType,\n            layoutType: state => state.workspace.layoutType,\n            elements: state => state.workspace.elements,\n            project_left: state => state.project_left,\n        }),\n        node_checkList_disabled: {\n            get() {\n                return !this.filter_node_checked;\n            }\n        },\n        edge_checkList_disabled: {\n            get() {\n                return !this.filter_edge_checked;\n            }\n\n        },\n    },\n    methods:{\n        ...mapMutations(['setJsonSrcPath', 'setSeCurrentSearchParams',\n            'setCurrentSearchResult','setNodeRadius','setNodeFontSize', 'setProject', 'changeShowQAPanel', 'setWholeProject']),\n\n        changeEditBarState(){\n            this.showEditBar = !this.showEditBar;\n        },\n\n        open(){\n            document.getElementsByClassName(\"choose-file\")[0].click();\n        },\n\n        getFilePath(){\n            //File\n            let selectedFile = document.getElementsByClassName(\"choose-file\")[0].files[0];\n            let reader = new FileReader();//,.\n            reader.readAsDataURL(selectedFile)\n            reader.that = this;\n            reader.onload = function () {\n                //,this.result,\n                this.that.setJsonSrcPath(this.result);\n            }\n        },\n\n        save(){\n            let data = {};\n            //  ...this.getDataJsonObject() state.project_left\n            let graphData = this.getDataJsonObject();\n            data = {\n                nodes: graphData.nodes.concat(this.project_left.nodes),\n                edges: graphData.edges.concat(this.project_left.edges)\n            };\n\n            data = this.getCleanData(data);\n\n            // for (let node of data.nodes){\n            //     let temp_nodes = this.cy.nodes();\n            //     for (let temp_node of temp_nodes){\n            //         if (temp_node.data('id') === node.data.id){\n            //             node.data.typeset = temp_node.data('typeset');\n            //             break;\n            //         }\n            //     }\n            // }\n            console.log(\"\",data);\n\n            const loading = this.$loading({\n                lock: true,\n                text: '......',\n                spinner: 'el-icon-loading',\n                background: 'rgba(255, 255,255, 0.8)'\n            });\n            inputKG(data).then(res => {\n                if(res.success){\n                    this.setWholeProject(data);\n                    this.setProject(JSON.parse(JSON.stringify(graphData)));\n                    this.$message.success('');\n                }else{\n                    this.$message.error( '')\n                }\n            }).catch( err => {\n                console.log(err);\n                this.$message.error('')\n            }).finally(() => {\n                loading.close();\n            })\n        },\n\n        changeExportState(){\n            this.showExportOps = !this.showExportOps;\n        },\n\n        /**\n         * .\n         * options: The export options.\n         output Whether the output should be 'base64uri' (default), 'base64', 'blob', or 'blob-promise' (a promise that resolves to the blob is returned).\n         bg: The background colour of the image (transparent by default).\n         full: Whether to export the current viewport view (false, default) or the entire graph (true).\n         scale: This value specifies a positive number that scales the size of the resultant image.\n         maxWidth: Specifies the scale automatically in combination with maxHeight such that the resultant image is no wider than maxWidth.\n         maxHeight: Specifies the scale automatically in combination with maxWidth such that the resultant image is no taller than maxHeight\n         */\n        exportPng(){\n            this.$message.success(\"...\");\n            let blob = this.cy.png({\n                output: 'blob-promise', bg: 'white',\n                full: true, scale: 4\n            });\n            blob.then(res => {\n                //\n                let aLink = document.createElement('a');\n                aLink.download = this.generateFileName() + '.png';\n                let url = window.URL.createObjectURL(res);\n                aLink.href = url;\n\n                //\n                let evt = document.createEvent(\"MouseEvents\");\n                evt.initEvent(\"click\", true, true);\n                aLink.dispatchEvent(evt);\n\n                // blob\n                window.URL.revokeObjectURL(url);\n            }).catch(err => {\n                console.log(\"Error occured: \", err);\n                if (this.cy.elements().length === 0) {\n                    this.$message.error(\"\");\n                }\n            });\n        },\n\n        /**\n         * \n         * JSON.parse(JSON.stringify(obj))\n         \n         1objJSON.stringifyJSON.parse\n         2objRegExpError\n         3objundefined undefined\n         4objNaNInfinity-Infinitynull\n         5JSON.stringify() obj JSON.parse(JSON.stringify(obj))constructor\n         6\n\n         \n         /\n         */\n        getDataJsonObject() {\n            let eles = JSON.parse(JSON.stringify(this.cy.json().elements));//(**)\n            let obj = {\"edges\": [], \"nodes\": []};\n            if (JSON.stringify(eles) !== '{}') {\n                if (eles.edges !== undefined && eles.edges.length > 0) {\n                    eles.edges.forEach(val => {\n                        obj.edges.push({\n                            data: val.data\n                        });\n                    });\n                }\n                if (eles.nodes !== undefined && eles.nodes.length > 0) {\n                    eles.nodes.forEach(val => {\n                        obj.nodes.push({\n                            data: val.data,\n                            position: val.position\n                        });\n                    });\n                }\n            }\n            return obj;\n        },\n        getCleanData(eles) {\n            let obj = {\"edges\": [], \"nodes\": []};\n            if (JSON.stringify(eles) !== '{}') {\n                if (eles.edges !== undefined && eles.edges.length > 0) {\n                    eles.edges.forEach(val => {\n                        obj.edges.push({\n                            data: {\n                                id:val.data.id,\n                                type:val.data.type,\n                                relation:val.data.relation,\n                                source:val.data.source,\n                                target:val.data.target\n                            }\n                        });\n                    });\n                }\n                if (eles.nodes !== undefined && eles.nodes.length > 0) {\n                    eles.nodes.forEach(val => {\n                        obj.nodes.push({\n                            data: {\n                                id:val.data.id,\n                                type:val.data.type,\n                                name:val.data.name,\n                                property:val.data.property\n                            },\n                            position: val.position\n                        });\n                    });\n                }\n            }\n            return obj;\n        },\n        exportJson(){\n            this.$message(\"json...\");\n            //promise\n            let data = this.getDataJsonObject();\n            let filename =  this.generateFileName() + '.json';\n            if(typeof data === 'object'){\n                data = JSON.stringify(data, undefined, 4)\n            }\n            //  blob \n            let blob = new Blob([data], {type: 'text/json'}),\n                a = document.createElement('a');\n            a.download = filename;\n\n            // blob\n            //  URL  Blob \n            let url = window.URL.createObjectURL(blob)\n            a.href = url;\n\n            //  data-   \n            a.dataset.downloadurl = ['text/json', a.download, a.href].join(':');\n\n            // \n            let e = document.createEvent('MouseEvents');\n            e.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n            a.dispatchEvent(e);\n\n            // blob\n            window.URL.revokeObjectURL(url);\n        },\n\n        generateFileName(){\n            let name = \"\";\n            try{\n                name = this.current_project.project_name;\n            }catch (e) {\n                console.log(\"Error occurs:\"+e);\n                console.log(\"Server\");\n                name = new Date().getTime();\n            }\n            return name;\n        },\n\n        /**\n         * .\n         */\n        exportCutPng() {\n            let unselectedVertexes = this.cy.elements('node:unselected')\n            if (!unselectedVertexes || 0 === unselectedVertexes.length) {\n                this.exportPng();\n            }else{\n                let remove = unselectedVertexes.remove(); // \n                this.exportPng();\n                (remove && remove.length) && (remove.restore()); // \n            }\n        },\n\n\n        /**\n         * \n         */\n        saveAndAnalyse(){\n            let data = {\n                pid: this.current_pid,\n                text: this.workspace_text\n            }\n            this.postText(data).then(res => {\n                this.$message({\n                    message: '',\n                    type: 'success',\n                    duration: 1500\n                })\n            }).catch(err => {\n                this.$message({\n                    message: '',\n                    type: 'error',\n                    duration: 1500\n                });\n            })\n        },\n\n\n        /**\n         *  data  entities_data  relaions_data \n         */\n        get_statistic_data(){\n            let data = this.getDataJsonObject();\n            let nodes = data.nodes,\n                edges = data.edges;\n            let EData = {\n                individual: 0,\n                organization: 0,\n                thing: 0,\n                default: 0,\n                total: nodes.length\n            };\n            for (let node of nodes){\n                if (!(node.data.type == 'individual' || node.data.type == 'organization' || node.data.type == 'thing')){\n                    EData['default'] ++;\n                }else {\n                    EData[node.data.type] ++;\n                }\n            }\n            let RData = {\n                connection: 0,\n                inheritance: 0,\n                default: 0,\n                total: edges.length\n            }\n            for (let edge of edges){\n                RData[edge.data.type] ++;\n            }\n            this.entities_data = [EData];\n            this.relations_data = [RData];\n        },\n\n        //////////////////////////////////////////////////////////////////////\n        // getSearchType(search_type) {\n        //     return search_type === '1' ? this.cy.nodes() : this.cy.edges();\n        // },\n        //\n        //\n        // getName(search_type, val) {\n        //     return search_type === '1' ? val.data().name : val.data().relation;\n        // },\n        //\n        // setSearchParams() {\n        //     this.currentSearch.params = {\n        //         search_text: this.search_text,\n        //         search_type: this.search_type,\n        //         select_value: this.select_value\n        //     }\n        // },\n        //\n        // clearSearchContent() {\n        //     this.search_text = '';\n        //     this.search_type = '';\n        //     this.select_value = '';\n        //     this.currentSearch = {\n        //         params: {},\n        //         result: []\n        //     };\n        // },\n\n        checkKeyWords(text){\n            let nameValid = /\\S/;\n            let keyWords = [];\n            text.forEach(val=>{//\n                if(nameValid.test(val)){\n                    let item = val.trim();\n                    if(!keyWords.includes(item)) keyWords.push(item);\n                }\n            });\n            return keyWords;\n        },\n\n        saveSearchLog(keyWords,log){//\n            keyWords.forEach(val=>{\n                let index = log.findIndex(item=>item===val);\n                if(index<0){//\n                    log.unshift(val);//\n                }\n\n            });\n            let maxLen = this.max_log_len;\n            if(log.length>maxLen){//\n                log.slice(maxLen,log.length-maxLen);\n            }\n        },\n\n        searchNode(){\n            let keyWords = this.checkKeyWords(this.search_node_text);\n            let condition = this.search_node_condition;\n            this.search_node_text = keyWords;//\n            if(keyWords.length===0||condition.length===0){\n                this.informMsg('error','');\n                return;\n            }\n            console.log(\"(keyWords, condition, log) before saveLog\",keyWords,condition,this.search_node_log);\n\n            //\n            this.saveSearchLog(keyWords,this.search_node_log);//\n            console.log(\"(keyWords, condition, log) after saveLog\",keyWords,condition,this.search_node_log);\n            const byName = condition.includes('name');\n            const byRelation = condition.includes('relation');\n            const byProp = condition.includes('property');\n            let nodes = this.cy.nodes();\n            let count = 0;\n            nodes.forEach(val=>{\n                if (val.hasClass('searchedNode')) {\n                    val.removeClass('searchedNode');\n                }\n                let valName = val.data(\"name\");\n                let valProps = val.data(\"property\");\n                let edges = val.connectedEdges();\n                let hit = false;\n                let relaHit;\n                let propHit;\n                for(let key of keyWords){\n                    if(byName&&this.fuzzyMatch(valName, key)) {\n                        hit = true;\n                        break;\n                    }\n                    if(byProp){\n                        propHit = false;\n                        for(let prop of valProps){\n                            if(this.fuzzyMatch(prop, key)){\n                                propHit=true;\n                                break;\n                            }\n                        }\n                        if(propHit){\n                            hit = true;\n                            break;\n                        }\n                    }\n                    if(byRelation){\n                        relaHit = false;\n                        for(let edge of edges){\n                            let edgeName = edge.data(\"relation\");\n                            if(this.fuzzyMatch(edgeName, key)){\n                                relaHit = true;\n                                break;\n                            }\n                        }\n                        if(relaHit){\n                            hit = true;\n                            break;\n                        }\n                    }\n                }\n                if(hit){\n                    count += 1;\n                    val.addClass('searchedNode');\n                }\n            });\n            this.informResult(count > 0,'','')\n            this.node_searched = true;\n        },\n\n        searchEdge(){\n            let keyWords = this.checkKeyWords(this.search_edge_text);\n            let condition = this.search_edge_condition;\n            this.search_edge_text = keyWords;//\n            if(keyWords.length===0||condition.length===0){\n                this.informMsg('error','');\n                return;\n            }\n\n            //\n            this.saveSearchLog(keyWords,this.search_edge_log);//\n            const byName = condition.includes('relation');\n            const bySource = condition.includes('source');\n            const byTarget = condition.includes('target');\n            let edges = this.cy.edges();\n            let count = 0;\n            edges.forEach(val=>{\n                if (val.hasClass('searchedEdge')) {\n                    val.removeClass('searchedEdge');\n                }\n                let valName = val.data(\"relation\");\n                let valSource = this.cy.$id(val.data(\"source\")).data(\"name\");\n                let valTarget = this.cy.$id(val.data(\"target\")).data(\"name\");\n                let hit = false;\n                let nameHit;\n                let sHit;\n                let tHit;\n                for(let key of keyWords){\n                    if((byName&&this.fuzzyMatch(valName, key))||\n                        (bySource&&this.fuzzyMatch(valSource,key))||\n                        (byTarget&&this.fuzzyMatch(valTarget,key))) {\n                        hit = true;\n                        break;\n                    }\n                }\n                if(hit){\n                    count += 1;\n                    val.addClass('searchedEdge');\n                }\n            });\n            this.informResult(count > 0,'','');\n            this.edge_searched = true;\n        },\n\n        informResult(isSuccess,success_msg,error_msg){\n            if (isSuccess) {\n                this.informMsg('success',success_msg);\n            }\n            else {\n                this.informMsg('error',error_msg);\n            }\n        },\n\n        informMsg(type,msg) {\n            this.$message({\n                message: msg,\n                type: type,\n                duration: 1500\n            });\n        },\n\n        // //\n        // search() {\n        //     let flag = this.checkParams();\n        //\n        //     if (!flag) {\n        //         return;\n        //     }\n        //     //\n        //     this.setSearchParams();\n        //\n        //     //\n        //     let params = this.currentSearch.params;\n        //     let target = this.getSearchType(params.search_type);\n        //     let name;\n        //     let count = 0;\n        //     console.log(target)\n        //     target.forEach((val) =>{\n        //         name = this.getName(params.search_type, val);\n        //         console.log(name);\n        //         let flagName = params.search_text === '' ? true : this.fuzzyMatch(name, params.search_text);\n        //         console.log('flagName', flagName)\n        //\n        //\n        //\n        //         if (this.search_type === '2') {\n        //             if (flagName) {\n        //                 count++;\n        //                 this.currentSearch.result.push(val.data());\n        //                 val.source().addClass('searchedNode');\n        //                 val.target().addClass('searchedNode')\n        //             }\n        //             console.log(val)\n        //         }\n        //         else {\n        //             let flagProperty;\n        //             flagProperty = params.select_value === '' ? true : val.data().property.includes(params.select_value);\n        //             console.log('flagProperty', flagProperty)\n        //             if (flagName && flagProperty) {\n        //                 count++;\n        //                 this.currentSearch.result.push(val.data());\n        //                 val.addClass('searchedNode');\n        //             }\n        //         }\n        //\n        //\n        //     });\n        //\n        //     console.log(this.currentSearch)\n        //\n        //     if (count > 0) {\n        //         //let display = this.getDisplay(params.search_type);\n        //         //this.searchDisplay(display);\n        //         this.$message({\n        //             message: '',\n        //             type: 'success',\n        //             duration: 1500\n        //         });\n        //     }\n        //     else {\n        //         this.$message({\n        //             message: '',\n        //             type: 'error',\n        //             duration: 1500\n        //         });\n        //     }\n        //\n        //     this.showEnabled = true;\n        //\n        // },\n\n        fuzzyMatch(str, key){//\n            let index = -1, flag = false;\n            for(let i = 0, arr = key.split(\"\"); i < arr.length; i++ ){\n            //\n                if(str.indexOf(arr[i]) < 0){\n                    break;\n                }else{\n                    let match = str.matchAll(arr[i]);\n                    let next = match.next();\n                    while (!next.done){\n                        if(next.value.index > index){\n                            index = next.value.index;\n                            if(i === arr.length - 1){\n                                flag = true\n                            }\n                            break;\n                        }\n                        next = match.next();\n                    }\n                }\n            }\n            return flag;\n        },\n\n        desearchNode(){\n            let nodes = this.cy.nodes();\n            nodes.forEach(val=>{\n                if (val.hasClass('searchedNode')) {\n                    val.removeClass('searchedNode');\n                }\n                this.search_node_condition = [];\n                this.search_node_text = [];\n                this.node_searched = false;\n            });\n        },\n\n        desearchEdge(){\n            let edges = this.cy.edges();\n            edges.forEach(val=>{\n                if (val.hasClass('searchedEdge')) {\n                    val.removeClass('searchedEdge');\n                }\n                this.search_edge_condition = [];\n                this.search_edge_text = [];\n                this.edge_searched = false;\n            });\n        },\n\n        // desearch() {\n        //     let params = this.currentSearch.params;\n        //     let target = this.cy.nodes();\n        //\n        //     target.forEach((val) =>{\n        //\n        //         if (val.hasClass('searchedNode')) {\n        //             console.log(val);\n        //             val.removeClass('searchedNode');\n        //         }\n        //     });\n        //\n        //     this.clearSearchContent();\n        //\n        //     this.showEnabled = false;\n        //\n        //     this.searchLog.push(this.currentSearch);\n        //\n        //     console.log('searchLog', this.searchLog)\n        // },\n\n\n        //////////////////////////////////////////////////////////////////////////\n\n        nodeFilter(){\n            let checkList = this.filter_node_checkList;\n            this.cy.nodes().forEach(val=>{\n                let hit = checkList.includes(val.data('type'));\n               if(hit&&!val.hasClass('removed')) {\n                   val.addClass('removed');\n               }else if(!hit&&val.hasClass('removed')){\n                   val.removeClass('removed');\n               }\n            });\n        },\n        edgeFilter(){\n            let checkList = this.filter_edge_checkList;\n            this.cy.edges().forEach(val=>{\n                let hit = checkList.includes(val.data('type'));\n                if(hit&&!val.hasClass('hidden')) {\n                    val.addClass('hidden');\n                }else if(!hit&&val.hasClass('hidden')){\n                    val.removeClass('hidden');\n                }\n            });\n        },\n        nodeDefilter(){\n            if(this.filter_node_checkList.length===0)return;\n            this.cy.nodes().forEach(val=>{\n                if(val.hasClass('removed')){\n                    val.removeClass('removed');\n                }\n            });\n            this.filter_node_checkList = [];\n        },\n        edgeDefilter(){\n            if(this.filter_edge_checkList.length===0)return;\n            this.cy.edges().forEach(val=>{\n                if(val.hasClass('hidden')){\n                    val.removeClass('hidden');\n                }\n            });\n            this.filter_edge_checkList = [];\n        },\n\n        // filter() {\n        //     console.log(\"execute filter\")\n        //     let flag = this.filter_node_checked || this.filter_edge_checked;\n        //     if (!flag) {\n        //         this.informMsg('error','')\n        //         return;\n        //     }\n        //\n        //     if (this.filter_node_checked) {\n        //         let checkList = this.filter_node_checkList;\n        //         let target_nodes = this.cy.nodes().filter(function (ele) {\n        //             return !checkList.includes(ele.data('type'));\n        //         });\n        //         for (let node of target_nodes) {\n        //             node.addClass('removde');\n        //         }\n        //     }\n        //     if (this.filter_edge_checked) {\n        //         let checkList = this.filter_edge_checkList;\n        //         let target_edges = this.cy.edges().filter(function (ele) {\n        //             return !checkList.includes(ele.data('type'));\n        //         })\n        //         for (let edge of target_edges) {\n        //             edge.addClass('hidden');\n        //         }\n        //     }\n        //     this.filterShowEnabled = true;\n        // },\n        //\n        // defilter() {\n        //     for (let target of this.cy.elements()) {\n        //         if(target.hasClass('removed')){\n        //             target.removeClass('removed');\n        //         }\n        //         if(target.hasClass('hidden')){\n        //             target.removeClass('hidden');\n        //         }\n        //     }\n        //     this.filterShowEnabled = false;\n        //     this.clearFilterParams();\n        // },\n        //\n        // clearFilterParams() {\n        //     this.filter_node_checkList = [];\n        //     this.filter_edge_checkList = [];\n        //     this.filter_node_checked = false;\n        //     this.filter_edge_checked = false;\n        // }\n        /////////////////////////////////////////////////////////////////////////////////////\n\n        //////////////////////////////////////////////////////////////////////////\n\n        /////////////////////////////////////////////////////////////////////////////////////\n\n    }\n}\n"]}]}